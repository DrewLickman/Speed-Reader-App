var sk=Object.defineProperty;var _1=g=>{throw TypeError(g)};var ik=(g,t,e)=>t in g?sk(g,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[t]=e;var K=(g,t,e)=>ik(g,typeof t!="symbol"?t+"":t,e),Qv=(g,t,e)=>t.has(g)||_1("Cannot "+e);var a=(g,t,e)=>(Qv(g,t,"read from private field"),e?e.call(g):t.get(g)),b=(g,t,e)=>t.has(g)?_1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(g):t.set(g,e),w=(g,t,e,n)=>(Qv(g,t,"write to private field"),n?n.call(g,e):t.set(g,e),e),E=(g,t,e)=>(Qv(g,t,"access private method"),e);var mn=(g,t,e,n)=>({set _(r){w(g,t,r,e)},get _(){return a(g,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function dE(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var Zv={exports:{}},nf={},Jv={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1;function rk(){if(k1)return Yt;k1=1;var g=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,x={};function T(O,H,ft){this.props=O,this.context=H,this.refs=x,this.updater=ft||S}T.prototype.isReactComponent={},T.prototype.setState=function(O,H){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,H,"setState")},T.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function k(){}k.prototype=T.prototype;function M(O,H,ft){this.props=O,this.context=H,this.refs=x,this.updater=ft||S}var P=M.prototype=new k;P.constructor=M,_(P,T.prototype),P.isPureReactComponent=!0;var L=Array.isArray,D=Object.prototype.hasOwnProperty,I={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function V(O,H,ft){var Pt,bt={},Rt=null,Mt=null;if(H!=null)for(Pt in H.ref!==void 0&&(Mt=H.ref),H.key!==void 0&&(Rt=""+H.key),H)D.call(H,Pt)&&!U.hasOwnProperty(Pt)&&(bt[Pt]=H[Pt]);var qt=arguments.length-2;if(qt===1)bt.children=ft;else if(1<qt){for(var le=Array(qt),Ge=0;Ge<qt;Ge++)le[Ge]=arguments[Ge+2];bt.children=le}if(O&&O.defaultProps)for(Pt in qt=O.defaultProps,qt)bt[Pt]===void 0&&(bt[Pt]=qt[Pt]);return{$$typeof:g,type:O,key:Rt,ref:Mt,props:bt,_owner:I.current}}function Y(O,H){return{$$typeof:g,type:O.type,key:H,ref:O.ref,props:O.props,_owner:O._owner}}function et(O){return typeof O=="object"&&O!==null&&O.$$typeof===g}function Z(O){var H={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ft){return H[ft]})}var Ct=/\/+/g;function _t(O,H){return typeof O=="object"&&O!==null&&O.key!=null?Z(""+O.key):H.toString(36)}function At(O,H,ft,Pt,bt){var Rt=typeof O;(Rt==="undefined"||Rt==="boolean")&&(O=null);var Mt=!1;if(O===null)Mt=!0;else switch(Rt){case"string":case"number":Mt=!0;break;case"object":switch(O.$$typeof){case g:case t:Mt=!0}}if(Mt)return Mt=O,bt=bt(Mt),O=Pt===""?"."+_t(Mt,0):Pt,L(bt)?(ft="",O!=null&&(ft=O.replace(Ct,"$&/")+"/"),At(bt,H,ft,"",function(Ge){return Ge})):bt!=null&&(et(bt)&&(bt=Y(bt,ft+(!bt.key||Mt&&Mt.key===bt.key?"":(""+bt.key).replace(Ct,"$&/")+"/")+O)),H.push(bt)),1;if(Mt=0,Pt=Pt===""?".":Pt+":",L(O))for(var qt=0;qt<O.length;qt++){Rt=O[qt];var le=Pt+_t(Rt,qt);Mt+=At(Rt,H,ft,le,bt)}else if(le=v(O),typeof le=="function")for(O=le.call(O),qt=0;!(Rt=O.next()).done;)Rt=Rt.value,le=Pt+_t(Rt,qt++),Mt+=At(Rt,H,ft,le,bt);else if(Rt==="object")throw H=String(O),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Mt}function Tt(O,H,ft){if(O==null)return O;var Pt=[],bt=0;return At(O,Pt,"","",function(Rt){return H.call(ft,Rt,bt++)}),Pt}function ot(O){if(O._status===-1){var H=O._result;H=H(),H.then(function(ft){(O._status===0||O._status===-1)&&(O._status=1,O._result=ft)},function(ft){(O._status===0||O._status===-1)&&(O._status=2,O._result=ft)}),O._status===-1&&(O._status=0,O._result=H)}if(O._status===1)return O._result.default;throw O._result}var st={current:null},W={transition:null},dt={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:W,ReactCurrentOwner:I};function tt(){throw Error("act(...) is not supported in production builds of React.")}return Yt.Children={map:Tt,forEach:function(O,H,ft){Tt(O,function(){H.apply(this,arguments)},ft)},count:function(O){var H=0;return Tt(O,function(){H++}),H},toArray:function(O){return Tt(O,function(H){return H})||[]},only:function(O){if(!et(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Yt.Component=T,Yt.Fragment=e,Yt.Profiler=r,Yt.PureComponent=M,Yt.StrictMode=n,Yt.Suspense=h,Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dt,Yt.act=tt,Yt.cloneElement=function(O,H,ft){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Pt=_({},O.props),bt=O.key,Rt=O.ref,Mt=O._owner;if(H!=null){if(H.ref!==void 0&&(Rt=H.ref,Mt=I.current),H.key!==void 0&&(bt=""+H.key),O.type&&O.type.defaultProps)var qt=O.type.defaultProps;for(le in H)D.call(H,le)&&!U.hasOwnProperty(le)&&(Pt[le]=H[le]===void 0&&qt!==void 0?qt[le]:H[le])}var le=arguments.length-2;if(le===1)Pt.children=ft;else if(1<le){qt=Array(le);for(var Ge=0;Ge<le;Ge++)qt[Ge]=arguments[Ge+2];Pt.children=qt}return{$$typeof:g,type:O.type,key:bt,ref:Rt,props:Pt,_owner:Mt}},Yt.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:o,_context:O},O.Consumer=O},Yt.createElement=V,Yt.createFactory=function(O){var H=V.bind(null,O);return H.type=O,H},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(O){return{$$typeof:u,render:O}},Yt.isValidElement=et,Yt.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:ot}},Yt.memo=function(O,H){return{$$typeof:f,type:O,compare:H===void 0?null:H}},Yt.startTransition=function(O){var H=W.transition;W.transition={};try{O()}finally{W.transition=H}},Yt.unstable_act=tt,Yt.useCallback=function(O,H){return st.current.useCallback(O,H)},Yt.useContext=function(O){return st.current.useContext(O)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(O){return st.current.useDeferredValue(O)},Yt.useEffect=function(O,H){return st.current.useEffect(O,H)},Yt.useId=function(){return st.current.useId()},Yt.useImperativeHandle=function(O,H,ft){return st.current.useImperativeHandle(O,H,ft)},Yt.useInsertionEffect=function(O,H){return st.current.useInsertionEffect(O,H)},Yt.useLayoutEffect=function(O,H){return st.current.useLayoutEffect(O,H)},Yt.useMemo=function(O,H){return st.current.useMemo(O,H)},Yt.useReducer=function(O,H,ft){return st.current.useReducer(O,H,ft)},Yt.useRef=function(O){return st.current.useRef(O)},Yt.useState=function(O){return st.current.useState(O)},Yt.useSyncExternalStore=function(O,H,ft){return st.current.useSyncExternalStore(O,H,ft)},Yt.useTransition=function(){return st.current.useTransition()},Yt.version="18.3.1",Yt}var T1;function HA(){return T1||(T1=1,Jv.exports=rk()),Jv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1;function ak(){if(P1)return nf;P1=1;var g=HA(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,f){var p,y={},v=null,S=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(S=h.ref);for(p in h)n.call(h,p)&&!o.hasOwnProperty(p)&&(y[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)y[p]===void 0&&(y[p]=h[p]);return{$$typeof:t,type:u,key:v,ref:S,props:y,_owner:r.current}}return nf.Fragment=e,nf.jsx=l,nf.jsxs=l,nf}var R1;function ok(){return R1||(R1=1,Zv.exports=ak()),Zv.exports}var nt=ok(),Wt=HA();const lk=dE(Wt);var Um={},tw={exports:{}},Cs={},ew={exports:{}},nw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1;function ck(){return M1||(M1=1,(function(g){function t(W,dt){var tt=W.length;W.push(dt);t:for(;0<tt;){var O=tt-1>>>1,H=W[O];if(0<r(H,dt))W[O]=dt,W[tt]=H,tt=O;else break t}}function e(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var dt=W[0],tt=W.pop();if(tt!==dt){W[0]=tt;t:for(var O=0,H=W.length,ft=H>>>1;O<ft;){var Pt=2*(O+1)-1,bt=W[Pt],Rt=Pt+1,Mt=W[Rt];if(0>r(bt,tt))Rt<H&&0>r(Mt,bt)?(W[O]=Mt,W[Rt]=tt,O=Rt):(W[O]=bt,W[Pt]=tt,O=Pt);else if(Rt<H&&0>r(Mt,tt))W[O]=Mt,W[Rt]=tt,O=Rt;else break t}}return dt}function r(W,dt){var tt=W.sortIndex-dt.sortIndex;return tt!==0?tt:W.id-dt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;g.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();g.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,y=null,v=3,S=!1,_=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(W){for(var dt=e(f);dt!==null;){if(dt.callback===null)n(f);else if(dt.startTime<=W)n(f),dt.sortIndex=dt.expirationTime,t(h,dt);else break;dt=e(f)}}function L(W){if(x=!1,P(W),!_)if(e(h)!==null)_=!0,ot(D);else{var dt=e(f);dt!==null&&st(L,dt.startTime-W)}}function D(W,dt){_=!1,x&&(x=!1,k(V),V=-1),S=!0;var tt=v;try{for(P(dt),y=e(h);y!==null&&(!(y.expirationTime>dt)||W&&!Z());){var O=y.callback;if(typeof O=="function"){y.callback=null,v=y.priorityLevel;var H=O(y.expirationTime<=dt);dt=g.unstable_now(),typeof H=="function"?y.callback=H:y===e(h)&&n(h),P(dt)}else n(h);y=e(h)}if(y!==null)var ft=!0;else{var Pt=e(f);Pt!==null&&st(L,Pt.startTime-dt),ft=!1}return ft}finally{y=null,v=tt,S=!1}}var I=!1,U=null,V=-1,Y=5,et=-1;function Z(){return!(g.unstable_now()-et<Y)}function Ct(){if(U!==null){var W=g.unstable_now();et=W;var dt=!0;try{dt=U(!0,W)}finally{dt?_t():(I=!1,U=null)}}else I=!1}var _t;if(typeof M=="function")_t=function(){M(Ct)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,Tt=At.port2;At.port1.onmessage=Ct,_t=function(){Tt.postMessage(null)}}else _t=function(){T(Ct,0)};function ot(W){U=W,I||(I=!0,_t())}function st(W,dt){V=T(function(){W(g.unstable_now())},dt)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(W){W.callback=null},g.unstable_continueExecution=function(){_||S||(_=!0,ot(D))},g.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<W?Math.floor(1e3/W):5},g.unstable_getCurrentPriorityLevel=function(){return v},g.unstable_getFirstCallbackNode=function(){return e(h)},g.unstable_next=function(W){switch(v){case 1:case 2:case 3:var dt=3;break;default:dt=v}var tt=v;v=dt;try{return W()}finally{v=tt}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(W,dt){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var tt=v;v=W;try{return dt()}finally{v=tt}},g.unstable_scheduleCallback=function(W,dt,tt){var O=g.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?O+tt:O):tt=O,W){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=tt+H,W={id:p++,callback:dt,priorityLevel:W,startTime:tt,expirationTime:H,sortIndex:-1},tt>O?(W.sortIndex=tt,t(f,W),e(h)===null&&W===e(f)&&(x?(k(V),V=-1):x=!0,st(L,tt-O))):(W.sortIndex=H,t(h,W),_||S||(_=!0,ot(D))),W},g.unstable_shouldYield=Z,g.unstable_wrapCallback=function(W){var dt=v;return function(){var tt=v;v=dt;try{return W.apply(this,arguments)}finally{v=tt}}}})(nw)),nw}var L1;function uk(){return L1||(L1=1,ew.exports=ck()),ew.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1;function hk(){if(D1)return Cs;D1=1;var g=HA(),t=uk();function e(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function o(s,i){l(s,i),l(s+"Capture",i)}function l(s,i){for(r[s]=i,s=0;s<i.length;s++)n.add(i[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function v(s){return h.call(y,s)?!0:h.call(p,s)?!1:f.test(s)?y[s]=!0:(p[s]=!0,!1)}function S(s,i,c,d){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function _(s,i,c,d){if(i===null||typeof i>"u"||S(s,i,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function x(s,i,c,d,m,A,C){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=i,this.sanitizeURL=A,this.removeEmptyString=C}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new x(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];T[i]=new x(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new x(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new x(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new x(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new x(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new x(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new x(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new x(s,5,!1,s.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(k,M);T[i]=new x(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(k,M);T[i]=new x(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(k,M);T[i]=new x(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new x(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new x(s,1,!1,s.toLowerCase(),null,!0,!0)});function P(s,i,c,d){var m=T.hasOwnProperty(i)?T[i]:null;(m!==null?m.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,c,m,d)&&(c=null),d||m===null?v(i)&&(c===null?s.removeAttribute(i):s.setAttribute(i,""+c)):m.mustUseProperty?s[m.propertyName]=c===null?m.type===3?!1:"":c:(i=m.attributeName,d=m.attributeNamespace,c===null?s.removeAttribute(i):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,d?s.setAttributeNS(d,i,c):s.setAttribute(i,c))))}var L=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),I=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),et=Symbol.for("react.provider"),Z=Symbol.for("react.context"),Ct=Symbol.for("react.forward_ref"),_t=Symbol.for("react.suspense"),At=Symbol.for("react.suspense_list"),Tt=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),st=Symbol.for("react.offscreen"),W=Symbol.iterator;function dt(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var tt=Object.assign,O;function H(s){if(O===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+s}var ft=!1;function Pt(s,i){if(!s||ft)return"";ft=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(j){var d=j}Reflect.construct(s,[],i)}else{try{i.call()}catch(j){d=j}s.call(i.prototype)}else{try{throw Error()}catch(j){d=j}s()}}catch(j){if(j&&d&&typeof j.stack=="string"){for(var m=j.stack.split(`
`),A=d.stack.split(`
`),C=m.length-1,R=A.length-1;1<=C&&0<=R&&m[C]!==A[R];)R--;for(;1<=C&&0<=R;C--,R--)if(m[C]!==A[R]){if(C!==1||R!==1)do if(C--,R--,0>R||m[C]!==A[R]){var N=`
`+m[C].replace(" at new "," at ");return s.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",s.displayName)),N}while(1<=C&&0<=R);break}}}finally{ft=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?H(s):""}function bt(s){switch(s.tag){case 5:return H(s.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return s=Pt(s.type,!1),s;case 11:return s=Pt(s.type.render,!1),s;case 1:return s=Pt(s.type,!0),s;default:return""}}function Rt(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case I:return"Portal";case Y:return"Profiler";case V:return"StrictMode";case _t:return"Suspense";case At:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Z:return(s.displayName||"Context")+".Consumer";case et:return(s._context.displayName||"Context")+".Provider";case Ct:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Tt:return i=s.displayName||null,i!==null?i:Rt(s.type)||"Memo";case ot:i=s._payload,s=s._init;try{return Rt(s(i))}catch{}}return null}function Mt(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rt(i);case 8:return i===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function qt(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function le(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ge(s){var i=le(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),d=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,A=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return m.call(this)},set:function(C){d=""+C,A.call(this,C)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function vs(s){s._valueTracker||(s._valueTracker=Ge(s))}function Wa(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return s&&(d=le(s)?s.checked?"true":"false":s.value),s=d,s!==c?(i.setValue(s),!0):!1}function is(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ar(s,i){var c=i.checked;return tt({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function Yc(s,i){var c=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;c=qt(i.value!=null?i.value:c),s._wrapperState={initialChecked:d,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ce(s,i){i=i.checked,i!=null&&P(s,"checked",i,!1)}function hd(s,i){ce(s,i);var c=qt(i.value),d=i.type;if(c!=null)d==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?Kc(s,i.type,c):i.hasOwnProperty("defaultValue")&&Kc(s,i.type,qt(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function dd(s,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,c||i===s.value||(s.value=i),s.defaultValue=i}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function Kc(s,i,c){(i!=="number"||is(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Ii=Array.isArray;function Va(s,i,c,d){if(s=s.options,i){i={};for(var m=0;m<c.length;m++)i["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=i.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&d&&(s[c].defaultSelected=!0)}else{for(c=""+qt(c),i=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,d&&(s[m].defaultSelected=!0);return}i!==null||s[m].disabled||(i=s[m])}i!==null&&(i.selected=!0)}}function Qc(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(e(91));return tt({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Is(s,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(e(92));if(Ii(c)){if(1<c.length)throw Error(e(93));c=c[0]}i=c}i==null&&(i=""),c=i}s._wrapperState={initialValue:qt(c)}}function fd(s,i){var c=qt(i.value),d=qt(i.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),i.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),d!=null&&(s.defaultValue=""+d)}function ol(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function Hr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ll(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?Hr(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var or,lr=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,d,m){MSApp.execUnsafeLocalFunction(function(){return s(i,c,d,m)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(or=or||document.createElement("div"),or.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=or.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function cl(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g0=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(s){g0.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),ul[i]=ul[s]})});function pd(s,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||ul.hasOwnProperty(s)&&ul[s]?(""+i).trim():i+"px"}function gd(s,i){s=s.style;for(var c in i)if(i.hasOwnProperty(c)){var d=c.indexOf("--")===0,m=pd(c,i[c],d);c==="float"&&(c="cssFloat"),d?s.setProperty(c,m):s[c]=m}}var m0=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function md(s,i){if(i){if(m0[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(e(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(e(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(e(61))}if(i.style!=null&&typeof i.style!="object")throw Error(e(62))}}function cr(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zc=null;function Jc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yd=null,$r=null,Wr=null;function Dg(s){if(s=jd(s)){if(typeof yd!="function")throw Error(e(280));var i=s.stateNode;i&&(i=tm(i),yd(s.stateNode,s.type,i))}}function Ng(s){$r?Wr?Wr.push(s):Wr=[s]:$r=s}function $(){if($r){var s=$r,i=Wr;if(Wr=$r=null,Dg(s),i)for(s=0;s<i.length;s++)Dg(i[s])}}function G(s,i){return s(i)}function ct(){}var kt=!1;function zt(s,i,c){if(kt)return s(i,c);kt=!0;try{return G(s,i,c)}finally{kt=!1,($r!==null||Wr!==null)&&(ct(),$())}}function xt(s,i){var c=s.stateNode;if(c===null)return null;var d=tm(c);if(d===null)return null;c=d[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(e(231,i,typeof c));return c}var Qt=!1;if(u)try{var ue={};Object.defineProperty(ue,"passive",{get:function(){Qt=!0}}),window.addEventListener("test",ue,ue),window.removeEventListener("test",ue,ue)}catch{Qt=!1}function Ee(s,i,c,d,m,A,C,R,N){var j=Array.prototype.slice.call(arguments,3);try{i.apply(c,j)}catch(q){this.onError(q)}}var Zt=!1,yt=null,Nt=!1,Xt=null,Ot={onError:function(s){Zt=!0,yt=s}};function me(s,i,c,d,m,A,C,R,N){Zt=!1,yt=null,Ee.apply(Ot,arguments)}function dn(s,i,c,d,m,A,C,R,N){if(me.apply(this,arguments),Zt){if(Zt){var j=yt;Zt=!1,yt=null}else throw Error(e(198));Nt||(Nt=!0,Xt=j)}}function Gn(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function ws(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function Fi(s){if(Gn(s)!==s)throw Error(e(188))}function y0(s){var i=s.alternate;if(!i){if(i=Gn(s),i===null)throw Error(e(188));return i!==s?null:s}for(var c=s,d=i;;){var m=c.return;if(m===null)break;var A=m.alternate;if(A===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===A.child){for(A=m.child;A;){if(A===c)return Fi(m),s;if(A===d)return Fi(m),i;A=A.sibling}throw Error(e(188))}if(c.return!==d.return)c=m,d=A;else{for(var C=!1,R=m.child;R;){if(R===c){C=!0,c=m,d=A;break}if(R===d){C=!0,d=m,c=A;break}R=R.sibling}if(!C){for(R=A.child;R;){if(R===c){C=!0,c=A,d=m;break}if(R===d){C=!0,d=A,c=m;break}R=R.sibling}if(!C)throw Error(e(189))}}if(c.alternate!==d)throw Error(e(190))}if(c.tag!==3)throw Error(e(188));return c.stateNode.current===c?s:i}function vd(s){return s=y0(s),s!==null?tu(s):null}function tu(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=tu(s);if(i!==null)return i;s=s.sibling}return null}var Nn=t.unstable_scheduleCallback,Ig=t.unstable_cancelCallback,v0=t.unstable_shouldYield,ze=t.unstable_requestPaint,xe=t.unstable_now,wd=t.unstable_getCurrentPriorityLevel,hi=t.unstable_ImmediatePriority,Ad=t.unstable_UserBlockingPriority,Fs=t.unstable_NormalPriority,Fg=t.unstable_LowPriority,Sd=t.unstable_IdlePriority,En=null,rs=null;function Og(s){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(En,s,void 0,(s.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:rt,bd=Math.log,Bg=Math.LN2;function rt(s){return s>>>=0,s===0?32:31-(bd(s)/Bg|0)|0}var lt=64,ne=4194304;function Xe(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function as(s,i){var c=s.pendingLanes;if(c===0)return 0;var d=0,m=s.suspendedLanes,A=s.pingedLanes,C=c&268435455;if(C!==0){var R=C&~m;R!==0?d=Xe(R):(A&=C,A!==0&&(d=Xe(A)))}else C=c&~m,C!==0?d=Xe(C):A!==0&&(d=Xe(A));if(d===0)return 0;if(i!==0&&i!==d&&(i&m)===0&&(m=d&-d,A=i&-i,m>=A||m===16&&(A&4194240)!==0))return i;if((d&4)!==0&&(d|=c&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=d;0<i;)c=31-fn(i),m=1<<c,d|=s[c],i&=~m;return d}function rn(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oi(s,i){for(var c=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,A=s.pendingLanes;0<A;){var C=31-fn(A),R=1<<C,N=m[C];N===-1?((R&c)===0||(R&d)!==0)&&(m[C]=rn(R,i)):N<=i&&(s.expiredLanes|=R),A&=~R}}function an(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ed(){var s=lt;return lt<<=1,(lt&4194240)===0&&(lt=64),s}function w0(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function xd(s,i,c){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-fn(i),s[i]=c}function xC(s,i){var c=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-fn(c),A=1<<m;i[m]=0,d[m]=-1,s[m]=-1,c&=~A}}function A0(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var d=31-fn(c),m=1<<d;m&i|s[d]&i&&(s[d]|=i),c&=~m}}var fe=0;function iS(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var rS,S0,aS,oS,lS,b0=!1,Ug=[],Ga=null,Xa=null,qa=null,Cd=new Map,_d=new Map,Ya=[],CC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cS(s,i){switch(s){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Cd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_d.delete(i.pointerId)}}function kd(s,i,c,d,m,A){return s===null||s.nativeEvent!==A?(s={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:A,targetContainers:[m]},i!==null&&(i=jd(i),i!==null&&S0(i)),s):(s.eventSystemFlags|=d,i=s.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),s)}function _C(s,i,c,d,m){switch(i){case"focusin":return Ga=kd(Ga,s,i,c,d,m),!0;case"dragenter":return Xa=kd(Xa,s,i,c,d,m),!0;case"mouseover":return qa=kd(qa,s,i,c,d,m),!0;case"pointerover":var A=m.pointerId;return Cd.set(A,kd(Cd.get(A)||null,s,i,c,d,m)),!0;case"gotpointercapture":return A=m.pointerId,_d.set(A,kd(_d.get(A)||null,s,i,c,d,m)),!0}return!1}function uS(s){var i=hl(s.target);if(i!==null){var c=Gn(i);if(c!==null){if(i=c.tag,i===13){if(i=ws(c),i!==null){s.blockedOn=i,lS(s.priority,function(){aS(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zg(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=x0(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);Zc=d,c.target.dispatchEvent(d),Zc=null}else return i=jd(c),i!==null&&S0(i),s.blockedOn=c,!1;i.shift()}return!0}function hS(s,i,c){zg(s)&&c.delete(i)}function kC(){b0=!1,Ga!==null&&zg(Ga)&&(Ga=null),Xa!==null&&zg(Xa)&&(Xa=null),qa!==null&&zg(qa)&&(qa=null),Cd.forEach(hS),_d.forEach(hS)}function Td(s,i){s.blockedOn===i&&(s.blockedOn=null,b0||(b0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kC)))}function Pd(s){function i(m){return Td(m,s)}if(0<Ug.length){Td(Ug[0],s);for(var c=1;c<Ug.length;c++){var d=Ug[c];d.blockedOn===s&&(d.blockedOn=null)}}for(Ga!==null&&Td(Ga,s),Xa!==null&&Td(Xa,s),qa!==null&&Td(qa,s),Cd.forEach(i),_d.forEach(i),c=0;c<Ya.length;c++)d=Ya[c],d.blockedOn===s&&(d.blockedOn=null);for(;0<Ya.length&&(c=Ya[0],c.blockedOn===null);)uS(c),c.blockedOn===null&&Ya.shift()}var eu=L.ReactCurrentBatchConfig,jg=!0;function TC(s,i,c,d){var m=fe,A=eu.transition;eu.transition=null;try{fe=1,E0(s,i,c,d)}finally{fe=m,eu.transition=A}}function PC(s,i,c,d){var m=fe,A=eu.transition;eu.transition=null;try{fe=4,E0(s,i,c,d)}finally{fe=m,eu.transition=A}}function E0(s,i,c,d){if(jg){var m=x0(s,i,c,d);if(m===null)j0(s,i,d,Hg,c),cS(s,d);else if(_C(m,s,i,c,d))d.stopPropagation();else if(cS(s,d),i&4&&-1<CC.indexOf(s)){for(;m!==null;){var A=jd(m);if(A!==null&&rS(A),A=x0(s,i,c,d),A===null&&j0(s,i,d,Hg,c),A===m)break;m=A}m!==null&&d.stopPropagation()}else j0(s,i,d,null,c)}}var Hg=null;function x0(s,i,c,d){if(Hg=null,s=Jc(d),s=hl(s),s!==null)if(i=Gn(s),i===null)s=null;else if(c=i.tag,c===13){if(s=ws(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return Hg=s,null}function dS(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wd()){case hi:return 1;case Ad:return 4;case Fs:case Fg:return 16;case Sd:return 536870912;default:return 16}default:return 16}}var Ka=null,C0=null,$g=null;function fS(){if($g)return $g;var s,i=C0,c=i.length,d,m="value"in Ka?Ka.value:Ka.textContent,A=m.length;for(s=0;s<c&&i[s]===m[s];s++);var C=c-s;for(d=1;d<=C&&i[c-d]===m[A-d];d++);return $g=m.slice(s,1<d?1-d:void 0)}function Wg(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Vg(){return!0}function pS(){return!1}function Os(s){function i(c,d,m,A,C){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=A,this.target=C,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(c=s[R],this[R]=c?c(A):A[R]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Vg:pS,this.isPropagationStopped=pS,this}return tt(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Vg)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Vg)},persist:function(){},isPersistent:Vg}),i}var nu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_0=Os(nu),Rd=tt({},nu,{view:0,detail:0}),RC=Os(Rd),k0,T0,Md,Gg=tt({},Rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R0,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Md&&(Md&&s.type==="mousemove"?(k0=s.screenX-Md.screenX,T0=s.screenY-Md.screenY):T0=k0=0,Md=s),k0)},movementY:function(s){return"movementY"in s?s.movementY:T0}}),gS=Os(Gg),MC=tt({},Gg,{dataTransfer:0}),LC=Os(MC),DC=tt({},Rd,{relatedTarget:0}),P0=Os(DC),NC=tt({},nu,{animationName:0,elapsedTime:0,pseudoElement:0}),IC=Os(NC),FC=tt({},nu,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),OC=Os(FC),BC=tt({},nu,{data:0}),mS=Os(BC),UC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HC(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=jC[s])?!!i[s]:!1}function R0(){return HC}var $C=tt({},Rd,{key:function(s){if(s.key){var i=UC[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Wg(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?zC[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R0,charCode:function(s){return s.type==="keypress"?Wg(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Wg(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),WC=Os($C),VC=tt({},Gg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yS=Os(VC),GC=tt({},Rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R0}),XC=Os(GC),qC=tt({},nu,{propertyName:0,elapsedTime:0,pseudoElement:0}),YC=Os(qC),KC=tt({},Gg,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),QC=Os(KC),ZC=[9,13,27,32],M0=u&&"CompositionEvent"in window,Ld=null;u&&"documentMode"in document&&(Ld=document.documentMode);var JC=u&&"TextEvent"in window&&!Ld,vS=u&&(!M0||Ld&&8<Ld&&11>=Ld),wS=" ",AS=!1;function SS(s,i){switch(s){case"keyup":return ZC.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bS(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var su=!1;function t_(s,i){switch(s){case"compositionend":return bS(i);case"keypress":return i.which!==32?null:(AS=!0,wS);case"textInput":return s=i.data,s===wS&&AS?null:s;default:return null}}function e_(s,i){if(su)return s==="compositionend"||!M0&&SS(s,i)?(s=fS(),$g=C0=Ka=null,su=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vS&&i.locale!=="ko"?null:i.data;default:return null}}var n_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ES(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!n_[s.type]:i==="textarea"}function xS(s,i,c,d){Ng(d),i=Qg(i,"onChange"),0<i.length&&(c=new _0("onChange","change",null,c,d),s.push({event:c,listeners:i}))}var Dd=null,Nd=null;function s_(s){HS(s,0)}function Xg(s){var i=lu(s);if(Wa(i))return s}function i_(s,i){if(s==="change")return i}var CS=!1;if(u){var L0;if(u){var D0="oninput"in document;if(!D0){var _S=document.createElement("div");_S.setAttribute("oninput","return;"),D0=typeof _S.oninput=="function"}L0=D0}else L0=!1;CS=L0&&(!document.documentMode||9<document.documentMode)}function kS(){Dd&&(Dd.detachEvent("onpropertychange",TS),Nd=Dd=null)}function TS(s){if(s.propertyName==="value"&&Xg(Nd)){var i=[];xS(i,Nd,s,Jc(s)),zt(s_,i)}}function r_(s,i,c){s==="focusin"?(kS(),Dd=i,Nd=c,Dd.attachEvent("onpropertychange",TS)):s==="focusout"&&kS()}function a_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xg(Nd)}function o_(s,i){if(s==="click")return Xg(i)}function l_(s,i){if(s==="input"||s==="change")return Xg(i)}function c_(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Bi=typeof Object.is=="function"?Object.is:c_;function Id(s,i){if(Bi(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!h.call(i,m)||!Bi(s[m],i[m]))return!1}return!0}function PS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function RS(s,i){var c=PS(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=i&&d>=i)return{node:c,offset:i-s};s=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=PS(c)}}function MS(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?MS(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function LS(){for(var s=window,i=is();i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=is(s.document)}return i}function N0(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function u_(s){var i=LS(),c=s.focusedElem,d=s.selectionRange;if(i!==c&&c&&c.ownerDocument&&MS(c.ownerDocument.documentElement,c)){if(d!==null&&N0(c)){if(i=d.start,s=d.end,s===void 0&&(s=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(s,c.value.length);else if(s=(i=c.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var m=c.textContent.length,A=Math.min(d.start,m);d=d.end===void 0?A:Math.min(d.end,m),!s.extend&&A>d&&(m=d,d=A,A=m),m=RS(c,A);var C=RS(c,d);m&&C&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==C.node||s.focusOffset!==C.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),s.removeAllRanges(),A>d?(s.addRange(i),s.extend(C.node,C.offset)):(i.setEnd(C.node,C.offset),s.addRange(i)))}}for(i=[],s=c;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)s=i[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var h_=u&&"documentMode"in document&&11>=document.documentMode,iu=null,I0=null,Fd=null,F0=!1;function DS(s,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;F0||iu==null||iu!==is(d)||(d=iu,"selectionStart"in d&&N0(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Fd&&Id(Fd,d)||(Fd=d,d=Qg(I0,"onSelect"),0<d.length&&(i=new _0("onSelect","select",null,i,c),s.push({event:i,listeners:d}),i.target=iu)))}function qg(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var ru={animationend:qg("Animation","AnimationEnd"),animationiteration:qg("Animation","AnimationIteration"),animationstart:qg("Animation","AnimationStart"),transitionend:qg("Transition","TransitionEnd")},O0={},NS={};u&&(NS=document.createElement("div").style,"AnimationEvent"in window||(delete ru.animationend.animation,delete ru.animationiteration.animation,delete ru.animationstart.animation),"TransitionEvent"in window||delete ru.transitionend.transition);function Yg(s){if(O0[s])return O0[s];if(!ru[s])return s;var i=ru[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in NS)return O0[s]=i[c];return s}var IS=Yg("animationend"),FS=Yg("animationiteration"),OS=Yg("animationstart"),BS=Yg("transitionend"),US=new Map,zS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qa(s,i){US.set(s,i),o(i,[s])}for(var B0=0;B0<zS.length;B0++){var U0=zS[B0],d_=U0.toLowerCase(),f_=U0[0].toUpperCase()+U0.slice(1);Qa(d_,"on"+f_)}Qa(IS,"onAnimationEnd"),Qa(FS,"onAnimationIteration"),Qa(OS,"onAnimationStart"),Qa("dblclick","onDoubleClick"),Qa("focusin","onFocus"),Qa("focusout","onBlur"),Qa(BS,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Od));function jS(s,i,c){var d=s.type||"unknown-event";s.currentTarget=c,dn(d,i,void 0,s),s.currentTarget=null}function HS(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],m=d.event;d=d.listeners;t:{var A=void 0;if(i)for(var C=d.length-1;0<=C;C--){var R=d[C],N=R.instance,j=R.currentTarget;if(R=R.listener,N!==A&&m.isPropagationStopped())break t;jS(m,R,j),A=N}else for(C=0;C<d.length;C++){if(R=d[C],N=R.instance,j=R.currentTarget,R=R.listener,N!==A&&m.isPropagationStopped())break t;jS(m,R,j),A=N}}}if(Nt)throw s=Xt,Nt=!1,Xt=null,s}function De(s,i){var c=i[X0];c===void 0&&(c=i[X0]=new Set);var d=s+"__bubble";c.has(d)||($S(i,s,2,!1),c.add(d))}function z0(s,i,c){var d=0;i&&(d|=4),$S(c,s,d,i)}var Kg="_reactListening"+Math.random().toString(36).slice(2);function Bd(s){if(!s[Kg]){s[Kg]=!0,n.forEach(function(c){c!=="selectionchange"&&(p_.has(c)||z0(c,!1,s),z0(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Kg]||(i[Kg]=!0,z0("selectionchange",!1,i))}}function $S(s,i,c,d){switch(dS(i)){case 1:var m=TC;break;case 4:m=PC;break;default:m=E0}c=m.bind(null,i,c,s),m=void 0,!Qt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),d?m!==void 0?s.addEventListener(i,c,{capture:!0,passive:m}):s.addEventListener(i,c,!0):m!==void 0?s.addEventListener(i,c,{passive:m}):s.addEventListener(i,c,!1)}function j0(s,i,c,d,m){var A=d;if((i&1)===0&&(i&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var R=d.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(C===4)for(C=d.return;C!==null;){var N=C.tag;if((N===3||N===4)&&(N=C.stateNode.containerInfo,N===m||N.nodeType===8&&N.parentNode===m))return;C=C.return}for(;R!==null;){if(C=hl(R),C===null)return;if(N=C.tag,N===5||N===6){d=A=C;continue t}R=R.parentNode}}d=d.return}zt(function(){var j=A,q=Jc(c),Q=[];t:{var X=US.get(s);if(X!==void 0){var ht=_0,vt=s;switch(s){case"keypress":if(Wg(c)===0)break t;case"keydown":case"keyup":ht=WC;break;case"focusin":vt="focus",ht=P0;break;case"focusout":vt="blur",ht=P0;break;case"beforeblur":case"afterblur":ht=P0;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=gS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=LC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=XC;break;case IS:case FS:case OS:ht=IC;break;case BS:ht=YC;break;case"scroll":ht=RC;break;case"wheel":ht=QC;break;case"copy":case"cut":case"paste":ht=OC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=yS}var wt=(i&4)!==0,en=!wt&&s==="scroll",B=wt?X!==null?X+"Capture":null:X;wt=[];for(var F=j,z;F!==null;){z=F;var J=z.stateNode;if(z.tag===5&&J!==null&&(z=J,B!==null&&(J=xt(F,B),J!=null&&wt.push(Ud(F,J,z)))),en)break;F=F.return}0<wt.length&&(X=new ht(X,vt,null,c,q),Q.push({event:X,listeners:wt}))}}if((i&7)===0){t:{if(X=s==="mouseover"||s==="pointerover",ht=s==="mouseout"||s==="pointerout",X&&c!==Zc&&(vt=c.relatedTarget||c.fromElement)&&(hl(vt)||vt[Vr]))break t;if((ht||X)&&(X=q.window===q?q:(X=q.ownerDocument)?X.defaultView||X.parentWindow:window,ht?(vt=c.relatedTarget||c.toElement,ht=j,vt=vt?hl(vt):null,vt!==null&&(en=Gn(vt),vt!==en||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(ht=null,vt=j),ht!==vt)){if(wt=gS,J="onMouseLeave",B="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(wt=yS,J="onPointerLeave",B="onPointerEnter",F="pointer"),en=ht==null?X:lu(ht),z=vt==null?X:lu(vt),X=new wt(J,F+"leave",ht,c,q),X.target=en,X.relatedTarget=z,J=null,hl(q)===j&&(wt=new wt(B,F+"enter",vt,c,q),wt.target=z,wt.relatedTarget=en,J=wt),en=J,ht&&vt)e:{for(wt=ht,B=vt,F=0,z=wt;z;z=au(z))F++;for(z=0,J=B;J;J=au(J))z++;for(;0<F-z;)wt=au(wt),F--;for(;0<z-F;)B=au(B),z--;for(;F--;){if(wt===B||B!==null&&wt===B.alternate)break e;wt=au(wt),B=au(B)}wt=null}else wt=null;ht!==null&&WS(Q,X,ht,wt,!1),vt!==null&&en!==null&&WS(Q,en,vt,wt,!0)}}t:{if(X=j?lu(j):window,ht=X.nodeName&&X.nodeName.toLowerCase(),ht==="select"||ht==="input"&&X.type==="file")var Et=i_;else if(ES(X))if(CS)Et=l_;else{Et=a_;var Lt=r_}else(ht=X.nodeName)&&ht.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(Et=o_);if(Et&&(Et=Et(s,j))){xS(Q,Et,c,q);break t}Lt&&Lt(s,X,j),s==="focusout"&&(Lt=X._wrapperState)&&Lt.controlled&&X.type==="number"&&Kc(X,"number",X.value)}switch(Lt=j?lu(j):window,s){case"focusin":(ES(Lt)||Lt.contentEditable==="true")&&(iu=Lt,I0=j,Fd=null);break;case"focusout":Fd=I0=iu=null;break;case"mousedown":F0=!0;break;case"contextmenu":case"mouseup":case"dragend":F0=!1,DS(Q,c,q);break;case"selectionchange":if(h_)break;case"keydown":case"keyup":DS(Q,c,q)}var Dt;if(M0)t:{switch(s){case"compositionstart":var Ft="onCompositionStart";break t;case"compositionend":Ft="onCompositionEnd";break t;case"compositionupdate":Ft="onCompositionUpdate";break t}Ft=void 0}else su?SS(s,c)&&(Ft="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ft="onCompositionStart");Ft&&(vS&&c.locale!=="ko"&&(su||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&su&&(Dt=fS()):(Ka=q,C0="value"in Ka?Ka.value:Ka.textContent,su=!0)),Lt=Qg(j,Ft),0<Lt.length&&(Ft=new mS(Ft,s,null,c,q),Q.push({event:Ft,listeners:Lt}),Dt?Ft.data=Dt:(Dt=bS(c),Dt!==null&&(Ft.data=Dt)))),(Dt=JC?t_(s,c):e_(s,c))&&(j=Qg(j,"onBeforeInput"),0<j.length&&(q=new mS("onBeforeInput","beforeinput",null,c,q),Q.push({event:q,listeners:j}),q.data=Dt))}HS(Q,i)})}function Ud(s,i,c){return{instance:s,listener:i,currentTarget:c}}function Qg(s,i){for(var c=i+"Capture",d=[];s!==null;){var m=s,A=m.stateNode;m.tag===5&&A!==null&&(m=A,A=xt(s,c),A!=null&&d.unshift(Ud(s,A,m)),A=xt(s,i),A!=null&&d.push(Ud(s,A,m))),s=s.return}return d}function au(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function WS(s,i,c,d,m){for(var A=i._reactName,C=[];c!==null&&c!==d;){var R=c,N=R.alternate,j=R.stateNode;if(N!==null&&N===d)break;R.tag===5&&j!==null&&(R=j,m?(N=xt(c,A),N!=null&&C.unshift(Ud(c,N,R))):m||(N=xt(c,A),N!=null&&C.push(Ud(c,N,R)))),c=c.return}C.length!==0&&s.push({event:i,listeners:C})}var g_=/\r\n?/g,m_=/\u0000|\uFFFD/g;function VS(s){return(typeof s=="string"?s:""+s).replace(g_,`
`).replace(m_,"")}function Zg(s,i,c){if(i=VS(i),VS(s)!==i&&c)throw Error(e(425))}function Jg(){}var H0=null,$0=null;function W0(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var V0=typeof setTimeout=="function"?setTimeout:void 0,y_=typeof clearTimeout=="function"?clearTimeout:void 0,GS=typeof Promise=="function"?Promise:void 0,v_=typeof queueMicrotask=="function"?queueMicrotask:typeof GS<"u"?function(s){return GS.resolve(null).then(s).catch(w_)}:V0;function w_(s){setTimeout(function(){throw s})}function G0(s,i){var c=i,d=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(d===0){s.removeChild(m),Pd(i);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=m}while(c);Pd(i)}function Za(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function XS(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}var ou=Math.random().toString(36).slice(2),ur="__reactFiber$"+ou,zd="__reactProps$"+ou,Vr="__reactContainer$"+ou,X0="__reactEvents$"+ou,A_="__reactListeners$"+ou,S_="__reactHandles$"+ou;function hl(s){var i=s[ur];if(i)return i;for(var c=s.parentNode;c;){if(i=c[Vr]||c[ur]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=XS(s);s!==null;){if(c=s[ur])return c;s=XS(s)}return i}s=c,c=s.parentNode}return null}function jd(s){return s=s[ur]||s[Vr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function lu(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(e(33))}function tm(s){return s[zd]||null}var q0=[],cu=-1;function Ja(s){return{current:s}}function Ne(s){0>cu||(s.current=q0[cu],q0[cu]=null,cu--)}function Pe(s,i){cu++,q0[cu]=s.current,s.current=i}var to={},Xn=Ja(to),As=Ja(!1),dl=to;function uu(s,i){var c=s.type.contextTypes;if(!c)return to;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var m={},A;for(A in c)m[A]=i[A];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=m),m}function Ss(s){return s=s.childContextTypes,s!=null}function em(){Ne(As),Ne(Xn)}function qS(s,i,c){if(Xn.current!==to)throw Error(e(168));Pe(Xn,i),Pe(As,c)}function YS(s,i,c){var d=s.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var m in d)if(!(m in i))throw Error(e(108,Mt(s)||"Unknown",m));return tt({},c,d)}function nm(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||to,dl=Xn.current,Pe(Xn,s),Pe(As,As.current),!0}function KS(s,i,c){var d=s.stateNode;if(!d)throw Error(e(169));c?(s=YS(s,i,dl),d.__reactInternalMemoizedMergedChildContext=s,Ne(As),Ne(Xn),Pe(Xn,s)):Ne(As),Pe(As,c)}var Gr=null,sm=!1,Y0=!1;function QS(s){Gr===null?Gr=[s]:Gr.push(s)}function b_(s){sm=!0,QS(s)}function eo(){if(!Y0&&Gr!==null){Y0=!0;var s=0,i=fe;try{var c=Gr;for(fe=1;s<c.length;s++){var d=c[s];do d=d(!0);while(d!==null)}Gr=null,sm=!1}catch(m){throw Gr!==null&&(Gr=Gr.slice(s+1)),Nn(hi,eo),m}finally{fe=i,Y0=!1}}return null}var hu=[],du=0,im=null,rm=0,di=[],fi=0,fl=null,Xr=1,qr="";function pl(s,i){hu[du++]=rm,hu[du++]=im,im=s,rm=i}function ZS(s,i,c){di[fi++]=Xr,di[fi++]=qr,di[fi++]=fl,fl=s;var d=Xr;s=qr;var m=32-fn(d)-1;d&=~(1<<m),c+=1;var A=32-fn(i)+m;if(30<A){var C=m-m%5;A=(d&(1<<C)-1).toString(32),d>>=C,m-=C,Xr=1<<32-fn(i)+m|c<<m|d,qr=A+s}else Xr=1<<A|c<<m|d,qr=s}function K0(s){s.return!==null&&(pl(s,1),ZS(s,1,0))}function Q0(s){for(;s===im;)im=hu[--du],hu[du]=null,rm=hu[--du],hu[du]=null;for(;s===fl;)fl=di[--fi],di[fi]=null,qr=di[--fi],di[fi]=null,Xr=di[--fi],di[fi]=null}var Bs=null,Us=null,Fe=!1,Ui=null;function JS(s,i){var c=yi(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=s,i=s.deletions,i===null?(s.deletions=[c],s.flags|=16):i.push(c)}function tb(s,i){switch(s.tag){case 5:var c=s.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,Bs=s,Us=Za(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,Bs=s,Us=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=fl!==null?{id:Xr,overflow:qr}:null,s.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=yi(18,null,null,0),c.stateNode=i,c.return=s,s.child=c,Bs=s,Us=null,!0):!1;default:return!1}}function Z0(s){return(s.mode&1)!==0&&(s.flags&128)===0}function J0(s){if(Fe){var i=Us;if(i){var c=i;if(!tb(s,i)){if(Z0(s))throw Error(e(418));i=Za(c.nextSibling);var d=Bs;i&&tb(s,i)?JS(d,c):(s.flags=s.flags&-4097|2,Fe=!1,Bs=s)}}else{if(Z0(s))throw Error(e(418));s.flags=s.flags&-4097|2,Fe=!1,Bs=s}}}function eb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Bs=s}function am(s){if(s!==Bs)return!1;if(!Fe)return eb(s),Fe=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!W0(s.type,s.memoizedProps)),i&&(i=Us)){if(Z0(s))throw nb(),Error(e(418));for(;i;)JS(s,i),i=Za(i.nextSibling)}if(eb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(e(317));t:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(i===0){Us=Za(s.nextSibling);break t}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}s=s.nextSibling}Us=null}}else Us=Bs?Za(s.stateNode.nextSibling):null;return!0}function nb(){for(var s=Us;s;)s=Za(s.nextSibling)}function fu(){Us=Bs=null,Fe=!1}function tv(s){Ui===null?Ui=[s]:Ui.push(s)}var E_=L.ReactCurrentBatchConfig;function Hd(s,i,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(e(309));var d=c.stateNode}if(!d)throw Error(e(147,s));var m=d,A=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===A?i.ref:(i=function(C){var R=m.refs;C===null?delete R[A]:R[A]=C},i._stringRef=A,i)}if(typeof s!="string")throw Error(e(284));if(!c._owner)throw Error(e(290,s))}return s}function om(s,i){throw s=Object.prototype.toString.call(i),Error(e(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function sb(s){var i=s._init;return i(s._payload)}function ib(s){function i(B,F){if(s){var z=B.deletions;z===null?(B.deletions=[F],B.flags|=16):z.push(F)}}function c(B,F){if(!s)return null;for(;F!==null;)i(B,F),F=F.sibling;return null}function d(B,F){for(B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function m(B,F){return B=co(B,F),B.index=0,B.sibling=null,B}function A(B,F,z){return B.index=z,s?(z=B.alternate,z!==null?(z=z.index,z<F?(B.flags|=2,F):z):(B.flags|=2,F)):(B.flags|=1048576,F)}function C(B){return s&&B.alternate===null&&(B.flags|=2),B}function R(B,F,z,J){return F===null||F.tag!==6?(F=Vv(z,B.mode,J),F.return=B,F):(F=m(F,z),F.return=B,F)}function N(B,F,z,J){var Et=z.type;return Et===U?q(B,F,z.props.children,J,z.key):F!==null&&(F.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===ot&&sb(Et)===F.type)?(J=m(F,z.props),J.ref=Hd(B,F,z),J.return=B,J):(J=Mm(z.type,z.key,z.props,null,B.mode,J),J.ref=Hd(B,F,z),J.return=B,J)}function j(B,F,z,J){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=Gv(z,B.mode,J),F.return=B,F):(F=m(F,z.children||[]),F.return=B,F)}function q(B,F,z,J,Et){return F===null||F.tag!==7?(F=bl(z,B.mode,J,Et),F.return=B,F):(F=m(F,z),F.return=B,F)}function Q(B,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Vv(""+F,B.mode,z),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case D:return z=Mm(F.type,F.key,F.props,null,B.mode,z),z.ref=Hd(B,null,F),z.return=B,z;case I:return F=Gv(F,B.mode,z),F.return=B,F;case ot:var J=F._init;return Q(B,J(F._payload),z)}if(Ii(F)||dt(F))return F=bl(F,B.mode,z,null),F.return=B,F;om(B,F)}return null}function X(B,F,z,J){var Et=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Et!==null?null:R(B,F,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D:return z.key===Et?N(B,F,z,J):null;case I:return z.key===Et?j(B,F,z,J):null;case ot:return Et=z._init,X(B,F,Et(z._payload),J)}if(Ii(z)||dt(z))return Et!==null?null:q(B,F,z,J,null);om(B,z)}return null}function ht(B,F,z,J,Et){if(typeof J=="string"&&J!==""||typeof J=="number")return B=B.get(z)||null,R(F,B,""+J,Et);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case D:return B=B.get(J.key===null?z:J.key)||null,N(F,B,J,Et);case I:return B=B.get(J.key===null?z:J.key)||null,j(F,B,J,Et);case ot:var Lt=J._init;return ht(B,F,z,Lt(J._payload),Et)}if(Ii(J)||dt(J))return B=B.get(z)||null,q(F,B,J,Et,null);om(F,J)}return null}function vt(B,F,z,J){for(var Et=null,Lt=null,Dt=F,Ft=F=0,_n=null;Dt!==null&&Ft<z.length;Ft++){Dt.index>Ft?(_n=Dt,Dt=null):_n=Dt.sibling;var ae=X(B,Dt,z[Ft],J);if(ae===null){Dt===null&&(Dt=_n);break}s&&Dt&&ae.alternate===null&&i(B,Dt),F=A(ae,F,Ft),Lt===null?Et=ae:Lt.sibling=ae,Lt=ae,Dt=_n}if(Ft===z.length)return c(B,Dt),Fe&&pl(B,Ft),Et;if(Dt===null){for(;Ft<z.length;Ft++)Dt=Q(B,z[Ft],J),Dt!==null&&(F=A(Dt,F,Ft),Lt===null?Et=Dt:Lt.sibling=Dt,Lt=Dt);return Fe&&pl(B,Ft),Et}for(Dt=d(B,Dt);Ft<z.length;Ft++)_n=ht(Dt,B,Ft,z[Ft],J),_n!==null&&(s&&_n.alternate!==null&&Dt.delete(_n.key===null?Ft:_n.key),F=A(_n,F,Ft),Lt===null?Et=_n:Lt.sibling=_n,Lt=_n);return s&&Dt.forEach(function(uo){return i(B,uo)}),Fe&&pl(B,Ft),Et}function wt(B,F,z,J){var Et=dt(z);if(typeof Et!="function")throw Error(e(150));if(z=Et.call(z),z==null)throw Error(e(151));for(var Lt=Et=null,Dt=F,Ft=F=0,_n=null,ae=z.next();Dt!==null&&!ae.done;Ft++,ae=z.next()){Dt.index>Ft?(_n=Dt,Dt=null):_n=Dt.sibling;var uo=X(B,Dt,ae.value,J);if(uo===null){Dt===null&&(Dt=_n);break}s&&Dt&&uo.alternate===null&&i(B,Dt),F=A(uo,F,Ft),Lt===null?Et=uo:Lt.sibling=uo,Lt=uo,Dt=_n}if(ae.done)return c(B,Dt),Fe&&pl(B,Ft),Et;if(Dt===null){for(;!ae.done;Ft++,ae=z.next())ae=Q(B,ae.value,J),ae!==null&&(F=A(ae,F,Ft),Lt===null?Et=ae:Lt.sibling=ae,Lt=ae);return Fe&&pl(B,Ft),Et}for(Dt=d(B,Dt);!ae.done;Ft++,ae=z.next())ae=ht(Dt,B,Ft,ae.value,J),ae!==null&&(s&&ae.alternate!==null&&Dt.delete(ae.key===null?Ft:ae.key),F=A(ae,F,Ft),Lt===null?Et=ae:Lt.sibling=ae,Lt=ae);return s&&Dt.forEach(function(nk){return i(B,nk)}),Fe&&pl(B,Ft),Et}function en(B,F,z,J){if(typeof z=="object"&&z!==null&&z.type===U&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case D:t:{for(var Et=z.key,Lt=F;Lt!==null;){if(Lt.key===Et){if(Et=z.type,Et===U){if(Lt.tag===7){c(B,Lt.sibling),F=m(Lt,z.props.children),F.return=B,B=F;break t}}else if(Lt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===ot&&sb(Et)===Lt.type){c(B,Lt.sibling),F=m(Lt,z.props),F.ref=Hd(B,Lt,z),F.return=B,B=F;break t}c(B,Lt);break}else i(B,Lt);Lt=Lt.sibling}z.type===U?(F=bl(z.props.children,B.mode,J,z.key),F.return=B,B=F):(J=Mm(z.type,z.key,z.props,null,B.mode,J),J.ref=Hd(B,F,z),J.return=B,B=J)}return C(B);case I:t:{for(Lt=z.key;F!==null;){if(F.key===Lt)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){c(B,F.sibling),F=m(F,z.children||[]),F.return=B,B=F;break t}else{c(B,F);break}else i(B,F);F=F.sibling}F=Gv(z,B.mode,J),F.return=B,B=F}return C(B);case ot:return Lt=z._init,en(B,F,Lt(z._payload),J)}if(Ii(z))return vt(B,F,z,J);if(dt(z))return wt(B,F,z,J);om(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,F!==null&&F.tag===6?(c(B,F.sibling),F=m(F,z),F.return=B,B=F):(c(B,F),F=Vv(z,B.mode,J),F.return=B,B=F),C(B)):c(B,F)}return en}var pu=ib(!0),rb=ib(!1),lm=Ja(null),cm=null,gu=null,ev=null;function nv(){ev=gu=cm=null}function sv(s){var i=lm.current;Ne(lm),s._currentValue=i}function iv(s,i,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),s===c)break;s=s.return}}function mu(s,i){cm=s,ev=gu=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(bs=!0),s.firstContext=null)}function pi(s){var i=s._currentValue;if(ev!==s)if(s={context:s,memoizedValue:i,next:null},gu===null){if(cm===null)throw Error(e(308));gu=s,cm.dependencies={lanes:0,firstContext:s}}else gu=gu.next=s;return i}var gl=null;function rv(s){gl===null?gl=[s]:gl.push(s)}function ab(s,i,c,d){var m=i.interleaved;return m===null?(c.next=c,rv(i)):(c.next=m.next,m.next=c),i.interleaved=c,Yr(s,d)}function Yr(s,i){s.lanes|=i;var c=s.alternate;for(c!==null&&(c.lanes|=i),c=s,s=s.return;s!==null;)s.childLanes|=i,c=s.alternate,c!==null&&(c.childLanes|=i),c=s,s=s.return;return c.tag===3?c.stateNode:null}var no=!1;function av(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ob(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Kr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function so(s,i,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(se&2)!==0){var m=d.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i,Yr(s,c)}return m=d.interleaved,m===null?(i.next=i,rv(d)):(i.next=m.next,m.next=i),d.interleaved=i,Yr(s,c)}function um(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var d=i.lanes;d&=s.pendingLanes,c|=d,i.lanes=c,A0(s,c)}}function lb(s,i){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,A=null;if(c=c.firstBaseUpdate,c!==null){do{var C={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};A===null?m=A=C:A=A.next=C,c=c.next}while(c!==null);A===null?m=A=i:A=A.next=i}else m=A=i;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:A,shared:d.shared,effects:d.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}function hm(s,i,c,d){var m=s.updateQueue;no=!1;var A=m.firstBaseUpdate,C=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var N=R,j=N.next;N.next=null,C===null?A=j:C.next=j,C=N;var q=s.alternate;q!==null&&(q=q.updateQueue,R=q.lastBaseUpdate,R!==C&&(R===null?q.firstBaseUpdate=j:R.next=j,q.lastBaseUpdate=N))}if(A!==null){var Q=m.baseState;C=0,q=j=N=null,R=A;do{var X=R.lane,ht=R.eventTime;if((d&X)===X){q!==null&&(q=q.next={eventTime:ht,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});t:{var vt=s,wt=R;switch(X=i,ht=c,wt.tag){case 1:if(vt=wt.payload,typeof vt=="function"){Q=vt.call(ht,Q,X);break t}Q=vt;break t;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=wt.payload,X=typeof vt=="function"?vt.call(ht,Q,X):vt,X==null)break t;Q=tt({},Q,X);break t;case 2:no=!0}}R.callback!==null&&R.lane!==0&&(s.flags|=64,X=m.effects,X===null?m.effects=[R]:X.push(R))}else ht={eventTime:ht,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},q===null?(j=q=ht,N=Q):q=q.next=ht,C|=X;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;X=R,R=X.next,X.next=null,m.lastBaseUpdate=X,m.shared.pending=null}}while(!0);if(q===null&&(N=Q),m.baseState=N,m.firstBaseUpdate=j,m.lastBaseUpdate=q,i=m.shared.interleaved,i!==null){m=i;do C|=m.lane,m=m.next;while(m!==i)}else A===null&&(m.shared.lanes=0);vl|=C,s.lanes=C,s.memoizedState=Q}}function cb(s,i,c){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var d=s[i],m=d.callback;if(m!==null){if(d.callback=null,d=c,typeof m!="function")throw Error(e(191,m));m.call(d)}}}var $d={},hr=Ja($d),Wd=Ja($d),Vd=Ja($d);function ml(s){if(s===$d)throw Error(e(174));return s}function ov(s,i){switch(Pe(Vd,i),Pe(Wd,s),Pe(hr,$d),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ll(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=ll(i,s)}Ne(hr),Pe(hr,i)}function yu(){Ne(hr),Ne(Wd),Ne(Vd)}function ub(s){ml(Vd.current);var i=ml(hr.current),c=ll(i,s.type);i!==c&&(Pe(Wd,s),Pe(hr,c))}function lv(s){Wd.current===s&&(Ne(hr),Ne(Wd))}var je=Ja(0);function dm(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var cv=[];function uv(){for(var s=0;s<cv.length;s++)cv[s]._workInProgressVersionPrimary=null;cv.length=0}var fm=L.ReactCurrentDispatcher,hv=L.ReactCurrentBatchConfig,yl=0,He=null,pn=null,xn=null,pm=!1,Gd=!1,Xd=0,x_=0;function qn(){throw Error(e(321))}function dv(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!Bi(s[c],i[c]))return!1;return!0}function fv(s,i,c,d,m,A){if(yl=A,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,fm.current=s===null||s.memoizedState===null?T_:P_,s=c(d,m),Gd){A=0;do{if(Gd=!1,Xd=0,25<=A)throw Error(e(301));A+=1,xn=pn=null,i.updateQueue=null,fm.current=R_,s=c(d,m)}while(Gd)}if(fm.current=ym,i=pn!==null&&pn.next!==null,yl=0,xn=pn=He=null,pm=!1,i)throw Error(e(300));return s}function pv(){var s=Xd!==0;return Xd=0,s}function dr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?He.memoizedState=xn=s:xn=xn.next=s,xn}function gi(){if(pn===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=pn.next;var i=xn===null?He.memoizedState:xn.next;if(i!==null)xn=i,pn=s;else{if(s===null)throw Error(e(310));pn=s,s={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},xn===null?He.memoizedState=xn=s:xn=xn.next=s}return xn}function qd(s,i){return typeof i=="function"?i(s):i}function gv(s){var i=gi(),c=i.queue;if(c===null)throw Error(e(311));c.lastRenderedReducer=s;var d=pn,m=d.baseQueue,A=c.pending;if(A!==null){if(m!==null){var C=m.next;m.next=A.next,A.next=C}d.baseQueue=m=A,c.pending=null}if(m!==null){A=m.next,d=d.baseState;var R=C=null,N=null,j=A;do{var q=j.lane;if((yl&q)===q)N!==null&&(N=N.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),d=j.hasEagerState?j.eagerState:s(d,j.action);else{var Q={lane:q,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};N===null?(R=N=Q,C=d):N=N.next=Q,He.lanes|=q,vl|=q}j=j.next}while(j!==null&&j!==A);N===null?C=d:N.next=R,Bi(d,i.memoizedState)||(bs=!0),i.memoizedState=d,i.baseState=C,i.baseQueue=N,c.lastRenderedState=d}if(s=c.interleaved,s!==null){m=s;do A=m.lane,He.lanes|=A,vl|=A,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function mv(s){var i=gi(),c=i.queue;if(c===null)throw Error(e(311));c.lastRenderedReducer=s;var d=c.dispatch,m=c.pending,A=i.memoizedState;if(m!==null){c.pending=null;var C=m=m.next;do A=s(A,C.action),C=C.next;while(C!==m);Bi(A,i.memoizedState)||(bs=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),c.lastRenderedState=A}return[A,d]}function hb(){}function db(s,i){var c=He,d=gi(),m=i(),A=!Bi(d.memoizedState,m);if(A&&(d.memoizedState=m,bs=!0),d=d.queue,yv(gb.bind(null,c,d,s),[s]),d.getSnapshot!==i||A||xn!==null&&xn.memoizedState.tag&1){if(c.flags|=2048,Yd(9,pb.bind(null,c,d,m,i),void 0,null),Cn===null)throw Error(e(349));(yl&30)!==0||fb(c,i,m)}return m}function fb(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=He.updateQueue,i===null?(i={lastEffect:null,stores:null},He.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function pb(s,i,c,d){i.value=c,i.getSnapshot=d,mb(i)&&yb(s)}function gb(s,i,c){return c(function(){mb(i)&&yb(s)})}function mb(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!Bi(s,c)}catch{return!0}}function yb(s){var i=Yr(s,1);i!==null&&$i(i,s,1,-1)}function vb(s){var i=dr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qd,lastRenderedState:s},i.queue=s,s=s.dispatch=k_.bind(null,He,s),[i.memoizedState,s]}function Yd(s,i,c,d){return s={tag:s,create:i,destroy:c,deps:d,next:null},i=He.updateQueue,i===null?(i={lastEffect:null,stores:null},He.updateQueue=i,i.lastEffect=s.next=s):(c=i.lastEffect,c===null?i.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,i.lastEffect=s)),s}function wb(){return gi().memoizedState}function gm(s,i,c,d){var m=dr();He.flags|=s,m.memoizedState=Yd(1|i,c,void 0,d===void 0?null:d)}function mm(s,i,c,d){var m=gi();d=d===void 0?null:d;var A=void 0;if(pn!==null){var C=pn.memoizedState;if(A=C.destroy,d!==null&&dv(d,C.deps)){m.memoizedState=Yd(i,c,A,d);return}}He.flags|=s,m.memoizedState=Yd(1|i,c,A,d)}function Ab(s,i){return gm(8390656,8,s,i)}function yv(s,i){return mm(2048,8,s,i)}function Sb(s,i){return mm(4,2,s,i)}function bb(s,i){return mm(4,4,s,i)}function Eb(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function xb(s,i,c){return c=c!=null?c.concat([s]):null,mm(4,4,Eb.bind(null,i,s),c)}function vv(){}function Cb(s,i){var c=gi();i=i===void 0?null:i;var d=c.memoizedState;return d!==null&&i!==null&&dv(i,d[1])?d[0]:(c.memoizedState=[s,i],s)}function _b(s,i){var c=gi();i=i===void 0?null:i;var d=c.memoizedState;return d!==null&&i!==null&&dv(i,d[1])?d[0]:(s=s(),c.memoizedState=[s,i],s)}function kb(s,i,c){return(yl&21)===0?(s.baseState&&(s.baseState=!1,bs=!0),s.memoizedState=c):(Bi(c,i)||(c=Ed(),He.lanes|=c,vl|=c,s.baseState=!0),i)}function C_(s,i){var c=fe;fe=c!==0&&4>c?c:4,s(!0);var d=hv.transition;hv.transition={};try{s(!1),i()}finally{fe=c,hv.transition=d}}function Tb(){return gi().memoizedState}function __(s,i,c){var d=oo(s);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},Pb(s))Rb(i,c);else if(c=ab(s,i,c,d),c!==null){var m=ls();$i(c,s,d,m),Mb(c,i,d)}}function k_(s,i,c){var d=oo(s),m={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Pb(s))Rb(i,m);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var C=i.lastRenderedState,R=A(C,c);if(m.hasEagerState=!0,m.eagerState=R,Bi(R,C)){var N=i.interleaved;N===null?(m.next=m,rv(i)):(m.next=N.next,N.next=m),i.interleaved=m;return}}catch{}finally{}c=ab(s,i,m,d),c!==null&&(m=ls(),$i(c,s,d,m),Mb(c,i,d))}}function Pb(s){var i=s.alternate;return s===He||i!==null&&i===He}function Rb(s,i){Gd=pm=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function Mb(s,i,c){if((c&4194240)!==0){var d=i.lanes;d&=s.pendingLanes,c|=d,i.lanes=c,A0(s,c)}}var ym={readContext:pi,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},T_={readContext:pi,useCallback:function(s,i){return dr().memoizedState=[s,i===void 0?null:i],s},useContext:pi,useEffect:Ab,useImperativeHandle:function(s,i,c){return c=c!=null?c.concat([s]):null,gm(4194308,4,Eb.bind(null,i,s),c)},useLayoutEffect:function(s,i){return gm(4194308,4,s,i)},useInsertionEffect:function(s,i){return gm(4,2,s,i)},useMemo:function(s,i){var c=dr();return i=i===void 0?null:i,s=s(),c.memoizedState=[s,i],s},useReducer:function(s,i,c){var d=dr();return i=c!==void 0?c(i):i,d.memoizedState=d.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},d.queue=s,s=s.dispatch=__.bind(null,He,s),[d.memoizedState,s]},useRef:function(s){var i=dr();return s={current:s},i.memoizedState=s},useState:vb,useDebugValue:vv,useDeferredValue:function(s){return dr().memoizedState=s},useTransition:function(){var s=vb(!1),i=s[0];return s=C_.bind(null,s[1]),dr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,c){var d=He,m=dr();if(Fe){if(c===void 0)throw Error(e(407));c=c()}else{if(c=i(),Cn===null)throw Error(e(349));(yl&30)!==0||fb(d,i,c)}m.memoizedState=c;var A={value:c,getSnapshot:i};return m.queue=A,Ab(gb.bind(null,d,A,s),[s]),d.flags|=2048,Yd(9,pb.bind(null,d,A,c,i),void 0,null),c},useId:function(){var s=dr(),i=Cn.identifierPrefix;if(Fe){var c=qr,d=Xr;c=(d&~(1<<32-fn(d)-1)).toString(32)+c,i=":"+i+"R"+c,c=Xd++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=x_++,i=":"+i+"r"+c.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},P_={readContext:pi,useCallback:Cb,useContext:pi,useEffect:yv,useImperativeHandle:xb,useInsertionEffect:Sb,useLayoutEffect:bb,useMemo:_b,useReducer:gv,useRef:wb,useState:function(){return gv(qd)},useDebugValue:vv,useDeferredValue:function(s){var i=gi();return kb(i,pn.memoizedState,s)},useTransition:function(){var s=gv(qd)[0],i=gi().memoizedState;return[s,i]},useMutableSource:hb,useSyncExternalStore:db,useId:Tb,unstable_isNewReconciler:!1},R_={readContext:pi,useCallback:Cb,useContext:pi,useEffect:yv,useImperativeHandle:xb,useInsertionEffect:Sb,useLayoutEffect:bb,useMemo:_b,useReducer:mv,useRef:wb,useState:function(){return mv(qd)},useDebugValue:vv,useDeferredValue:function(s){var i=gi();return pn===null?i.memoizedState=s:kb(i,pn.memoizedState,s)},useTransition:function(){var s=mv(qd)[0],i=gi().memoizedState;return[s,i]},useMutableSource:hb,useSyncExternalStore:db,useId:Tb,unstable_isNewReconciler:!1};function zi(s,i){if(s&&s.defaultProps){i=tt({},i),s=s.defaultProps;for(var c in s)i[c]===void 0&&(i[c]=s[c]);return i}return i}function wv(s,i,c,d){i=s.memoizedState,c=c(d,i),c=c==null?i:tt({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var vm={isMounted:function(s){return(s=s._reactInternals)?Gn(s)===s:!1},enqueueSetState:function(s,i,c){s=s._reactInternals;var d=ls(),m=oo(s),A=Kr(d,m);A.payload=i,c!=null&&(A.callback=c),i=so(s,A,m),i!==null&&($i(i,s,m,d),um(i,s,m))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var d=ls(),m=oo(s),A=Kr(d,m);A.tag=1,A.payload=i,c!=null&&(A.callback=c),i=so(s,A,m),i!==null&&($i(i,s,m,d),um(i,s,m))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=ls(),d=oo(s),m=Kr(c,d);m.tag=2,i!=null&&(m.callback=i),i=so(s,m,d),i!==null&&($i(i,s,d,c),um(i,s,d))}};function Lb(s,i,c,d,m,A,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,A,C):i.prototype&&i.prototype.isPureReactComponent?!Id(c,d)||!Id(m,A):!0}function Db(s,i,c){var d=!1,m=to,A=i.contextType;return typeof A=="object"&&A!==null?A=pi(A):(m=Ss(i)?dl:Xn.current,d=i.contextTypes,A=(d=d!=null)?uu(s,m):to),i=new i(c,A),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=vm,s.stateNode=i,i._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=A),i}function Nb(s,i,c,d){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==s&&vm.enqueueReplaceState(i,i.state,null)}function Av(s,i,c,d){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},av(s);var A=i.contextType;typeof A=="object"&&A!==null?m.context=pi(A):(A=Ss(i)?dl:Xn.current,m.context=uu(s,A)),m.state=s.memoizedState,A=i.getDerivedStateFromProps,typeof A=="function"&&(wv(s,i,A,c),m.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&vm.enqueueReplaceState(m,m.state,null),hm(s,c,m,d),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function vu(s,i){try{var c="",d=i;do c+=bt(d),d=d.return;while(d);var m=c}catch(A){m=`
Error generating stack: `+A.message+`
`+A.stack}return{value:s,source:i,stack:m,digest:null}}function Sv(s,i,c){return{value:s,source:null,stack:c??null,digest:i??null}}function bv(s,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var M_=typeof WeakMap=="function"?WeakMap:Map;function Ib(s,i,c){c=Kr(-1,c),c.tag=3,c.payload={element:null};var d=i.value;return c.callback=function(){Cm||(Cm=!0,Ov=d),bv(s,i)},c}function Fb(s,i,c){c=Kr(-1,c),c.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=i.value;c.payload=function(){return d(m)},c.callback=function(){bv(s,i)}}var A=s.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(c.callback=function(){bv(s,i),typeof d!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var C=i.stack;this.componentDidCatch(i.value,{componentStack:C!==null?C:""})}),c}function Ob(s,i,c){var d=s.pingCache;if(d===null){d=s.pingCache=new M_;var m=new Set;d.set(i,m)}else m=d.get(i),m===void 0&&(m=new Set,d.set(i,m));m.has(c)||(m.add(c),s=V_.bind(null,s,i,c),i.then(s,s))}function Bb(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function Ub(s,i,c,d,m){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=Kr(-1,1),i.tag=2,so(c,i,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var L_=L.ReactCurrentOwner,bs=!1;function os(s,i,c,d){i.child=s===null?rb(i,null,c,d):pu(i,s.child,c,d)}function zb(s,i,c,d,m){c=c.render;var A=i.ref;return mu(i,m),d=fv(s,i,c,d,A,m),c=pv(),s!==null&&!bs?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~m,Qr(s,i,m)):(Fe&&c&&K0(i),i.flags|=1,os(s,i,d,m),i.child)}function jb(s,i,c,d,m){if(s===null){var A=c.type;return typeof A=="function"&&!Wv(A)&&A.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=A,Hb(s,i,A,d,m)):(s=Mm(c.type,null,d,i,i.mode,m),s.ref=i.ref,s.return=i,i.child=s)}if(A=s.child,(s.lanes&m)===0){var C=A.memoizedProps;if(c=c.compare,c=c!==null?c:Id,c(C,d)&&s.ref===i.ref)return Qr(s,i,m)}return i.flags|=1,s=co(A,d),s.ref=i.ref,s.return=i,i.child=s}function Hb(s,i,c,d,m){if(s!==null){var A=s.memoizedProps;if(Id(A,d)&&s.ref===i.ref)if(bs=!1,i.pendingProps=d=A,(s.lanes&m)!==0)(s.flags&131072)!==0&&(bs=!0);else return i.lanes=s.lanes,Qr(s,i,m)}return Ev(s,i,c,d,m)}function $b(s,i,c){var d=i.pendingProps,m=d.children,A=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Au,zs),zs|=c;else{if((c&1073741824)===0)return s=A!==null?A.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,Pe(Au,zs),zs|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=A!==null?A.baseLanes:c,Pe(Au,zs),zs|=d}else A!==null?(d=A.baseLanes|c,i.memoizedState=null):d=c,Pe(Au,zs),zs|=d;return os(s,i,m,c),i.child}function Wb(s,i){var c=i.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function Ev(s,i,c,d,m){var A=Ss(c)?dl:Xn.current;return A=uu(i,A),mu(i,m),c=fv(s,i,c,d,A,m),d=pv(),s!==null&&!bs?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~m,Qr(s,i,m)):(Fe&&d&&K0(i),i.flags|=1,os(s,i,c,m),i.child)}function Vb(s,i,c,d,m){if(Ss(c)){var A=!0;nm(i)}else A=!1;if(mu(i,m),i.stateNode===null)Am(s,i),Db(i,c,d),Av(i,c,d,m),d=!0;else if(s===null){var C=i.stateNode,R=i.memoizedProps;C.props=R;var N=C.context,j=c.contextType;typeof j=="object"&&j!==null?j=pi(j):(j=Ss(c)?dl:Xn.current,j=uu(i,j));var q=c.getDerivedStateFromProps,Q=typeof q=="function"||typeof C.getSnapshotBeforeUpdate=="function";Q||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(R!==d||N!==j)&&Nb(i,C,d,j),no=!1;var X=i.memoizedState;C.state=X,hm(i,d,C,m),N=i.memoizedState,R!==d||X!==N||As.current||no?(typeof q=="function"&&(wv(i,c,q,d),N=i.memoizedState),(R=no||Lb(i,c,R,d,X,N,j))?(Q||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(i.flags|=4194308)):(typeof C.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=N),C.props=d,C.state=N,C.context=j,d=R):(typeof C.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{C=i.stateNode,ob(s,i),R=i.memoizedProps,j=i.type===i.elementType?R:zi(i.type,R),C.props=j,Q=i.pendingProps,X=C.context,N=c.contextType,typeof N=="object"&&N!==null?N=pi(N):(N=Ss(c)?dl:Xn.current,N=uu(i,N));var ht=c.getDerivedStateFromProps;(q=typeof ht=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(R!==Q||X!==N)&&Nb(i,C,d,N),no=!1,X=i.memoizedState,C.state=X,hm(i,d,C,m);var vt=i.memoizedState;R!==Q||X!==vt||As.current||no?(typeof ht=="function"&&(wv(i,c,ht,d),vt=i.memoizedState),(j=no||Lb(i,c,j,d,X,vt,N)||!1)?(q||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,vt,N),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,vt,N)),typeof C.componentDidUpdate=="function"&&(i.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof C.componentDidUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=vt),C.props=d,C.state=vt,C.context=N,d=j):(typeof C.componentDidUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=1024),d=!1)}return xv(s,i,c,d,A,m)}function xv(s,i,c,d,m,A){Wb(s,i);var C=(i.flags&128)!==0;if(!d&&!C)return m&&KS(i,c,!1),Qr(s,i,A);d=i.stateNode,L_.current=i;var R=C&&typeof c.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,s!==null&&C?(i.child=pu(i,s.child,null,A),i.child=pu(i,null,R,A)):os(s,i,R,A),i.memoizedState=d.state,m&&KS(i,c,!0),i.child}function Gb(s){var i=s.stateNode;i.pendingContext?qS(s,i.pendingContext,i.pendingContext!==i.context):i.context&&qS(s,i.context,!1),ov(s,i.containerInfo)}function Xb(s,i,c,d,m){return fu(),tv(m),i.flags|=256,os(s,i,c,d),i.child}var Cv={dehydrated:null,treeContext:null,retryLane:0};function _v(s){return{baseLanes:s,cachePool:null,transitions:null}}function qb(s,i,c){var d=i.pendingProps,m=je.current,A=!1,C=(i.flags&128)!==0,R;if((R=C)||(R=s!==null&&s.memoizedState===null?!1:(m&2)!==0),R?(A=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),Pe(je,m&1),s===null)return J0(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(C=d.children,s=d.fallback,A?(d=i.mode,A=i.child,C={mode:"hidden",children:C},(d&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=C):A=Lm(C,d,0,null),s=bl(s,d,c,null),A.return=i,s.return=i,A.sibling=s,i.child=A,i.child.memoizedState=_v(c),i.memoizedState=Cv,s):kv(i,C));if(m=s.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return D_(s,i,C,d,R,m,c);if(A){A=d.fallback,C=i.mode,m=s.child,R=m.sibling;var N={mode:"hidden",children:d.children};return(C&1)===0&&i.child!==m?(d=i.child,d.childLanes=0,d.pendingProps=N,i.deletions=null):(d=co(m,N),d.subtreeFlags=m.subtreeFlags&14680064),R!==null?A=co(R,A):(A=bl(A,C,c,null),A.flags|=2),A.return=i,d.return=i,d.sibling=A,i.child=d,d=A,A=i.child,C=s.child.memoizedState,C=C===null?_v(c):{baseLanes:C.baseLanes|c,cachePool:null,transitions:C.transitions},A.memoizedState=C,A.childLanes=s.childLanes&~c,i.memoizedState=Cv,d}return A=s.child,s=A.sibling,d=co(A,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=c),d.return=i,d.sibling=null,s!==null&&(c=i.deletions,c===null?(i.deletions=[s],i.flags|=16):c.push(s)),i.child=d,i.memoizedState=null,d}function kv(s,i){return i=Lm({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function wm(s,i,c,d){return d!==null&&tv(d),pu(i,s.child,null,c),s=kv(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function D_(s,i,c,d,m,A,C){if(c)return i.flags&256?(i.flags&=-257,d=Sv(Error(e(422))),wm(s,i,C,d)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(A=d.fallback,m=i.mode,d=Lm({mode:"visible",children:d.children},m,0,null),A=bl(A,m,C,null),A.flags|=2,d.return=i,A.return=i,d.sibling=A,i.child=d,(i.mode&1)!==0&&pu(i,s.child,null,C),i.child.memoizedState=_v(C),i.memoizedState=Cv,A);if((i.mode&1)===0)return wm(s,i,C,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var R=d.dgst;return d=R,A=Error(e(419)),d=Sv(A,d,void 0),wm(s,i,C,d)}if(R=(C&s.childLanes)!==0,bs||R){if(d=Cn,d!==null){switch(C&-C){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|C))!==0?0:m,m!==0&&m!==A.retryLane&&(A.retryLane=m,Yr(s,m),$i(d,s,m,-1))}return $v(),d=Sv(Error(e(421))),wm(s,i,C,d)}return m.data==="$?"?(i.flags|=128,i.child=s.child,i=G_.bind(null,s),m._reactRetry=i,null):(s=A.treeContext,Us=Za(m.nextSibling),Bs=i,Fe=!0,Ui=null,s!==null&&(di[fi++]=Xr,di[fi++]=qr,di[fi++]=fl,Xr=s.id,qr=s.overflow,fl=i),i=kv(i,d.children),i.flags|=4096,i)}function Yb(s,i,c){s.lanes|=i;var d=s.alternate;d!==null&&(d.lanes|=i),iv(s.return,i,c)}function Tv(s,i,c,d,m){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(A.isBackwards=i,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=c,A.tailMode=m)}function Kb(s,i,c){var d=i.pendingProps,m=d.revealOrder,A=d.tail;if(os(s,i,d.children,c),d=je.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Yb(s,c,i);else if(s.tag===19)Yb(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Pe(je,d),(i.mode&1)===0)i.memoizedState=null;else switch(m){case"forwards":for(c=i.child,m=null;c!==null;)s=c.alternate,s!==null&&dm(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=i.child,i.child=null):(m=c.sibling,c.sibling=null),Tv(i,!1,m,c,A);break;case"backwards":for(c=null,m=i.child,i.child=null;m!==null;){if(s=m.alternate,s!==null&&dm(s)===null){i.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Tv(i,!0,c,null,A);break;case"together":Tv(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Am(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Qr(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),vl|=i.lanes,(c&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(e(153));if(i.child!==null){for(s=i.child,c=co(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=co(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function N_(s,i,c){switch(i.tag){case 3:Gb(i),fu();break;case 5:ub(i);break;case 1:Ss(i.type)&&nm(i);break;case 4:ov(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,m=i.memoizedProps.value;Pe(lm,d._currentValue),d._currentValue=m;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Pe(je,je.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?qb(s,i,c):(Pe(je,je.current&1),s=Qr(s,i,c),s!==null?s.sibling:null);Pe(je,je.current&1);break;case 19:if(d=(c&i.childLanes)!==0,(s.flags&128)!==0){if(d)return Kb(s,i,c);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Pe(je,je.current),d)break;return null;case 22:case 23:return i.lanes=0,$b(s,i,c)}return Qr(s,i,c)}var Qb,Pv,Zb,Jb;Qb=function(s,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Pv=function(){},Zb=function(s,i,c,d){var m=s.memoizedProps;if(m!==d){s=i.stateNode,ml(hr.current);var A=null;switch(c){case"input":m=ar(s,m),d=ar(s,d),A=[];break;case"select":m=tt({},m,{value:void 0}),d=tt({},d,{value:void 0}),A=[];break;case"textarea":m=Qc(s,m),d=Qc(s,d),A=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Jg)}md(c,d);var C;c=null;for(j in m)if(!d.hasOwnProperty(j)&&m.hasOwnProperty(j)&&m[j]!=null)if(j==="style"){var R=m[j];for(C in R)R.hasOwnProperty(C)&&(c||(c={}),c[C]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(r.hasOwnProperty(j)?A||(A=[]):(A=A||[]).push(j,null));for(j in d){var N=d[j];if(R=m!=null?m[j]:void 0,d.hasOwnProperty(j)&&N!==R&&(N!=null||R!=null))if(j==="style")if(R){for(C in R)!R.hasOwnProperty(C)||N&&N.hasOwnProperty(C)||(c||(c={}),c[C]="");for(C in N)N.hasOwnProperty(C)&&R[C]!==N[C]&&(c||(c={}),c[C]=N[C])}else c||(A||(A=[]),A.push(j,c)),c=N;else j==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,R=R?R.__html:void 0,N!=null&&R!==N&&(A=A||[]).push(j,N)):j==="children"?typeof N!="string"&&typeof N!="number"||(A=A||[]).push(j,""+N):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(r.hasOwnProperty(j)?(N!=null&&j==="onScroll"&&De("scroll",s),A||R===N||(A=[])):(A=A||[]).push(j,N))}c&&(A=A||[]).push("style",c);var j=A;(i.updateQueue=j)&&(i.flags|=4)}},Jb=function(s,i,c,d){c!==d&&(i.flags|=4)};function Kd(s,i){if(!Fe)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Yn(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(i)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=c,i}function I_(s,i,c){var d=i.pendingProps;switch(Q0(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(i),null;case 1:return Ss(i.type)&&em(),Yn(i),null;case 3:return d=i.stateNode,yu(),Ne(As),Ne(Xn),uv(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(am(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ui!==null&&(zv(Ui),Ui=null))),Pv(s,i),Yn(i),null;case 5:lv(i);var m=ml(Vd.current);if(c=i.type,s!==null&&i.stateNode!=null)Zb(s,i,c,d,m),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(e(166));return Yn(i),null}if(s=ml(hr.current),am(i)){d=i.stateNode,c=i.type;var A=i.memoizedProps;switch(d[ur]=i,d[zd]=A,s=(i.mode&1)!==0,c){case"dialog":De("cancel",d),De("close",d);break;case"iframe":case"object":case"embed":De("load",d);break;case"video":case"audio":for(m=0;m<Od.length;m++)De(Od[m],d);break;case"source":De("error",d);break;case"img":case"image":case"link":De("error",d),De("load",d);break;case"details":De("toggle",d);break;case"input":Yc(d,A),De("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!A.multiple},De("invalid",d);break;case"textarea":Is(d,A),De("invalid",d)}md(c,A),m=null;for(var C in A)if(A.hasOwnProperty(C)){var R=A[C];C==="children"?typeof R=="string"?d.textContent!==R&&(A.suppressHydrationWarning!==!0&&Zg(d.textContent,R,s),m=["children",R]):typeof R=="number"&&d.textContent!==""+R&&(A.suppressHydrationWarning!==!0&&Zg(d.textContent,R,s),m=["children",""+R]):r.hasOwnProperty(C)&&R!=null&&C==="onScroll"&&De("scroll",d)}switch(c){case"input":vs(d),dd(d,A,!0);break;case"textarea":vs(d),ol(d);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(d.onclick=Jg)}d=m,i.updateQueue=d,d!==null&&(i.flags|=4)}else{C=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Hr(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=C.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=C.createElement(c,{is:d.is}):(s=C.createElement(c),c==="select"&&(C=s,d.multiple?C.multiple=!0:d.size&&(C.size=d.size))):s=C.createElementNS(s,c),s[ur]=i,s[zd]=d,Qb(s,i,!1,!1),i.stateNode=s;t:{switch(C=cr(c,d),c){case"dialog":De("cancel",s),De("close",s),m=d;break;case"iframe":case"object":case"embed":De("load",s),m=d;break;case"video":case"audio":for(m=0;m<Od.length;m++)De(Od[m],s);m=d;break;case"source":De("error",s),m=d;break;case"img":case"image":case"link":De("error",s),De("load",s),m=d;break;case"details":De("toggle",s),m=d;break;case"input":Yc(s,d),m=ar(s,d),De("invalid",s);break;case"option":m=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},m=tt({},d,{value:void 0}),De("invalid",s);break;case"textarea":Is(s,d),m=Qc(s,d),De("invalid",s);break;default:m=d}md(c,m),R=m;for(A in R)if(R.hasOwnProperty(A)){var N=R[A];A==="style"?gd(s,N):A==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&lr(s,N)):A==="children"?typeof N=="string"?(c!=="textarea"||N!=="")&&cl(s,N):typeof N=="number"&&cl(s,""+N):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(r.hasOwnProperty(A)?N!=null&&A==="onScroll"&&De("scroll",s):N!=null&&P(s,A,N,C))}switch(c){case"input":vs(s),dd(s,d,!1);break;case"textarea":vs(s),ol(s);break;case"option":d.value!=null&&s.setAttribute("value",""+qt(d.value));break;case"select":s.multiple=!!d.multiple,A=d.value,A!=null?Va(s,!!d.multiple,A,!1):d.defaultValue!=null&&Va(s,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Jg)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Yn(i),null;case 6:if(s&&i.stateNode!=null)Jb(s,i,s.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(e(166));if(c=ml(Vd.current),ml(hr.current),am(i)){if(d=i.stateNode,c=i.memoizedProps,d[ur]=i,(A=d.nodeValue!==c)&&(s=Bs,s!==null))switch(s.tag){case 3:Zg(d.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Zg(d.nodeValue,c,(s.mode&1)!==0)}A&&(i.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[ur]=i,i.stateNode=d}return Yn(i),null;case 13:if(Ne(je),d=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Fe&&Us!==null&&(i.mode&1)!==0&&(i.flags&128)===0)nb(),fu(),i.flags|=98560,A=!1;else if(A=am(i),d!==null&&d.dehydrated!==null){if(s===null){if(!A)throw Error(e(318));if(A=i.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(e(317));A[ur]=i}else fu(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yn(i),A=!1}else Ui!==null&&(zv(Ui),Ui=null),A=!0;if(!A)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(je.current&1)!==0?gn===0&&(gn=3):$v())),i.updateQueue!==null&&(i.flags|=4),Yn(i),null);case 4:return yu(),Pv(s,i),s===null&&Bd(i.stateNode.containerInfo),Yn(i),null;case 10:return sv(i.type._context),Yn(i),null;case 17:return Ss(i.type)&&em(),Yn(i),null;case 19:if(Ne(je),A=i.memoizedState,A===null)return Yn(i),null;if(d=(i.flags&128)!==0,C=A.rendering,C===null)if(d)Kd(A,!1);else{if(gn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(C=dm(s),C!==null){for(i.flags|=128,Kd(A,!1),d=C.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=c,c=i.child;c!==null;)A=c,s=d,A.flags&=14680066,C=A.alternate,C===null?(A.childLanes=0,A.lanes=s,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=C.childLanes,A.lanes=C.lanes,A.child=C.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=C.memoizedProps,A.memoizedState=C.memoizedState,A.updateQueue=C.updateQueue,A.type=C.type,s=C.dependencies,A.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Pe(je,je.current&1|2),i.child}s=s.sibling}A.tail!==null&&xe()>Su&&(i.flags|=128,d=!0,Kd(A,!1),i.lanes=4194304)}else{if(!d)if(s=dm(C),s!==null){if(i.flags|=128,d=!0,c=s.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),Kd(A,!0),A.tail===null&&A.tailMode==="hidden"&&!C.alternate&&!Fe)return Yn(i),null}else 2*xe()-A.renderingStartTime>Su&&c!==1073741824&&(i.flags|=128,d=!0,Kd(A,!1),i.lanes=4194304);A.isBackwards?(C.sibling=i.child,i.child=C):(c=A.last,c!==null?c.sibling=C:i.child=C,A.last=C)}return A.tail!==null?(i=A.tail,A.rendering=i,A.tail=i.sibling,A.renderingStartTime=xe(),i.sibling=null,c=je.current,Pe(je,d?c&1|2:c&1),i):(Yn(i),null);case 22:case 23:return Hv(),d=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(zs&1073741824)!==0&&(Yn(i),i.subtreeFlags&6&&(i.flags|=8192)):Yn(i),null;case 24:return null;case 25:return null}throw Error(e(156,i.tag))}function F_(s,i){switch(Q0(i),i.tag){case 1:return Ss(i.type)&&em(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return yu(),Ne(As),Ne(Xn),uv(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return lv(i),null;case 13:if(Ne(je),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(e(340));fu()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return Ne(je),null;case 4:return yu(),null;case 10:return sv(i.type._context),null;case 22:case 23:return Hv(),null;case 24:return null;default:return null}}var Sm=!1,Kn=!1,O_=typeof WeakSet=="function"?WeakSet:Set,mt=null;function wu(s,i){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){qe(s,i,d)}else c.current=null}function Rv(s,i,c){try{c()}catch(d){qe(s,i,d)}}var t1=!1;function B_(s,i){if(H0=jg,s=LS(),N0(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else t:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,A=d.focusNode;d=d.focusOffset;try{c.nodeType,A.nodeType}catch{c=null;break t}var C=0,R=-1,N=-1,j=0,q=0,Q=s,X=null;e:for(;;){for(var ht;Q!==c||m!==0&&Q.nodeType!==3||(R=C+m),Q!==A||d!==0&&Q.nodeType!==3||(N=C+d),Q.nodeType===3&&(C+=Q.nodeValue.length),(ht=Q.firstChild)!==null;)X=Q,Q=ht;for(;;){if(Q===s)break e;if(X===c&&++j===m&&(R=C),X===A&&++q===d&&(N=C),(ht=Q.nextSibling)!==null)break;Q=X,X=Q.parentNode}Q=ht}c=R===-1||N===-1?null:{start:R,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for($0={focusedElem:s,selectionRange:c},jg=!1,mt=i;mt!==null;)if(i=mt,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,mt=s;else for(;mt!==null;){i=mt;try{var vt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var wt=vt.memoizedProps,en=vt.memoizedState,B=i.stateNode,F=B.getSnapshotBeforeUpdate(i.elementType===i.type?wt:zi(i.type,wt),en);B.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(J){qe(i,i.return,J)}if(s=i.sibling,s!==null){s.return=i.return,mt=s;break}mt=i.return}return vt=t1,t1=!1,vt}function Qd(s,i,c){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&s)===s){var A=m.destroy;m.destroy=void 0,A!==void 0&&Rv(i,c,A)}m=m.next}while(m!==d)}}function bm(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&s)===s){var d=c.create;c.destroy=d()}c=c.next}while(c!==i)}}function Mv(s){var i=s.ref;if(i!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof i=="function"?i(s):i.current=s}}function e1(s){var i=s.alternate;i!==null&&(s.alternate=null,e1(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[ur],delete i[zd],delete i[X0],delete i[A_],delete i[S_])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function n1(s){return s.tag===5||s.tag===3||s.tag===4}function s1(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||n1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lv(s,i,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(s,i):c.insertBefore(s,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(s,c)):(i=c,i.appendChild(s)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Jg));else if(d!==4&&(s=s.child,s!==null))for(Lv(s,i,c),s=s.sibling;s!==null;)Lv(s,i,c),s=s.sibling}function Dv(s,i,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Dv(s,i,c),s=s.sibling;s!==null;)Dv(s,i,c),s=s.sibling}var In=null,ji=!1;function io(s,i,c){for(c=c.child;c!==null;)i1(s,i,c),c=c.sibling}function i1(s,i,c){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(En,c)}catch{}switch(c.tag){case 5:Kn||wu(c,i);case 6:var d=In,m=ji;In=null,io(s,i,c),In=d,ji=m,In!==null&&(ji?(s=In,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):In.removeChild(c.stateNode));break;case 18:In!==null&&(ji?(s=In,c=c.stateNode,s.nodeType===8?G0(s.parentNode,c):s.nodeType===1&&G0(s,c),Pd(s)):G0(In,c.stateNode));break;case 4:d=In,m=ji,In=c.stateNode.containerInfo,ji=!0,io(s,i,c),In=d,ji=m;break;case 0:case 11:case 14:case 15:if(!Kn&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var A=m,C=A.destroy;A=A.tag,C!==void 0&&((A&2)!==0||(A&4)!==0)&&Rv(c,i,C),m=m.next}while(m!==d)}io(s,i,c);break;case 1:if(!Kn&&(wu(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(R){qe(c,i,R)}io(s,i,c);break;case 21:io(s,i,c);break;case 22:c.mode&1?(Kn=(d=Kn)||c.memoizedState!==null,io(s,i,c),Kn=d):io(s,i,c);break;default:io(s,i,c)}}function r1(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new O_),i.forEach(function(d){var m=X_.bind(null,s,d);c.has(d)||(c.add(d),d.then(m,m))})}}function Hi(s,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d];try{var A=s,C=i,R=C;t:for(;R!==null;){switch(R.tag){case 5:In=R.stateNode,ji=!1;break t;case 3:In=R.stateNode.containerInfo,ji=!0;break t;case 4:In=R.stateNode.containerInfo,ji=!0;break t}R=R.return}if(In===null)throw Error(e(160));i1(A,C,m),In=null,ji=!1;var N=m.alternate;N!==null&&(N.return=null),m.return=null}catch(j){qe(m,i,j)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)a1(i,s),i=i.sibling}function a1(s,i){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Hi(i,s),fr(s),d&4){try{Qd(3,s,s.return),bm(3,s)}catch(wt){qe(s,s.return,wt)}try{Qd(5,s,s.return)}catch(wt){qe(s,s.return,wt)}}break;case 1:Hi(i,s),fr(s),d&512&&c!==null&&wu(c,c.return);break;case 5:if(Hi(i,s),fr(s),d&512&&c!==null&&wu(c,c.return),s.flags&32){var m=s.stateNode;try{cl(m,"")}catch(wt){qe(s,s.return,wt)}}if(d&4&&(m=s.stateNode,m!=null)){var A=s.memoizedProps,C=c!==null?c.memoizedProps:A,R=s.type,N=s.updateQueue;if(s.updateQueue=null,N!==null)try{R==="input"&&A.type==="radio"&&A.name!=null&&ce(m,A),cr(R,C);var j=cr(R,A);for(C=0;C<N.length;C+=2){var q=N[C],Q=N[C+1];q==="style"?gd(m,Q):q==="dangerouslySetInnerHTML"?lr(m,Q):q==="children"?cl(m,Q):P(m,q,Q,j)}switch(R){case"input":hd(m,A);break;case"textarea":fd(m,A);break;case"select":var X=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!A.multiple;var ht=A.value;ht!=null?Va(m,!!A.multiple,ht,!1):X!==!!A.multiple&&(A.defaultValue!=null?Va(m,!!A.multiple,A.defaultValue,!0):Va(m,!!A.multiple,A.multiple?[]:"",!1))}m[zd]=A}catch(wt){qe(s,s.return,wt)}}break;case 6:if(Hi(i,s),fr(s),d&4){if(s.stateNode===null)throw Error(e(162));m=s.stateNode,A=s.memoizedProps;try{m.nodeValue=A}catch(wt){qe(s,s.return,wt)}}break;case 3:if(Hi(i,s),fr(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Pd(i.containerInfo)}catch(wt){qe(s,s.return,wt)}break;case 4:Hi(i,s),fr(s);break;case 13:Hi(i,s),fr(s),m=s.child,m.flags&8192&&(A=m.memoizedState!==null,m.stateNode.isHidden=A,!A||m.alternate!==null&&m.alternate.memoizedState!==null||(Fv=xe())),d&4&&r1(s);break;case 22:if(q=c!==null&&c.memoizedState!==null,s.mode&1?(Kn=(j=Kn)||q,Hi(i,s),Kn=j):Hi(i,s),fr(s),d&8192){if(j=s.memoizedState!==null,(s.stateNode.isHidden=j)&&!q&&(s.mode&1)!==0)for(mt=s,q=s.child;q!==null;){for(Q=mt=q;mt!==null;){switch(X=mt,ht=X.child,X.tag){case 0:case 11:case 14:case 15:Qd(4,X,X.return);break;case 1:wu(X,X.return);var vt=X.stateNode;if(typeof vt.componentWillUnmount=="function"){d=X,c=X.return;try{i=d,vt.props=i.memoizedProps,vt.state=i.memoizedState,vt.componentWillUnmount()}catch(wt){qe(d,c,wt)}}break;case 5:wu(X,X.return);break;case 22:if(X.memoizedState!==null){c1(Q);continue}}ht!==null?(ht.return=X,mt=ht):c1(Q)}q=q.sibling}t:for(q=null,Q=s;;){if(Q.tag===5){if(q===null){q=Q;try{m=Q.stateNode,j?(A=m.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(R=Q.stateNode,N=Q.memoizedProps.style,C=N!=null&&N.hasOwnProperty("display")?N.display:null,R.style.display=pd("display",C))}catch(wt){qe(s,s.return,wt)}}}else if(Q.tag===6){if(q===null)try{Q.stateNode.nodeValue=j?"":Q.memoizedProps}catch(wt){qe(s,s.return,wt)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===s)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===s)break t;for(;Q.sibling===null;){if(Q.return===null||Q.return===s)break t;q===Q&&(q=null),Q=Q.return}q===Q&&(q=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Hi(i,s),fr(s),d&4&&r1(s);break;case 21:break;default:Hi(i,s),fr(s)}}function fr(s){var i=s.flags;if(i&2){try{t:{for(var c=s.return;c!==null;){if(n1(c)){var d=c;break t}c=c.return}throw Error(e(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(cl(m,""),d.flags&=-33);var A=s1(s);Dv(s,A,m);break;case 3:case 4:var C=d.stateNode.containerInfo,R=s1(s);Lv(s,R,C);break;default:throw Error(e(161))}}catch(N){qe(s,s.return,N)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function U_(s,i,c){mt=s,o1(s)}function o1(s,i,c){for(var d=(s.mode&1)!==0;mt!==null;){var m=mt,A=m.child;if(m.tag===22&&d){var C=m.memoizedState!==null||Sm;if(!C){var R=m.alternate,N=R!==null&&R.memoizedState!==null||Kn;R=Sm;var j=Kn;if(Sm=C,(Kn=N)&&!j)for(mt=m;mt!==null;)C=mt,N=C.child,C.tag===22&&C.memoizedState!==null?u1(m):N!==null?(N.return=C,mt=N):u1(m);for(;A!==null;)mt=A,o1(A),A=A.sibling;mt=m,Sm=R,Kn=j}l1(s)}else(m.subtreeFlags&8772)!==0&&A!==null?(A.return=m,mt=A):l1(s)}}function l1(s){for(;mt!==null;){var i=mt;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Kn||bm(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Kn)if(c===null)d.componentDidMount();else{var m=i.elementType===i.type?c.memoizedProps:zi(i.type,c.memoizedProps);d.componentDidUpdate(m,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var A=i.updateQueue;A!==null&&cb(i,A,d);break;case 3:var C=i.updateQueue;if(C!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}cb(i,C,c)}break;case 5:var R=i.stateNode;if(c===null&&i.flags&4){c=R;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&c.focus();break;case"img":N.src&&(c.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var j=i.alternate;if(j!==null){var q=j.memoizedState;if(q!==null){var Q=q.dehydrated;Q!==null&&Pd(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Kn||i.flags&512&&Mv(i)}catch(X){qe(i,i.return,X)}}if(i===s){mt=null;break}if(c=i.sibling,c!==null){c.return=i.return,mt=c;break}mt=i.return}}function c1(s){for(;mt!==null;){var i=mt;if(i===s){mt=null;break}var c=i.sibling;if(c!==null){c.return=i.return,mt=c;break}mt=i.return}}function u1(s){for(;mt!==null;){var i=mt;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{bm(4,i)}catch(N){qe(i,c,N)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var m=i.return;try{d.componentDidMount()}catch(N){qe(i,m,N)}}var A=i.return;try{Mv(i)}catch(N){qe(i,A,N)}break;case 5:var C=i.return;try{Mv(i)}catch(N){qe(i,C,N)}}}catch(N){qe(i,i.return,N)}if(i===s){mt=null;break}var R=i.sibling;if(R!==null){R.return=i.return,mt=R;break}mt=i.return}}var z_=Math.ceil,Em=L.ReactCurrentDispatcher,Nv=L.ReactCurrentOwner,mi=L.ReactCurrentBatchConfig,se=0,Cn=null,on=null,Fn=0,zs=0,Au=Ja(0),gn=0,Zd=null,vl=0,xm=0,Iv=0,Jd=null,Es=null,Fv=0,Su=1/0,Zr=null,Cm=!1,Ov=null,ro=null,_m=!1,ao=null,km=0,tf=0,Bv=null,Tm=-1,Pm=0;function ls(){return(se&6)!==0?xe():Tm!==-1?Tm:Tm=xe()}function oo(s){return(s.mode&1)===0?1:(se&2)!==0&&Fn!==0?Fn&-Fn:E_.transition!==null?(Pm===0&&(Pm=Ed()),Pm):(s=fe,s!==0||(s=window.event,s=s===void 0?16:dS(s.type)),s)}function $i(s,i,c,d){if(50<tf)throw tf=0,Bv=null,Error(e(185));xd(s,c,d),((se&2)===0||s!==Cn)&&(s===Cn&&((se&2)===0&&(xm|=c),gn===4&&lo(s,Fn)),xs(s,d),c===1&&se===0&&(i.mode&1)===0&&(Su=xe()+500,sm&&eo()))}function xs(s,i){var c=s.callbackNode;Oi(s,i);var d=as(s,s===Cn?Fn:0);if(d===0)c!==null&&Ig(c),s.callbackNode=null,s.callbackPriority=0;else if(i=d&-d,s.callbackPriority!==i){if(c!=null&&Ig(c),i===1)s.tag===0?b_(d1.bind(null,s)):QS(d1.bind(null,s)),v_(function(){(se&6)===0&&eo()}),c=null;else{switch(iS(d)){case 1:c=hi;break;case 4:c=Ad;break;case 16:c=Fs;break;case 536870912:c=Sd;break;default:c=Fs}c=A1(c,h1.bind(null,s))}s.callbackPriority=i,s.callbackNode=c}}function h1(s,i){if(Tm=-1,Pm=0,(se&6)!==0)throw Error(e(327));var c=s.callbackNode;if(bu()&&s.callbackNode!==c)return null;var d=as(s,s===Cn?Fn:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||i)i=Rm(s,d);else{i=d;var m=se;se|=2;var A=p1();(Cn!==s||Fn!==i)&&(Zr=null,Su=xe()+500,Al(s,i));do try{$_();break}catch(R){f1(s,R)}while(!0);nv(),Em.current=A,se=m,on!==null?i=0:(Cn=null,Fn=0,i=gn)}if(i!==0){if(i===2&&(m=an(s),m!==0&&(d=m,i=Uv(s,m))),i===1)throw c=Zd,Al(s,0),lo(s,d),xs(s,xe()),c;if(i===6)lo(s,d);else{if(m=s.current.alternate,(d&30)===0&&!j_(m)&&(i=Rm(s,d),i===2&&(A=an(s),A!==0&&(d=A,i=Uv(s,A))),i===1))throw c=Zd,Al(s,0),lo(s,d),xs(s,xe()),c;switch(s.finishedWork=m,s.finishedLanes=d,i){case 0:case 1:throw Error(e(345));case 2:Sl(s,Es,Zr);break;case 3:if(lo(s,d),(d&130023424)===d&&(i=Fv+500-xe(),10<i)){if(as(s,0)!==0)break;if(m=s.suspendedLanes,(m&d)!==d){ls(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=V0(Sl.bind(null,s,Es,Zr),i);break}Sl(s,Es,Zr);break;case 4:if(lo(s,d),(d&4194240)===d)break;for(i=s.eventTimes,m=-1;0<d;){var C=31-fn(d);A=1<<C,C=i[C],C>m&&(m=C),d&=~A}if(d=m,d=xe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*z_(d/1960))-d,10<d){s.timeoutHandle=V0(Sl.bind(null,s,Es,Zr),d);break}Sl(s,Es,Zr);break;case 5:Sl(s,Es,Zr);break;default:throw Error(e(329))}}}return xs(s,xe()),s.callbackNode===c?h1.bind(null,s):null}function Uv(s,i){var c=Jd;return s.current.memoizedState.isDehydrated&&(Al(s,i).flags|=256),s=Rm(s,i),s!==2&&(i=Es,Es=c,i!==null&&zv(i)),s}function zv(s){Es===null?Es=s:Es.push.apply(Es,s)}function j_(s){for(var i=s;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var m=c[d],A=m.getSnapshot;m=m.value;try{if(!Bi(A(),m))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function lo(s,i){for(i&=~Iv,i&=~xm,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var c=31-fn(i),d=1<<c;s[c]=-1,i&=~d}}function d1(s){if((se&6)!==0)throw Error(e(327));bu();var i=as(s,0);if((i&1)===0)return xs(s,xe()),null;var c=Rm(s,i);if(s.tag!==0&&c===2){var d=an(s);d!==0&&(i=d,c=Uv(s,d))}if(c===1)throw c=Zd,Al(s,0),lo(s,i),xs(s,xe()),c;if(c===6)throw Error(e(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,Sl(s,Es,Zr),xs(s,xe()),null}function jv(s,i){var c=se;se|=1;try{return s(i)}finally{se=c,se===0&&(Su=xe()+500,sm&&eo())}}function wl(s){ao!==null&&ao.tag===0&&(se&6)===0&&bu();var i=se;se|=1;var c=mi.transition,d=fe;try{if(mi.transition=null,fe=1,s)return s()}finally{fe=d,mi.transition=c,se=i,(se&6)===0&&eo()}}function Hv(){zs=Au.current,Ne(Au)}function Al(s,i){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,y_(c)),on!==null)for(c=on.return;c!==null;){var d=c;switch(Q0(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&em();break;case 3:yu(),Ne(As),Ne(Xn),uv();break;case 5:lv(d);break;case 4:yu();break;case 13:Ne(je);break;case 19:Ne(je);break;case 10:sv(d.type._context);break;case 22:case 23:Hv()}c=c.return}if(Cn=s,on=s=co(s.current,null),Fn=zs=i,gn=0,Zd=null,Iv=xm=vl=0,Es=Jd=null,gl!==null){for(i=0;i<gl.length;i++)if(c=gl[i],d=c.interleaved,d!==null){c.interleaved=null;var m=d.next,A=c.pending;if(A!==null){var C=A.next;A.next=m,d.next=C}c.pending=d}gl=null}return s}function f1(s,i){do{var c=on;try{if(nv(),fm.current=ym,pm){for(var d=He.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}pm=!1}if(yl=0,xn=pn=He=null,Gd=!1,Xd=0,Nv.current=null,c===null||c.return===null){gn=1,Zd=i,on=null;break}t:{var A=s,C=c.return,R=c,N=i;if(i=Fn,R.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var j=N,q=R,Q=q.tag;if((q.mode&1)===0&&(Q===0||Q===11||Q===15)){var X=q.alternate;X?(q.updateQueue=X.updateQueue,q.memoizedState=X.memoizedState,q.lanes=X.lanes):(q.updateQueue=null,q.memoizedState=null)}var ht=Bb(C);if(ht!==null){ht.flags&=-257,Ub(ht,C,R,A,i),ht.mode&1&&Ob(A,j,i),i=ht,N=j;var vt=i.updateQueue;if(vt===null){var wt=new Set;wt.add(N),i.updateQueue=wt}else vt.add(N);break t}else{if((i&1)===0){Ob(A,j,i),$v();break t}N=Error(e(426))}}else if(Fe&&R.mode&1){var en=Bb(C);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),Ub(en,C,R,A,i),tv(vu(N,R));break t}}A=N=vu(N,R),gn!==4&&(gn=2),Jd===null?Jd=[A]:Jd.push(A),A=C;do{switch(A.tag){case 3:A.flags|=65536,i&=-i,A.lanes|=i;var B=Ib(A,N,i);lb(A,B);break t;case 1:R=N;var F=A.type,z=A.stateNode;if((A.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ro===null||!ro.has(z)))){A.flags|=65536,i&=-i,A.lanes|=i;var J=Fb(A,R,i);lb(A,J);break t}}A=A.return}while(A!==null)}m1(c)}catch(Et){i=Et,on===c&&c!==null&&(on=c=c.return);continue}break}while(!0)}function p1(){var s=Em.current;return Em.current=ym,s===null?ym:s}function $v(){(gn===0||gn===3||gn===2)&&(gn=4),Cn===null||(vl&268435455)===0&&(xm&268435455)===0||lo(Cn,Fn)}function Rm(s,i){var c=se;se|=2;var d=p1();(Cn!==s||Fn!==i)&&(Zr=null,Al(s,i));do try{H_();break}catch(m){f1(s,m)}while(!0);if(nv(),se=c,Em.current=d,on!==null)throw Error(e(261));return Cn=null,Fn=0,gn}function H_(){for(;on!==null;)g1(on)}function $_(){for(;on!==null&&!v0();)g1(on)}function g1(s){var i=w1(s.alternate,s,zs);s.memoizedProps=s.pendingProps,i===null?m1(s):on=i,Nv.current=null}function m1(s){var i=s;do{var c=i.alternate;if(s=i.return,(i.flags&32768)===0){if(c=I_(c,i,zs),c!==null){on=c;return}}else{if(c=F_(c,i),c!==null){c.flags&=32767,on=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{gn=6,on=null;return}}if(i=i.sibling,i!==null){on=i;return}on=i=s}while(i!==null);gn===0&&(gn=5)}function Sl(s,i,c){var d=fe,m=mi.transition;try{mi.transition=null,fe=1,W_(s,i,c,d)}finally{mi.transition=m,fe=d}return null}function W_(s,i,c,d){do bu();while(ao!==null);if((se&6)!==0)throw Error(e(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(e(177));s.callbackNode=null,s.callbackPriority=0;var A=c.lanes|c.childLanes;if(xC(s,A),s===Cn&&(on=Cn=null,Fn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||_m||(_m=!0,A1(Fs,function(){return bu(),null})),A=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||A){A=mi.transition,mi.transition=null;var C=fe;fe=1;var R=se;se|=4,Nv.current=null,B_(s,c),a1(c,s),u_($0),jg=!!H0,$0=H0=null,s.current=c,U_(c),ze(),se=R,fe=C,mi.transition=A}else s.current=c;if(_m&&(_m=!1,ao=s,km=m),A=s.pendingLanes,A===0&&(ro=null),Og(c.stateNode),xs(s,xe()),i!==null)for(d=s.onRecoverableError,c=0;c<i.length;c++)m=i[c],d(m.value,{componentStack:m.stack,digest:m.digest});if(Cm)throw Cm=!1,s=Ov,Ov=null,s;return(km&1)!==0&&s.tag!==0&&bu(),A=s.pendingLanes,(A&1)!==0?s===Bv?tf++:(tf=0,Bv=s):tf=0,eo(),null}function bu(){if(ao!==null){var s=iS(km),i=mi.transition,c=fe;try{if(mi.transition=null,fe=16>s?16:s,ao===null)var d=!1;else{if(s=ao,ao=null,km=0,(se&6)!==0)throw Error(e(331));var m=se;for(se|=4,mt=s.current;mt!==null;){var A=mt,C=A.child;if((mt.flags&16)!==0){var R=A.deletions;if(R!==null){for(var N=0;N<R.length;N++){var j=R[N];for(mt=j;mt!==null;){var q=mt;switch(q.tag){case 0:case 11:case 15:Qd(8,q,A)}var Q=q.child;if(Q!==null)Q.return=q,mt=Q;else for(;mt!==null;){q=mt;var X=q.sibling,ht=q.return;if(e1(q),q===j){mt=null;break}if(X!==null){X.return=ht,mt=X;break}mt=ht}}}var vt=A.alternate;if(vt!==null){var wt=vt.child;if(wt!==null){vt.child=null;do{var en=wt.sibling;wt.sibling=null,wt=en}while(wt!==null)}}mt=A}}if((A.subtreeFlags&2064)!==0&&C!==null)C.return=A,mt=C;else t:for(;mt!==null;){if(A=mt,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Qd(9,A,A.return)}var B=A.sibling;if(B!==null){B.return=A.return,mt=B;break t}mt=A.return}}var F=s.current;for(mt=F;mt!==null;){C=mt;var z=C.child;if((C.subtreeFlags&2064)!==0&&z!==null)z.return=C,mt=z;else t:for(C=F;mt!==null;){if(R=mt,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:bm(9,R)}}catch(Et){qe(R,R.return,Et)}if(R===C){mt=null;break t}var J=R.sibling;if(J!==null){J.return=R.return,mt=J;break t}mt=R.return}}if(se=m,eo(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(En,s)}catch{}d=!0}return d}finally{fe=c,mi.transition=i}}return!1}function y1(s,i,c){i=vu(c,i),i=Ib(s,i,1),s=so(s,i,1),i=ls(),s!==null&&(xd(s,1,i),xs(s,i))}function qe(s,i,c){if(s.tag===3)y1(s,s,c);else for(;i!==null;){if(i.tag===3){y1(i,s,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ro===null||!ro.has(d))){s=vu(c,s),s=Fb(i,s,1),i=so(i,s,1),s=ls(),i!==null&&(xd(i,1,s),xs(i,s));break}}i=i.return}}function V_(s,i,c){var d=s.pingCache;d!==null&&d.delete(i),i=ls(),s.pingedLanes|=s.suspendedLanes&c,Cn===s&&(Fn&c)===c&&(gn===4||gn===3&&(Fn&130023424)===Fn&&500>xe()-Fv?Al(s,0):Iv|=c),xs(s,i)}function v1(s,i){i===0&&((s.mode&1)===0?i=1:(i=ne,ne<<=1,(ne&130023424)===0&&(ne=4194304)));var c=ls();s=Yr(s,i),s!==null&&(xd(s,i,c),xs(s,c))}function G_(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),v1(s,c)}function X_(s,i){var c=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(e(314))}d!==null&&d.delete(i),v1(s,c)}var w1;w1=function(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps||As.current)bs=!0;else{if((s.lanes&c)===0&&(i.flags&128)===0)return bs=!1,N_(s,i,c);bs=(s.flags&131072)!==0}else bs=!1,Fe&&(i.flags&1048576)!==0&&ZS(i,rm,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Am(s,i),s=i.pendingProps;var m=uu(i,Xn.current);mu(i,c),m=fv(null,i,d,s,m,c);var A=pv();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ss(d)?(A=!0,nm(i)):A=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,av(i),m.updater=vm,i.stateNode=m,m._reactInternals=i,Av(i,d,s,c),i=xv(null,i,d,!0,A,c)):(i.tag=0,Fe&&A&&K0(i),os(null,i,m,c),i=i.child),i;case 16:d=i.elementType;t:{switch(Am(s,i),s=i.pendingProps,m=d._init,d=m(d._payload),i.type=d,m=i.tag=Y_(d),s=zi(d,s),m){case 0:i=Ev(null,i,d,s,c);break t;case 1:i=Vb(null,i,d,s,c);break t;case 11:i=zb(null,i,d,s,c);break t;case 14:i=jb(null,i,d,zi(d.type,s),c);break t}throw Error(e(306,d,""))}return i;case 0:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:zi(d,m),Ev(s,i,d,m,c);case 1:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:zi(d,m),Vb(s,i,d,m,c);case 3:t:{if(Gb(i),s===null)throw Error(e(387));d=i.pendingProps,A=i.memoizedState,m=A.element,ob(s,i),hm(i,d,null,c);var C=i.memoizedState;if(d=C.element,A.isDehydrated)if(A={element:d,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){m=vu(Error(e(423)),i),i=Xb(s,i,d,c,m);break t}else if(d!==m){m=vu(Error(e(424)),i),i=Xb(s,i,d,c,m);break t}else for(Us=Za(i.stateNode.containerInfo.firstChild),Bs=i,Fe=!0,Ui=null,c=rb(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(fu(),d===m){i=Qr(s,i,c);break t}os(s,i,d,c)}i=i.child}return i;case 5:return ub(i),s===null&&J0(i),d=i.type,m=i.pendingProps,A=s!==null?s.memoizedProps:null,C=m.children,W0(d,m)?C=null:A!==null&&W0(d,A)&&(i.flags|=32),Wb(s,i),os(s,i,C,c),i.child;case 6:return s===null&&J0(i),null;case 13:return qb(s,i,c);case 4:return ov(i,i.stateNode.containerInfo),d=i.pendingProps,s===null?i.child=pu(i,null,d,c):os(s,i,d,c),i.child;case 11:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:zi(d,m),zb(s,i,d,m,c);case 7:return os(s,i,i.pendingProps,c),i.child;case 8:return os(s,i,i.pendingProps.children,c),i.child;case 12:return os(s,i,i.pendingProps.children,c),i.child;case 10:t:{if(d=i.type._context,m=i.pendingProps,A=i.memoizedProps,C=m.value,Pe(lm,d._currentValue),d._currentValue=C,A!==null)if(Bi(A.value,C)){if(A.children===m.children&&!As.current){i=Qr(s,i,c);break t}}else for(A=i.child,A!==null&&(A.return=i);A!==null;){var R=A.dependencies;if(R!==null){C=A.child;for(var N=R.firstContext;N!==null;){if(N.context===d){if(A.tag===1){N=Kr(-1,c&-c),N.tag=2;var j=A.updateQueue;if(j!==null){j=j.shared;var q=j.pending;q===null?N.next=N:(N.next=q.next,q.next=N),j.pending=N}}A.lanes|=c,N=A.alternate,N!==null&&(N.lanes|=c),iv(A.return,c,i),R.lanes|=c;break}N=N.next}}else if(A.tag===10)C=A.type===i.type?null:A.child;else if(A.tag===18){if(C=A.return,C===null)throw Error(e(341));C.lanes|=c,R=C.alternate,R!==null&&(R.lanes|=c),iv(C,c,i),C=A.sibling}else C=A.child;if(C!==null)C.return=A;else for(C=A;C!==null;){if(C===i){C=null;break}if(A=C.sibling,A!==null){A.return=C.return,C=A;break}C=C.return}A=C}os(s,i,m.children,c),i=i.child}return i;case 9:return m=i.type,d=i.pendingProps.children,mu(i,c),m=pi(m),d=d(m),i.flags|=1,os(s,i,d,c),i.child;case 14:return d=i.type,m=zi(d,i.pendingProps),m=zi(d.type,m),jb(s,i,d,m,c);case 15:return Hb(s,i,i.type,i.pendingProps,c);case 17:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:zi(d,m),Am(s,i),i.tag=1,Ss(d)?(s=!0,nm(i)):s=!1,mu(i,c),Db(i,d,m),Av(i,d,m,c),xv(null,i,d,!0,s,c);case 19:return Kb(s,i,c);case 22:return $b(s,i,c)}throw Error(e(156,i.tag))};function A1(s,i){return Nn(s,i)}function q_(s,i,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(s,i,c,d){return new q_(s,i,c,d)}function Wv(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Y_(s){if(typeof s=="function")return Wv(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Ct)return 11;if(s===Tt)return 14}return 2}function co(s,i){var c=s.alternate;return c===null?(c=yi(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Mm(s,i,c,d,m,A){var C=2;if(d=s,typeof s=="function")Wv(s)&&(C=1);else if(typeof s=="string")C=5;else t:switch(s){case U:return bl(c.children,m,A,i);case V:C=8,m|=8;break;case Y:return s=yi(12,c,i,m|2),s.elementType=Y,s.lanes=A,s;case _t:return s=yi(13,c,i,m),s.elementType=_t,s.lanes=A,s;case At:return s=yi(19,c,i,m),s.elementType=At,s.lanes=A,s;case st:return Lm(c,m,A,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case et:C=10;break t;case Z:C=9;break t;case Ct:C=11;break t;case Tt:C=14;break t;case ot:C=16,d=null;break t}throw Error(e(130,s==null?s:typeof s,""))}return i=yi(C,c,i,m),i.elementType=s,i.type=d,i.lanes=A,i}function bl(s,i,c,d){return s=yi(7,s,d,i),s.lanes=c,s}function Lm(s,i,c,d){return s=yi(22,s,d,i),s.elementType=st,s.lanes=c,s.stateNode={isHidden:!1},s}function Vv(s,i,c){return s=yi(6,s,null,i),s.lanes=c,s}function Gv(s,i,c){return i=yi(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function K_(s,i,c,d,m){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w0(0),this.expirationTimes=w0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w0(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Xv(s,i,c,d,m,A,C,R,N){return s=new K_(s,i,c,R,N),i===1?(i=1,A===!0&&(i|=8)):i=0,A=yi(3,null,null,i),s.current=A,A.stateNode=s,A.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},av(A),s}function Q_(s,i,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:d==null?null:""+d,children:s,containerInfo:i,implementation:c}}function S1(s){if(!s)return to;s=s._reactInternals;t:{if(Gn(s)!==s||s.tag!==1)throw Error(e(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break t;case 1:if(Ss(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break t}}i=i.return}while(i!==null);throw Error(e(171))}if(s.tag===1){var c=s.type;if(Ss(c))return YS(s,c,i)}return i}function b1(s,i,c,d,m,A,C,R,N){return s=Xv(c,d,!0,s,m,A,C,R,N),s.context=S1(null),c=s.current,d=ls(),m=oo(c),A=Kr(d,m),A.callback=i??null,so(c,A,m),s.current.lanes=m,xd(s,m,d),xs(s,d),s}function Dm(s,i,c,d){var m=i.current,A=ls(),C=oo(m);return c=S1(c),i.context===null?i.context=c:i.pendingContext=c,i=Kr(A,C),i.payload={element:s},d=d===void 0?null:d,d!==null&&(i.callback=d),s=so(m,i,C),s!==null&&($i(s,m,C,A),um(s,m,C)),C}function Nm(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function E1(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function qv(s,i){E1(s,i),(s=s.alternate)&&E1(s,i)}function Z_(){return null}var x1=typeof reportError=="function"?reportError:function(s){console.error(s)};function Yv(s){this._internalRoot=s}Im.prototype.render=Yv.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(e(409));Dm(s,i,null,null)},Im.prototype.unmount=Yv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;wl(function(){Dm(null,s,null,null)}),i[Vr]=null}};function Im(s){this._internalRoot=s}Im.prototype.unstable_scheduleHydration=function(s){if(s){var i=oS();s={blockedOn:null,target:s,priority:i};for(var c=0;c<Ya.length&&i!==0&&i<Ya[c].priority;c++);Ya.splice(c,0,s),c===0&&uS(s)}};function Kv(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Fm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function C1(){}function J_(s,i,c,d,m){if(m){if(typeof d=="function"){var A=d;d=function(){var j=Nm(C);A.call(j)}}var C=b1(i,d,s,0,null,!1,!1,"",C1);return s._reactRootContainer=C,s[Vr]=C.current,Bd(s.nodeType===8?s.parentNode:s),wl(),C}for(;m=s.lastChild;)s.removeChild(m);if(typeof d=="function"){var R=d;d=function(){var j=Nm(N);R.call(j)}}var N=Xv(s,0,!1,null,null,!1,!1,"",C1);return s._reactRootContainer=N,s[Vr]=N.current,Bd(s.nodeType===8?s.parentNode:s),wl(function(){Dm(i,N,c,d)}),N}function Om(s,i,c,d,m){var A=c._reactRootContainer;if(A){var C=A;if(typeof m=="function"){var R=m;m=function(){var N=Nm(C);R.call(N)}}Dm(i,C,s,m)}else C=J_(c,i,s,m,d);return Nm(C)}rS=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var c=Xe(i.pendingLanes);c!==0&&(A0(i,c|1),xs(i,xe()),(se&6)===0&&(Su=xe()+500,eo()))}break;case 13:wl(function(){var d=Yr(s,1);if(d!==null){var m=ls();$i(d,s,1,m)}}),qv(s,1)}},S0=function(s){if(s.tag===13){var i=Yr(s,134217728);if(i!==null){var c=ls();$i(i,s,134217728,c)}qv(s,134217728)}},aS=function(s){if(s.tag===13){var i=oo(s),c=Yr(s,i);if(c!==null){var d=ls();$i(c,s,i,d)}qv(s,i)}},oS=function(){return fe},lS=function(s,i){var c=fe;try{return fe=s,i()}finally{fe=c}},yd=function(s,i,c){switch(i){case"input":if(hd(s,c),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==s&&d.form===s.form){var m=tm(d);if(!m)throw Error(e(90));Wa(d),hd(d,m)}}}break;case"textarea":fd(s,c);break;case"select":i=c.value,i!=null&&Va(s,!!c.multiple,i,!1)}},G=jv,ct=wl;var tk={usingClientEntryPoint:!1,Events:[jd,lu,tm,Ng,$,jv]},ef={findFiberByHostInstance:hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ek={bundleType:ef.bundleType,version:ef.version,rendererPackageName:ef.rendererPackageName,rendererConfig:ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=vd(s),s===null?null:s.stateNode},findFiberByHostInstance:ef.findFiberByHostInstance||Z_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bm.isDisabled&&Bm.supportsFiber)try{En=Bm.inject(ek),rs=Bm}catch{}}return Cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tk,Cs.createPortal=function(s,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kv(i))throw Error(e(200));return Q_(s,i,null,c)},Cs.createRoot=function(s,i){if(!Kv(s))throw Error(e(299));var c=!1,d="",m=x1;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=Xv(s,1,!1,null,null,c,!1,d,m),s[Vr]=i.current,Bd(s.nodeType===8?s.parentNode:s),new Yv(i)},Cs.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(e(188)):(s=Object.keys(s).join(","),Error(e(268,s)));return s=vd(i),s=s===null?null:s.stateNode,s},Cs.flushSync=function(s){return wl(s)},Cs.hydrate=function(s,i,c){if(!Fm(i))throw Error(e(200));return Om(null,s,i,!0,c)},Cs.hydrateRoot=function(s,i,c){if(!Kv(s))throw Error(e(405));var d=c!=null&&c.hydratedSources||null,m=!1,A="",C=x1;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(A=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),i=b1(i,null,s,1,c??null,m,!1,A,C),s[Vr]=i.current,Bd(s),d)for(s=0;s<d.length;s++)c=d[s],m=c._getVersion,m=m(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,m]:i.mutableSourceEagerHydrationData.push(c,m);return new Im(i)},Cs.render=function(s,i,c){if(!Fm(i))throw Error(e(200));return Om(null,s,i,!1,c)},Cs.unmountComponentAtNode=function(s){if(!Fm(s))throw Error(e(40));return s._reactRootContainer?(wl(function(){Om(null,null,s,!1,function(){s._reactRootContainer=null,s[Vr]=null})}),!0):!1},Cs.unstable_batchedUpdates=jv,Cs.unstable_renderSubtreeIntoContainer=function(s,i,c,d){if(!Fm(c))throw Error(e(200));if(s==null||s._reactInternals===void 0)throw Error(e(38));return Om(s,i,c,!1,d)},Cs.version="18.3.1-next-f1338f8080-20240426",Cs}var N1;function dk(){if(N1)return tw.exports;N1=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),tw.exports=hk(),tw.exports}var I1;function fk(){if(I1)return Um;I1=1;var g=dk();return Um.createRoot=g.createRoot,Um.hydrateRoot=g.hydrateRoot,Um}var pk=fk();const gk=dE(pk),ps=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),dw=[.001,0,0,.001,0,0],sw=1.35,oi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},fo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Mf="pdfjs_internal_editor_",Ht={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},te={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},mk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},fw={TRIANGLES:1,LATTICE:2},yn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ym={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},cn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},xu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},l0={ERRORS:0,WARNINGS:1,INFOS:5},Lf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},sf={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},yk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let c0=l0.WARNINGS;function vk(g){Number.isInteger(g)&&(c0=g)}function wk(){return c0}function u0(g){c0>=l0.INFOS&&console.info(`Info: ${g}`)}function Bt(g){c0>=l0.WARNINGS&&console.warn(`Warning: ${g}`)}function Te(g){throw new Error(g)}function ee(g,t){g||Te(t)}function Ak(g){switch(g==null?void 0:g.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fE(g,t=null,e=null){if(!g)return null;if(e&&typeof g=="string"){if(e.addDefaultProtocol&&g.startsWith("www.")){const r=g.match(/\./g);(r==null?void 0:r.length)>=2&&(g=`http://${g}`)}if(e.tryConvertEncoding)try{g=Ck(g)}catch{}}const n=t?URL.parse(g,t):URL.parse(g);return Ak(n)?n:null}function pE(g,t,e=!1){const n=URL.parse(g);return n?(n.hash=t,n.href):e&&fE(g,"http://example.com")?g.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ut(g,t,e,n=!1){return Object.defineProperty(g,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Xc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class F1 extends Xc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class iw extends Xc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class pw extends Xc{constructor(t){super(t,"InvalidPDFException")}}class Py extends Xc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class Sk extends Xc{constructor(t){super(t,"FormatError")}}class il extends Xc{constructor(t){super(t,"AbortException")}}function gE(g){(typeof g!="object"||(g==null?void 0:g.length)===void 0)&&Te("Invalid argument for bytesToString");const t=g.length,e=8192;if(t<e)return String.fromCharCode.apply(null,g);const n=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),l=g.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function _g(g){typeof g!="string"&&Te("Invalid argument for stringToBytes");const t=g.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=g.charCodeAt(n)&255;return e}function bk(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function Ek(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function xk(){try{return new Function(""),!0}catch{return!1}}class bn{static get isLittleEndian(){return Ut(this,"isLittleEndian",Ek())}static get isEvalSupported(){return Ut(this,"isEvalSupported",xk())}static get isOffscreenCanvasSupported(){return Ut(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ut(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ut(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ut(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ut(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Ut(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const rw=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));var Ua,Km,gw;class ut{static makeHexColor(t,e,n){return`#${rw[t]}${rw[e]}${rw[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const r=t[n],o=t[n+1];t[n]=r*e[0]+o*e[2]+e[4],t[n+1]=r*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5];for(let p=0;p<6;p+=2){const y=t[n+p],v=t[n+p+1];t[n+p]=y*r+v*l+h,t[n+p+1]=y*o+v*u+f}}static applyInverseTransform(t,e){const n=t[0],r=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const r=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5],p=t[0],y=t[1],v=t[2],S=t[3];let _=r*p+h,x=_,T=r*v+h,k=T,M=u*y+f,P=M,L=u*S+f,D=L;if(o!==0||l!==0){const I=o*p,U=o*v,V=l*y,Y=l*S;_+=V,k+=V,T+=Y,x+=Y,M+=I,D+=I,L+=U,P+=U}n[0]=Math.min(n[0],_,T,x,k),n[1]=Math.min(n[1],M,L,P,D),n[2]=Math.max(n[2],_,T,x,k),n[3]=Math.max(n[3],M,L,P,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],o=t[2],l=t[3],u=n**2+r**2,h=n*o+r*l,f=o**2+l**2,p=(u+f)/2,y=Math.sqrt(p**2-(u*f-h**2));e[0]=Math.sqrt(p+y||1),e[1]=Math.sqrt(p-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,r,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,r),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,r)}static bezierBoundingBox(t,e,n,r,o,l,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),E(this,Ua,gw).call(this,t,n,o,u,e,r,l,h,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),E(this,Ua,gw).call(this,t,n,o,u,e,r,l,h,3*(-e+3*(r-l)+h),6*(e-2*r+l),3*(r-e),f)}}Ua=new WeakSet,Km=function(t,e,n,r,o,l,u,h,f,p){if(f<=0||f>=1)return;const y=1-f,v=f*f,S=v*f,_=y*(y*(y*t+3*f*e)+3*v*n)+S*r,x=y*(y*(y*o+3*f*l)+3*v*u)+S*h;p[0]=Math.min(p[0],_),p[1]=Math.min(p[1],x),p[2]=Math.max(p[2],_),p[3]=Math.max(p[3],x)},gw=function(t,e,n,r,o,l,u,h,f,p,y,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&E(this,Ua,Km).call(this,t,e,n,r,o,l,u,h,-y/p,v);return}const S=p**2-4*y*f;if(S<0)return;const _=Math.sqrt(S),x=2*f;E(this,Ua,Km).call(this,t,e,n,r,o,l,u,h,(-p+_)/x,v),E(this,Ua,Km).call(this,t,e,n,r,o,l,u,h,(-p-_)/x,v)},b(ut,Ua);function Ck(g){return decodeURIComponent(escape(g))}let aw=null,O1=null;function _k(g){return aw||(aw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,O1=new Map([["","t"]])),g.replaceAll(aw,(t,e,n)=>e?e.normalize("NFKC"):O1.get(n))}function mE(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const g=new Uint8Array(32);return crypto.getRandomValues(g),gE(g)}const Lu="pdfjs_internal_id_";function kk(g,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...o]=e;if(!g(n)&&!Number.isInteger(n)||!t(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function gs(g,t,e){return Math.min(Math.max(g,t),e)}function yE(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(gE(g))}function Tk(g){return Uint8Array.fromBase64?Uint8Array.fromBase64(g):_g(atob(g))}typeof Promise.try!="function"&&(Promise.try=function(g,...t){return new Promise(e=>{e(g(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(g){return g.reduce((t,e)=>t+e,0)});class Df{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(o){var h;if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Df.shouldBuildText(u))(h=o==null?void 0:o.attributes)!=null&&h.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const f of o.children)r(f)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class vE{static setupStorage(t,e,n,r,o){const l=r.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var y,v;const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const u=o!=="richText",h=t.div;if(h.append(l),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=S}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const S=document.createTextNode(r.value);l.append(S),u&&Df.shouldBuildText(r.name)&&f.push(S)}return{textDivs:f}}const p=[[r,-1,l]];for(;p.length>0;){const[S,_,x]=p.at(-1);if(_+1===S.children.length){p.pop();continue}const T=S.children[++p.at(-1)[1]];if(T===null)continue;const{name:k}=T;if(k==="#text"){const P=document.createTextNode(T.value);f.push(P),x.append(P);continue}const M=(y=T==null?void 0:T.attributes)!=null&&y.xmlns?document.createElementNS(T.attributes.xmlns,k):document.createElement(k);if(x.append(M),T.attributes&&this.setAttributes({html:M,element:T,storage:e,intent:o,linkService:n}),((v=T.children)==null?void 0:v.length)>0)p.push([T,-1,M]);else if(T.value){const P=document.createTextNode(T.value);u&&Df.shouldBuildText(k)&&f.push(P),M.append(P)}}for(const S of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Jr="http://www.w3.org/2000/svg",_l=class _l{};K(_l,"CSS",96),K(_l,"PDF",72),K(_l,"PDF_TO_CSS_UNITS",_l.CSS/_l.PDF);let rl=_l;async function kg(g,t="text"){if(uf(g,document.baseURI)){const e=await fetch(g);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",g,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Tg{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,y,v,S;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,y=0,v=0,S=1;break;case 90:p=0,y=1,v=1,S=0;break;case 270:p=0,y=-1,v=-1,S=0;break;case 0:p=1,y=0,v=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,S=-S);let _,x,T,k;p===0?(_=Math.abs(f-t[1])*n+o,x=Math.abs(h-t[0])*n+l,T=(t[3]-t[1])*n,k=(t[2]-t[0])*n):(_=Math.abs(h-t[0])*n+o,x=Math.abs(f-t[1])*n+l,T=(t[2]-t[0])*n,k=(t[3]-t[1])*n),this.transform=[p*n,y*n,v*n,S*n,_-p*n*h-v*n*f,x-y*n*h-S*n*f],this.width=T,this.height=k}get rawDims(){const t=this.viewBox;return Ut(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Tg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return ut.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ut.applyTransform(e,this.transform);const n=[t[2],t[3]];return ut.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ut.applyInverseTransform(n,this.transform),n}}class $A extends Xc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function h0(g){const t=g.length;let e=0;for(;e<t&&g[e].trim()==="";)e++;return g.substring(e,e+5).toLowerCase()==="data:"}function WA(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function Pk(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function Rk(g,t="document.pdf"){if(typeof g!="string")return t;if(h0(g))return Bt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(g);if(!n)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return r(l);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return r(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return r(h[0])}return t}class B1{constructor(){K(this,"started",Object.create(null));K(this,"times",[])}time(t){t in this.started&&Bt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Bt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-r}ms
`);return t.join("")}}function uf(g,t){const e=t?URL.parse(g,t):URL.parse(g);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Ni(g){g.preventDefault()}function tn(g){g.preventDefault(),g.stopPropagation()}function Mk(g){console.log("Deprecated API usage: "+g)}var Ff;class Ry{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;a(this,Ff)||w(this,Ff,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Ff).exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=p,u+=y):f==="+"&&(l-=p,u-=y),new Date(Date.UTC(n,r,o,l,u,h))}}Ff=new WeakMap,b(Ry,Ff);function Lk(g,{scale:t=1,rotation:e=0}){const{width:n,height:r}=g.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new Tg({viewBox:o,userUnit:1,scale:t,rotation:e})}function Pg(g){if(g.startsWith("#")){const t=parseInt(g.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(t=>parseInt(t)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Bt(`Not a valid color format: "${g}"`),[0,0,0])}function Dk(g){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of g.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;g.set(e,Pg(n))}t.remove()}function We(g){const{a:t,b:e,c:n,d:r,e:o,f:l}=g.getTransform();return[t,e,n,r,o,l]}function pr(g){const{a:t,b:e,c:n,d:r,e:o,f:l}=g.getTransform().invertSelf();return[t,e,n,r,o,l]}function Wc(g,t,e=!1,n=!0){if(t instanceof Tg){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=g,u=bn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=y):(l.width=y,l.height=p)}n&&g.setAttribute("data-main-rotation",t.rotation)}class zr{constructor(){const{pixelRatio:t}=zr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,o=-1){let l=1/0,u=1/0,h=1/0;n=zr.capPixels(n,o),n>0&&(l=Math.sqrt(n/(t*e))),r!==-1&&(u=r/t,h=r/e);const f=Math.min(l,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const mw=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Nk{static get isDarkMode(){var t;return Ut(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class Ik{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Ut(this,"commentForegroundColor",Pg(n))}}function Fk(g,t,e,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return g=Math.round(g*n+r),t=Math.round(t*n+r),e=Math.round(e*n+r),[g,t,e]}function U1(g,t){const e=g[0]/255,n=g[1]/255,r=g[2]/255,o=Math.max(e,n,r),l=Math.min(e,n,r),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const h=o-l;switch(t[1]=u<.5?h/(o+l):h/(2-o-l),o){case e:t[0]=((n-r)/h+(n<r?6:0))*60;break;case n:t[0]=((r-e)/h+2)*60;break;case r:t[0]=((e-n)/h+4)*60;break}}t[2]=u}function yw(g,t){const e=g[0],n=g[1],r=g[2],o=(1-Math.abs(2*r-1))*n,l=o*(1-Math.abs(e/60%2-1)),u=r-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function z1(g){return g<=.03928?g/12.92:((g+.055)/1.055)**2.4}function j1(g,t,e){yw(g,e),e.map(z1);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];yw(t,e),e.map(z1);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const H1=new Map;function Ok(g,t){const e=g[0]+g[1]*256+g[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=H1.get(e);if(n)return n;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);U1(g,l);const u=r.subarray(6,9);U1(t,u);const h=u[2]<.5,f=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),j1(l,u,o)<f){let p,y;h?(p=l[2],y=1):(p=0,y=l[2]);const v=.005;for(;y-p>v;){const S=l[2]=(p+y)/2;h===j1(l,u,o)<f?p=S:y=S}l[2]=h?y:p}return yw(l,o),n=ut.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),H1.set(e,n),n}function wE({html:g,dir:t,className:e},n){const r=document.createDocumentFragment();if(typeof g=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=g.split(/(?:\r\n?|\n)/);for(let u=0,h=l.length;u<h;++u){const f=l[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}r.append(o)}else vE.render({xfaHtml:g,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",e),n.append(r)}function AE(g){const t=new Path2D;if(!g)return t;for(let e=0,n=g.length;e<n;)switch(g[e++]){case sf.moveTo:t.moveTo(g[e++],g[e++]);break;case sf.lineTo:t.lineTo(g[e++],g[e++]);break;case sf.curveTo:t.bezierCurveTo(g[e++],g[e++],g[e++],g[e++],g[e++],g[e++]);break;case sf.quadraticCurveTo:t.quadraticCurveTo(g[e++],g[e++],g[e++],g[e++]);break;case sf.closePath:t.closePath();break;default:Bt(`Unrecognized drawing path operator: ${g[e-1]}`);break}return t}var po,go,Ai,Si,Of,mo,Uu,zu,Bf,$y,SE,Vn,bE,EE,Cu,hf;const na=class na{constructor(t){b(this,Vn);b(this,po,null);b(this,go,null);b(this,Ai);b(this,Si,null);b(this,Of,null);b(this,mo,null);b(this,Uu,null);b(this,zu,null);w(this,Ai,t),a(na,Bf)||w(na,Bf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=w(this,po,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Ai)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Ni,{signal:e}),t.addEventListener("pointerdown",E(na,$y,SE),{signal:e}));const n=w(this,Si,document.createElement("div"));n.className="buttons",t.append(n);const r=a(this,Ai).toolbarPosition;if(r){const{style:o}=t,l=a(this,Ai)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return a(this,po)}hide(){var t;a(this,po).classList.add("hidden"),(t=a(this,go))==null||t.hideDropdown()}show(){var t,e;a(this,po).classList.remove("hidden"),(t=a(this,Of))==null||t.shown(),(e=a(this,mo))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=a(this,Ai),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",a(na,Bf)[t]),E(this,Vn,Cu).call(this,n)&&n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),a(this,Si).append(n)}async addAltText(t){const e=await t.render();E(this,Vn,Cu).call(this,e),a(this,Si).append(e,a(this,Vn,hf)),w(this,Of,t)}addComment(t,e=null){if(a(this,mo))return;const n=t.renderForToolbar();if(!n)return;E(this,Vn,Cu).call(this,n);const r=w(this,Uu,a(this,Vn,hf));e?(a(this,Si).insertBefore(n,e),a(this,Si).insertBefore(r,e)):a(this,Si).append(n,r),w(this,mo,t),t.toolbar=this}addColorPicker(t){if(a(this,go))return;w(this,go,t);const e=t.renderButton();E(this,Vn,Cu).call(this,e),a(this,Si).append(e,a(this,Vn,hf))}async addEditSignatureButton(t){const e=w(this,zu,await t.renderEditButton(a(this,Ai)));E(this,Vn,Cu).call(this,e),a(this,Si).append(e,a(this,Vn,hf))}removeButton(t){var e,n;switch(t){case"comment":(e=a(this,mo))==null||e.removeToolbarCommentButton(),w(this,mo,null),(n=a(this,Uu))==null||n.remove(),w(this,Uu,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const r=a(this,Si).querySelector(n);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){a(this,zu)&&(a(this,zu).title=t)}remove(){var t;a(this,po).remove(),(t=a(this,go))==null||t.destroy(),w(this,go,null)}};po=new WeakMap,go=new WeakMap,Ai=new WeakMap,Si=new WeakMap,Of=new WeakMap,mo=new WeakMap,Uu=new WeakMap,zu=new WeakMap,Bf=new WeakMap,$y=new WeakSet,SE=function(t){t.stopPropagation()},Vn=new WeakSet,bE=function(t){a(this,Ai)._focusEventsAllowed=!1,tn(t)},EE=function(t){a(this,Ai)._focusEventsAllowed=!0,tn(t)},Cu=function(t){const e=a(this,Ai)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",E(this,Vn,bE).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,Vn,EE).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ni,{signal:e}),!0)},hf=function(){const t=document.createElement("div");return t.className="divider",t},b(na,$y),b(na,Bf,null);let vw=na;var Uf,Pl,ia,Ha,xE,CE,ww;class Bk{constructor(t){b(this,Ha);b(this,Uf,null);b(this,Pl,null);b(this,ia);w(this,ia,t)}show(t,e,n){const[r,o]=E(this,Ha,CE).call(this,e,n),{style:l}=a(this,Pl)||w(this,Pl,E(this,Ha,xE).call(this));t.append(a(this,Pl)),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Pl).remove()}}Uf=new WeakMap,Pl=new WeakMap,ia=new WeakMap,Ha=new WeakSet,xE=function(){const t=w(this,Pl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=a(this,ia)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Ni,{signal:e});const n=w(this,Uf,document.createElement("div"));return n.className="buttons",t.append(n),a(this,ia).hasCommentManager()&&E(this,Ha,ww).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,ia).commentSelection("floating_button")}),E(this,Ha,ww).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,ia).highlightSelection("floating_button")}),t},CE=function(t,e){let n=0,r=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const u=o.x+(e?o.width:0);if(l>n){r=u,n=l;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,n]},ww=function(t,e,n,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const u=a(this,ia)._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",Ni,{signal:u}),o.addEventListener("click",r,{signal:u})),a(this,Uf).append(o)};function _E(g,t,e){for(const n of e)t.addEventListener(n,g[n].bind(g))}var Rl,Ml,ju,Ll;const ye=class ye{static initializeAndAddPointerId(t){(a(ye,Ml)||w(ye,Ml,new Set)).add(t)}static setPointer(t,e){a(ye,Rl)||w(ye,Rl,e),a(ye,Ll)??w(ye,Ll,t)}static setTimeStamp(t){w(ye,ju,t)}static isSamePointerId(t){return a(ye,Rl)===t}static isSamePointerIdOrRemove(t){var e;return a(ye,Rl)===t?!0:((e=a(ye,Ml))==null||e.delete(t),!1)}static isSamePointerType(t){return a(ye,Ll)===t}static isInitializedAndDifferentPointerType(t){return a(ye,Ll)!==null&&!ye.isSamePointerType(t)}static isSameTimeStamp(t){return a(ye,ju)===t}static isUsingMultiplePointers(){var t;return((t=a(ye,Ml))==null?void 0:t.size)>=1}static clearPointerType(){w(ye,Ll,null)}static clearPointerIds(){w(ye,Rl,NaN),w(ye,Ml,null)}static clearTimeStamp(){w(ye,ju,NaN)}};Rl=new WeakMap,Ml=new WeakMap,ju=new WeakMap,Ll=new WeakMap,b(ye,Rl,NaN),b(ye,Ml,null),b(ye,ju,NaN),b(ye,Ll,null);let Zn=ye;var Wy;class Uk{constructor(){b(this,Wy,0)}get id(){return`${Mf}${mn(this,Wy)._++}`}}Wy=new WeakMap;var Hu,zf,Jn,$u,Qm;const ZA=class ZA{constructor(){b(this,$u);b(this,Hu,mE());b(this,zf,0);b(this,Jn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ut(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:r,type:o}=t;return E(this,$u,Qm).call(this,`${e}_${n}_${r}_${o}`,t)}async getFromUrl(t){return E(this,$u,Qm).call(this,t,t)}async getFromBlob(t,e){const n=await e;return E(this,$u,Qm).call(this,t,n)}async getFromId(t){a(this,Jn)||w(this,Jn,new Map);const e=a(this,Jn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,Jn)||w(this,Jn,new Map);let n=a(this,Jn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${a(this,Hu)}_${mn(this,zf)._++}`,refCounter:1,isSvg:!1},a(this,Jn).set(t,n),a(this,Jn).set(n.id,n),n}getSvgUrl(t){const e=a(this,Jn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;a(this,Jn)||w(this,Jn,new Map);const e=a(this,Jn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(r=n.close)==null||r.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,Hu)}_`)}};Hu=new WeakMap,zf=new WeakMap,Jn=new WeakMap,$u=new WeakSet,Qm=async function(t,e){a(this,Jn)||w(this,Jn,new Map);let n=a(this,Jn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${a(this,Hu)}_${mn(this,zf)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(n.url=e,r=await kg(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=ZA._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const y=n.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=p});l.readAsDataURL(r),await h}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Bt(r),n=null}return a(this,Jn).set(t,n),n&&a(this,Jn).set(n.id,n),n};let Aw=ZA;var nn,yo,jf,$e;class zk{constructor(t=128){b(this,nn,[]);b(this,yo,!1);b(this,jf);b(this,$e,-1);w(this,jf,t)}add({cmd:t,undo:e,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&t(),a(this,yo))return;const h={cmd:t,undo:e,post:n,type:o};if(a(this,$e)===-1){a(this,nn).length>0&&(a(this,nn).length=0),w(this,$e,0),a(this,nn).push(h);return}if(l&&a(this,nn)[a(this,$e)].type===o){u&&(h.undo=a(this,nn)[a(this,$e)].undo),a(this,nn)[a(this,$e)]=h;return}const f=a(this,$e)+1;f===a(this,jf)?a(this,nn).splice(0,1):(w(this,$e,f),f<a(this,nn).length&&a(this,nn).splice(f)),a(this,nn).push(h)}undo(){if(a(this,$e)===-1)return;w(this,yo,!0);const{undo:t,post:e}=a(this,nn)[a(this,$e)];t(),e==null||e(),w(this,yo,!1),w(this,$e,a(this,$e)-1)}redo(){if(a(this,$e)<a(this,nn).length-1){w(this,$e,a(this,$e)+1),w(this,yo,!0);const{cmd:t,post:e}=a(this,nn)[a(this,$e)];t(),e==null||e(),w(this,yo,!1)}}hasSomethingToUndo(){return a(this,$e)!==-1}hasSomethingToRedo(){return a(this,$e)<a(this,nn).length-1}cleanType(t){if(a(this,$e)!==-1){for(let e=a(this,$e);e>=0;e--)if(a(this,nn)[e].type!==t){a(this,nn).splice(e+1,a(this,$e)-e),w(this,$e,e);return}a(this,nn).length=0,w(this,$e,-1)}}destroy(){w(this,nn,null)}}nn=new WeakMap,yo=new WeakMap,jf=new WeakMap,$e=new WeakMap;var Vy,kE;class Rg{constructor(t){b(this,Vy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=bn.platform;for(const[n,r,o={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(E(this,Vy,kE).call(this,e));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(r.bind(t,...l,e)(),o||tn(e))}}Vy=new WeakSet,kE=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Gy=class Gy{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Dk(t),Ut(this,"_colors",t)}convert(t){const e=Pg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((o,l)=>o===e[l]))return Gy._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ut.makeHexColor(...e):t}};K(Gy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Sw=Gy;var Wu,Hs,Vu,Ye,wn,Gu,bi,Xu,Ei,ts,vo,wo,qu,Ao,yr,xi,Dl,Hf,$f,Yu,Wf,vr,So,Ku,bo,wr,Xy,Eo,Qu,Vf,xo,Nl,Zu,Co,Gf,un,pe,ra,_o,ko,Xf,Ju,qf,To,Ar,aa,Yf,Kf,Ci,at,Zm,bw,TE,PE,df,RE,ME,LE,Ew,DE,NE,IE,FE,cs,ta,OE,BE,xw,UE,ff,Cw;const Nu=class Nu{constructor(t,e,n,r,o,l,u,h,f,p,y,v,S,_,x,T){b(this,at);b(this,Wu,new AbortController);b(this,Hs,null);b(this,Vu,null);b(this,Ye,new Map);b(this,wn,new Map);b(this,Gu,null);b(this,bi,null);b(this,Xu,null);b(this,Ei,new zk);b(this,ts,null);b(this,vo,null);b(this,wo,null);b(this,qu,0);b(this,Ao,new Set);b(this,yr,null);b(this,xi,null);b(this,Dl,new Set);K(this,"_editorUndoBar",null);b(this,Hf,!1);b(this,$f,!1);b(this,Yu,!1);b(this,Wf,null);b(this,vr,null);b(this,So,null);b(this,Ku,null);b(this,bo,!1);b(this,wr,null);b(this,Xy,new Uk);b(this,Eo,!1);b(this,Qu,!1);b(this,Vf,!1);b(this,xo,null);b(this,Nl,null);b(this,Zu,null);b(this,Co,null);b(this,Gf,null);b(this,un,Ht.NONE);b(this,pe,new Set);b(this,ra,null);b(this,_o,null);b(this,ko,null);b(this,Xf,null);b(this,Ju,null);b(this,qf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,To,[0,0]);b(this,Ar,null);b(this,aa,null);b(this,Yf,null);b(this,Kf,null);b(this,Ci,null);const k=this._signal=a(this,Wu).signal;w(this,aa,t),w(this,Yf,e),w(this,Kf,n),w(this,Gu,r),w(this,ts,o),w(this,_o,l),w(this,Ju,h),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:k}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:k}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:k}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:k}),u._on("setpreference",this.onSetPreference.bind(this),{signal:k}),u._on("switchannotationeditorparams",M=>this.updateParams(M.type,M.value),{signal:k}),window.addEventListener("pointerdown",()=>{w(this,Qu,!0)},{capture:!0,signal:k}),window.addEventListener("pointerup",()=>{w(this,Qu,!1)},{capture:!0,signal:k}),E(this,at,RE).call(this),E(this,at,FE).call(this),E(this,at,Ew).call(this),w(this,bi,h.annotationStorage),w(this,Wf,h.filterFactory),w(this,ko,f),w(this,Ku,p||null),w(this,Hf,y),w(this,$f,v),w(this,Yu,S),w(this,Gf,_||null),this.viewParameters={realScale:rl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=T!==!1,o==null||o.setSidebarUiManager(this)}static get _keyboardManager(){const t=Nu.prototype,e=l=>a(l,aa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ut(this,"_keyboardManager",new Rg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&a(l,aa).contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&a(l,aa).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,r,o,l,u,h,f;(t=a(this,Ci))==null||t.resolve(),w(this,Ci,null),(e=a(this,Wu))==null||e.abort(),w(this,Wu,null),this._signal=null;for(const p of a(this,wn).values())p.destroy();a(this,wn).clear(),a(this,Ye).clear(),a(this,Dl).clear(),(n=a(this,Co))==null||n.clear(),w(this,Hs,null),a(this,pe).clear(),a(this,Ei).destroy(),(r=a(this,Gu))==null||r.destroy(),(o=a(this,ts))==null||o.destroy(),(l=a(this,_o))==null||l.destroy(),(u=a(this,wr))==null||u.hide(),w(this,wr,null),(h=a(this,Zu))==null||h.destroy(),w(this,Zu,null),w(this,Vu,null),a(this,vr)&&(clearTimeout(a(this,vr)),w(this,vr,null)),a(this,Ar)&&(clearTimeout(a(this,Ar)),w(this,Ar,null)),(f=this._editorUndoBar)==null||f.destroy(),w(this,Ju,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Gf)}get useNewAltTextFlow(){return a(this,$f)}get useNewAltTextWhenAddingImage(){return a(this,Yu)}get hcmFilter(){return Ut(this,"hcmFilter",a(this,ko)?a(this,Wf).addHCMFilter(a(this,ko).foreground,a(this,ko).background):"none")}get direction(){return Ut(this,"direction",getComputedStyle(a(this,aa)).direction)}get _highlightColors(){return Ut(this,"_highlightColors",a(this,Ku)?new Map(a(this,Ku).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ut(this,"highlightColors",null);const e=new Map,n=!!a(this,ko);for(const[r,o]of t){const l=r.endsWith("_HCM");if(n&&l){e.set(r.replace("_HCM",""),o);continue}!n&&!l&&e.set(r,o)}return Ut(this,"highlightColors",e)}get highlightColorNames(){return Ut(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),w(this,wo,t)}setMainHighlightColorPicker(t){w(this,Zu,t)}editAltText(t,e=!1){var n;(n=a(this,Gu))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!a(this,ts)}editComment(t,e,n,r){var o;(o=a(this,ts))==null||o.showDialog(this,t,e,n,r)}selectComment(t,e){const n=a(this,wn).get(t),r=n==null?void 0:n.getEditorByUID(e);r==null||r.toggleComment(!0,!0)}updateComment(t){var e;(e=a(this,ts))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=a(this,ts))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=a(this,ts))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var r;(r=a(this,ts))==null||r.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=a(this,ts))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=a(this,ts))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(a(this,wn).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await n}getSignature(t){var e;(e=a(this,_o))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,_o)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":w(this,Yu,e);break}}onPageChanging({pageNumber:t}){w(this,qu,t-1)}focusMainContainer(){a(this,aa).focus()}findParent(t,e){for(const n of a(this,wn).values()){const{x:r,y:o,width:l,height:u}=n.div.getBoundingClientRect();if(t>=r&&t<=r+l&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){a(this,Yf).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,Dl).add(t)}removeShouldRescale(t){a(this,Dl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*rl.PDF_TO_CSS_UNITS;for(const n of a(this,Dl))n.onScaleChanging();(e=a(this,wo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=n,h=n.toString(),p=E(this,at,Zm).call(this,n).closest(".textLayer"),y=this.getSelectionBoxes(p);if(!y)return;n.empty();const v=E(this,at,bw).call(this,p),S=a(this,un)===Ht.NONE,_=()=>{const x=v==null?void 0:v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:h});S&&this.showAllEditors("highlight",!0,!0),e&&(x==null||x.editComment())};if(S){this.switchToMode(Ht.HIGHLIGHT,_);return}_()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!a(this,bi))return null;const e=`${Mf}${t}`,n=a(this,bi).getRawValue(e);return n&&a(this,bi).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&a(this,bi)&&!a(this,bi).has(t.id)&&a(this,bi).setValue(t.id,t)}a11yAlert(t,e=null){const n=a(this,Kf);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,bo)&&(w(this,bo,!1),E(this,at,df).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,pe))if(e.div.contains(t)){w(this,Nl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Nl))return;const[t,e]=a(this,Nl);w(this,Nl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,at,Ew).call(this),this.setEditingState(!0)}removeEditListeners(){E(this,at,DE).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of a(this,xi))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of a(this,xi))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=a(this,Hs))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of a(this,pe)){const o=r.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of a(this,xi))if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Bt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const h of n){const f=await r.deserialize(h);if(!f)return;o.push(f)}const l=()=>{for(const h of o)E(this,at,xw).call(this,h);E(this,at,Cw).call(this,o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){Bt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,un)!==Ht.NONE&&!this.isEditorHandlingKeyboard&&Nu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,bo)&&(w(this,bo,!1),E(this,at,df).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(E(this,at,ME).call(this),E(this,at,NE).call(this),E(this,at,cs).call(this,{isEditing:a(this,un)!==Ht.NONE,isEmpty:E(this,at,ff).call(this),hasSomethingToUndo:a(this,Ei).hasSomethingToUndo(),hasSomethingToRedo:a(this,Ei).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,at,LE).call(this),E(this,at,IE).call(this),E(this,at,cs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,xi)){w(this,xi,t);for(const e of a(this,xi))E(this,at,ta).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,Xy).id}get currentLayer(){return a(this,wn).get(a(this,qu))}getLayer(t){return a(this,wn).get(t)}get currentPageIndex(){return a(this,qu)}addLayer(t){a(this,wn).set(t.pageIndex,t),a(this,Eo)?t.enable():t.disable()}removeLayer(t){a(this,wn).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,o=!1,l=!1){var u,h,f,p,y,v;if(a(this,un)!==t&&!(a(this,Ci)&&(await a(this,Ci).promise,!a(this,Ci)))){if(w(this,Ci,Promise.withResolvers()),(u=a(this,wo))==null||u.commitOrRemove(),a(this,un)===Ht.POPUP&&((h=a(this,ts))==null||h.hideSidebar()),(f=a(this,ts))==null||f.destroyPopup(),w(this,un,t),t===Ht.NONE){this.setEditingState(!1),E(this,at,BE).call(this);for(const S of a(this,Ye).values())S.hideStandaloneCommentButton();(p=this._editorUndoBar)==null||p.hide(),this.toggleComment(null),a(this,Ci).resolve();return}for(const S of a(this,Ye).values())S.addStandaloneCommentButton();t===Ht.SIGNATURE&&await((y=a(this,_o))==null?void 0:y.loadSignatures()),n&&Zn.clearPointerType(),this.setEditingState(!0),await E(this,at,OE).call(this),this.unselectAll();for(const S of a(this,wn).values())S.updateMode(t);if(t===Ht.POPUP){a(this,Vu)||w(this,Vu,await a(this,Ju).getAnnotationsByType(new Set(a(this,xi).map(x=>x._editorType))));const S=new Set,_=[];for(const x of a(this,Ye).values()){const{annotationElementId:T,hasComment:k,deleted:M}=x;T&&S.add(T),k&&!M&&_.push(x.getData())}for(const x of a(this,Vu)){const{id:T,popupRef:k,contentsObj:M}=x;k&&(M!=null&&M.str)&&!S.has(T)&&!a(this,Ao).has(T)&&_.push(x)}(v=a(this,ts))==null||v.showSidebar(_)}if(!e){r&&this.addNewEditorFromKeyboard(),a(this,Ci).resolve();return}for(const S of a(this,Ye).values())S.uid===e?(this.setSelected(S),l?S.editComment():o?S.enterInEditMode():S.focus()):S.unselect();a(this,Ci).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,un)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(a(this,xi)){switch(t){case te.CREATE:this.currentLayer.addNewEditor(e);return;case te.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Xf)||w(this,Xf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of a(this,pe))n.updateParams(t,e);else for(const n of a(this,xi))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const l of a(this,Ye).values())l.editorType===t&&l.show(e);(((o=a(this,Xf))==null?void 0:o.get(te.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,at,ta).call(this,[[te.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Vf)!==t){w(this,Vf,t);for(const e of a(this,wn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of a(this,Ye).values())e.pageIndex===t&&(yield e)}getEditor(t){return a(this,Ye).get(t)}addEditor(t){a(this,Ye).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(a(this,vr)&&clearTimeout(a(this,vr)),w(this,vr,setTimeout(()=>{this.focusMainContainer(),w(this,vr,null)},0))),a(this,Ye).delete(t.id),t.annotationElementId&&((e=a(this,Co))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,Ao).has(t.annotationElementId))&&((n=a(this,bi))==null||n.remove(t.id))}addDeletedAnnotationElement(t){a(this,Ao).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Ao).has(t)}removeDeletedAnnotationElement(t){a(this,Ao).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,Hs)!==t&&(w(this,Hs,t),t&&E(this,at,ta).call(this,t.propertiesToUpdate))}updateUI(t){a(this,at,UE)===t&&E(this,at,ta).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,at,ta).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,pe).has(t)){a(this,pe).delete(t),t.unselect(),E(this,at,cs).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,pe).add(t),t.select(),E(this,at,ta).call(this,t.propertiesToUpdate),E(this,at,cs).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=a(this,wo))==null||e.commitOrRemove();for(const n of a(this,pe))n!==t&&n.unselect();a(this,pe).clear(),a(this,pe).add(t),t.select(),E(this,at,ta).call(this,t.propertiesToUpdate),E(this,at,cs).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,pe).has(t)}get firstSelectedEditor(){return a(this,pe).values().next().value}unselect(t){t.unselect(),a(this,pe).delete(t),E(this,at,cs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,pe).size!==0}get isEnterHandled(){return a(this,pe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Ei).undo(),E(this,at,cs).call(this,{hasSomethingToUndo:a(this,Ei).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,at,ff).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Ei).redo(),E(this,at,cs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Ei).hasSomethingToRedo(),isEmpty:E(this,at,ff).call(this)})}addCommands(t){a(this,Ei).add(t),E(this,at,cs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,at,ff).call(this)})}cleanUndoStack(t){a(this,Ei).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,pe)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(r,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},r=()=>{for(const l of e)E(this,at,xw).call(this,l)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=a(this,Hs))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,Hs)||this.hasSelection}selectAll(){for(const t of a(this,pe))t.commit();E(this,at,Cw).call(this,a(this,Ye).values())}unselectAll(){var t;if(!(a(this,Hs)&&(a(this,Hs).commitOrRemove(),a(this,un)!==Ht.NONE))&&!((t=a(this,wo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,pe))e.unselect();a(this,pe).clear(),E(this,at,cs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;a(this,To)[0]+=t,a(this,To)[1]+=e;const[r,o]=a(this,To),l=[...a(this,pe)],u=1e3;a(this,Ar)&&clearTimeout(a(this,Ar)),w(this,Ar,setTimeout(()=>{w(this,Ar,null),a(this,To)[0]=a(this,To)[1]=0,this.addCommands({cmd:()=>{for(const h of l)a(this,Ye).has(h.id)&&(h.translateInPage(r,o),h.translationDone())},undo:()=>{for(const h of l)a(this,Ye).has(h.id)&&(h.translateInPage(-r,-o),h.translationDone())},mustExec:!1})},u));for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,yr,new Map);for(const t of a(this,pe))a(this,yr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,yr))return!1;this.disableUserSelect(!1);const t=a(this,yr);w(this,yr,null);let e=!1;for(const[{x:r,y:o,pageIndex:l},u]of t)u.newX=r,u.newY=o,u.newPageIndex=l,e||(e=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex);if(!e)return!1;const n=(r,o,l,u)=>{if(a(this,Ye).has(r.id)){const h=a(this,wn).get(u);h?r._setParentAndPosition(h,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of t)n(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of t)n(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,yr))for(const n of a(this,yr).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,pe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,Hs)===t}getActive(){return a(this,Hs)}getMode(){return a(this,un)}isEditingMode(){return a(this,un)!==Ht.NONE}get imageManager(){return Ut(this,"imageManager",new Aw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,y,v)=>({x:(p-r)/l,y:1-(f+y-n)/o,width:v/l,height:y/o});break;case"180":u=(f,p,y,v)=>({x:1-(f+y-n)/o,y:1-(p+v-r)/l,width:y/o,height:v/l});break;case"270":u=(f,p,y,v)=>({x:1-(p+v-r)/l,y:(f-n)/o,width:v/l,height:y/o});break;default:u=(f,p,y,v)=>({x:(f-n)/o,y:(p-r)/l,width:y/o,height:v/l});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:v,y:S,width:_,height:x}of y.getClientRects())_===0||x===0||h.push(u(v,S,_,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Xu)||w(this,Xu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Xu))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=a(this,Xu))==null?void 0:r.get(t.data.id);if(!e)return;const n=a(this,bi).getRawValue(e);n&&(a(this,un)===Ht.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var o;const r=(o=a(this,Co))==null?void 0:o.get(t);r&&(r.setCanvas(e,n),a(this,Co).delete(t))}addMissingCanvas(t,e){(a(this,Co)||w(this,Co,new Map)).set(t,e)}};Wu=new WeakMap,Hs=new WeakMap,Vu=new WeakMap,Ye=new WeakMap,wn=new WeakMap,Gu=new WeakMap,bi=new WeakMap,Xu=new WeakMap,Ei=new WeakMap,ts=new WeakMap,vo=new WeakMap,wo=new WeakMap,qu=new WeakMap,Ao=new WeakMap,yr=new WeakMap,xi=new WeakMap,Dl=new WeakMap,Hf=new WeakMap,$f=new WeakMap,Yu=new WeakMap,Wf=new WeakMap,vr=new WeakMap,So=new WeakMap,Ku=new WeakMap,bo=new WeakMap,wr=new WeakMap,Xy=new WeakMap,Eo=new WeakMap,Qu=new WeakMap,Vf=new WeakMap,xo=new WeakMap,Nl=new WeakMap,Zu=new WeakMap,Co=new WeakMap,Gf=new WeakMap,un=new WeakMap,pe=new WeakMap,ra=new WeakMap,_o=new WeakMap,ko=new WeakMap,Xf=new WeakMap,Ju=new WeakMap,qf=new WeakMap,To=new WeakMap,Ar=new WeakMap,aa=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Ci=new WeakMap,at=new WeakSet,Zm=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},bw=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of a(this,wn).values())if(n.hasTextLayer(t))return n;return null},TE=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=E(this,at,Zm).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(a(this,wr)||w(this,wr,new Bk(this)),a(this,wr).show(n,r,this.direction==="ltr"))},PE=function(){var o,l,u;const t=document.getSelection();if(!t||t.isCollapsed){a(this,ra)&&((o=a(this,wr))==null||o.hide(),w(this,ra,null),E(this,at,cs).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,ra))return;const r=E(this,at,Zm).call(this,t).closest(".textLayer");if(!r){a(this,ra)&&((l=a(this,wr))==null||l.hide(),w(this,ra,null),E(this,at,cs).call(this,{hasSelectedText:!1}));return}if((u=a(this,wr))==null||u.hide(),w(this,ra,e),E(this,at,cs).call(this,{hasSelectedText:!0}),!(a(this,un)!==Ht.HIGHLIGHT&&a(this,un)!==Ht.NONE)&&(a(this,un)===Ht.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,bo,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=a(this,un)===Ht.HIGHLIGHT?E(this,at,bw).call(this,r):null;if(h==null||h.toggleDrawing(),a(this,Qu)){const f=new AbortController,p=this.combinedSignal(f),y=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),h==null||h.toggleDrawing(!0),v.type==="pointerup"&&E(this,at,df).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("blur",y,{signal:p})}else h==null||h.toggleDrawing(!0),E(this,at,df).call(this,"main_toolbar")}},df=function(t=""){a(this,un)===Ht.HIGHLIGHT?this.highlightSelection(t):a(this,Hf)&&E(this,at,TE).call(this)},RE=function(){document.addEventListener("selectionchange",E(this,at,PE).bind(this),{signal:this._signal})},ME=function(){if(a(this,So))return;w(this,So,new AbortController);const t=this.combinedSignal(a(this,So));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},LE=function(){var t;(t=a(this,So))==null||t.abort(),w(this,So,null)},Ew=function(){if(a(this,xo))return;w(this,xo,new AbortController);const t=this.combinedSignal(a(this,xo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},DE=function(){var t;(t=a(this,xo))==null||t.abort(),w(this,xo,null)},NE=function(){if(a(this,vo))return;w(this,vo,new AbortController);const t=this.combinedSignal(a(this,vo));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},IE=function(){var t;(t=a(this,vo))==null||t.abort(),w(this,vo,null)},FE=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},cs=function(t){Object.entries(t).some(([n,r])=>a(this,qf)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,qf),t)}),a(this,un)===Ht.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,at,ta).call(this,[[te.HIGHLIGHT_FREE,!0]]))},ta=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},OE=async function(){if(!a(this,Eo)){w(this,Eo,!0);const t=[];for(const e of a(this,wn).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,Ye).values())e.enable()}},BE=function(){if(this.unselectAll(),a(this,Eo)){w(this,Eo,!1);for(const t of a(this,wn).values())t.disable();for(const t of a(this,Ye).values())t.disable()}},xw=function(t){const e=a(this,wn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},UE=function(){let t=null;for(t of a(this,pe));return t},ff=function(){if(a(this,Ye).size===0)return!0;if(a(this,Ye).size===1)for(const t of a(this,Ye).values())return t.isEmpty();return!1},Cw=function(t){for(const e of a(this,pe))e.unselect();a(this,pe).clear();for(const e of t)e.isEmpty()||(a(this,pe).add(e),e.select());E(this,at,cs).call(this,{hasSelectedEditor:this.hasSelection})},K(Nu,"TRANSLATE_SMALL",1),K(Nu,"TRANSLATE_BIG",10);let Vc=Nu;var kn,Sr,Gi,th,br,$s,eh,Er,Ts,oa,Il,xr,Po,ir,pf,Jm;const us=class us{constructor(t){b(this,ir);b(this,kn,null);b(this,Sr,!1);b(this,Gi,null);b(this,th,null);b(this,br,null);b(this,$s,null);b(this,eh,!1);b(this,Er,null);b(this,Ts,null);b(this,oa,null);b(this,Il,null);b(this,xr,!1);w(this,Ts,t),w(this,xr,t._uiManager.useNewAltTextFlow),a(us,Po)||w(us,Po,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){us._l10n??(us._l10n=t)}async render(){const t=w(this,Gi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=w(this,th,document.createElement("span"));t.append(e),a(this,xr)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(us,Po).missing),e.setAttribute("data-l10n-id",a(us,Po)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=a(this,Ts)._uiManager._signal;t.addEventListener("contextmenu",Ni,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),a(this,Ts)._uiManager.editAltText(a(this,Ts)),a(this,xr)&&a(this,Ts)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,ir,pf)}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(w(this,eh,!0),r(o))},{signal:n}),await E(this,ir,Jm).call(this),t}finish(){a(this,Gi)&&(a(this,Gi).focus({focusVisible:a(this,eh)}),w(this,eh,!1))}isEmpty(){return a(this,xr)?a(this,kn)===null:!a(this,kn)&&!a(this,Sr)}hasData(){return a(this,xr)?a(this,kn)!==null||!!a(this,oa):this.isEmpty()}get guessedText(){return a(this,oa)}async setGuessedText(t){a(this,kn)===null&&(w(this,oa,t),w(this,Il,await us._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,ir,Jm).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,xr)||a(this,kn)){(e=a(this,Er))==null||e.remove(),w(this,Er,null);return}if(!a(this,Er)){const n=w(this,Er,document.createElement("div"));n.className="noAltTextBadge",a(this,Ts).div.append(n)}a(this,Er).classList.toggle("hidden",!t)}serialize(t){let e=a(this,kn);return!t&&a(this,oa)===e&&(e=a(this,Il)),{altText:e,decorative:a(this,Sr),guessedText:a(this,oa),textWithDisclaimer:a(this,Il)}}get data(){return{altText:a(this,kn),decorative:a(this,Sr)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(w(this,oa,n),w(this,Il,r)),!(a(this,kn)===t&&a(this,Sr)===e)&&(o||(w(this,kn,t),w(this,Sr,e)),E(this,ir,Jm).call(this))}toggle(t=!1){a(this,Gi)&&(!t&&a(this,$s)&&(clearTimeout(a(this,$s)),w(this,$s,null)),a(this,Gi).disabled=!t)}shown(){a(this,Ts)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,ir,pf)}})}destroy(){var t,e;(t=a(this,Gi))==null||t.remove(),w(this,Gi,null),w(this,th,null),w(this,br,null),(e=a(this,Er))==null||e.remove(),w(this,Er,null)}};kn=new WeakMap,Sr=new WeakMap,Gi=new WeakMap,th=new WeakMap,br=new WeakMap,$s=new WeakMap,eh=new WeakMap,Er=new WeakMap,Ts=new WeakMap,oa=new WeakMap,Il=new WeakMap,xr=new WeakMap,Po=new WeakMap,ir=new WeakSet,pf=function(){return a(this,kn)&&"added"||a(this,kn)===null&&this.guessedText&&"review"||"missing"},Jm=async function(){var r,o,l;const t=a(this,Gi);if(!t)return;if(a(this,xr)){if(t.classList.toggle("done",!!a(this,kn)),t.setAttribute("data-l10n-id",a(us,Po)[a(this,ir,pf)]),(r=a(this,th))==null||r.setAttribute("data-l10n-id",a(us,Po)[`${a(this,ir,pf)}-label`]),!a(this,kn)){(o=a(this,br))==null||o.remove();return}}else{if(!a(this,kn)&&!a(this,Sr)){t.classList.remove("done"),(l=a(this,br))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,br);if(!e){w(this,br,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Ts).id}`;const u=100,h=a(this,Ts)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(a(this,$s)),w(this,$s,null)},{once:!0}),t.addEventListener("mouseenter",()=>{w(this,$s,setTimeout(()=>{w(this,$s,null),a(this,br).classList.add("show"),a(this,Ts)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:h}),t.addEventListener("mouseleave",()=>{var f;a(this,$s)&&(clearTimeout(a(this,$s)),w(this,$s,null)),(f=a(this,br))==null||f.classList.remove("show")},{signal:h})}a(this,Sr)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,kn)),e.parentNode||t.append(e);const n=a(this,Ts).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},b(us,Po,null),K(us,"_l10n",null);let My=us;var Bn,_i,Fl,Me,Qf,Ol,Xi,Bl,Ul,zl,Zf,_w;class zm{constructor(t){b(this,Zf);b(this,Bn,null);b(this,_i,null);b(this,Fl,!1);b(this,Me,null);b(this,Qf,null);b(this,Ol,null);b(this,Xi,null);b(this,Bl,null);b(this,Ul,!1);b(this,zl,null);w(this,Me,t)}renderForToolbar(){const t=w(this,_i,document.createElement("button"));return t.className="comment",E(this,Zf,_w).call(this,t,!1)}renderForStandalone(){const t=w(this,Bn,document.createElement("button"));t.className="annotationCommentButton";const e=a(this,Me).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(a(this,Me)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=a(this,Me).commentButtonColor;r&&(n.backgroundColor=r)}return E(this,Zf,_w).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=a(this,Bn)??a(this,_i))==null||t.focus()},0)}onUpdatedColor(){if(!a(this,Bn))return;const t=a(this,Me).commentButtonColor;t&&(a(this,Bn).style.backgroundColor=t),a(this,Me)._uiManager.updatePopupColor(a(this,Me))}get commentButtonWidth(){var t;return(((t=a(this,Bn))==null?void 0:t.getBoundingClientRect().width)??0)/a(this,Me).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,zl))return a(this,zl);if(!a(this,Bn))return null;const{x:t,y:e,height:n}=a(this,Bn).getBoundingClientRect(),{x:r,y:o,width:l,height:u}=a(this,Me).parent.boundingClientRect;return[(t-r)/l,(e+n-o)/u]}set commentPopupPositionInLayer(t){w(this,zl,t)}hasDefaultPopupPosition(){return a(this,zl)===null}removeStandaloneCommentButton(){var t;(t=a(this,Bn))==null||t.remove(),w(this,Bn,null)}removeToolbarCommentButton(){var t;(t=a(this,_i))==null||t.remove(),w(this,_i,null)}setCommentButtonStates({selected:t,hasPopup:e}){a(this,Bn)&&(a(this,Bn).classList.toggle("selected",t),a(this,Bn).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,r;if(e)[n,r]=e;else{[n,r]=a(this,Me).commentButtonPosition;const{width:p,height:y,x:v,y:S}=a(this,Me);n=v+n*p,r=S+r*y}const o=a(this,Me).parent.boundingClientRect,{x:l,y:u,width:h,height:f}=o;a(this,Me)._uiManager.editComment(a(this,Me),l+n*h,u+r*f,{...t,parentDimensions:o})}finish(){a(this,_i)&&(a(this,_i).focus({focusVisible:a(this,Fl)}),w(this,Fl,!1))}isDeleted(){return a(this,Ul)||a(this,Xi)===""}isEmpty(){return a(this,Xi)===null}hasBeenEdited(){return this.isDeleted()||a(this,Xi)!==a(this,Qf)}serialize(){return this.data}get data(){return{text:a(this,Xi),richText:a(this,Ol),date:a(this,Bl),deleted:this.isDeleted()}}set data(t){if(t!==a(this,Xi)&&w(this,Ol,null),t===null){w(this,Xi,""),w(this,Ul,!0);return}w(this,Xi,t),w(this,Bl,new Date),w(this,Ul,!1)}setInitialText(t,e=null){w(this,Qf,t),this.data=t,w(this,Bl,null),w(this,Ol,e)}shown(){}destroy(){var t,e;(t=a(this,_i))==null||t.remove(),w(this,_i,null),(e=a(this,Bn))==null||e.remove(),w(this,Bn,null),w(this,Xi,""),w(this,Ol,null),w(this,Bl,null),w(this,Me,null),w(this,Fl,!1),w(this,Ul,!1)}}Bn=new WeakMap,_i=new WeakMap,Fl=new WeakMap,Me=new WeakMap,Qf=new WeakMap,Ol=new WeakMap,Xi=new WeakMap,Bl=new WeakMap,Ul=new WeakMap,zl=new WeakMap,Zf=new WeakSet,_w=function(t,e){if(!a(this,Me)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[a(this,Me)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=a(this,Me)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Ni,{signal:n}),e&&(t.addEventListener("focusin",o=>{a(this,Me)._focusEventsAllowed=!1,tn(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{a(this,Me)._focusEventsAllowed=!0,tn(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),t===a(this,_i)?this.edit():a(this,Me).toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(w(this,Fl,!0),r(o))},{signal:n}),t.addEventListener("pointerenter",()=>{a(this,Me).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{a(this,Me).toggleComment(!1,!1)},{signal:n}),t};var nh,jl,Jf,tp,ep,np,sp,la,Hl,ca,$l,ua,al,zE,jE,HE;const JA=class JA{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){b(this,al);b(this,nh);b(this,jl,!1);b(this,Jf,null);b(this,tp);b(this,ep);b(this,np);b(this,sp);b(this,la,null);b(this,Hl);b(this,ca,null);b(this,$l);b(this,ua,null);w(this,nh,t),w(this,Jf,n),w(this,tp,e),w(this,ep,r),w(this,np,o),w(this,sp,l),w(this,$l,new AbortController),w(this,Hl,AbortSignal.any([u,a(this,$l).signal])),t.addEventListener("touchstart",E(this,al,zE).bind(this),{passive:!1,signal:a(this,Hl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/zr.pixelRatio}destroy(){var t,e;(t=a(this,$l))==null||t.abort(),w(this,$l,null),(e=a(this,la))==null||e.abort(),w(this,la,null)}};nh=new WeakMap,jl=new WeakMap,Jf=new WeakMap,tp=new WeakMap,ep=new WeakMap,np=new WeakMap,sp=new WeakMap,la=new WeakMap,Hl=new WeakMap,ca=new WeakMap,$l=new WeakMap,ua=new WeakMap,al=new WeakSet,zE=function(t){var r,o,l;if((r=a(this,tp))!=null&&r.call(this))return;if(t.touches.length===1){if(a(this,la))return;const u=w(this,la,new AbortController),h=AbortSignal.any([a(this,Hl),u.signal]),f=a(this,nh),p={capture:!0,signal:h,passive:!1},y=v=>{var S;v.pointerType==="touch"&&((S=a(this,la))==null||S.abort(),w(this,la,null))};f.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(tn(v),y(v))},p),f.addEventListener("pointerup",y,p),f.addEventListener("pointercancel",y,p);return}if(!a(this,ua)){w(this,ua,new AbortController);const u=AbortSignal.any([a(this,Hl),a(this,ua).signal]),h=a(this,nh),f={signal:u,capture:!1,passive:!1};h.addEventListener("touchmove",E(this,al,jE).bind(this),f);const p=E(this,al,HE).bind(this);h.addEventListener("touchend",p,f),h.addEventListener("touchcancel",p,f),f.capture=!0,h.addEventListener("pointerdown",tn,f),h.addEventListener("pointermove",tn,f),h.addEventListener("pointercancel",tn,f),h.addEventListener("pointerup",tn,f),(o=a(this,ep))==null||o.call(this)}if(tn(t),t.touches.length!==2||(l=a(this,Jf))!=null&&l.call(this)){w(this,ca,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),w(this,ca,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},jE=function(t){var L;if(!a(this,ca)||t.touches.length!==2)return;tn(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:o}=e,{screenX:l,screenY:u}=n,h=a(this,ca),{touch0X:f,touch0Y:p,touch1X:y,touch1Y:v}=h,S=y-f,_=v-p,x=l-r,T=u-o,k=Math.hypot(x,T)||1,M=Math.hypot(S,_)||1;if(!a(this,jl)&&Math.abs(M-k)<=JA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=o,h.touch1X=l,h.touch1Y=u,!a(this,jl)){w(this,jl,!0);return}const P=[(r+l)/2,(o+u)/2];(L=a(this,np))==null||L.call(this,P,M,k)},HE=function(t){var e;t.touches.length>=2||(a(this,ua)&&(a(this,ua).abort(),w(this,ua,null),(e=a(this,sp))==null||e.call(this)),a(this,ca)&&(tn(t),w(this,ca,null),w(this,jl,!1)))};let Ly=JA;var Wl,qi,Be,Ce,ha,sh,Ro,ip,Un,Vl,da,ki,Mo,rp,Gl,Ws,ap,Xl,fa,Cr,ih,rh,Ti,ql,op,qy,It,kw,lp,Tw,ty,$E,WE,Pw,ey,Rw,VE,GE,XE,Mw,qE,Lw,YE,KE,QE,Dw,gf;const jt=class jt{constructor(t){b(this,It);b(this,Wl,null);b(this,qi,null);b(this,Be,null);b(this,Ce,null);b(this,ha,null);b(this,sh,!1);b(this,Ro,null);b(this,ip,"");b(this,Un,null);b(this,Vl,null);b(this,da,null);b(this,ki,null);b(this,Mo,null);b(this,rp,"");b(this,Gl,!1);b(this,Ws,null);b(this,ap,!1);b(this,Xl,!1);b(this,fa,!1);b(this,Cr,null);b(this,ih,0);b(this,rh,0);b(this,Ti,null);b(this,ql,null);K(this,"isSelected",!1);K(this,"_isCopy",!1);K(this,"_editToolbar",null);K(this,"_initialOptions",Object.create(null));K(this,"_initialData",null);K(this,"_isVisible",!0);K(this,"_uiManager",null);K(this,"_focusEventsAllowed",!0);b(this,op,!1);b(this,qy,jt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=jt.prototype._resizeWithKeyboard,e=Vc.TRANSLATE_SMALL,n=Vc.TRANSLATE_BIG;return Ut(this,"_resizerKeyboardManager",new Rg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],jt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ut(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new jk({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(jt._l10n??(jt._l10n=t),jt._l10nResizer||(jt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),jt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);jt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,op)}set _isDraggable(t){var e;w(this,op,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,qy)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(E(this,It,gf).call(this),(e=a(this,ki))==null||e.remove(),w(this,ki,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Gl)?w(this,Gl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(e+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}translate(t,e){E(this,It,kw).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,Ws)||w(this,Ws,[this.x,this.y,this.width,this.height]),E(this,It,kw).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,Ws)||w(this,Ws,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,f]=this.getBaseTranslation();l+=h,u+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,Ws)&&(a(this,Ws)[0]!==this.x||a(this,Ws)[1]!==this.y)}get _hasBeenResized(){return!!a(this,Ws)&&(a(this,Ws)[2]!==this.width||a(this,Ws)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=jt,r=n/t,o=n/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:o,y:l,width:u,height:h}=this;if(u*=n,h*=r,o*=n,l*=r,this._mustFixPosition)switch(t){case 0:o=gs(o,0,n-u),l=gs(l,0,r-h);break;case 90:o=gs(o,0,n-h),l=gs(l,u,r);break;case 180:o=gs(o,u,n),l=gs(l,h,r);break;case 270:o=gs(o,h,n),l=gs(l,0,r-u);break}this.x=o/=n,this.y=l/=r;const[f,p]=this.getBaseTranslation();o+=f,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return E(n=jt,lp,Tw).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return E(n=jt,lp,Tw).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Be))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,Xl))return this._editToolbar;this._editToolbar=new vw(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=a(this,Be))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Be)||(My.initialize(jt._l10n),w(this,Be,new My(this)),a(this,Wl)&&(a(this,Be).data=a(this,Wl),w(this,Wl,null))),a(this,Be)}get altTextData(){var t;return(t=a(this,Be))==null?void 0:t.data}set altTextData(t){a(this,Be)&&(a(this,Be).data=t)}get guessedAltText(){var t;return(t=a(this,Be))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Be))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Be))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Be)&&!a(this,Be).isEmpty()}hasAltTextData(){var t;return((t=a(this,Be))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=a(this,Ce))==null||t.focusButton()}addCommentButton(){return this.canAddComment?a(this,Ce)||w(this,Ce,new zm(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(a(this,ha)){this._uiManager.isEditingMode()&&a(this,ha).classList.remove("hidden");return}this.hasComment&&(w(this,ha,a(this,Ce).renderForStandalone()),this.div.append(a(this,ha)))}}removeStandaloneCommentButton(){a(this,Ce).removeStandaloneCommentButton(),w(this,ha,null)}hideStandaloneCommentButton(){var t;(t=a(this,ha))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:r}}=a(this,Ce);return{text:e,richText:t,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){a(this,Ce)||w(this,Ce,new zm(this)),a(this,Ce).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(a(this,Ce)||w(this,Ce,new zm(this)),a(this,Ce).setInitialText(t,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var t;return(t=a(this,Ce))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=a(this,Ce))==null?void 0:t.isDeleted()}get hasComment(){return!!a(this,Ce)&&!a(this,Ce).isEmpty()&&!a(this,Ce).isDeleted()}async editComment(t){a(this,Ce)||w(this,Ce,new zm(this)),a(this,Ce).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){a(this,Ce).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){a(this,Ce).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var l;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,sh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),E(this,It,Lw).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),_E(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,ql)||w(this,ql,new Ly({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,It,VE).bind(this),onPinching:E(this,It,GE).bind(this),onPinchEnd:E(this,It,XE).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(l=this._uiManager._editorUndoBar)==null||l.hide(),t}pointerdown(t){const{isMac:e}=bn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(w(this,Gl,!0),this._isDraggable){E(this,It,qE).call(this,t);return}E(this,It,Mw).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Cr)&&clearTimeout(a(this,Cr)),w(this,Cr,setTimeout(()=>{var t;w(this,Cr,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,p=e/r,y=this.x*o,v=this.y*l,S=this.width*o,_=this.height*l;switch(n){case 0:return[y+f+u,l-v-p-_+h,y+f+S+u,l-v-p+h];case 90:return[y+p+u,l-v+f+h,y+p+_+u,l-v+f+S+h];case 180:return[y-f-S+u,l-v+p+h,y-f+u,l-v+p+_+h];case 270:return[y-p-_+u,l-v-f-S+h,y-p+u,l-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,o,l]=t,u=o-n,h=l-r;switch(this.rotation){case 0:return[n,e-l,u,h];case 90:return[n,e-r,h,u];case 180:return[o,e-r,u,h];case 270:return[o,e-l,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&jt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=a(this,Ce))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:r,deleted:o,richText:l},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!o,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),w(this,Xl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),w(this,Xl,!1),!0):!1}isInEditMode(){return a(this,Xl)}shouldGetKeyboardEvents(){return a(this,fa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&r>0&&t<o&&n>0}rebuild(){E(this,It,Lw).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,w(r,Wl,t.accessibilityData),r._isCopy=t.isCopy||!1;const[o,l]=r.pageDimensions,[u,h,f,p]=r.getRectInCurrentCoords(t.rect,l);return r.x=u/o,r.y=h/l,r.width=f/o,r.height=p/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=a(this,Mo))==null||t.abort(),w(this,Mo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),a(this,Cr)&&(clearTimeout(a(this,Cr)),w(this,Cr,null)),E(this,It,gf).call(this),this.removeEditToolbar(),a(this,Ti)){for(const r of a(this,Ti).values())clearTimeout(r);w(this,Ti,null)}this.parent=null,(e=a(this,ql))==null||e.destroy(),w(this,ql,null),(n=a(this,ki))==null||n.remove(),w(this,ki,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,It,$E).call(this),a(this,Un).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,r,o,l]=this.getPDFRect();return[jt._round(n+(o-n)*t),jt._round(r+(l-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,Ce).commentPopupPositionInLayer}set commentPopupPosition(t){a(this,Ce).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return a(this,Ce).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,Ce).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=a(this,Ce))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),w(this,da,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Un).children;if(!a(this,qi)){w(this,qi,Array.from(e));const l=E(this,It,YE).bind(this),u=E(this,It,KE).bind(this),h=this._uiManager._signal;for(const f of a(this,qi)){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",E(this,It,QE).bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",jt._l10nResizer[p])}}const n=a(this,qi)[0];let r=0;for(const l of e){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(a(this,qi).length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)a(this,Un).append(a(this,Un).firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)a(this,Un).firstElementChild.before(a(this,Un).lastElementChild);let l=0;for(const u of e){const f=a(this,qi)[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",jt._l10nResizer[f])}}E(this,It,Dw).call(this,0),w(this,fa,!0),a(this,Un).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,fa)&&E(this,It,Rw).call(this,a(this,rp),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,It,gf).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=a(this,Be))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,r,o;this.isSelected&&(this.isSelected=!1,(t=a(this,Un))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=a(this,Be))==null||o.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,ap)}set isEditing(t){w(this,ap,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Ti)||w(this,Ti,new Map);const{action:n}=t;let r=a(this,Ti).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),a(this,Ti).delete(n),a(this,Ti).size===0&&w(this,Ti,null)},jt._telemetryTimeout),a(this,Ti).set(n,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),w(this,sh,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,sh,!0)}updateFakeAnnotationElement(t){if(!a(this,ki)&&!this.deleted){w(this,ki,t.addFakeAnnotation(this));return}if(this.deleted){a(this,ki).remove(),w(this,ki,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,ki).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Wl=new WeakMap,qi=new WeakMap,Be=new WeakMap,Ce=new WeakMap,ha=new WeakMap,sh=new WeakMap,Ro=new WeakMap,ip=new WeakMap,Un=new WeakMap,Vl=new WeakMap,da=new WeakMap,ki=new WeakMap,Mo=new WeakMap,rp=new WeakMap,Gl=new WeakMap,Ws=new WeakMap,ap=new WeakMap,Xl=new WeakMap,fa=new WeakMap,Cr=new WeakMap,ih=new WeakMap,rh=new WeakMap,Ti=new WeakMap,ql=new WeakMap,op=new WeakMap,qy=new WeakMap,It=new WeakSet,kw=function([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},lp=new WeakSet,Tw=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},ty=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},$E=function(){if(a(this,Un))return;w(this,Un,document.createElement("div")),a(this,Un).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");a(this,Un).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",E(this,It,WE).bind(this,n),{signal:e}),r.addEventListener("contextmenu",Ni,{signal:e}),r.tabIndex=-1}this.div.prepend(a(this,Un))},WE=function(t,e){var p;e.preventDefault();const{isMac:n}=bn.platform;if(e.button!==0||e.ctrlKey&&n)return;(p=a(this,Be))==null||p.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,w(this,Vl,[e.screenX,e.screenY]);const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,It,Rw).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",tn,{passive:!1,signal:l}),window.addEventListener("contextmenu",Ni,{signal:l}),w(this,da,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var y;o.abort(),this.parent.togglePointerEvents(!0),(y=a(this,Be))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,E(this,It,ey).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},Pw=function(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},ey=function(){if(!a(this,da))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=a(this,da);w(this,da,null);const o=this.x,l=this.y,u=this.width,h=this.height;o===t&&l===e&&u===n&&h===r||this.addCommands({cmd:E(this,It,Pw).bind(this,o,l,u,h),undo:E(this,It,Pw).bind(this,t,e,n,r),mustExec:!0})},Rw=function(t,e){const[n,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,h=this.height,f=jt.MIN_SIZE/n,p=jt.MIN_SIZE/r,y=E(this,It,ty).call(this,this.rotation),v=(ot,st)=>[y[0]*ot+y[2]*st,y[1]*ot+y[3]*st],S=E(this,It,ty).call(this,360-this.rotation),_=(ot,st)=>[S[0]*ot+S[2]*st,S[1]*ot+S[3]*st];let x,T,k=!1,M=!1;switch(t){case"topLeft":k=!0,x=(ot,st)=>[0,0],T=(ot,st)=>[ot,st];break;case"topMiddle":x=(ot,st)=>[ot/2,0],T=(ot,st)=>[ot/2,st];break;case"topRight":k=!0,x=(ot,st)=>[ot,0],T=(ot,st)=>[0,st];break;case"middleRight":M=!0,x=(ot,st)=>[ot,st/2],T=(ot,st)=>[0,st/2];break;case"bottomRight":k=!0,x=(ot,st)=>[ot,st],T=(ot,st)=>[0,0];break;case"bottomMiddle":x=(ot,st)=>[ot/2,st],T=(ot,st)=>[ot/2,0];break;case"bottomLeft":k=!0,x=(ot,st)=>[0,st],T=(ot,st)=>[ot,0];break;case"middleLeft":M=!0,x=(ot,st)=>[0,st/2],T=(ot,st)=>[ot,st/2];break}const P=x(u,h),L=T(u,h);let D=v(...L);const I=jt._round(o+D[0]),U=jt._round(l+D[1]);let V=1,Y=1,et,Z;if(e.fromKeyboard)({deltaX:et,deltaY:Z}=e);else{const{screenX:ot,screenY:st}=e,[W,dt]=a(this,Vl);[et,Z]=this.screenToPageTranslation(ot-W,st-dt),a(this,Vl)[0]=ot,a(this,Vl)[1]=st}if([et,Z]=_(et/n,Z/r),k){const ot=Math.hypot(u,h);V=Y=Math.max(Math.min(Math.hypot(L[0]-P[0]-et,L[1]-P[1]-Z)/ot,1/u,1/h),f/u,p/h)}else M?V=gs(Math.abs(L[0]-P[0]-et),f,1)/u:Y=gs(Math.abs(L[1]-P[1]-Z),p,1)/h;const Ct=jt._round(u*V),_t=jt._round(h*Y);D=v(...T(Ct,_t));const At=I-D[0],Tt=U-D[1];a(this,Ws)||w(this,Ws,[this.x,this.y,this.width,this.height]),this.width=Ct,this.height=_t,this.x=At,this.y=Tt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},VE=function(){var t;w(this,da,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Be))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},GE=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=E(this,It,ty).call(this,this.rotation),u=(I,U)=>[l[0]*I+l[2]*U,l[1]*I+l[3]*U],[h,f]=this.parentDimensions,p=this.x,y=this.y,v=this.width,S=this.height,_=jt.MIN_SIZE/h,x=jt.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/S),_/v,x/S);const T=jt._round(v*o),k=jt._round(S*o);if(T===v&&k===S)return;a(this,Ws)||w(this,Ws,[p,y,v,S]);const M=u(v/2,S/2),P=jt._round(p+M[0]),L=jt._round(y+M[1]),D=u(T/2,k/2);this.x=P-D[0],this.y=L-D[1],this.width=T,this.height=k,this.setDims(),this.fixAndSetPosition(),this._onResizing()},XE=function(){var t;(t=a(this,Be))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,It,ey).call(this)},Mw=function(t){const{isMac:e}=bn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},qE=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),w(this,Ro,null),w(this,Gl,!1),this._uiManager.endDragSession()||E(this,It,Mw).call(this,f),n&&this._onStopDragging()};e&&(w(this,ih,t.clientX),w(this,rh,t.clientY),w(this,Ro,t.pointerId),w(this,ip,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:y,pointerId:v}=f;if(v!==a(this,Ro)){tn(f);return}const[S,_]=this.screenToPageTranslation(p-a(this,ih),y-a(this,rh));w(this,ih,p),w(this,rh,y),this._uiManager.dragSelectedEditors(S,_)},l),window.addEventListener("touchmove",tn,l),window.addEventListener("pointerdown",f=>{f.pointerType===a(this,ip)&&(a(this,ql)||f.isPrimary)&&u(f),tn(f)},l));const h=f=>{if(!a(this,Ro)||a(this,Ro)===f.pointerId){u(f);return}tn(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},Lw=function(){if(a(this,Mo)||!this.div)return;w(this,Mo,new AbortController);const t=this._uiManager.combinedSignal(a(this,Mo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},YE=function(t){jt._resizerKeyboardManager.exec(this,t)},KE=function(t){var e;a(this,fa)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Un)&&E(this,It,gf).call(this)},QE=function(t){w(this,rp,a(this,fa)?t:"")},Dw=function(t){if(a(this,qi))for(const e of a(this,qi))e.tabIndex=t},gf=function(){w(this,fa,!1),E(this,It,Dw).call(this,-1),E(this,It,ey).call(this)},b(jt,lp),K(jt,"_l10n",null),K(jt,"_l10nResizer",null),K(jt,"_borderLineWidth",-1),K(jt,"_colorManager",new Sw),K(jt,"_zIndex",1),K(jt,"_telemetryTimeout",1e3);let Le=jt;class jk extends Le{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const $1=3285377520,vi=4294901760,gr=65535;class ZE{constructor(t){this.h1=t?t&4294967295:$1,this.h2=t?t&4294967295:$1}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let x=0,T=t.length;x<T;x++){const k=t.charCodeAt(x);k<=255?e[n++]=k:(e[n++]=k>>>8,e[n++]=k&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(e.buffer,0,r);let u=0,h=0,f=this.h1,p=this.h2;const y=3432918353,v=461845907,S=y&gr,_=v&gr;for(let x=0;x<r;x++)x&1?(u=l[x],u=u*y&vi|u*S&gr,u=u<<15|u>>>17,u=u*v&vi|u*_&gr,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[x],h=h*y&vi|h*S&gr,h=h<<15|h>>>17,h=h*v&vi|h*_&gr,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*y&vi|u*S&gr,u=u<<15|u>>>17,u=u*v&vi|u*_&gr,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&vi|t*36045&gr,e=e*4283543511&vi|((e<<16|t>>>16)*2950163797&vi)>>>16,t^=e>>>1,t=t*444984403&vi|t*60499&gr,e=e*3301882366&vi|((e<<16|t>>>16)*3120437893&vi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Nw=Object.freeze({map:null,hash:"",transfer:void 0});var Yl,Kl,pa,zn,Yy,JE;class VA{constructor(){b(this,Yy);b(this,Yl,!1);b(this,Kl,null);b(this,pa,null);b(this,zn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=a(this,zn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return a(this,zn).get(t)}remove(t){const e=a(this,zn).get(t);if(e!==void 0&&(e instanceof Le&&a(this,pa).delete(e.annotationElementId),a(this,zn).delete(t),a(this,zn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of a(this,zn).values())if(n instanceof Le)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=a(this,zn).get(t);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(r=!0,n[o]=l);else r=!0,a(this,zn).set(t,e);r&&E(this,Yy,JE).call(this),e instanceof Le&&((a(this,pa)||w(this,pa,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return a(this,zn).has(t)}get size(){return a(this,zn).size}resetModified(){a(this,Yl)&&(w(this,Yl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tx(this)}get serializable(){if(a(this,zn).size===0)return Nw;const t=new Map,e=new ZE,n=[],r=Object.create(null);let o=!1;for(const[l,u]of a(this,zn)){const h=u instanceof Le?u.serialize(!1,r):u;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),o||(o=!!h.bitmap))}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Nw}get editorStats(){let t=null;const e=new Map;let n=0,r=0;for(const o of a(this,zn).values()){if(!(o instanceof Le)){o.popup&&(o.popup.deleted?r+=1:n+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));const h=t[u]||(t[u]=new Map);for(const[f,p]of Object.entries(l)){if(f==="type")continue;let y=h.get(f);y||(y=new Map,h.set(f,y));const v=y.get(p)??0;y.set(p,v+1)}}if((r>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:r,edited:n}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){w(this,Kl,null)}updateEditor(t,e){var r;const n=(r=a(this,pa))==null?void 0:r.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=a(this,pa))==null?void 0:e.get(t))||null}get modifiedIds(){if(a(this,Kl))return a(this,Kl);const t=[];if(a(this,pa))for(const e of a(this,pa).values())e.serialize()&&t.push(e.annotationElementId);return w(this,Kl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,zn).entries()}}Yl=new WeakMap,Kl=new WeakMap,pa=new WeakMap,zn=new WeakMap,Yy=new WeakSet,JE=function(){a(this,Yl)||(w(this,Yl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var cp;class tx extends VA{constructor(e){super();b(this,cp);const{map:n,hash:r,transfer:o}=e.serializable,l=structuredClone(n,o?{transfer:o}:null);w(this,cp,{map:l,hash:r,transfer:o})}get print(){Te("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,cp)}get modifiedIds(){return Ut(this,"modifiedIds",{ids:new Set,hash:""})}}cp=new WeakMap;var ah;class Hk{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){b(this,ah,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,ah).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||a(this,ah).has(t.loadedName))){if(ee(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),a(this,ah).add(r),n==null||n(t)}catch{Bt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Te("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Bt(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ut(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ut(this,"isSyncFontLoadingSupported",ps||bn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ee(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ut(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(L,D){return L.charCodeAt(D)<<24|L.charCodeAt(D+1)<<16|L.charCodeAt(D+2)<<8|L.charCodeAt(D+3)&255}function r(L,D,I,U){const V=L.substring(0,D),Y=L.substring(D+I);return V+U+Y}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(L,D){if(++f>30){Bt("Load test font never loaded."),D();return}if(h.font="30px "+L,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,L,D))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,y.length,y);const _=16,x=1482184792;let T=n(v,_);for(o=0,l=y.length-3;o<l;o+=4)T=T-x+n(y,o)|0;o<y.length&&(T=T-x+n(y+"XXX",o)|0),v=r(v,_,4,bk(T));const k=`url(data:font/opentype;base64,${btoa(v)});`,M=`@font-face {font-family:"${y}";src:${k}}`;this.insertRule(M);const P=this._document.createElement("div");P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px";for(const L of[t.loadedName,y]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=L,P.append(D)}this._document.body.append(P),p(y,()=>{P.remove(),e.complete()})}}ah=new WeakMap;var ve;class $k{constructor(t,e=null,n,r){b(this,ve);this.compiledGlyphs=Object.create(null),w(this,ve,t),this._inspectFont=e,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${yE(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(l){Bt(`getPathGenerator - ignoring character: "${l}".`)}const o=AE(r==null?void 0:r.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return a(this,ve).black}get bold(){return a(this,ve).bold}get disableFontFace(){return a(this,ve).disableFontFace??!1}set disableFontFace(t){Ut(this,"disableFontFace",!!t)}get fontExtraProperties(){return a(this,ve).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,ve).isInvalidPDFjsFont}get isType3Font(){return a(this,ve).isType3Font}get italic(){return a(this,ve).italic}get missingFile(){return a(this,ve).missingFile}get remeasure(){return a(this,ve).remeasure}get vertical(){return a(this,ve).vertical}get ascent(){return a(this,ve).ascent}get defaultWidth(){return a(this,ve).defaultWidth}get descent(){return a(this,ve).descent}get bbox(){return a(this,ve).bbox}set bbox(t){Ut(this,"bbox",t)}get fontMatrix(){return a(this,ve).fontMatrix}get fallbackName(){return a(this,ve).fallbackName}get loadedName(){return a(this,ve).loadedName}get mimetype(){return a(this,ve).mimetype}get name(){return a(this,ve).name}get data(){return a(this,ve).data}clearData(){a(this,ve).clearData()}get cssFontInfo(){return a(this,ve).cssFontInfo}get systemFontInfo(){return a(this,ve).systemFontInfo}get defaultVMetrics(){return a(this,ve).defaultVMetrics}}ve=new WeakMap;var oh,lh,up,ch,ny;const Iu=class Iu{constructor(t){b(this,ch);b(this,oh);b(this,lh);b(this,up);w(this,oh,t),w(this,lh,new DataView(a(this,oh))),w(this,up,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const f of Iu.strings){const p=e.encode(t[f]);n[f]=p,r+=4+p.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of Iu.strings){const p=n[f],y=p.length;u.setUint32(h,y),l.set(p,h+4),h+=4+y}return ee(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return E(this,ch,ny).call(this,0)}get fontWeight(){return E(this,ch,ny).call(this,1)}get italicAngle(){return E(this,ch,ny).call(this,2)}};oh=new WeakMap,lh=new WeakMap,up=new WeakMap,ch=new WeakSet,ny=function(t){ee(t<Iu.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=a(this,lh).getUint32(e)+4;const n=a(this,lh).getUint32(e);return a(this,up).decode(new Uint8Array(a(this,oh),e+4,n))},K(Iu,"strings",["fontFamily","fontWeight","italicAngle"]);let Dy=Iu;var Lo,_r,Ql,Zl,mf;const Fu=class Fu{constructor(t){b(this,Zl);b(this,Lo);b(this,_r);b(this,Ql);w(this,Lo,t),w(this,_r,new DataView(a(this,Lo))),w(this,Ql,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const v of Fu.strings){const S=e.encode(t[v]);n[v]=S,r+=4+S.length}r+=4;let o,l,u=1+r;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;p.setUint8(y++,t.guessFallback?1:0),p.setUint32(y,0),y+=4,r=0;for(const v of Fu.strings){const S=n[v],_=S.length;r+=4+_,p.setUint32(y,_),f.set(S,y+4),y+=4+_}return p.setUint32(y-r-4,r),t.style&&(p.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,p.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length),ee(y<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(y)}get guessFallback(){return a(this,_r).getUint8(0)!==0}get css(){return E(this,Zl,mf).call(this,0)}get loadedName(){return E(this,Zl,mf).call(this,1)}get baseFontName(){return E(this,Zl,mf).call(this,2)}get src(){return E(this,Zl,mf).call(this,3)}get style(){let t=1;t+=4+a(this,_r).getUint32(t);const e=a(this,_r).getUint32(t),n=a(this,Ql).decode(new Uint8Array(a(this,Lo),t+4,e));t+=4+e;const r=a(this,_r).getUint32(t),o=a(this,Ql).decode(new Uint8Array(a(this,Lo),t+4,r));return{style:n,weight:o}}};Lo=new WeakMap,_r=new WeakMap,Ql=new WeakMap,Zl=new WeakSet,mf=function(t){ee(t<Fu.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=a(this,_r).getUint32(e)+4;const n=a(this,_r).getUint32(e);return a(this,Ql).decode(new Uint8Array(a(this,Lo),e+4,n))},K(Fu,"strings",["css","loadedName","baseFontName","src"]);let Ny=Fu;var uh,hh,dh,fh,Vs,kr,hp,we,Je,Wi,sy,yf;const $t=class $t{constructor({data:t,extra:e}){b(this,Je);b(this,kr);b(this,hp);b(this,we);w(this,kr,t),w(this,hp,new TextDecoder),w(this,we,new DataView(a(this,kr))),e&&Object.assign(this,e)}get black(){return E(this,Je,Wi).call(this,0)}get bold(){return E(this,Je,Wi).call(this,1)}get disableFontFace(){return E(this,Je,Wi).call(this,2)}get fontExtraProperties(){return E(this,Je,Wi).call(this,3)}get isInvalidPDFjsFont(){return E(this,Je,Wi).call(this,4)}get isType3Font(){return E(this,Je,Wi).call(this,5)}get italic(){return E(this,Je,Wi).call(this,6)}get missingFile(){return E(this,Je,Wi).call(this,7)}get remeasure(){return E(this,Je,Wi).call(this,8)}get vertical(){return E(this,Je,Wi).call(this,9)}get ascent(){return E(this,Je,sy).call(this,0)}get defaultWidth(){return E(this,Je,sy).call(this,1)}get descent(){return E(this,Je,sy).call(this,2)}get bbox(){let t=a($t,hh);if(a(this,we).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<4;r++)n.push(a(this,we).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=a($t,dh);if(a(this,we).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<6;r++)n.push(a(this,we).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=a($t,fh);if(a(this,we).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<3;r++)n.push(a(this,we).getInt16(t,!0)),t+=2;return n}get fallbackName(){return E(this,Je,yf).call(this,0)}get loadedName(){return E(this,Je,yf).call(this,1)}get mimetype(){return E(this,Je,yf).call(this,2)}get name(){return E(this,Je,yf).call(this,3)}get data(){let t=a($t,Vs);const e=a(this,we).getUint32(t);t+=4+e;const n=a(this,we).getUint32(t);t+=4+n;const r=a(this,we).getUint32(t);t+=4+r;const o=a(this,we).getUint32(t);if(o!==0)return new Uint8Array(a(this,kr),t+4,o)}clearData(){let t=a($t,Vs);const e=a(this,we).getUint32(t);t+=4+e;const n=a(this,we).getUint32(t);t+=4+n;const r=a(this,we).getUint32(t);t+=4+r;const o=a(this,we).getUint32(t);new Uint8Array(a(this,kr),t+4,o).fill(0),a(this,we).setUint32(t,0)}get cssFontInfo(){let t=a($t,Vs);const e=a(this,we).getUint32(t);t+=4+e;const n=a(this,we).getUint32(t);t+=4+n;const r=a(this,we).getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(a(this,kr),t+4,r)),new Dy(o.buffer)}get systemFontInfo(){let t=a($t,Vs);const e=a(this,we).getUint32(t);t+=4+e;const n=a(this,we).getUint32(t);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(a(this,kr),t+4,n)),new Ny(r.buffer)}static write(t){const e=t.systemFontInfo?Ny.write(t.systemFontInfo):null,n=t.cssFontInfo?Dy.write(t.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const x of $t.strings)o[x]=r.encode(t[x]),l+=4+o[x].length;const u=a($t,Vs)+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;const v=$t.bools.length;let S=0,_=0;for(let x=0;x<v;x++){const T=t[$t.bools[x]];S|=(T===void 0?0:T?2:1)<<_,_+=2,(_===8||x===v-1)&&(p.setUint8(y++,S),S=0,_=0)}ee(y===a($t,uh),"FontInfo.write: Boolean properties offset mismatch");for(const x of $t.numbers)p.setFloat64(y,t[x]),y+=8;if(ee(y===a($t,hh),"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(y++,4);for(const x of t.bbox)p.setInt16(y,x,!0),y+=2}else p.setUint8(y++,0),y+=8;if(ee(y===a($t,dh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(y++,6);for(const x of t.fontMatrix)p.setFloat64(y,x,!0),y+=8}else p.setUint8(y++,0),y+=48;if(ee(y===a($t,fh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(y++,1);for(const x of t.defaultVMetrics)p.setInt16(y,x,!0),y+=2}else p.setUint8(y++,0),y+=6;ee(y===a($t,Vs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(a($t,Vs),0),y+=4;for(const x of $t.strings){const T=o[x],k=T.length;p.setUint32(y,k),f.set(T,y+4),y+=4+k}if(p.setUint32(a($t,Vs),y-a($t,Vs)-4),!e)p.setUint32(y,0),y+=4;else{const x=e.byteLength;p.setUint32(y,x),ee(y+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+x}if(!n)p.setUint32(y,0),y+=4;else{const x=n.byteLength;p.setUint32(y,x),ee(y+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),y+4),y+=4+x}return t.data===void 0?(p.setUint32(y,0),y+=4):(p.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),ee(y<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(y)}};uh=new WeakMap,hh=new WeakMap,dh=new WeakMap,fh=new WeakMap,Vs=new WeakMap,kr=new WeakMap,hp=new WeakMap,we=new WeakMap,Je=new WeakSet,Wi=function(t){ee(t<$t.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,r=a(this,we).getUint8(e)>>n&3;return r===0?void 0:r===2},sy=function(t){return ee(t<$t.numbers.length,"Invalid number index"),a(this,we).getFloat64(a($t,uh)+t*8)},yf=function(t){ee(t<$t.strings.length,"Invalid string index");let e=a($t,Vs)+4;for(let o=0;o<t;o++)e+=a(this,we).getUint32(e)+4;const n=a(this,we).getUint32(e),r=new Uint8Array(n);return r.set(new Uint8Array(a(this,kr),e+4,n)),a(this,hp).decode(r)},K($t,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),K($t,"numbers",["ascent","defaultWidth","descent"]),K($t,"strings",["fallbackName","loadedName","mimetype","name"]),b($t,uh,Math.ceil($t.bools.length*2/8)),b($t,hh,a($t,uh)+$t.numbers.length*8),b($t,dh,a($t,hh)+1+8),b($t,fh,a($t,dh)+1+48),b($t,Vs,a($t,fh)+1+6);let Iw=$t;var dp,fp,pp,gp,mp,yp,vp,wp;const Re=class Re{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,r=[],o=[],l=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],r=t[2],o=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(r.length/2),y=Math.floor(o.length/3),v=l.length,S=u.length;let _=0;for(const D of u)_+=1,_=Math.ceil(_/4)*4,_+=4+D.coords.length*4,_+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(_+=4);const x=20+p*8+y*3+v*8+(n?16:0)+(f?3:0)+_,T=new ArrayBuffer(x),k=new DataView(T),M=new Uint8Array(T);k.setUint8(a(Re,dp),e),k.setUint8(a(Re,fp),n?1:0),k.setUint8(a(Re,pp),f?1:0),k.setUint8(a(Re,gp),h),k.setUint32(a(Re,mp),p,!0),k.setUint32(a(Re,yp),y,!0),k.setUint32(a(Re,vp),v,!0),k.setUint32(a(Re,wp),S,!0);let P=20;new Float32Array(T,P,p*2).set(r),P+=p*8,M.set(o,P),P+=y*3;for(const[D,I]of l)k.setFloat32(P,D,!0),P+=4,k.setUint32(P,parseInt(I.slice(1),16),!0),P+=4;if(n)for(const D of n)k.setFloat32(P,D,!0),P+=4;f&&(M.set(f,P),P+=3);for(let D=0;D<u.length;D++){const I=u[D];k.setUint8(P,I.type),P+=1,P=Math.ceil(P/4)*4,k.setUint32(P,I.coords.length,!0),P+=4,new Int32Array(T,P,I.coords.length).set(I.coords),P+=I.coords.length*4,k.setUint32(P,I.colors.length,!0),P+=4,new Int32Array(T,P,I.colors.length).set(I.colors),P+=I.colors.length*4,I.verticesPerRow!==void 0&&(k.setUint32(P,I.verticesPerRow,!0),P+=4)}return T}getIR(){const t=this.view,e=this.data[a(Re,dp)],n=!!this.data[a(Re,fp)],r=!!this.data[a(Re,pp)],o=t.getUint32(a(Re,mp),!0),l=t.getUint32(a(Re,yp),!0),u=t.getUint32(a(Re,vp),!0),h=t.getUint32(a(Re,wp),!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const y=new Uint8Array(this.buffer,f,l*3);f+=l*3;const v=[];for(let T=0;T<u;++T){const k=t.getFloat32(f,!0);f+=4;const M=t.getUint32(f,!0);f+=4,v.push([k,`#${M.toString(16).padStart(6,"0")}`])}let S=null;if(n){S=[];for(let T=0;T<4;++T)S.push(t.getFloat32(f,!0)),f+=4}let _=null;r&&(_=new Uint8Array(this.buffer,f,3),f+=3);const x=[];for(let T=0;T<h;++T){const k=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const M=t.getUint32(f,!0);f+=4;const P=new Int32Array(this.buffer,f,M);f+=M*4;const L=t.getUint32(f,!0);f+=4;const D=new Int32Array(this.buffer,f,L);f+=L*4;const I={type:k,coords:P,colors:D};k===fw.LATTICE&&(I.verticesPerRow=t.getUint32(f,!0),f+=4),x.push(I)}if(e===1)return["RadialAxial","axial",S,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",S,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const T=this.data[a(Re,gp)];let k=null;if(p.length>0){let M=p[0],P=p[0],L=p[1],D=p[1];for(let I=0;I<p.length;I+=2){const U=p[I],V=p[I+1];M=M>U?U:M,L=L>V?V:L,P=P<U?U:P,D=D<V?V:D}k=[M,L,P,D]}return["Mesh",T,p,y,x,k,S,_]}throw new Error(`Unsupported pattern kind: ${e}`)}};dp=new WeakMap,fp=new WeakMap,pp=new WeakMap,gp=new WeakMap,mp=new WeakMap,yp=new WeakMap,vp=new WeakMap,wp=new WeakMap,b(Re,dp,0),b(Re,fp,1),b(Re,pp,2),b(Re,gp,3),b(Re,mp,4),b(Re,yp,8),b(Re,vp,12),b(Re,wp,16);let Fw=Re;var ph;class Wk{constructor(t){b(this,ph);w(this,ph,t)}static write(t){let e,n;return bn.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return bn.isFloat16ArraySupported?new Float16Array(a(this,ph)):new Float32Array(a(this,ph))}}ph=new WeakMap;function Vk(g){if(g instanceof URL)return g.href;if(typeof g=="string"){if(ps)return g;const t=URL.parse(g,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Gk(g){if(ps&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return _g(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g==null?void 0:g.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function jm(g){if(typeof g!="string")return null;if(g.endsWith("/"))return g;throw new Error(`Invalid factory url: "${g}" must include trailing slash.`)}const Ow=g=>typeof g=="object"&&Number.isInteger(g==null?void 0:g.num)&&g.num>=0&&Number.isInteger(g==null?void 0:g.gen)&&g.gen>=0,Xk=g=>typeof g=="object"&&typeof(g==null?void 0:g.name)=="string",qk=kk.bind(null,Ow,Xk);var ga,Ky;class Yk{constructor(){b(this,ga,new Map);b(this,Ky,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};a(this,Ky).then(()=>{for(const[r]of a(this,ga))r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Bt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}a(this,ga).set(e,r)}removeEventListener(t,e){const n=a(this,ga).get(e);n==null||n(),a(this,ga).delete(e)}terminate(){for(const[,t]of a(this,ga))t==null||t();a(this,ga).clear()}}ga=new WeakMap,Ky=new WeakMap;const Hm={DATA:1,ERROR:2},ln={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function W1(){}function _s(g){if(g instanceof il||g instanceof pw||g instanceof F1||g instanceof Py||g instanceof iw)return g;switch(g instanceof Error||typeof g=="object"&&g!==null||Te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new il(g.message);case"InvalidPDFException":return new pw(g.message);case"PasswordException":return new F1(g.message,g.code);case"ResponseException":return new Py(g.message,g.status,g.missing);case"UnknownErrorException":return new iw(g.message,g.details)}return new iw(g.message,g.toString())}var gh,Di,ex,nx,sx,iy;class vf{constructor(t,e,n){b(this,Di);b(this,gh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",E(this,Di,ex).bind(this),{signal:a(this,gh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:l,targetName:u,stream:ln.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{ee(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:ln.CANCEL,streamId:o,reason:_s(f)}),p.promise}},n)}destroy(){var t;(t=a(this,gh))==null||t.abort(),w(this,gh,null)}}gh=new WeakMap,Di=new WeakSet,ex=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,Di,sx).call(this,t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Hm.DATA)r.resolve(t.data);else if(t.callback===Hm.ERROR)r.reject(_s(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:Hm.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:Hm.ERROR,callbackId:t.callbackId,reason:_s(l)})});return}if(t.streamId){E(this,Di,nx).call(this,t);return}e(t.data)},nx=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:ln.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:ln.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){ee(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:ln.ERROR,streamId:e,reason:_s(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:n,targetName:r,stream:ln.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:ln.START_COMPLETE,streamId:e,reason:_s(f)})})},sx=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case ln.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(_s(t.reason));break;case ln.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(_s(t.reason));break;case ln.PULL:if(!u){o.postMessage({sourceName:n,targetName:r,stream:ln.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||W1).then(function(){o.postMessage({sourceName:n,targetName:r,stream:ln.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:ln.PULL_COMPLETE,streamId:e,reason:_s(f)})});break;case ln.ENQUEUE:if(ee(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ln.CLOSE:if(ee(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),E(this,Di,iy).call(this,l,e);break;case ln.ERROR:ee(l,"error should have stream controller"),l.controller.error(_s(t.reason)),E(this,Di,iy).call(this,l,e);break;case ln.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(_s(t.reason)),E(this,Di,iy).call(this,l,e);break;case ln.CANCEL:if(!u)break;const h=_s(t.reason);Promise.try(u.onCancel||W1,h).then(function(){o.postMessage({sourceName:n,targetName:r,stream:ln.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:ln.CANCEL_COMPLETE,streamId:e,reason:_s(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},iy=async function(t,e){var n,r,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(r=t.pullCall)==null?void 0:r.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var Ap;class ix{constructor({enableHWA:t=!1}){b(this,Ap,!1);w(this,Ap,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!a(this,Ap)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Te("Abstract method `_createCanvas` called.")}}Ap=new WeakMap;class Kk extends ix{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class rx{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class V1 extends rx{async _fetch(t){const e=await kg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):_g(e)}}class ax{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,o){return"none"}destroy(t=!1){}}var Jl,mh,ma,ya,es,tc,ec,pt,Qn,wf,_u,ry,ku,ox,Bw,Tu,Af,Sf,Uw,bf;class Qk extends ax{constructor({docId:e,ownerDocument:n=globalThis.document}){super();b(this,pt);b(this,Jl);b(this,mh);b(this,ma);b(this,ya);b(this,es);b(this,tc);b(this,ec,0);w(this,ya,e),w(this,es,n)}addFilter(e){if(!e)return"none";let n=a(this,pt,Qn).get(e);if(n)return n;const[r,o,l]=E(this,pt,ry).call(this,e),u=e.length===1?r:`${r}${o}${l}`;if(n=a(this,pt,Qn).get(u),n)return a(this,pt,Qn).set(e,n),n;const h=`g_${a(this,ya)}_transfer_map_${mn(this,ec)._++}`,f=E(this,pt,ku).call(this,h);a(this,pt,Qn).set(e,f),a(this,pt,Qn).set(u,f);const p=E(this,pt,Tu).call(this,h);return E(this,pt,Sf).call(this,r,o,l,p),f}addHCMFilter(e,n){var _;const r=`${e}-${n}`,o="base";let l=a(this,pt,wf).get(o);if((l==null?void 0:l.key)===r||(l?((_=l.filter)==null||_.remove(),l.key=r,l.url="none",l.filter=null):(l={key:r,url:"none",filter:null},a(this,pt,wf).set(o,l)),!e||!n))return l.url;const u=E(this,pt,bf).call(this,e);e=ut.makeHexColor(...u);const h=E(this,pt,bf).call(this,n);if(n=ut.makeHexColor(...h),a(this,pt,_u).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const f=new Array(256);for(let x=0;x<=255;x++){const T=x/255;f[x]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const p=f.join(","),y=`g_${a(this,ya)}_hcm_filter`,v=l.filter=E(this,pt,Tu).call(this,y);E(this,pt,Sf).call(this,p,p,p,v),E(this,pt,Bw).call(this,v);const S=(x,T)=>{const k=u[x]/255,M=h[x]/255,P=new Array(T+1);for(let L=0;L<=T;L++)P[L]=k+L/T*(M-k);return P.join(",")};return E(this,pt,Sf).call(this,S(0,5),S(1,5),S(2,5),v),l.url=E(this,pt,ku).call(this,y),l.url}addAlphaFilter(e){let n=a(this,pt,Qn).get(e);if(n)return n;const[r]=E(this,pt,ry).call(this,[e]),o=`alpha_${r}`;if(n=a(this,pt,Qn).get(o),n)return a(this,pt,Qn).set(e,n),n;const l=`g_${a(this,ya)}_alpha_map_${mn(this,ec)._++}`,u=E(this,pt,ku).call(this,l);a(this,pt,Qn).set(e,u),a(this,pt,Qn).set(o,u);const h=E(this,pt,Tu).call(this,l);return E(this,pt,Uw).call(this,r,h),u}addLuminosityFilter(e){let n=a(this,pt,Qn).get(e||"luminosity");if(n)return n;let r,o;if(e?([r]=E(this,pt,ry).call(this,[e]),o=`luminosity_${r}`):o="luminosity",n=a(this,pt,Qn).get(o),n)return a(this,pt,Qn).set(e,n),n;const l=`g_${a(this,ya)}_luminosity_map_${mn(this,ec)._++}`,u=E(this,pt,ku).call(this,l);a(this,pt,Qn).set(e,u),a(this,pt,Qn).set(o,u);const h=E(this,pt,Tu).call(this,l);return E(this,pt,ox).call(this,h),e&&E(this,pt,Uw).call(this,r,h),u}addHighlightHCMFilter(e,n,r,o,l){var M;const u=`${n}-${r}-${o}-${l}`;let h=a(this,pt,wf).get(e);if((h==null?void 0:h.key)===u||(h?((M=h.filter)==null||M.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},a(this,pt,wf).set(e,h)),!n||!r))return h.url;const[f,p]=[n,r].map(E(this,pt,bf).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[S,_]=[o,l].map(E(this,pt,bf).bind(this));v<y&&([y,v,S,_]=[v,y,_,S]),a(this,pt,_u).style.color="";const x=(P,L,D)=>{const I=new Array(256),U=(v-y)/D,V=P/255,Y=(L-P)/(255*D);let et=0;for(let Z=0;Z<=D;Z++){const Ct=Math.round(y+Z*U),_t=V+Z*Y;for(let At=et;At<=Ct;At++)I[At]=_t;et=Ct+1}for(let Z=et;Z<256;Z++)I[Z]=I[et-1];return I.join(",")},T=`g_${a(this,ya)}_hcm_${e}_filter`,k=h.filter=E(this,pt,Tu).call(this,T);return E(this,pt,Bw).call(this,k),E(this,pt,Sf).call(this,x(S[0],_[0],5),x(S[1],_[1],5),x(S[2],_[2],5),k),h.url=E(this,pt,ku).call(this,T),h.url}destroy(e=!1){var n,r,o,l;e&&((n=a(this,tc))!=null&&n.size)||((r=a(this,ma))==null||r.parentNode.parentNode.remove(),w(this,ma,null),(o=a(this,mh))==null||o.clear(),w(this,mh,null),(l=a(this,tc))==null||l.clear(),w(this,tc,null),w(this,ec,0))}}Jl=new WeakMap,mh=new WeakMap,ma=new WeakMap,ya=new WeakMap,es=new WeakMap,tc=new WeakMap,ec=new WeakMap,pt=new WeakSet,Qn=function(){return a(this,mh)||w(this,mh,new Map)},wf=function(){return a(this,tc)||w(this,tc,new Map)},_u=function(){if(!a(this,ma)){const e=a(this,es).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=a(this,es).createElementNS(Jr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),w(this,ma,a(this,es).createElementNS(Jr,"defs")),e.append(r),r.append(a(this,ma)),a(this,es).body.append(e)}return a(this,ma)},ry=function(e){if(e.length===1){const f=e[0],p=new Array(256);for(let v=0;v<256;v++)p[v]=f[v]/255;const y=p.join(",");return[y,y,y]}const[n,r,o]=e,l=new Array(256),u=new Array(256),h=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,u[f]=r[f]/255,h[f]=o[f]/255;return[l.join(","),u.join(","),h.join(",")]},ku=function(e){if(a(this,Jl)===void 0){w(this,Jl,"");const n=a(this,es).URL;n!==a(this,es).baseURI&&(h0(n)?Bt('#createUrl: ignore "data:"-URL for performance reasons.'):w(this,Jl,pE(n,"")))}return`url(${a(this,Jl)}#${e})`},ox=function(e){const n=a(this,es).createElementNS(Jr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Bw=function(e){const n=a(this,es).createElementNS(Jr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Tu=function(e){const n=a(this,es).createElementNS(Jr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),a(this,pt,_u).append(n),n},Af=function(e,n,r){const o=a(this,es).createElementNS(Jr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),e.append(o)},Sf=function(e,n,r,o){const l=a(this,es).createElementNS(Jr,"feComponentTransfer");o.append(l),E(this,pt,Af).call(this,l,"feFuncR",e),E(this,pt,Af).call(this,l,"feFuncG",n),E(this,pt,Af).call(this,l,"feFuncB",r)},Uw=function(e,n){const r=a(this,es).createElementNS(Jr,"feComponentTransfer");n.append(r),E(this,pt,Af).call(this,r,"feFuncA",e)},bf=function(e){return a(this,pt,_u).style.color=e,Pg(getComputedStyle(a(this,pt,_u)).getPropertyValue("color"))};class lx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class G1 extends lx{async _fetch(t){const e=await kg(t,"arraybuffer");return new Uint8Array(e)}}class cx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class X1 extends cx{async _fetch(t){const e=await kg(t,"arraybuffer");return new Uint8Array(e)}}ps&&Bt("Please use the `legacy` build in Node.js environments.");async function GA(g){const e=await process.getBuiltinModule("fs").promises.readFile(g);return new Uint8Array(e)}class Zk extends ax{}class Jk extends ix{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class tT extends rx{async _fetch(t){return GA(t)}}class eT extends lx{async _fetch(t){return GA(t)}}class nT extends cx{async _fetch(t){return GA(t)}}const Eu="__forcedDependency",{floor:q1,ceil:Y1}=Math;function $m(g,t,e,n,r,o){g[t*4+0]=Math.min(g[t*4+0],e),g[t*4+1]=Math.min(g[t*4+1],n),g[t*4+2]=Math.max(g[t*4+2],r),g[t*4+3]=Math.max(g[t*4+3],o)}const zw=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var yh,Do;class sT{constructor(t,e){b(this,yh);b(this,Do);w(this,yh,t),w(this,Do,e)}get length(){return a(this,yh).length}isEmpty(t){return a(this,yh)[t]===zw}minX(t){return a(this,Do)[t*4+0]/256}minY(t){return a(this,Do)[t*4+1]/256}maxX(t){return(a(this,Do)[t*4+2]+1)/256}maxY(t){return(a(this,Do)[t*4+3]+1)/256}}yh=new WeakMap,Do=new WeakMap;const Wm=(g,t)=>{if(!g)return;let e=g.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},g.set(t,e)),e};var Ps,Rs,nc,Yi,sc,va,ge,Ae,wa,Ms,Sp,vh,ic,rc,Aa,ns,Tr,bp,jw;class iT{constructor(t,e,n=!1){b(this,bp);b(this,Ps,{__proto__:null});b(this,Rs,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Eu]:[]});b(this,nc,new Map);b(this,Yi,[]);b(this,sc,[]);b(this,va,[[1,0,0,1,0,0]]);b(this,ge,[-1/0,-1/0,1/0,1/0]);b(this,Ae,new Float64Array([1/0,1/0,-1/0,-1/0]));b(this,wa,-1);b(this,Ms,new Set);b(this,Sp,new Map);b(this,vh,new Map);b(this,ic);b(this,rc);b(this,Aa);b(this,ns);b(this,Tr);w(this,ic,t.width),w(this,rc,t.height),E(this,bp,jw).call(this,e),n&&w(this,Tr,new Map)}growOperationsCount(t){t>=a(this,ns).length&&E(this,bp,jw).call(this,t,a(this,ns))}save(t){return w(this,Ps,{__proto__:a(this,Ps)}),w(this,Rs,{__proto__:a(this,Rs),transform:{__proto__:a(this,Rs).transform},moveText:{__proto__:a(this,Rs).moveText},sameLineText:{__proto__:a(this,Rs).sameLineText},[Eu]:{__proto__:a(this,Rs)[Eu]}}),w(this,ge,{__proto__:a(this,ge)}),a(this,Yi).push(t),this}restore(t){var r;const e=Object.getPrototypeOf(a(this,Ps));if(e===null)return this;w(this,Ps,e),w(this,Rs,Object.getPrototypeOf(a(this,Rs))),w(this,ge,Object.getPrototypeOf(a(this,ge)));const n=a(this,Yi).pop();return n!==void 0&&((r=Wm(a(this,Tr),t))==null||r.dependencies.add(n),a(this,ns)[t]=a(this,ns)[n]),this}recordOpenMarker(t){return a(this,Yi).push(t),this}getOpenMarker(){return a(this,Yi).length===0?null:a(this,Yi).at(-1)}recordCloseMarker(t){var n;const e=a(this,Yi).pop();return e!==void 0&&((n=Wm(a(this,Tr),t))==null||n.dependencies.add(e),a(this,ns)[t]=a(this,ns)[e]),this}beginMarkedContent(t){return a(this,sc).push(t),this}endMarkedContent(t){var n;const e=a(this,sc).pop();return e!==void 0&&((n=Wm(a(this,Tr),t))==null||n.dependencies.add(e),a(this,ns)[t]=a(this,ns)[e]),this}pushBaseTransform(t){return a(this,va).push(ut.multiplyByDOMMatrix(a(this,va).at(-1),t.getTransform())),this}popBaseTransform(){return a(this,va).length>1&&a(this,va).pop(),this}recordSimpleData(t,e){return a(this,Ps)[t]=e,this}recordIncrementalData(t,e){return a(this,Rs)[t].push(e),this}resetIncrementalData(t,e){return a(this,Rs)[t].length=0,this}recordNamedData(t,e){return a(this,nc).set(t,e),this}recordSimpleDataFromNamed(t,e,n){a(this,Ps)[t]=a(this,nc).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Eu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in a(this,Ps)&&this.recordFutureForcedDependency(e,a(this,Ps)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of a(this,Ms))this.recordFutureForcedDependency(Eu,t);return this}resetBBox(t){return a(this,wa)!==t&&(w(this,wa,t),a(this,Ae)[0]=1/0,a(this,Ae)[1]=1/0,a(this,Ae)[2]=-1/0,a(this,Ae)[3]=-1/0),this}recordClipBox(t,e,n,r,o,l){const u=ut.multiplyByDOMMatrix(a(this,va).at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];ut.axialAlignedBoundingBox([n,o,r,l],u,h);const f=ut.intersect(a(this,ge),h);return f?(a(this,ge)[0]=f[0],a(this,ge)[1]=f[1],a(this,ge)[2]=f[2],a(this,ge)[3]=f[3]):(a(this,ge)[0]=a(this,ge)[1]=1/0,a(this,ge)[2]=a(this,ge)[3]=-1/0),this}recordBBox(t,e,n,r,o,l){const u=a(this,ge);if(u[0]===1/0)return this;const h=ut.multiplyByDOMMatrix(a(this,va).at(-1),e.getTransform());if(u[0]===-1/0)return ut.axialAlignedBoundingBox([n,o,r,l],h,a(this,Ae)),this;const f=[1/0,1/0,-1/0,-1/0];return ut.axialAlignedBoundingBox([n,o,r,l],h,f),a(this,Ae)[0]=Math.min(a(this,Ae)[0],Math.max(f[0],u[0])),a(this,Ae)[1]=Math.min(a(this,Ae)[1],Math.max(f[1],u[1])),a(this,Ae)[2]=Math.max(a(this,Ae)[2],Math.min(f[2],u[2])),a(this,Ae)[3]=Math.max(a(this,Ae)[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,r=1,o=0,l=0,u){const h=n.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&a(this,vh).get(n),f!==!1&&(p=[0,0,0,0],ut.axialAlignedBoundingBox(h,n.fontMatrix,p),(r!==1||o!==0||l!==0)&&ut.scaleMinMax([r,0,0,-r,o,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return h&&p&&f===void 0&&(f=p[0]<=o-y.actualBoundingBoxLeft&&p[2]>=o+y.actualBoundingBoxRight&&p[1]<=l-y.actualBoundingBoxAscent&&p[3]>=l+y.actualBoundingBoxDescent,a(this,vh).set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return a(this,Ae)[0]=Math.max(0,a(this,ge)[0]),a(this,Ae)[1]=Math.max(0,a(this,ge)[1]),a(this,Ae)[2]=Math.min(a(this,ic),a(this,ge)[2]),a(this,Ae)[3]=Math.min(a(this,rc),a(this,ge)[3]),this}getSimpleIndex(t){return a(this,Ps)[t]}recordDependencies(t,e){const n=a(this,Ms),r=a(this,Ps),o=a(this,Rs);for(const l of e)l in a(this,Ps)?n.add(r[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return a(this,nc).has(e)&&a(this,Ms).add(a(this,nc).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Eu]),a(this,Tr)){const n=Wm(a(this,Tr),t),{dependencies:r}=n;a(this,Ms).forEach(r.add,r),a(this,Yi).forEach(r.add,r),a(this,sc).forEach(r.add,r),r.delete(t),n.isRenderingOperation=!0}if(a(this,wa)===t){const n=q1(a(this,Ae)[0]*256/a(this,ic)),r=q1(a(this,Ae)[1]*256/a(this,rc)),o=Y1(a(this,Ae)[2]*256/a(this,ic)),l=Y1(a(this,Ae)[3]*256/a(this,rc));$m(a(this,Aa),t,n,r,o,l);for(const u of a(this,Ms))u!==t&&$m(a(this,Aa),u,n,r,o,l);for(const u of a(this,Yi))u!==t&&$m(a(this,Aa),u,n,r,o,l);for(const u of a(this,sc))u!==t&&$m(a(this,Aa),u,n,r,o,l);e||(a(this,Ms).clear(),w(this,wa,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(a(this,Ms));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return a(this,wa)===t&&(w(this,wa,-1),a(this,ge)[0]=Math.max(a(this,ge)[0],a(this,Ae)[0]),a(this,ge)[1]=Math.max(a(this,ge)[1],a(this,Ae)[1]),a(this,ge)[2]=Math.min(a(this,ge)[2],a(this,Ae)[2]),a(this,ge)[3]=Math.min(a(this,ge)[3],a(this,Ae)[3]),e||a(this,Ms).clear()),this}_takePendingDependencies(){const t=a(this,Ms);return w(this,Ms,new Set),t}_extractOperation(t){const e=a(this,Sp).get(t);return a(this,Sp).delete(t),e}_pushPendingDependencies(t){for(const e of t)a(this,Ms).add(e)}take(){return a(this,vh).clear(),new sT(a(this,ns),a(this,Aa))}takeDebugMetadata(){return a(this,Tr)}}Ps=new WeakMap,Rs=new WeakMap,nc=new WeakMap,Yi=new WeakMap,sc=new WeakMap,va=new WeakMap,ge=new WeakMap,Ae=new WeakMap,wa=new WeakMap,Ms=new WeakMap,Sp=new WeakMap,vh=new WeakMap,ic=new WeakMap,rc=new WeakMap,Aa=new WeakMap,ns=new WeakMap,Tr=new WeakMap,bp=new WeakSet,jw=function(t,e){const n=new ArrayBuffer(t*4);w(this,Aa,new Uint8ClampedArray(n)),w(this,ns,new Uint32Array(n)),e&&e.length>0?(a(this,ns).set(e),a(this,ns).fill(zw,e.length)):a(this,ns).fill(zw)};var _e,Ke,Ki,wh,Ah;const tS=class tS{constructor(t,e,n){b(this,_e);b(this,Ke);b(this,Ki);b(this,wh,0);b(this,Ah,0);if(t instanceof tS&&a(t,Ki)===!!n)return t;w(this,_e,t),w(this,Ke,e),w(this,Ki,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return mn(this,Ah)._++,a(this,_e).save(a(this,Ke)),this}restore(t){return a(this,Ah)>0&&(a(this,_e).restore(a(this,Ke)),mn(this,Ah)._--),this}recordOpenMarker(t){return mn(this,wh)._++,this}getOpenMarker(){return a(this,wh)>0?a(this,Ke):a(this,_e).getOpenMarker()}recordCloseMarker(t){return mn(this,wh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return a(this,_e).pushBaseTransform(t),this}popBaseTransform(){return a(this,_e).popBaseTransform(),this}recordSimpleData(t,e){return a(this,_e).recordSimpleData(t,a(this,Ke)),this}recordIncrementalData(t,e){return a(this,_e).recordIncrementalData(t,a(this,Ke)),this}resetIncrementalData(t,e){return a(this,_e).resetIncrementalData(t,a(this,Ke)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return a(this,_e).recordSimpleDataFromNamed(t,e,a(this,Ke)),this}recordFutureForcedDependency(t,e){return a(this,_e).recordFutureForcedDependency(t,a(this,Ke)),this}inheritSimpleDataAsFutureForcedDependencies(t){return a(this,_e).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,_e).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return a(this,Ki)||a(this,_e).resetBBox(a(this,Ke)),this}recordClipBox(t,e,n,r,o,l){return a(this,Ki)||a(this,_e).recordClipBox(a(this,Ke),e,n,r,o,l),this}recordBBox(t,e,n,r,o,l){return a(this,Ki)||a(this,_e).recordBBox(a(this,Ke),e,n,r,o,l),this}recordCharacterBBox(t,e,n,r,o,l,u){return a(this,Ki)||a(this,_e).recordCharacterBBox(a(this,Ke),e,n,r,o,l,u),this}recordFullPageBBox(t){return a(this,Ki)||a(this,_e).recordFullPageBBox(a(this,Ke)),this}getSimpleIndex(t){return a(this,_e).getSimpleIndex(t)}recordDependencies(t,e){return a(this,_e).recordDependencies(a(this,Ke),e),this}recordNamedDependency(t,e){return a(this,_e).recordNamedDependency(a(this,Ke),e),this}recordOperation(t){return a(this,_e).recordOperation(a(this,Ke),!0),this}recordShowTextOperation(t){return a(this,_e).recordShowTextOperation(a(this,Ke),!0),this}bboxToClipBoxDropOperation(t){return a(this,Ki)||a(this,_e).bboxToClipBoxDropOperation(a(this,Ke),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};_e=new WeakMap,Ke=new WeakMap,Ki=new WeakMap,wh=new WeakMap,Ah=new WeakMap;let Iy=tS;const wi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},$n={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Hw(g,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),g.clip(r)}class XA{isModifyingCurrentTransform(){return!1}getPattern(){Te("Abstract method `getPattern` called.")}}class rT extends XA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,r=this._p0,o=this._p1;if(e&&(r=r.slice(),o=o.slice(),ut.applyTransform(r,e),ut.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let l=this._r0,u=this._r1;if(e){const h=new Float32Array(2);ut.singularValueDecompose2dScale(e,h),l*=h[0],u*=h[0]}n=t.createRadialGradient(r[0],r[1],l,o[0],o[1],u)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,r){let o;if(r===$n.STROKE||r===$n.FILL){if(this.isOriginBased()){let v=ut.transform(n,e.baseTransform);this.matrix&&(v=ut.transform(v,this.matrix));const S=.001,_=Math.hypot(v[0],v[1]),x=Math.hypot(v[2],v[3]),T=(v[0]*v[2]+v[1]*v[3])/(_*x);if(Math.abs(T)<S)if(this.isRadial()){if(Math.abs(_-x)<S)return this._createGradient(t,v)}else return this._createGradient(t,v)}const l=e.current.getClippedPathBoundingBox(r,We(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=ut.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Hw(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else Hw(t,this._bbox),o=this._createGradient(t);return o}}function ow(g,t,e,n,r,o,l,u){const h=t.coords,f=t.colors,p=g.data,y=g.width*4;let v;h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=o,o=l,l=v),h[n+1]>h[r+1]&&(v=n,n=r,r=v,v=l,l=u,u=v),h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=o,o=l,l=v);const S=(h[e]+t.offsetX)*t.scaleX,_=(h[e+1]+t.offsetY)*t.scaleY,x=(h[n]+t.offsetX)*t.scaleX,T=(h[n+1]+t.offsetY)*t.scaleY,k=(h[r]+t.offsetX)*t.scaleX,M=(h[r+1]+t.offsetY)*t.scaleY;if(_>=M)return;const P=f[o],L=f[o+1],D=f[o+2],I=f[l],U=f[l+1],V=f[l+2],Y=f[u],et=f[u+1],Z=f[u+2],Ct=Math.round(_),_t=Math.round(M);let At,Tt,ot,st,W,dt,tt,O;for(let H=Ct;H<=_t;H++){if(H<T){const Mt=H<_?0:(_-H)/(_-T);At=S-(S-x)*Mt,Tt=P-(P-I)*Mt,ot=L-(L-U)*Mt,st=D-(D-V)*Mt}else{let Mt;H>M?Mt=1:T===M?Mt=0:Mt=(T-H)/(T-M),At=x-(x-k)*Mt,Tt=I-(I-Y)*Mt,ot=U-(U-et)*Mt,st=V-(V-Z)*Mt}let ft;H<_?ft=0:H>M?ft=1:ft=(_-H)/(_-M),W=S-(S-k)*ft,dt=P-(P-Y)*ft,tt=L-(L-et)*ft,O=D-(D-Z)*ft;const Pt=Math.round(Math.min(At,W)),bt=Math.round(Math.max(At,W));let Rt=y*H+Pt*4;for(let Mt=Pt;Mt<=bt;Mt++)ft=(At-Mt)/(At-W),ft<0?ft=0:ft>1&&(ft=1),p[Rt++]=Tt-(Tt-dt)*ft|0,p[Rt++]=ot-(ot-tt)*ft|0,p[Rt++]=st-(st-O)*ft|0,p[Rt++]=255}}function aT(g,t,e){const n=t.coords,r=t.colors;let o,l;switch(t.type){case fw.LATTICE:const u=t.verticesPerRow,h=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<h;o++){let p=o*u;for(let y=0;y<f;y++,p++)ow(g,e,n[p],n[p+1],n[p+u],r[p],r[p+1],r[p+u]),ow(g,e,n[p+u+1],n[p+1],n[p+u],r[p+u+1],r[p+1],r[p+u])}break;case fw.TRIANGLES:for(o=0,l=n.length;o<l;o+=3)ow(g,e,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class oT extends XA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),S=f/y,_=p/v,x={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/S,scaleY:1/_},T=y+4,k=v+4,M=n.getCanvas("mesh",T,k),P=M.context,L=P.createImageData(y,v);if(e){const I=L.data;for(let U=0,V=I.length;U<V;U+=4)I[U]=e[0],I[U+1]=e[1],I[U+2]=e[2],I[U+3]=255}for(const I of this._figures)aT(L,I,x);return P.putImageData(L,2,2),{canvas:M.canvas,offsetX:u-2*S,offsetY:h-2*_,scaleX:S,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){Hw(t,this._bbox);const o=new Float32Array(2);if(r===$n.SHADING)ut.singularValueDecompose2dScale(We(t),o);else if(this.matrix){ut.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;ut.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=h}else ut.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,r===$n.SHADING?null:this._background,e.cachedCanvases);return r!==$n.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class lT extends XA{getPattern(){return"hotpink"}}function cT(g){switch(g[0]){case"RadialAxial":return new rT(g);case"Mesh":return new oT(g);case"Dummy":return new lT}throw new Error(`Unknown IR type: ${g[0]}`)}const K1={COLORED:1,UNCOLORED:2},Qy=class Qy{constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t,e){var dt,tt;const{bbox:n,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),u0("TilingType: "+l);const y=n[0],v=n[1],S=n[2],_=n[3],x=S-y,T=_-v,k=new Float32Array(2);ut.singularValueDecompose2dScale(this.matrix,k);const[M,P]=k;ut.singularValueDecompose2dScale(this.baseTransform,k);const L=M*k[0],D=P*k[1];let I=x,U=T,V=!1,Y=!1;const et=Math.ceil(f*L),Z=Math.ceil(p*D),Ct=Math.ceil(x*L),_t=Math.ceil(T*D);et>=Ct?I=f:V=!0,Z>=_t?U=p:Y=!0;const At=this.getSizeAndScale(I,this.ctx.canvas.width,L),Tt=this.getSizeAndScale(U,this.ctx.canvas.height,D),ot=t.cachedCanvases.getCanvas("pattern",At.size,Tt.size),st=ot.context,W=h.createCanvasGraphics(st,e);if(W.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(W,o,u),st.translate(-At.scale*y,-Tt.scale*v),W.transform(0,At.scale,0,0,Tt.scale,0,0),st.save(),(dt=W.dependencyTracker)==null||dt.save(),this.clipBbox(W,y,v,S,_),W.baseTransform=We(W.ctx),W.executeOperatorList(r),W.endDrawing(),(tt=W.dependencyTracker)==null||tt.restore(),st.restore(),V||Y){const O=ot.canvas;V&&(I=f),Y&&(U=p);const H=this.getSizeAndScale(I,this.ctx.canvas.width,L),ft=this.getSizeAndScale(U,this.ctx.canvas.height,D),Pt=H.size,bt=ft.size,Rt=t.cachedCanvases.getCanvas("pattern-workaround",Pt,bt),Mt=Rt.context,qt=V?Math.floor(x/f):0,le=Y?Math.floor(T/p):0;for(let Ge=0;Ge<=qt;Ge++)for(let vs=0;vs<=le;vs++)Mt.drawImage(O,Pt*Ge,bt*vs,Pt,bt,0,0,Pt,bt);return{canvas:Rt.canvas,scaleX:H.scale,scaleY:ft.scale,offsetX:y,offsetY:v}}return{canvas:ot.canvas,scaleX:At.scale,scaleY:Tt.scale,offsetX:y,offsetY:v}}getSizeAndScale(t,e,n){const r=Math.max(Qy.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,r,o){const l=r-e,u=o-n;t.ctx.rect(e,n,l,u),ut.axialAlignedBoundingBox([e,n,r,o],We(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,o=t.current;switch(e){case K1.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case K1.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new Sk(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r,o){let l=n;r!==$n.SHADING&&(l=ut.transform(l,e.baseTransform),this.matrix&&(l=ut.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}};K(Qy,"MAX_PATTERN_SIZE",3e3);let $w=Qy;function uT({src:g,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=bn.isLittleEndian?4278190080:255,[h,f]=l?[o,u]:[u,o],p=n>>3,y=n&7,v=g.length;e=new Uint32Array(e.buffer);let S=0;for(let _=0;_<r;_++){for(const T=t+p;t<T;t++){const k=t<v?g[t]:255;e[S++]=k&128?f:h,e[S++]=k&64?f:h,e[S++]=k&32?f:h,e[S++]=k&16?f:h,e[S++]=k&8?f:h,e[S++]=k&4?f:h,e[S++]=k&2?f:h,e[S++]=k&1?f:h}if(y===0)continue;const x=t<v?g[t++]:255;for(let T=0;T<y;T++)e[S++]=x&1<<7-T?f:h}return{srcPos:t,destPos:S}}const Q1=16,Z1=100,hT=15,J1=10,Ns=16,lw=new DOMMatrix,li=new Float32Array(2),Du=new Float32Array([1/0,1/0,-1/0,-1/0]);function dT(g,t){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){t.save(),this.__originalSave()},g.restore=function(){t.restore(),this.__originalRestore()},g.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},g.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},g.transform=function(e,n,r,o,l,u){t.transform(e,n,r,o,l,u),this.__originalTransform(e,n,r,o,l,u)},g.setTransform=function(e,n,r,o,l,u){t.setTransform(e,n,r,o,l,u),this.__originalSetTransform(e,n,r,o,l,u)},g.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},g.rotate=function(e){t.rotate(e),this.__originalRotate(e)},g.clip=function(e){t.clip(e),this.__originalClip(e)},g.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},g.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},g.bezierCurveTo=function(e,n,r,o,l,u){t.bezierCurveTo(e,n,r,o,l,u),this.__originalBezierCurveTo(e,n,r,o,l,u)},g.rect=function(e,n,r,o){t.rect(e,n,r,o),this.__originalRect(e,n,r,o)},g.closePath=function(){t.closePath(),this.__originalClosePath()},g.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class fT{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Vm(g,t,e,n,r,o,l,u,h,f){const[p,y,v,S,_,x]=We(g);if(y===0&&v===0){const M=l*p+_,P=Math.round(M),L=u*S+x,D=Math.round(L),I=(l+h)*p+_,U=Math.abs(Math.round(I)-P)||1,V=(u+f)*S+x,Y=Math.abs(Math.round(V)-D)||1;return g.setTransform(Math.sign(p),0,0,Math.sign(S),P,D),g.drawImage(t,e,n,r,o,0,0,U,Y),g.setTransform(p,y,v,S,_,x),[U,Y]}if(p===0&&S===0){const M=u*v+_,P=Math.round(M),L=l*y+x,D=Math.round(L),I=(u+f)*v+_,U=Math.abs(Math.round(I)-P)||1,V=(l+h)*y+x,Y=Math.abs(Math.round(V)-D)||1;return g.setTransform(0,Math.sign(y),Math.sign(v),0,P,D),g.drawImage(t,e,n,r,o,0,0,Y,U),g.setTransform(p,y,v,S,_,x),[Y,U]}g.drawImage(t,e,n,r,o,l,u,h,f);const T=Math.hypot(p,y),k=Math.hypot(v,S);return[T*h,k*f]}class tE{constructor(t,e,n){K(this,"alphaIsShape",!1);K(this,"fontSize",0);K(this,"fontSizeScale",1);K(this,"textMatrix",null);K(this,"textMatrixScale",1);K(this,"fontMatrix",dw);K(this,"leading",0);K(this,"x",0);K(this,"y",0);K(this,"lineX",0);K(this,"lineY",0);K(this,"charSpacing",0);K(this,"wordSpacing",0);K(this,"textHScale",1);K(this,"textRenderingMode",yn.FILL);K(this,"textRise",0);K(this,"fillColor","#000000");K(this,"strokeColor","#000000");K(this,"patternFill",!1);K(this,"patternStroke",!1);K(this,"fillAlpha",1);K(this,"strokeAlpha",1);K(this,"lineWidth",1);K(this,"activeSMask",null);K(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Du.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=$n.FILL,e=null){const n=this.minMax.slice();if(t===$n.STROKE){e||Te("Stroke bounding box must include transform."),ut.singularValueDecompose2dScale(e,li);const r=li[0]*this.lineWidth/2,o=li[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=ut.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Du,0)}getClippedPathBoundingBox(t=$n.FILL,e=null){return ut.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function eE(g,t){if(t instanceof ImageData){g.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%Ns,o=(e-r)/Ns,l=r===0?o:o+1,u=g.createImageData(n,Ns);let h=0,f;const p=t.data,y=u.data;let v,S,_,x;if(t.kind===Ym.GRAYSCALE_1BPP){const T=p.byteLength,k=new Uint32Array(y.buffer,0,y.byteLength>>2),M=k.length,P=n+7>>3,L=4294967295,D=bn.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(_=v<o?Ns:r,f=0,S=0;S<_;S++){const I=T-h;let U=0;const V=I>P?n:I*8-7,Y=V&-8;let et=0,Z=0;for(;U<Y;U+=8)Z=p[h++],k[f++]=Z&128?L:D,k[f++]=Z&64?L:D,k[f++]=Z&32?L:D,k[f++]=Z&16?L:D,k[f++]=Z&8?L:D,k[f++]=Z&4?L:D,k[f++]=Z&2?L:D,k[f++]=Z&1?L:D;for(;U<V;U++)et===0&&(Z=p[h++],et=128),k[f++]=Z&et?L:D,et>>=1}for(;f<M;)k[f++]=0;g.putImageData(u,0,v*Ns)}}else if(t.kind===Ym.RGBA_32BPP){for(S=0,x=n*Ns*4,v=0;v<o;v++)y.set(p.subarray(h,h+x)),h+=x,g.putImageData(u,0,S),S+=Ns;v<l&&(x=n*r*4,y.set(p.subarray(h,h+x)),g.putImageData(u,0,S))}else if(t.kind===Ym.RGB_24BPP)for(_=Ns,x=n*_,v=0;v<l;v++){for(v>=o&&(_=r,x=n*_),f=0,S=x;S--;)y[f++]=p[h++],y[f++]=p[h++],y[f++]=p[h++],y[f++]=255;g.putImageData(u,0,v*Ns)}else throw new Error(`bad image kind: ${t.kind}`)}function nE(g,t){if(t.bitmap){g.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%Ns,o=(e-r)/Ns,l=r===0?o:o+1,u=g.createImageData(n,Ns);let h=0;const f=t.data,p=u.data;for(let y=0;y<l;y++){const v=y<o?Ns:r;({srcPos:h}=uT({src:f,srcPos:h,dest:p,width:n,height:v,nonBlackColor:0})),g.putImageData(u,0,y*Ns)}}function rf(g,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)g[n]!==void 0&&(t[n]=g[n]);g.setLineDash!==void 0&&(t.setLineDash(g.getLineDash()),t.lineDashOffset=g.lineDashOffset)}function Gm(g){g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0);const{filter:t}=g;t!=="none"&&t!==""&&(g.filter="none")}function sE(g,t){if(t)return!0;ut.singularValueDecompose2dScale(g,li);const e=Math.fround(zr.pixelRatio*rl.PDF_TO_CSS_UNITS);return li[0]<=e&&li[1]<=e}const pT=["butt","round","square"],gT=["miter","round","bevel"],mT={},iE={};var rr,Ww,Vw,Gw;const eS=class eS{constructor(t,e,n,r,o,{optionalContentConfig:l,markedContentStack:u=null},h,f,p){b(this,rr);this.ctx=t,this.current=new tE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new fT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){var r;return typeof e=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...We(this.compositeCtx))}this.ctx.save(),Gm(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=We(this.ctx)}executeOperatorList(t,e,n,r,o){var k;const l=t.argsArray,u=t.fnArray;let h=e||0;const f=l.length;if(f===h)return h;const p=f-h>J1&&typeof n=="function",y=p?Date.now()+hT:0;let v=0;const S=this.commonObjs,_=this.objs;let x,T;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,n),h;if(!o||o(h))if(x=u[h],T=l[h]??null,x!==Lf.dependency)T===null?this[x](h):this[x](h,...T);else for(const M of T){(k=this.dependencyTracker)==null||k.recordNamedData(M,h);const P=M.startsWith("g_")?S:_;if(!P.has(M))return P.get(M,n),h}if(h++,h===f)return h;if(p&&++v>J1){if(Date.now()>y)return n(),h;v=0}}}endDrawing(){E(this,rr,Ww).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,rr,Vw).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,h=r,f="prescale1",p,y;for(;o>2&&u>1||l>2&&h>1;){let v=u,S=h;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),l>2&&h>1&&(S=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/S),p=this.cachedCanvases.getCanvas(f,v,S),y=p.context,y.clearRect(0,0,v,S),y.drawImage(t,0,0,u,h,0,0,v,S),t=p.canvas,u=v,h=S,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){var et,Z;const n=this.ctx,{width:r,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,h=We(n);let f,p,y,v;if((e.bitmap||e.data)&&e.count>1){const Ct=e.bitmap||e.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(Ct),f||(f=new Map,this._cachedBitmapsMap.set(Ct,f));const _t=f.get(p);if(_t&&!u){const At=Math.round(Math.min(h[0],h[2])+h[4]),Tt=Math.round(Math.min(h[1],h[3])+h[5]);return(et=this.dependencyTracker)==null||et.recordDependencies(t,wi.transformAndFill),{canvas:_t,offsetX:At,offsetY:Tt}}y=_t}y||(v=this.cachedCanvases.getCanvas("maskCanvas",r,o),nE(v.context,e));let S=ut.transform(h,[1/r,0,0,-1/o,0,0]);S=ut.transform(S,[1,0,0,1,0,-o]);const _=Du.slice();ut.axialAlignedBoundingBox([0,0,r,o],S,_);const[x,T,k,M]=_,P=Math.round(k-x)||1,L=Math.round(M-T)||1,D=this.cachedCanvases.getCanvas("fillCanvas",P,L),I=D.context,U=x,V=T;I.translate(-U,-V),I.transform(...S),y||(y=this._scaleImage(v.canvas,pr(I)),y=y.img,f&&u&&f.set(p,y)),I.imageSmoothingEnabled=sE(We(I),e.interpolate),Vm(I,y,0,0,y.width,y.height,0,0,r,o),I.globalCompositeOperation="source-in";const Y=ut.transform(pr(I),[1,0,0,1,-U,-V]);return I.fillStyle=u?l.getPattern(n,this,Y,$n.FILL,t):l,I.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,D.canvas)),(Z=this.dependencyTracker)==null||Z.recordDependencies(t,wi.transformAndFill),{canvas:D.canvas,offsetX:Math.round(U),offsetY:Math.round(V)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=pT[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=gT[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var o;(o=this.dependencyTracker)==null||o.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,r,o,l,u;for(const[h,f]of e)switch(h){case"LW":this.setLineWidth(t,f);break;case"LC":this.setLineCap(t,f);break;case"LJ":this.setLineJoin(t,f);break;case"ML":this.setMiterLimit(t,f);break;case"D":this.setDash(t,f[0],f[1]);break;case"RI":this.setRenderingIntent(t,f);break;case"FL":this.setFlatness(t,f);break;case"Font":this.setFont(t,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=f;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(o=this.dependencyTracker)==null||o.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=f;break;case"SMask":(l=this.dependencyTracker)==null||l.recordSimpleData("SMask",t),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),rf(this.suspendedCtx,l),dT(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),rf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const o=r[0],l=r[1],u=r[2]-o,h=r[3]-l;u===0||h===0||(this.genericComposeSMask(e.context,n,u,h,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,o,l,u,h,f,p,y){let v=t.canvas,S=h-p,_=f-y;if(l)if(S<0||_<0||S+n>v.width||_+r>v.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,r),k=T.context;k.drawImage(v,-S,-_),k.globalCompositeOperation="destination-atop",k.fillStyle=l,k.fillRect(0,0,n,r),k.globalCompositeOperation="source-over",v=T.canvas,S=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(S,_,n,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(S,_,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const x=new Path2D;x.rect(h,f,n,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(v,S,_,n,r,h,f,n,r),e.restore()}save(t){var n;this.inSMaskMode&&rf(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&rf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,o,l,u){var h;(h=this.dependencyTracker)==null||h.recordIncrementalData("transform",t),this.ctx.transform(e,n,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,r){let[o]=n;if(!r){o||(o=n[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Lf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=AE(o)),ut.axialAlignedBoundingBox(r,We(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var l;const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&(o!=null&&o.getPattern)){const u=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,pr(r),$n.STROKE,t),u){const h=new Path2D;h.addPath(e,r.getTransform().invertSelf().multiplySelf(u)),e=h}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);(l=this.dependencyTracker)==null||l.recordDependencies(t,wi.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox($n.STROKE,We(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var f,p,y;const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const v=o.isModifyingCurrentTransform()?r.getTransform():null;if((f=this.dependencyTracker)==null||f.save(t),r.save(),r.fillStyle=o.getPattern(r,this,pr(r),$n.FILL,t),v){const S=new Path2D;S.addPath(e,r.getTransform().invertSelf().multiplySelf(v)),e=S}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),(p=this.dependencyTracker)==null||p.recordDependencies(t,wi.fill),u&&(r.restore(),(y=this.dependencyTracker)==null||y.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,wi.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=mT}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=iE}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:f,path:p}of e)p&&r.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,h).scale(f,-f));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var y,v;(y=this.dependencyTracker)==null||y.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||dw,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Bt("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=((v=r.systemFontInfo)==null?void 0:v.css)||`"${l}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let p=n;n<Q1?p=Q1:n>Z1&&(p=Z1),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,r,o,l){var k,M,P,L;const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,v=p&yn.FILL_STROKE_MASK,S=!!(p&yn.ADD_TO_PATH_FLAG),_=h.patternFill&&!f.missingFile,x=h.patternStroke&&!f.missingFile;let T;if((f.disableFontFace||S||_||x)&&!f.missingFile&&(T=f.getPathGenerator(this.commonObjs,e)),T&&(f.disableFontFace||_||x)){u.save(),u.translate(n,r),u.scale(y,-y),(k=this.dependencyTracker)==null||k.recordCharacterBBox(t,u,f);let D;if(v===yn.FILL||v===yn.FILL_STROKE)if(o){D=u.getTransform(),u.setTransform(...o);const I=E(this,rr,Gw).call(this,T,D,o);u.fill(I)}else u.fill(T);if(v===yn.STROKE||v===yn.FILL_STROKE)if(l){D||(D=u.getTransform()),u.setTransform(...l);const{a:I,b:U,c:V,d:Y}=D,et=ut.inverseTransform(l),Z=ut.transform([I,U,V,Y,0,0],et);ut.singularValueDecompose2dScale(Z,li),u.lineWidth*=Math.max(li[0],li[1])/y,u.stroke(E(this,rr,Gw).call(this,T,D,l))}else u.lineWidth/=y,u.stroke(T);u.restore()}else(v===yn.FILL||v===yn.FILL_STROKE)&&(u.fillText(e,n,r),(M=this.dependencyTracker)==null||M.recordCharacterBBox(t,u,f,y,n,r,()=>u.measureText(e))),(v===yn.STROKE||v===yn.FILL_STROKE)&&(this.dependencyTracker&&((P=this.dependencyTracker)==null||P.recordCharacterBBox(t,u,f,y,n,r,()=>u.measureText(e)).recordDependencies(t,wi.stroke)),u.strokeText(e,n,r));S&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:We(u),x:n,y:r,fontSize:y,path:T}),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,u,f,y,n,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return Ut(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var Z,Ct,_t,At;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,wi.showText).resetBBox(t),this.current.textRenderingMode&yn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(t,e),(Z=this.dependencyTracker)==null||Z.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){(Ct=this.dependencyTracker)==null||Ct.recordOperation(t);return}const l=this.ctx,u=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,y=n.textHScale*p,v=e.length,S=r.vertical,_=S?1:-1,x=r.defaultVMetrics,T=o*n.fontMatrix[0],k=n.textRenderingMode===yn.FILL&&!r.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(y,-1):l.scale(y,1);let M,P;const L=n.textRenderingMode&yn.FILL_STROKE_MASK,D=L===yn.FILL||L===yn.FILL_STROKE,I=L===yn.STROKE||L===yn.FILL_STROKE;if(D&&n.patternFill){l.save();const Tt=n.fillColor.getPattern(l,this,pr(l),$n.FILL,t);M=We(l),l.restore(),l.fillStyle=Tt}if(I&&n.patternStroke){l.save();const Tt=n.strokeColor.getPattern(l,this,pr(l),$n.STROKE,t);P=We(l),l.restore(),l.strokeStyle=Tt}let U=n.lineWidth;const V=n.textMatrixScale;if(V===0||U===0?I&&(U=this.getSinglePixelWidth()):U/=V,u!==1&&(l.scale(u,u),U/=u),l.lineWidth=U,r.isInvalidPDFjsFont){const Tt=[];let ot=0;for(const W of e)Tt.push(W.unicode),ot+=W.width;const st=Tt.join("");if(l.fillText(st,0,0),this.dependencyTracker!==null){const W=l.measureText(st);this.dependencyTracker.recordBBox(t,this.ctx,-W.actualBoundingBoxLeft,W.actualBoundingBoxRight,-W.actualBoundingBoxAscent,W.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=ot*T*y,l.restore(),this.compose();return}let Y=0,et;for(et=0;et<v;++et){const Tt=e[et];if(typeof Tt=="number"){Y+=_*Tt*o/1e3;continue}let ot=!1;const st=(Tt.isSpace?f:0)+h,W=Tt.fontChar,dt=Tt.accent;let tt,O,H=Tt.width;if(S){const bt=Tt.vmetric||x,Rt=-(Tt.vmetric?bt[1]:H*.5)*T,Mt=bt[2]*T;H=bt?-bt[0]:H,tt=Rt/u,O=(Y+Mt)/u}else tt=Y/u,O=0;let ft;if(r.remeasure&&H>0){ft=l.measureText(W);const bt=ft.width*1e3/o*u;if(H<bt&&this.isFontSubpixelAAEnabled){const Rt=H/bt;ot=!0,l.save(),l.scale(Rt,1),tt/=Rt}else H!==bt&&(tt+=(H-bt)/2e3*o/u)}if(this.contentVisible&&(Tt.isInFont||r.missingFile)){if(k&&!dt)l.fillText(W,tt,O),(_t=this.dependencyTracker)==null||_t.recordCharacterBBox(t,l,ft?{bbox:null}:r,o/u,tt,O,()=>ft??l.measureText(W));else if(this.paintChar(t,W,tt,O,M,P),dt){const bt=tt+o*dt.offset.x/u,Rt=O-o*dt.offset.y/u;this.paintChar(t,dt.fontChar,bt,Rt,M,P)}}const Pt=S?H*T-st*p:H*T+st*p;Y+=Pt,ot&&l.restore()}S?n.y-=Y:n.x+=Y*y,l.restore(),this.compose(),(At=this.dependencyTracker)==null||At.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,h=o.vertical?1:-1,f=r.charSpacing,p=r.wordSpacing,y=r.textHScale*u,v=r.fontMatrix||dw,S=e.length,_=r.textRenderingMode===yn.INVISIBLE;let x,T,k,M;if(_||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(y,u);const P=this.dependencyTracker;for(this.dependencyTracker=P?new Iy(P,t):null,x=0;x<S;++x){if(T=e[x],typeof T=="number"){M=h*T*l/1e3,this.ctx.translate(M,0),r.x+=M*y;continue}const L=(T.isSpace?p:0)+f,D=o.charProcOperatorList[T.operatorListId];D?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...v),this.executeOperatorList(D),this.restore()):Bt(`Type3 character "${T.operatorListId}" is not available.`);const I=[T.width,0];ut.applyTransform(I,v),k=I[0]*l+L,n.translate(k,0),r.x+=k*y}n.restore(),P&&(this.dependencyTracker=P)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,r,o,l,u){var f;const h=new Path2D;h.rect(r,o,l-r,u-o),this.ctx.clip(h),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,r,l,o,u).recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||We(this.ctx),o={createCanvasGraphics:(l,u)=>new eS(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Iy(this.dependencyTracker,u,!0):null)};n=new $w(e,this.ctx,o,r)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=cT(this.getObject(t,e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(t,e){var l;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const r=this._getPattern(t,e);n.fillStyle=r.getPattern(n,this,pr(n),$n.SHADING,t);const o=pr(n);if(o){const{width:u,height:h}=n.canvas,f=Du.slice();ut.axialAlignedBoundingBox([0,0,u,h],o,f);const[p,y,v,S]=f;this.ctx.fillRect(p,y,v-p,S-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(l=this.dependencyTracker)==null||l.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,wi.transform).recordDependencies(t,wi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Te("Should not call beginInlineImage")}beginImageData(){Te("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var r;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=We(this.ctx),n)){ut.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[o,l,u,h]=n,f=new Path2D;f.rect(o,l,u-o,h-l),this.ctx.clip(f),(r=this.dependencyTracker)==null||r.recordClipBox(t,this.ctx,o,u,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var P;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||u0("TODO: Support non-isolated groups."),e.knockout&&Bt("Knockout groups not supported.");const r=We(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Du.slice();ut.axialAlignedBoundingBox(e.bbox,We(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=ut.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(y,f,p),S=v.context;S.translate(-u,-h),S.transform(...r);let _=new Path2D;const[x,T,k,M]=e.bbox;if(_.rect(x,T,k-x,M-T),e.matrix){const L=new Path2D;L.addPath(_,new DOMMatrix(e.matrix)),_=L}S.clip(_),e.smask&&this.smaskStack.push({canvas:v.canvas,context:S,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),rf(n,S),this.ctx=S,(P=this.dependencyTracker)==null||P.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var o;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(o=this.dependencyTracker)==null||o.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=We(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const u=Du.slice();ut.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],l,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(t,e,n,r,o,l){if(E(this,rr,Ww).call(this),Gm(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h,ut.singularValueDecompose2dScale(We(this.ctx),li);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,y);const{canvas:v,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(li[0],0,0,-li[1],0,h*li[1]),Gm(this.ctx)}else{Gm(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,h),this.ctx.clip(f)}}this.current=new tE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),E(this,rr,Vw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var u;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const r=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,r=0,o=0,l,u){var y,v,S;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=We(h);h.transform(n,r,o,l,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),(y=this.dependencyTracker)==null||y.resetBBox(t);for(let _=0,x=u.length;_<x;_+=2){const T=ut.transform(f,[n,r,o,l,u[_],u[_+1]]);h.drawImage(p.canvas,T[4],T[5]),(v=this.dependencyTracker)==null||v.recordBBox(t,this.ctx,T[4],T[4]+p.canvas.width,T[5],T[5]+p.canvas.height)}h.restore(),this.compose(),(S=this.dependencyTracker)==null||S.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var l,u,h;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;(l=this.dependencyTracker)==null||l.resetBBox(t).recordDependencies(t,wi.transformAndFill);for(const f of e){const{data:p,width:y,height:v,transform:S}=f,_=this.cachedCanvases.getCanvas("maskCanvas",y,v),x=_.context;x.save();const T=this.getObject(t,p,f);nE(x,T),x.globalCompositeOperation="source-in",x.fillStyle=o?r.getPattern(x,this,pr(n),$n.FILL,t):r,x.fillRect(0,0,y,v),x.restore(),n.save(),n.transform(...S),n.scale(1,-1),Vm(n,_.canvas,0,0,y,v,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,n,0,y,0,v),n.restore()}this.compose(),(h=this.dependencyTracker)==null||h.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Bt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,r,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Bt("Dependent image isn't ready yet");return}const u=l.width,h=l.height,f=[];for(let p=0,y=o.length;p<y;p+=2)f.push({transform:[n,0,0,r,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){var f;if(!this.contentVisible)return;const n=e.width,r=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const y=this.cachedCanvases.getCanvas("inlineImage",n,r).context;eE(y,e),u=this.applyTransferMapsToCanvas(y)}const h=this._scaleImage(u,pr(o));o.imageSmoothingEnabled=sE(We(o),e.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(t).recordBBox(t,o,0,n,-r,0).recordDependencies(t,wi.imageXObject).recordOperation(t),Vm(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,n,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var l,u,h;if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const f=e.width,p=e.height,v=this.cachedCanvases.getCanvas("inlineImage",f,p).context;eE(v,e),o=this.applyTransferMapsToCanvas(v)}(l=this.dependencyTracker)==null||l.resetBBox(t);for(const f of n)r.save(),r.transform(...f.transform),r.scale(1,-1),Vm(r,o,f.x,f.y,f.w,f.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,r,0,1,-1,0),r.restore();(h=this.dependencyTracker)==null||h.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,wi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var l,u;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===iE?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,(l=this.dependencyTracker)==null||l.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(u=this.dependencyTracker)==null||u.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=We(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:o}=this.ctx.getTransform();let l,u;if(n===0&&r===0){const h=Math.abs(e),f=Math.abs(o);if(h===f)if(t===0)l=u=1/h;else{const p=h*t;l=u=p<1?1/p:1}else if(t===0)l=1/h,u=1/f;else{const p=h*t,y=f*t;l=p<1?1/p:1,u=y<1?1/y:1}}else{const h=Math.abs(e*o-n*r),f=Math.hypot(e,n),p=Math.hypot(r,o);if(t===0)l=p/h,u=f/h;else{const y=t*h;l=p>y?p/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(r||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,l),lw.a=1/o,lw.d=1/l;const h=new Path2D;if(h.addPath(t,lw),u.length>0){const f=Math.max(o,l);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=r||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};rr=new WeakSet,Ww=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Vw=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Gw=function(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r};let Bu=eS;for(const g in Lf)Bu.prototype[g]!==void 0&&(Bu.prototype[Lf[g]]=Bu.prototype[g]);var Ep,xp;class Ur{static get workerPort(){return a(this,Ep)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");w(this,Ep,t)}static get workerSrc(){return a(this,xp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");w(this,xp,t)}}Ep=new WeakMap,xp=new WeakMap,b(Ur,Ep,null),b(Ur,xp,"");var Sh,Cp;class yT{constructor({parsedData:t,rawData:e}){b(this,Sh);b(this,Cp);w(this,Sh,t),w(this,Cp,e)}getRaw(){return a(this,Cp)}get(t){return a(this,Sh).get(t)??null}[Symbol.iterator](){return a(this,Sh).entries()}}Sh=new WeakMap,Cp=new WeakMap;const Pu=Symbol("INTERNAL");var _p,kp,Tp,bh;class vT{constructor(t,{name:e,intent:n,usage:r,rbGroups:o}){b(this,_p,!1);b(this,kp,!1);b(this,Tp,!1);b(this,bh,!0);w(this,_p,!!(t&oi.DISPLAY)),w(this,kp,!!(t&oi.PRINT)),this.name=e,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(a(this,Tp))return a(this,bh);if(!a(this,bh))return!1;const{print:t,view:e}=this.usage;return a(this,_p)?(e==null?void 0:e.viewState)!=="OFF":a(this,kp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Pu&&Te("Internal method `_setVisible` called."),w(this,Tp,n),w(this,bh,e)}}_p=new WeakMap,kp=new WeakMap,Tp=new WeakMap,bh=new WeakMap;var No,Se,Eh,xh,Pp,Xw;class wT{constructor(t,e=oi.DISPLAY){b(this,Pp);b(this,No,null);b(this,Se,new Map);b(this,Eh,null);b(this,xh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,w(this,xh,t.order);for(const n of t.groups)a(this,Se).set(n.id,new vT(e,n));if(t.baseState==="OFF")for(const n of a(this,Se).values())n._setVisible(Pu,!1);for(const n of t.on)a(this,Se).get(n)._setVisible(Pu,!0);for(const n of t.off)a(this,Se).get(n)._setVisible(Pu,!1);w(this,Eh,this.getHash())}}isVisible(t){if(a(this,Se).size===0)return!0;if(!t)return u0("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Se).has(t.id)?a(this,Se).get(t.id).visible:(Bt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,Pp,Xw).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Se).has(e))return Bt(`Optional content group not found: ${e}`),!0;if(a(this,Se).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Se).has(e))return Bt(`Optional content group not found: ${e}`),!0;if(!a(this,Se).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Se).has(e))return Bt(`Optional content group not found: ${e}`),!0;if(!a(this,Se).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Se).has(e))return Bt(`Optional content group not found: ${e}`),!0;if(a(this,Se).get(e).visible)return!1}return!0}return Bt(`Unknown optional content policy ${t.policy}.`),!0}return Bt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const r=a(this,Se).get(t);if(!r){Bt(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const l of r.rbGroups)for(const u of l)u!==t&&((o=a(this,Se).get(u))==null||o._setVisible(Pu,!1,!0));r._setVisible(Pu,!!e,!0),w(this,No,null)}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=a(this,Se).get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}w(this,No,null)}get hasInitialVisibility(){return a(this,Eh)===null||this.getHash()===a(this,Eh)}getOrder(){return a(this,Se).size?a(this,xh)?a(this,xh).slice():[...a(this,Se).keys()]:null}getGroup(t){return a(this,Se).get(t)||null}getHash(){if(a(this,No)!==null)return a(this,No);const t=new ZE;for(const[e,n]of a(this,Se))t.update(`${e}:${n.visible}`);return w(this,No,t.hexdigest())}[Symbol.iterator](){return a(this,Se).entries()}}No=new WeakMap,Se=new WeakMap,Eh=new WeakMap,xh=new WeakMap,Pp=new WeakSet,Xw=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const o=t[r];let l;if(Array.isArray(o))l=E(this,Pp,Xw).call(this,o);else if(a(this,Se).has(o))l=a(this,Se).get(o).visible;else return Bt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class AT{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ee(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});ee(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,r,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ee(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new ST(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new bT(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class ST{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=WA(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class bT{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ET(g){let t=!0,e=n("filename\\*","i").exec(g);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=f(p),o(p)}if(e=l(g),e){const p=f(e);return o(p)}if(e=n("filename","i").exec(g),e){e=e[1];let p=u(e);return p=f(p),o(p)}function n(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(p,{fatal:!0}),S=_g(y);y=v.decode(S),t=!1}catch{}}return y}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function l(p){const y=[];let v;const S=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=S.exec(p))!==null;){let[,x,T,k]=v;if(x=parseInt(x,10),x in y){if(x===0)break;continue}y[x]=[T,k]}const _=[];for(let x=0;x<y.length&&x in y;++x){let[T,k]=y[x];k=u(k),T&&(k=unescape(k),x===0&&(k=h(k))),_.push(k)}return _.join("")}function u(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let v=0;v<y.length;++v){const S=y[v].indexOf('"');S!==-1&&(y[v]=y[v].slice(0,S),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function h(p){const y=p.indexOf("'");if(y===-1)return p;const v=p.slice(0,y),_=p.slice(y+1).replace(/^[^']*'/,"");return r(v,_)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,S,_){if(S==="q"||S==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,T){return String.fromCharCode(parseInt(T,16))}),r(v,_);try{_=atob(_)}catch{}return r(v,_)})}return""}function ux(g,t){const e=new Headers;if(!g||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function d0(g){var t;return((t=URL.parse(g))==null?void 0:t.origin)??null}function hx({responseHeaders:g,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(g.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||n||!t||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function dx(g){const t=g.get("Content-Disposition");if(t){let e=ET(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(WA(e))return e}return null}function Mg(g,t){return new Py(`Unexpected server response (${g}) while retrieving PDF "${t}".`,g,g===404||g===0&&t.startsWith("file:"))}function fx(g){return g===200||g===206}function px(g,t,e){return{method:"GET",headers:g,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function gx(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(Bt(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class xT{constructor(t){K(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=ux(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ee(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new CT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new _T(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class CT{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),r=e.url;fetch(r,px(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=d0(o.url),!fx(o.status))throw Mg(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:h}=hx({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=dx(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new il("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:gx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class _T{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const l=r.url;fetch(l,px(o,this._withCredentials,this._abortController)).then(u=>{const h=d0(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!fx(u.status))throw Mg(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:gx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const cw=200,uw=206;function kT(g){const t=g.response;return typeof t!="string"?t:_g(t).buffer}class TT{constructor({url:t,httpHeaders:e,withCredentials:n}){K(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=ux(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=uw):r.expectedStatus=cw,e.responseType="arraybuffer",ee(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var r;const n=this.pendingRequests[t];n&&((r=n.onProgress)==null||r.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const o=r.status||cw;if(!(o===cw&&n.expectedStatus===uw)&&o!==n.expectedStatus){n.onError(r.status);return}const u=kT(r);if(o===uw){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(Bt('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class PT{constructor(t){this._source=t,this._manager=new TT(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ee(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new RT(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new MT(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class RT{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=d0(e.responseURL);const n=e.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=hx({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=dx(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Mg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class MT{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=d0((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Mg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const LT=/^[a-z][a-z0-9\-+.]+:/i;function DT(g){if(LT.test(g))return new URL(g);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(g))}class NT{constructor(t){this.source=t,this.url=DT(t.url),ee(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ee(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new IT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new FT(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class IT{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Mg(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new il("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class FT{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const af=Symbol("INITIAL_DATA");var Gs,Rp,qw;class mx{constructor(){b(this,Rp);b(this,Gs,Object.create(null))}get(t,e=null){if(e){const r=E(this,Rp,qw).call(this,t);return r.promise.then(()=>e(r.data)),null}const n=a(this,Gs)[t];if(!n||n.data===af)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=a(this,Gs)[t];return!!e&&e.data!==af}delete(t){const e=a(this,Gs)[t];return!e||e.data===af?!1:(delete a(this,Gs)[t],!0)}resolve(t,e=null){const n=E(this,Rp,qw).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in a(this,Gs)){const{data:n}=a(this,Gs)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}w(this,Gs,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,Gs)){const{data:e}=a(this,Gs)[t];e!==af&&(yield[t,e])}}}Gs=new WeakMap,Rp=new WeakSet,qw=function(t){var e;return(e=a(this,Gs))[t]||(e[t]={...Promise.withResolvers(),data:af})};const OT=1e5,rE=30;var hE,Io,Xs,Mp,Lp,ac,Sa,Dp,Np,oc,Ip,Ch,Fo,_h,Fp,kh,lc,Op,Bp,Th,cc,Up,Ph,Rh,$a,yx,vx,Yw,ui,ay,Kw,wx,Ax;const On=class On{constructor({textContentSource:t,container:e,viewport:n}){b(this,$a);b(this,Io,Promise.withResolvers());b(this,Xs,null);b(this,Mp,!1);b(this,Lp,!!((hE=globalThis.FontInspector)!=null&&hE.enabled));b(this,ac,null);b(this,Sa,null);b(this,Dp,0);b(this,Np,0);b(this,oc,null);b(this,Ip,null);b(this,Ch,0);b(this,Fo,0);b(this,_h,Object.create(null));b(this,Fp,[]);b(this,kh,null);b(this,lc,[]);b(this,Op,new WeakMap);b(this,Bp,null);var h;if(t instanceof ReadableStream)w(this,kh,t);else if(typeof t=="object")w(this,kh,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,Xs,w(this,Ip,e)),w(this,Fo,n.scale*zr.pixelRatio),w(this,Ch,n.rotation),w(this,Sa,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=n.rawDims;w(this,Bp,[1,0,0,-1,-l,u+o]),w(this,Np,r),w(this,Dp,o),E(h=On,ui,wx).call(h),e.style.setProperty("--min-font-size",a(On,Ph)),Wc(e,n),a(this,Io).promise.finally(()=>{a(On,Rh).delete(this),w(this,Sa,null),w(this,_h,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=bn.platform;return Ut(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,oc).read().then(({value:e,done:n})=>{if(n){a(this,Io).resolve();return}a(this,ac)??w(this,ac,e.lang),Object.assign(a(this,_h),e.styles),E(this,$a,yx).call(this,e.items),t()},a(this,Io).reject)};return w(this,oc,a(this,kh).getReader()),a(On,Rh).add(this),t(),a(this,Io).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*zr.pixelRatio,r=t.rotation;if(r!==a(this,Ch)&&(e==null||e(),w(this,Ch,r),Wc(a(this,Ip),{rotation:r})),n!==a(this,Fo)){e==null||e(),w(this,Fo,n);const l={div:null,properties:null,ctx:E(o=On,ui,ay).call(o,a(this,ac))};for(const u of a(this,lc))l.properties=a(this,Op).get(u),l.div=u,E(this,$a,Yw).call(this,l)}}cancel(){var e;const t=new il("TextLayer task cancelled.");(e=a(this,oc))==null||e.cancel(t).catch(()=>{}),w(this,oc,null),a(this,Io).reject(t)}get textDivs(){return a(this,lc)}get textContentItemsStr(){return a(this,Fp)}static cleanup(){if(!(a(this,Rh).size>0)){a(this,Th).clear();for(const{canvas:t}of a(this,cc).values())t.remove();a(this,cc).clear()}}};Io=new WeakMap,Xs=new WeakMap,Mp=new WeakMap,Lp=new WeakMap,ac=new WeakMap,Sa=new WeakMap,Dp=new WeakMap,Np=new WeakMap,oc=new WeakMap,Ip=new WeakMap,Ch=new WeakMap,Fo=new WeakMap,_h=new WeakMap,Fp=new WeakMap,kh=new WeakMap,lc=new WeakMap,Op=new WeakMap,Bp=new WeakMap,Th=new WeakMap,cc=new WeakMap,Up=new WeakMap,Ph=new WeakMap,Rh=new WeakMap,$a=new WeakSet,yx=function(t){var r,o;if(a(this,Mp))return;(o=a(this,Sa)).ctx??(o.ctx=E(r=On,ui,ay).call(r,a(this,ac)));const e=a(this,lc),n=a(this,Fp);for(const l of t){if(e.length>OT){Bt("Ignoring additional textDivs for performance reasons."),w(this,Mp,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const u=a(this,Xs);w(this,Xs,document.createElement("span")),a(this,Xs).classList.add("markedContent"),l.id&&a(this,Xs).setAttribute("id",`${l.id}`),u.append(a(this,Xs))}else l.type==="endMarkedContent"&&w(this,Xs,a(this,Xs).parentNode);continue}n.push(l.str),E(this,$a,vx).call(this,l)}},vx=function(t){var _;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,lc).push(e);const r=ut.transform(a(this,Bp),t.transform);let o=Math.atan2(r[1],r[0]);const l=a(this,_h)[t.fontName];l.vertical&&(o+=Math.PI/2);let u=a(this,Lp)&&l.fontSubstitution||l.fontFamily;u=On.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*E(_=On,ui,Ax).call(_,u,l,a(this,ac));let p,y;o===0?(p=r[4],y=r[5]-f):(p=r[4]+f*Math.sin(o),y=r[5]-f*Math.cos(o));const v=e.style;v.left=`${(100*p/a(this,Np)).toFixed(2)}%`,v.top=`${(100*y/a(this,Dp)).toFixed(2)}%`,v.setProperty("--font-height",`${h.toFixed(2)}px`),v.fontFamily=u,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Lp)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);x!==T&&Math.max(x,T)/Math.min(x,T)>1.5&&(S=!0)}if(S&&(n.canvasWidth=l.vertical?t.height:t.width),a(this,Op).set(e,n),a(this,Sa).div=e,a(this,Sa).properties=n,E(this,$a,Yw).call(this,a(this,Sa)),n.hasText&&a(this,Xs).append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),a(this,Xs).append(x)}},Yw=function(t){var l;const{div:e,properties:n,ctx:r}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:f}=n;E(l=On,ui,Kw).call(l,r,f*a(this,Fo),u);const{width:p}=r.measureText(e.textContent);p>0&&o.setProperty("--scale-x",h*a(this,Fo)/p)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},ui=new WeakSet,ay=function(t=null){let e=a(this,cc).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,cc).set(t,e),a(this,Up).set(e,{size:0,family:""})}return e},Kw=function(t,e,n){const r=a(this,Up).get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)},wx=function(){if(a(this,Ph)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),w(this,Ph,t.getBoundingClientRect().height),t.remove()},Ax=function(t,e,n){const r=a(this,Th).get(t);if(r)return r;const o=E(this,ui,ay).call(this,n);o.canvas.width=o.canvas.height=rE,E(this,ui,Kw).call(this,o,rE,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(bn.platform.isFirefox&&Bt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),a(this,Th).set(t,f),f},b(On,ui),b(On,Th,new Map),b(On,cc,new Map),b(On,Up,new WeakMap),b(On,Ph,null),b(On,Rh,new Set);let Nf=On;const BT=100;function Sx(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const t=new Qw,{docId:e}=t,n=g.url?Vk(g.url):null,r=g.data?Gk(g.data):null,o=g.httpHeaders||null,l=g.withCredentials===!0,u=g.password??null,h=g.range instanceof bx?g.range:null,f=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:2**16;let p=g.worker instanceof If?g.worker:null;const y=g.verbosity,v=typeof g.docBaseUrl=="string"&&!h0(g.docBaseUrl)?g.docBaseUrl:null,S=jm(g.cMapUrl),_=g.cMapPacked!==!1,x=g.CMapReaderFactory||(ps?tT:V1),T=jm(g.iccUrl),k=jm(g.standardFontDataUrl),M=g.StandardFontDataFactory||(ps?eT:G1),P=jm(g.wasmUrl),L=g.WasmFactory||(ps?nT:X1),D=g.stopAtErrors!==!0,I=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,U=g.isEvalSupported!==!1,V=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!ps,Y=typeof g.isImageDecoderSupported=="boolean"?g.isImageDecoderSupported:!ps&&(bn.platform.isFirefox||!globalThis.chrome),et=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,Z=typeof g.disableFontFace=="boolean"?g.disableFontFace:ps,Ct=g.fontExtraProperties===!0,_t=g.enableXfa===!0,At=g.ownerDocument||globalThis.document,Tt=g.disableRange===!0,ot=g.disableStream===!0,st=g.disableAutoFetch===!0,W=g.pdfBug===!0,dt=g.CanvasFactory||(ps?Jk:Kk),tt=g.FilterFactory||(ps?Zk:Qk),O=g.enableHWA===!0,H=g.useWasm!==!1,ft=h?h.length:g.length??NaN,Pt=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!ps&&!Z,bt=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:!!(x===V1&&M===G1&&L===X1&&S&&k&&P&&uf(S,document.baseURI)&&uf(k,document.baseURI)&&uf(P,document.baseURI)),Rt=null;vk(y);const Mt={canvasFactory:new dt({ownerDocument:At,enableHWA:O}),filterFactory:new tt({docId:e,ownerDocument:At}),cMapReaderFactory:bt?null:new x({baseUrl:S,isCompressed:_}),standardFontDataFactory:bt?null:new M({baseUrl:k}),wasmFactory:bt?null:new L({baseUrl:P})};p||(p=If.create({verbosity:y,port:Ur.workerPort}),t._worker=p);const qt={docId:e,apiVersion:"5.4.530",data:r,password:u,disableAutoFetch:st,rangeChunkSize:f,length:ft,docBaseUrl:v,enableXfa:_t,evaluatorOptions:{maxImageSize:I,disableFontFace:Z,ignoreErrors:D,isEvalSupported:U,isOffscreenCanvasSupported:V,isImageDecoderSupported:Y,canvasMaxAreaInBytes:et,fontExtraProperties:Ct,useSystemFonts:Pt,useWasm:H,useWorkerFetch:bt,cMapUrl:S,iccUrl:T,standardFontDataUrl:k,wasmUrl:P}},le={ownerDocument:At,pdfBug:W,styleElement:Rt,loadingParams:{disableAutoFetch:st,enableXfa:_t}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ge=p.messageHandler.sendWithPromise("GetDocRequest",qt,r?[r.buffer]:null);let vs;if(h)vs=new AT(h,{disableRange:Tt,disableStream:ot});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Wa=uf(n)?xT:ps?NT:PT;vs=new Wa({url:n,length:ft,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:Tt,disableStream:ot})}return Ge.then(Wa=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const is=new vf(e,Wa,p.port),ar=new jT(is,t,vs,le,Mt,O);t._transport=ar,is.send("Ready",null)})}).catch(t._capability.reject),t}var Zy;const Jy=class Jy{constructor(){K(this,"_capability",Promise.withResolvers());K(this,"_transport",null);K(this,"_worker",null);K(this,"docId",`d${mn(Jy,Zy)._++}`);K(this,"destroyed",!1);K(this,"onPassword",null);K(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Zy=new WeakMap,b(Jy,Zy,0);let Qw=Jy;var uc,zp,jp,Hp,$p;class bx{constructor(t,e,n=!1,r=null){b(this,uc,Promise.withResolvers());b(this,zp,[]);b(this,jp,[]);b(this,Hp,[]);b(this,$p,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){a(this,$p).push(t)}addProgressListener(t){a(this,Hp).push(t)}addProgressiveReadListener(t){a(this,jp).push(t)}addProgressiveDoneListener(t){a(this,zp).push(t)}onDataRange(t,e){for(const n of a(this,$p))n(t,e)}onDataProgress(t,e){a(this,uc).promise.then(()=>{for(const n of a(this,Hp))n(t,e)})}onDataProgressiveRead(t){a(this,uc).promise.then(()=>{for(const e of a(this,jp))e(t)})}onDataProgressiveDone(){a(this,uc).promise.then(()=>{for(const t of a(this,zp))t()})}transportReady(){a(this,uc).resolve()}requestDataRange(t,e){Te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}uc=new WeakMap,zp=new WeakMap,jp=new WeakMap,Hp=new WeakMap,$p=new WeakMap;class UT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ut(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ba,hc,Ef;class zT{constructor(t,e,n,r=!1){b(this,hc);b(this,ba,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new B1:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new mx,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new Tg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ut(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:o=fo.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:y=null,isEditing:v=!1,recordOperations:S=!1,operationsFilter:_=null}){var Y,et,Z;(Y=this._stats)==null||Y.time("Overall");const x=this._transport.getRenderingIntent(r,o,y,v),{renderingIntent:T,cacheKey:k}=x;w(this,ba,!1),h||(h=this._transport.getOptionalContentConfig(T));let M=this._intentStates.get(k);M||(M=Object.create(null),this._intentStates.set(k,M)),M.streamReaderCancelTimeout&&(clearTimeout(M.streamReaderCancelTimeout),M.streamReaderCancelTimeout=null);const P=!!(T&oi.PRINT);M.displayReadyCapability||(M.displayReadyCapability=Promise.withResolvers(),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(et=this._stats)==null||et.time("Page Request"),this._pumpOperatorList(x));const L=!!(this._pdfBug&&((Z=globalThis.StepperManager)!=null&&Z.enabled)),D=!this.recordedBBoxes&&(S||L),I=Ct=>{var _t,At;if(M.renderTasks.delete(U),D){const Tt=(_t=U.gfx)==null?void 0:_t.dependencyTracker.take();Tt&&(U.stepper&&U.stepper.setOperatorBBoxes(Tt,U.gfx.dependencyTracker.takeDebugMetadata()),S&&(this.recordedBBoxes=Tt))}P&&w(this,ba,!0),E(this,hc,Ef).call(this),Ct?(U.capability.reject(Ct),this._abortOperatorList({intentState:M,reason:Ct instanceof Error?Ct:new Error(Ct)})):U.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(At=globalThis.Stats)!=null&&At.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},U=new Zw({callback:I,params:{canvas:e,canvasContext:t,dependencyTracker:D?new iT(e,M.operatorList.length,L):null,viewport:n,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:_});(M.renderTasks||(M.renderTasks=new Set)).add(U);const V=U.task;return Promise.all([M.displayReadyCapability.promise,h]).then(([Ct,_t])=>{var At;if(this.destroyed){I();return}if((At=this._stats)==null||At.time("Rendering"),!(_t.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");U.initializeGraphics({transparency:Ct,optionalContentConfig:_t}),U.operatorListChanged()}).catch(I),V}getOperatorList({intent:t="display",annotationMode:e=fo.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var f;function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Df.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function o(){l.read().then(function({value:h,done:f}){if(f){n(u);return}u.lang??(u.lang=h.lang),Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},r)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),w(this,ba,!1),Promise.all(t)}cleanup(t=!1){w(this,ba,!0);const e=E(this,hc,Ef).call(this);return t&&e&&this._stats&&(this._stats=new B1),e}_startRenderPage(t,e){var r,o;const n=this._intentStates.get(e);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&E(this,hc,Ef).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:y,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),p())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();E(this,hc,Ef).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof $A){let r=BT;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new il(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}ba=new WeakMap,hc=new WeakSet,Ef=function(){if(!a(this,ba)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,ba,!1),!0};var Oo,Qi,Ea,dc,t0,fc,pc,ms,oy,Ex,xx,xf,Mh,ly;const Oe=class Oe{constructor({name:t=null,port:e=null,verbosity:n=wk()}={}){b(this,ms);b(this,Oo,Promise.withResolvers());b(this,Qi,null);b(this,Ea,null);b(this,dc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(a(Oe,pc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Oe,pc).set(e,this),E(this,ms,Ex).call(this,e)}else E(this,ms,xx).call(this)}get promise(){return a(this,Oo).promise}get port(){return a(this,Ea)}get messageHandler(){return a(this,Qi)}destroy(){var t,e;this.destroyed=!0,(t=a(this,dc))==null||t.terminate(),w(this,dc,null),a(Oe,pc).delete(a(this,Ea)),w(this,Ea,null),(e=a(this,Qi))==null||e.destroy(),w(this,Qi,null)}static create(t){const e=a(this,pc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Oe(t)}static get workerSrc(){if(Ur.workerSrc)return Ur.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ut(this,"_setupFakeWorkerGlobal",(async()=>a(this,Mh,ly)?a(this,Mh,ly):(await import(this.workerSrc)).WorkerMessageHandler)())}};Oo=new WeakMap,Qi=new WeakMap,Ea=new WeakMap,dc=new WeakMap,t0=new WeakMap,fc=new WeakMap,pc=new WeakMap,ms=new WeakSet,oy=function(){a(this,Oo).resolve(),a(this,Qi).send("configure",{verbosity:this.verbosity})},Ex=function(t){w(this,Ea,t),w(this,Qi,new vf("main","worker",t)),a(this,Qi).on("ready",()=>{}),E(this,ms,oy).call(this)},xx=function(){if(a(Oe,fc)||a(Oe,Mh,ly)){E(this,ms,xf).call(this);return}let{workerSrc:t}=Oe;try{Oe._isSameOrigin(window.location,t)||(t=Oe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new vf("main","worker",e),r=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?a(this,Oo).reject(new Error("Worker was destroyed")):E(this,ms,xf).call(this)},o=new AbortController;e.addEventListener("error",()=>{a(this,dc)||r()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}w(this,Qi,n),w(this,Ea,e),w(this,dc,e),E(this,ms,oy).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{E(this,ms,xf).call(this)}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{u0("The worker has been disabled.")}E(this,ms,xf).call(this)},xf=function(){a(Oe,fc)||(Bt("Setting up fake worker."),w(Oe,fc,!0)),Oe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,Oo).reject(new Error("Worker was destroyed"));return}const e=new Yk;w(this,Ea,e);const n=`fake${mn(Oe,t0)._++}`,r=new vf(n+"_worker",n,e);t.setup(r,e),w(this,Qi,new vf(n,n+"_worker",e)),E(this,ms,oy).call(this)}).catch(t=>{a(this,Oo).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Mh=new WeakSet,ly=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},b(Oe,Mh),b(Oe,t0,0),b(Oe,fc,!1),b(Oe,pc,new WeakMap),ps&&(w(Oe,fc,!0),Ur.workerSrc||(Ur.workerSrc="./pdf.worker.mjs")),Oe._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},Oe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Oe.fromPort=t=>{if(Mk("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Oe.create(t)};let If=Oe;var xa,Pr,Lh,Dh,Ca,gc,Cf;class jT{constructor(t,e,n,r,o,l){b(this,gc);b(this,xa,new Map);b(this,Pr,new Map);b(this,Lh,new Map);b(this,Dh,new Map);b(this,Ca,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new mx,this.fontLoader=new Hk({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}get annotationStorage(){return Ut(this,"annotationStorage",new VA)}getRenderingIntent(t,e=fo.ENABLE,n=null,r=!1,o=!1){let l=oi.DISPLAY,u=Nw;switch(t){case"any":l=oi.ANY;break;case"display":break;case"print":l=oi.PRINT;break;default:Bt(`getRenderingIntent - invalid intent: ${t}`)}const h=l&oi.PRINT&&n instanceof tx?n:this.annotationStorage;switch(e){case fo.DISABLE:l+=oi.ANNOTATIONS_DISABLE;break;case fo.ENABLE:break;case fo.ENABLE_FORMS:l+=oi.ANNOTATIONS_FORMS;break;case fo.ENABLE_STORAGE:l+=oi.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Bt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(l+=oi.IS_EDITING),o&&(l+=oi.OPLIST);const{ids:f,hash:p}=h.modifiedIds,y=[l,u.hash,p];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=a(this,Ca))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of a(this,Pr).values())t.push(r._destroy());a(this,Pr).clear(),a(this,Lh).clear(),a(this,Dh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,o;this.commonObjs.clear(),this.fontLoader.clear(),a(this,xa).clear(),this.filterFactory.destroy(),Nf.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new il("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{ee(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}ee(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=h=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,r)=>{ee(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}ee(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new UT(n,this))}),t.on("DocException",n=>{e._capability.reject(_s(n))}),t.on("PasswordRequest",n=>{w(this,Ca,Promise.withResolvers());try{if(!e.onPassword)throw _s(n);const r=o=>{o instanceof Error?a(this,Ca).reject(o):a(this,Ca).resolve({password:o})};e.onPassword(r,n.code)}catch(r){a(this,Ca).reject(r)}return a(this,Ca).promise}),t.on("DataLoaded",n=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;a(this,Pr).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const v=o.error;Bt(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const u=new Iw(o),h=this._params.pdfBug&&((l=globalThis.FontInspector)!=null&&l.enabled)?(v,S)=>globalThis.FontInspector.fontAdded(v,S):null,f=new $k(u,h,o.extra,o.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:p}=o;ee(p,"The imageRef must be defined.");for(const v of a(this,Pr).values())for(const[,S]of v.objs)if((S==null?void 0:S.ref)===p)return S.dataLen?(this.commonObjs.resolve(n,structuredClone(S)),S.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new Wk(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const y=new Fw(o);this.commonObjs.resolve(n,y.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,l])=>{var h;if(this.destroyed)return;const u=a(this,Pr).get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){(h=l==null?void 0:l.bitmap)==null||h.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Bt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=a(this,Lh).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&a(this,Dh).set(o.refStr,t);const l=new zT(e,o,this,this._params.pdfBug);return a(this,Pr).set(e,l),l});return a(this,Lh).set(e,r),r}getPageIndex(t){return Ow(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,gc,Cf).call(this,"GetFieldObjects")}hasJSActions(){return E(this,gc,Cf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return E(this,gc,Cf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,gc,Cf).call(this,"GetOptionalContentConfig").then(e=>new wT(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,xa).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>{var o,l;return{info:r[0],metadata:r[1]?new yT(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null,hasStructTree:r[2]}});return a(this,xa).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Pr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,xa).clear(),this.filterFactory.destroy(!0),Nf.cleanup()}}cachedPageNumber(t){if(!Ow(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Dh).get(e)??null}}xa=new WeakMap,Pr=new WeakMap,Lh=new WeakMap,Dh=new WeakMap,Ca=new WeakMap,gc=new WeakSet,Cf=function(t,e=null){const n=a(this,xa).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return a(this,xa).set(t,r),r};var Bo;class HT{constructor(t){b(this,Bo,null);K(this,"onContinue",null);K(this,"onError",null);w(this,Bo,t)}get promise(){return a(this,Bo).capability.promise}cancel(t=0){a(this,Bo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Bo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Bo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Bo=new WeakMap;var Uo,mc;const kl=class kl{constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:v=null,enableHWA:S=!1,operationsFilter:_=null}){b(this,Uo,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new HT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=S,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var h,f;if(this.cancelled)return;if(this._canvas){if(a(kl,mc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(kl,mc).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Bu(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,r,o;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),a(this,Uo)&&(window.cancelAnimationFrame(a(this,Uo)),w(this,Uo,null)),a(kl,mc).delete(this._canvas),t||(t=new $A(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(r=this.task).onError)==null||o.call(r,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,Uo,window.requestAnimationFrame(()=>{w(this,Uo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(kl,mc).delete(this._canvas),this.callback())))}};Uo=new WeakMap,mc=new WeakMap,b(kl,mc,new WeakSet);let Zw=kl;const $T="5.4.530",WT="50cc4adac";var qs,yc,Nh,An,Wp,Ih,_a,Vp,zo,Zi,Gp,be,Jw,tA,eA,El,Cx,ho;const ks=class ks{constructor({editor:t=null,uiManager:e=null}){b(this,be);b(this,qs,null);b(this,yc,null);b(this,Nh);b(this,An,null);b(this,Wp,!1);b(this,Ih,!1);b(this,_a,null);b(this,Vp);b(this,zo,null);b(this,Zi,null);var n,r;t?(w(this,Ih,!1),w(this,_a,t)):w(this,Ih,!0),w(this,Zi,(t==null?void 0:t._uiManager)||e),w(this,Vp,a(this,Zi)._eventBus),w(this,Nh,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((r=a(this,Zi))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),a(ks,Gp)||w(ks,Gp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ut(this,"_keyboardManager",new Rg([[["Escape","mac+Escape"],ks.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ks.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ks.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ks.prototype._moveToPrevious],[["Home","mac+Home"],ks.prototype._moveToBeginning],[["End","mac+End"],ks.prototype._moveToEnd]]))}renderButton(){const t=w(this,qs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",a(this,_a)&&(t.ariaControls=`${a(this,_a).id}_colorpicker_dropdown`);const e=a(this,Zi)._signal;t.addEventListener("click",E(this,be,El).bind(this),{signal:e}),t.addEventListener("keydown",E(this,be,eA).bind(this),{signal:e});const n=w(this,yc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=a(this,Nh),t.append(n),t}renderMainDropdown(){const t=w(this,An,E(this,be,Jw).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===a(this,qs)){E(this,be,El).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,be,tA).call(this,e,t)}_moveToNext(t){var e,n;if(!a(this,be,ho)){E(this,be,El).call(this,t);return}if(t.target===a(this,qs)){(e=a(this,An).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=a(this,An))==null?void 0:e.firstElementChild)||t.target===a(this,qs)){a(this,be,ho)&&this._hideDropdownFromKeyboard();return}a(this,be,ho)||E(this,be,El).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!a(this,be,ho)){E(this,be,El).call(this,t);return}(e=a(this,An).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,be,ho)){E(this,be,El).call(this,t);return}(e=a(this,An).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,An))==null||t.classList.add("hidden"),a(this,qs).ariaExpanded="false",(e=a(this,zo))==null||e.abort(),w(this,zo,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Ih)){if(!a(this,be,ho)){(t=a(this,_a))==null||t.unselect();return}this.hideDropdown(),a(this,qs).focus({preventScroll:!0,focusVisible:a(this,Wp)})}}updateColor(t){if(a(this,yc)&&(a(this,yc).style.backgroundColor=t),!a(this,An))return;const e=a(this,Zi).highlightColors.values();for(const n of a(this,An).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=a(this,qs))==null||t.remove(),w(this,qs,null),w(this,yc,null),(e=a(this,An))==null||e.remove(),w(this,An,null)}};qs=new WeakMap,yc=new WeakMap,Nh=new WeakMap,An=new WeakMap,Wp=new WeakMap,Ih=new WeakMap,_a=new WeakMap,Vp=new WeakMap,zo=new WeakMap,Zi=new WeakMap,Gp=new WeakMap,be=new WeakSet,Jw=function(){const t=document.createElement("div"),e=a(this,Zi)._signal;t.addEventListener("contextmenu",Ni,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,_a)&&(t.id=`${a(this,_a).id}_colorpicker_dropdown`);for(const[n,r]of a(this,Zi).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",a(ks,Gp)[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===a(this,Nh),o.addEventListener("click",E(this,be,tA).bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",E(this,be,eA).bind(this),{signal:e}),t},tA=function(t,e){e.stopPropagation(),a(this,Vp).dispatch("switchannotationeditorparams",{source:this,type:te.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},eA=function(t){ks._keyboardManager.exec(this,t)},El=function(t){if(a(this,be,ho)){this.hideDropdown();return}if(w(this,Wp,t.detail===0),a(this,zo)||(w(this,zo,new AbortController),window.addEventListener("pointerdown",E(this,be,Cx).bind(this),{signal:a(this,Zi).combinedSignal(a(this,zo))})),a(this,qs).ariaExpanded="true",a(this,An)){a(this,An).classList.remove("hidden");return}const e=w(this,An,E(this,be,Jw).call(this));a(this,qs).append(e)},Cx=function(t){var e;(e=a(this,An))!=null&&e.contains(t.target)||this.hideDropdown()},ho=function(){return a(this,An)&&!a(this,An).classList.contains("hidden")},b(ks,Gp,null);let Fy=ks;var Rr,Xp,Fh,qp;const Tl=class Tl{constructor(t){b(this,Rr,null);b(this,Xp,null);b(this,Fh,null);w(this,Xp,t),w(this,Fh,t._uiManager),a(Tl,qp)||w(Tl,qp,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,Rr))return a(this,Rr);const{editorType:t,colorType:e,color:n}=a(this,Xp),r=w(this,Rr,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",a(Tl,qp)[t]),r.addEventListener("input",()=>{a(this,Fh).updateParams(e,r.value)},{signal:a(this,Fh)._signal}),r}update(t){a(this,Rr)&&(a(this,Rr).value=t)}destroy(){var t;(t=a(this,Rr))==null||t.remove(),w(this,Rr,null)}hideDropdown(){}};Rr=new WeakMap,Xp=new WeakMap,Fh=new WeakMap,qp=new WeakMap,b(Tl,qp,null);let Oy=Tl;function aE(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function of(g){return Math.max(0,Math.min(255,255*g))}class oE{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=of(t),[t,t,t]}static G_HTML([t]){const e=aE(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(of)}static RGB_HTML(t){return`#${t.map(aE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[of(1-Math.min(1,t+r)),of(1-Math.min(1,n+r)),of(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,o=1-e,l=1-n,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class VT{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Te("Abstract method `_createSVG` called.")}}class By extends VT{_createSVG(t){return document.createElementNS(Jr,t)}}const GT=9,Gc=new WeakSet,XT=new Date().getTimezoneOffset()*60*1e3;class hw{static create(t){switch(t.data.annotationType){case cn.LINK:return new qA(t);case cn.TEXT:return new YT(t);case cn.WIDGET:switch(t.data.fieldType){case"Tx":return new KT(t);case"Btn":return t.data.radioButton?new Tx(t):t.data.checkBox?new ZT(t):new JT(t);case"Ch":return new tP(t);case"Sig":return new QT(t)}return new qc(t);case cn.POPUP:return new sA(t);case cn.FREETEXT:return new Dx(t);case cn.LINE:return new nP(t);case cn.SQUARE:return new sP(t);case cn.CIRCLE:return new iP(t);case cn.POLYLINE:return new Nx(t);case cn.CARET:return new aP(t);case cn.INK:return new YA(t);case cn.POLYGON:return new rP(t);case cn.HIGHLIGHT:return new Ix(t);case cn.UNDERLINE:return new oP(t);case cn.SQUIGGLY:return new lP(t);case cn.STRIKEOUT:return new cP(t);case cn.STAMP:return new Fx(t);case cn.FILEATTACHMENT:return new uP(t);default:return new Ve(t)}}}var vc,Oh,Pi,Yp,nA;const nS=class nS{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){b(this,Yp);b(this,vc,null);b(this,Oh,!1);b(this,Pi,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return nS._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const t=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:r}=this.data;let o=-1/0,l=-1/0;if((e==null?void 0:e.length)>=8){for(let h=0;h<e.length;h+=8)e[h+1]>l?(l=e[h+1],o=e[h+2]):e[h+1]===l&&(o=Math.max(o,e[h+2]));return[o,l]}if((n==null?void 0:n.length)>=1){for(const h of n)for(let f=0,p=h.length;f<p;f+=2)h[f+1]>l?(l=h[f+1],o=h[f]):h[f+1]===l&&(o=Math.max(o,h[f]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-l)/r,t}get commentText(){var e,n,r;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${Mf}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((r=t.contentsObj)==null?void 0:r.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Mf}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=a(this,Pi))==null?void 0:t.popup)||this.popup)==null||e.remove(),w(this,Pi,this.popup=null)}updateEdited(t){var o;if(!this.container)return;t.rect&&(a(this,vc)||w(this,vc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&E(this,Yp,nA).call(this,e);let r=((o=a(this,Pi))==null?void 0:o.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=a(this,Pi).popup),r&&(r.updateEdited(t),n!=null&&n.deleted&&(r.remove(),w(this,Pi,null),this.popup=null))}resetEdited(){var t;a(this,vc)&&(E(this,Yp,nA).call(this,a(this,vc).rect),(t=a(this,Pi))==null||t.popup.resetEdited(),w(this,vc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof qc)&&!(this instanceof qA)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof sA){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,o),o}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(x>0||T>0){const M=`calc(${x}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;l.borderRadius=M}else if(this instanceof Tx){const M=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=M}switch(e.borderStyle.style){case xu.SOLID:l.borderStyle="solid";break;case xu.DASHED:l.borderStyle="dashed";break;case xu.BEVELED:Bt("Unimplemented border style: beveled");break;case xu.INSET:Bt("Unimplemented border style: inset");break;case xu.UNDERLINE:l.borderBottomStyle="solid";break}const k=e.borderColor||null;k?(w(this,Oh,!0),l.borderColor=ut.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):l.borderWidth=0}const f=ut.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:y,pageX:v,pageY:S}=r.rawDims;l.left=`${100*(f[0]-v)/p}%`,l.top=`${100*(f[1]-S)/y}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(l.width=`${100*u/p}%`,l.height=`${100*h/y}%`):this.setRotation(_,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*l/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const o=r.detail[e],l=o[0],u=o.slice(1);r.target.style[n]=oE[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:oE[`${l}_rgb`](u)})};return Ut(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail)){const o=t[r]||n[r];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,o]of Object.entries(e)){const l=n[r];if(l){const u={detail:{[r]:o},target:t};l(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,o]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,T,k,M]=t.subarray(2,6);if(r===x&&o===T&&e===k&&n===M)return}const{style:l}=this.container;let u;if(a(this,Oh)){const{borderColor:x,borderWidth:T}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const h=r-e,f=o-n,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=p.createElement("defs");y.append(v);const S=p.createElement("clipPath"),_=`clippath_${this.data.id}`;S.setAttribute("id",_),S.setAttribute("clipPathUnits","objectBoundingBox"),v.append(S);for(let x=2,T=t.length;x<T;x+=8){const k=t[x],M=t[x+1],P=t[x+2],L=t[x+3],D=p.createElement("rect"),I=(P-e)/h,U=(o-M)/f,V=(k-P)/h,Y=(M-L)/f;D.setAttribute("x",I),D.setAttribute("y",U),D.setAttribute("width",V),D.setAttribute("height",Y),S.append(D),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${U}" width="${V}" height="${Y}"/>`)}a(this,Oh)&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate),w(this,Pi,new sA({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(a(this,Pi)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,Pi)}render(){Te("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Gc.has(f)){Bt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==e&&Gc.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};vc=new WeakMap,Oh=new WeakMap,Pi=new WeakMap,Yp=new WeakSet,nA=function(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+h)/l}%`,r===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)};let Ve=nS;class qT extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var ci,xl,_x,kx;class qA extends Ve{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});b(this,ci);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),o=!0):e.attachment?(E(this,ci,_x).call(this,r,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(E(this,ci,kx).call(this,r,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),o=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(e,n,r=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&E(this,ci,xl).call(this),r&&(e.title=r)}_bindNamedAction(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(e.title=r),E(this,ci,xl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const l=r.get(o);l&&(e[l]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),E(this,ci,xl).call(this)}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),E(this,ci,xl).call(this),!this._fieldObjects){Bt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var y;r==null||r();const{fields:o,refs:l,include:u}=n,h=[];if(o.length!==0||l.length!==0){const v=new Set(l);for(const S of o){const _=this._fieldObjects[S]||[];for(const{id:x}of _)v.add(x)}for(const S of Object.values(this._fieldObjects))for(const _ of S)v.has(_.id)===u&&h.push(_)}else for(const v of Object.values(this._fieldObjects))h.push(...v);const f=this.annotationStorage,p=[];for(const v of h){const{id:S}=v;switch(p.push(S),v.type){case"text":{const x=v.defaultValue||"";f.setValue(S,{value:x});break}case"checkbox":case"radiobutton":{const x=v.defaultValue===v.exportValues;f.setValue(S,{value:x});break}case"combobox":case"listbox":{const x=v.defaultValue||"";f.setValue(S,{value:x});break}default:continue}const _=document.querySelector(`[data-element-id="${S}"]`);if(_){if(!Gc.has(_)){Bt(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}ci=new WeakSet,xl=function(){this.container.setAttribute("data-internal-link","")},_x=function(e,n,r="",o=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:r&&(e.title=r),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,o),!1},E(this,ci,xl).call(this)},kx=function(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(e.title=r),E(this,ci,xl).call(this)};class YT extends Ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class qc extends Ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return bn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,o){n.includes("mouse")?t.addEventListener(n,l=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var u;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}}))})}_setEventListeners(t,e,n,r){var o,l,u;for(const[h,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,f,r),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ut.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||GT,o=t.style;let l;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(sw*r))||1,y=f/p;l=Math.min(r,h(y/sw))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,h(f/sw))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=ut.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class KT extends qc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[r]:n})}render(){var r,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let u=l.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&u.length>h&&(u=u.slice(0,h));let f=l.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const p={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Gc.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:y,datetimeType:v,timeStep:S}=this.data,_=!!v&&this.enableScripting;y&&(n.title=y),this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",T=>{t.setValue(e,{value:T.target.value}),this.setPropertyOnSiblings(n,"value",T.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",T=>{const k=this.data.defaultFieldValue??"";n.value=p.userValue=k,p.formattedValue=null});let x=T=>{const{formattedValue:k}=p;k!=null&&(T.target.value=k),T.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",k=>{var P;if(p.focused)return;const{target:M}=k;if(_&&(M.type=v,S&&(M.step=S)),p.userValue){const L=p.userValue;if(_)if(v==="time"){const D=new Date(L),I=[D.getHours(),D.getMinutes(),D.getSeconds()];M.value=I.map(U=>U.toString().padStart(2,"0")).join(":")}else M.value=new Date(L-XT).toISOString().split(v==="date"?"T":".",1)[0];else M.value=L}p.lastCommittedValue=M.value,p.commitKey=1,(P=this.data.actions)!=null&&P.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",k=>{this.showElementAndHideCanvas(k.target);const M={value(P){p.userValue=P.detail.value??"",_||t.setValue(e,{value:p.userValue.toString()}),P.target.value=p.userValue},formattedValue(P){const{formattedValue:L}=P.detail;p.formattedValue=L,L!=null&&P.target!==document.activeElement&&(P.target.value=L);const D={formattedValue:L};_&&(D.value=L),t.setValue(e,D)},selRange(P){P.target.setSelectionRange(...P.detail.selRange)},charLimit:P=>{var U;const{charLimit:L}=P.detail,{target:D}=P;if(L===0){D.removeAttribute("maxLength");return}D.setAttribute("maxLength",L);let I=p.userValue;!I||I.length<=L||(I=I.slice(0,L),D.value=p.userValue=I,t.setValue(e,{value:I}),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:D.selectionStart,selEnd:D.selectionEnd}}))}};this._dispatchEventFromSandbox(M,k)}),n.addEventListener("keydown",k=>{var L;p.commitKey=1;let M=-1;if(k.key==="Escape"?M=0:k.key==="Enter"&&!this.data.multiLine?M=2:k.key==="Tab"&&(p.commitKey=3),M===-1)return;const{value:P}=k.target;p.lastCommittedValue!==P&&(p.lastCommittedValue=P,p.userValue=P,(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:M,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}}))});const T=x;x=null,n.addEventListener("blur",k=>{var L,D;if(!p.focused||!k.relatedTarget)return;(L=this.data.actions)!=null&&L.Blur||(p.focused=!1);const{target:M}=k;let{value:P}=M;if(_){if(P&&v==="time"){const I=P.split(":").map(U=>parseInt(U,10));P=new Date(2e3,0,1,I[0],I[1],I[2]||0).valueOf(),M.step=""}else P.includes("T")||(P=`${P}T00:00`),P=new Date(P).valueOf();M.type="text"}p.userValue=P,p.lastCommittedValue!==P&&((D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:p.commitKey,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}})),T(k)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",k=>{var Y;p.lastCommittedValue=null;const{data:M,target:P}=k,{value:L,selectionStart:D,selectionEnd:I}=P;let U=D,V=I;switch(k.inputType){case"deleteWordBackward":{const et=L.substring(0,D).match(/\w*[^\w]*$/);et&&(U-=et[0].length);break}case"deleteWordForward":{const et=L.substring(D).match(/^[^\w]*\w*/);et&&(V+=et[0].length);break}case"deleteContentBackward":D===I&&(U-=1);break;case"deleteContentForward":D===I&&(V+=1);break}k.preventDefault(),(Y=this.linkService.eventBus)==null||Y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,change:M||"",willCommit:!1,selStart:U,selEnd:V}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],k=>k.target.value)}if(x&&n.addEventListener("blur",x),this.data.comb){const k=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${k}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class QT extends qc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class ZT extends qc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Gc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Tx extends qc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Gc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const v=p&&y.id===n;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class JT extends qA{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class tP extends qc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Gc.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,n.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),l=()=>{p.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=p=>{const y=p?"value":"textContent",{options:v,multiple:S}=r;return S?Array.prototype.filter.call(v,_=>_.selected).map(_=>_[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let h=u(!1);const f=p=>{const y=p.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const y={value(v){l==null||l();const S=v.detail.value,_=new Set(Array.isArray(S)?S:[S]);for(const x of r.options)x.selected=_.has(x.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(v){r.multiple=!0},remove(v){const S=r.options,_=v.detail.remove;S[_].selected=!1,r.remove(_),S.length>0&&Array.prototype.findIndex.call(S,T=>T.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(v){const{index:S,displayValue:_,exportValue:x}=v.detail.insert,T=r.children[S],k=document.createElement("option");k.textContent=_,k.value=x,T?T.before(k):r.append(k),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},items(v){const{items:S}=v.detail;for(;r.length!==0;)r.remove(0);for(const _ of S){const{displayValue:x,exportValue:T}=_,k=document.createElement("option");k.textContent=x,k.value=T,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},indices(v){const S=new Set(v.detail.indices);for(const _ of v.target.options)_.selected=S.has(_.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,p)}),r.addEventListener("input",p=>{var S;const y=u(!0),v=u(!1);t.setValue(e,{value:y}),p.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Kp,iA;class sA extends Ve{constructor(e){const{data:n,elements:r,parent:o}=e,l=!!o._commentManager;super(e,{isRenderable:!l&&Ve._hasPopupData(n)});b(this,Kp);if(this.elements=r,l&&Ve._hasPopupData(n)){const u=this.popup=E(this,Kp,iA).call(this);for(const h of r)h.popup=u}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=E(this,Kp,iA).call(this),r=[];for(const o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",r.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(o=>`${Lu}${o}`).join(",")),this.container}}Kp=new WeakSet,iA=function(){return new eP({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Ys,jo,e0,n0,Bh,Uh,Qe,Mr,Ho,wc,zh,jh,Lr,Ks,ka,Ta,Ze,Pa,$o,Qp,Ra,Hh,Ac,Wo,Tn,Vo,Gt,cy,rA,aA,oA,uy,lA,Px,Rx,Mx,Lx,hy,dy,cA;class eP{constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:h,rect:f,parentRect:p,open:y,commentManager:v=null}){b(this,Gt);b(this,Ys,null);b(this,jo,E(this,Gt,Mx).bind(this));b(this,e0,E(this,Gt,cA).bind(this));b(this,n0,E(this,Gt,dy).bind(this));b(this,Bh,E(this,Gt,hy).bind(this));b(this,Uh,null);b(this,Qe,null);b(this,Mr,null);b(this,Ho,null);b(this,wc,null);b(this,zh,null);b(this,jh,null);b(this,Lr,!1);b(this,Ks,null);b(this,ka,null);b(this,Ta,null);b(this,Ze,null);b(this,Pa,null);b(this,$o,null);b(this,Qp,null);b(this,Ra,null);b(this,Hh,null);b(this,Ac,null);b(this,Wo,!1);b(this,Tn,null);b(this,Vo,null);w(this,Qe,t),w(this,Hh,r),w(this,Mr,l),w(this,Ra,u),w(this,zh,h),w(this,Uh,e),w(this,Qp,f),w(this,jh,p),w(this,wc,n),w(this,Ys,v),w(this,Tn,n[0]),w(this,Ho,Ry.toDateObject(o)),this.trigger=n.flatMap(S=>S.getElementsToTriggerPopup()),v||(E(this,Gt,cy).call(this),a(this,Qe).hidden=!0,y&&E(this,Gt,hy).call(this))}renderCommentButton(){if(a(this,Ze)){a(this,Ze).parentNode||a(this,Tn).container.after(a(this,Ze));return}if(a(this,Pa)||E(this,Gt,rA).call(this),!a(this,Pa))return;const{signal:t}=w(this,ka,new AbortController),e=a(this,Tn).hasOwnCommentButton,n=()=>{a(this,Ys).toggleCommentPopup(this,!0,void 0,!e)},r=()=>{a(this,Ys).toggleCommentPopup(this,!1,!0,!e)},o=()=>{a(this,Ys).toggleCommentPopup(this,!1,!1)};if(e){w(this,Ze,a(this,Tn).container);for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",a(this,jo),{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=w(this,Ze,document.createElement("button"));l.className="annotationCommentButton";const u=a(this,Tn).container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,Gt,oA).call(this),E(this,Gt,aA).call(this),l.addEventListener("keydown",a(this,jo),{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}get commentButtonColor(){const{color:t,opacity:e}=a(this,Tn).commentData;return t?a(this,zh)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=a(this,Ze))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}=a(this,Tn).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}}get elementBeforePopup(){return a(this,Ze)}get comment(){return a(this,Vo)||w(this,Vo,a(this,Tn).commentText),a(this,Vo)}set comment(t){t!==this.comment&&(a(this,Tn).commentText=w(this,Vo,t))}focus(){var t;(t=a(this,Tn).container)==null||t.focus()}get parentBoundingClientRect(){return a(this,Tn).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){a(this,Ze)&&(a(this,Ze).classList.toggle("selected",t),a(this,Ze).ariaExpanded=e)}setSelectedCommentButton(t){a(this,Ze).classList.toggle("selected",t)}get commentPopupPosition(){if(a(this,$o))return a(this,$o);const{x:t,y:e,height:n}=a(this,Ze).getBoundingClientRect(),{x:r,y:o,width:l,height:u}=a(this,Tn).layer.getBoundingClientRect();return[(t-r)/l,(e+n-o)/u]}set commentPopupPosition(t){w(this,$o,t)}hasDefaultPopupPosition(){return a(this,$o)===null}get commentButtonPosition(){return a(this,Pa)}get commentButtonWidth(){return a(this,Ze).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=a(this,$o)||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:h}=r;a(this,Ys).showDialog(null,this,o+e*u,l+n*h,{...t,parentDimensions:r})}render(){var n,r;if(a(this,Ks))return;const t=w(this,Ks,document.createElement("div"));if(t.className="popup",a(this,Uh)){const o=t.style.outlineColor=ut.makeHexColor(...a(this,Uh));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=a(this,Hh))!=null&&n.str){const o=document.createElement("span");o.className="title",e.append(o),{dir:o.dir,str:o.textContent}=a(this,Hh)}if(t.append(e),a(this,Ho)){const o=document.createElement("time");o.className="popupDate",o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Ho).valueOf()})),o.dateTime=a(this,Ho).toISOString(),e.append(o)}wE({html:a(this,Gt,uy)||a(this,Mr).str,dir:(r=a(this,Mr))==null?void 0:r.dir,className:"popupContent"},t),a(this,Qe).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var r;if(a(this,Ys)){n?(this.remove(),w(this,Vo,null)):e&&(e.deleted?this.remove():(E(this,Gt,oA).call(this),w(this,Vo,e.text))),t&&(w(this,Pa,null),E(this,Gt,rA).call(this),E(this,Gt,aA).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}E(this,Gt,cy).call(this),a(this,Ac)||w(this,Ac,{contentsObj:a(this,Mr),richText:a(this,Ra)}),t&&w(this,Ta,null),e&&e.text&&(w(this,Ra,E(this,Gt,Rx).call(this,e.text)),w(this,Ho,Ry.toDateObject(e.date)),w(this,Mr,null)),(r=a(this,Ks))==null||r.remove(),w(this,Ks,null)}resetEdited(){var t;a(this,Ac)&&({contentsObj:mn(this,Mr)._,richText:mn(this,Ra)._}=a(this,Ac),w(this,Ac,null),(t=a(this,Ks))==null||t.remove(),w(this,Ks,null),w(this,Ta,null))}remove(){var t,e,n;if((t=a(this,ka))==null||t.abort(),w(this,ka,null),(e=a(this,Ks))==null||e.remove(),w(this,Ks,null),w(this,Wo,!1),w(this,Lr,!1),(n=a(this,Ze))==null||n.remove(),w(this,Ze,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){w(this,Wo,this.isVisible),a(this,Wo)&&(a(this,Qe).hidden=!0)}maybeShow(){a(this,Ys)||(E(this,Gt,cy).call(this),a(this,Wo)&&(a(this,Ks)||E(this,Gt,dy).call(this),w(this,Wo,!1),a(this,Qe).hidden=!1))}get isVisible(){return a(this,Ys)?!1:a(this,Qe).hidden===!1}}Ys=new WeakMap,jo=new WeakMap,e0=new WeakMap,n0=new WeakMap,Bh=new WeakMap,Uh=new WeakMap,Qe=new WeakMap,Mr=new WeakMap,Ho=new WeakMap,wc=new WeakMap,zh=new WeakMap,jh=new WeakMap,Lr=new WeakMap,Ks=new WeakMap,ka=new WeakMap,Ta=new WeakMap,Ze=new WeakMap,Pa=new WeakMap,$o=new WeakMap,Qp=new WeakMap,Ra=new WeakMap,Hh=new WeakMap,Ac=new WeakMap,Wo=new WeakMap,Tn=new WeakMap,Vo=new WeakMap,Gt=new WeakSet,cy=function(){var e;if(a(this,ka))return;w(this,ka,new AbortController);const{signal:t}=a(this,ka);for(const n of this.trigger)n.addEventListener("click",a(this,Bh),{signal:t}),n.addEventListener("pointerenter",a(this,n0),{signal:t}),n.addEventListener("pointerleave",a(this,e0),{signal:t}),n.classList.add("popupTriggerArea");for(const n of a(this,wc))(e=n.container)==null||e.addEventListener("keydown",a(this,jo),{signal:t})},rA=function(){const t=a(this,wc).find(e=>e.hasCommentButton);t&&w(this,Pa,t._normalizePoint(t.commentButtonPosition))},aA=function(){if(a(this,Tn).extraPopupElement&&!a(this,Tn).editor)return;a(this,Ze)||this.renderCommentButton();const[t,e]=a(this,Pa),{style:n}=a(this,Ze);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},oA=function(){a(this,Tn).extraPopupElement||(a(this,Ze)||this.renderCommentButton(),a(this,Ze).style.backgroundColor=this.commentButtonColor||"")},uy=function(){const t=a(this,Ra),e=a(this,Mr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Ra).html||null},lA=function(){var t,e,n;return((n=(e=(t=a(this,Gt,uy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},Px=function(){var t,e,n;return((n=(e=(t=a(this,Gt,uy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},Rx=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:a(this,Gt,Px),fontSize:a(this,Gt,lA)?`calc(${a(this,Gt,lA)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return n},Mx=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Lr))&&E(this,Gt,hy).call(this)},Lx=function(){if(a(this,Ta)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:o}}}=a(this,zh);let l=!!a(this,jh),u=l?a(this,jh):a(this,Qp);for(const _ of a(this,wc))if(!u||ut.intersect(_.data.rect,u)!==null){u=_.data.rect,l=!0;break}const h=ut.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,y=h[0]+p,v=h[1];w(this,Ta,[100*(y-r)/e,100*(v-o)/n]);const{style:S}=a(this,Qe);S.left=`${a(this,Ta)[0]}%`,S.top=`${a(this,Ta)[1]}%`},hy=function(){if(a(this,Ys)){a(this,Ys).toggleCommentPopup(this,!1);return}w(this,Lr,!a(this,Lr)),a(this,Lr)?(E(this,Gt,dy).call(this),a(this,Qe).addEventListener("click",a(this,Bh)),a(this,Qe).addEventListener("keydown",a(this,jo))):(E(this,Gt,cA).call(this),a(this,Qe).removeEventListener("click",a(this,Bh)),a(this,Qe).removeEventListener("keydown",a(this,jo)))},dy=function(){a(this,Ks)||this.render(),this.isVisible?a(this,Lr)&&a(this,Qe).classList.add("focused"):(E(this,Gt,Lx).call(this),a(this,Qe).hidden=!1,a(this,Qe).style.zIndex=parseInt(a(this,Qe).style.zIndex)+1e3)},cA=function(){a(this,Qe).classList.remove("focused"),!(a(this,Lr)||!this.isVisible)&&(a(this,Qe).hidden=!0,a(this,Qe).style.zIndex=parseInt(a(this,Qe).style.zIndex)-1e3)};class Dx extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ht.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Zp;class nP extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,Zp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),l=w(this,Zp,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Zp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zp=new WeakMap;var Jp;class sP extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,Jp,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),l=e.borderStyle.width,u=w(this,Jp,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",n-l),u.setAttribute("height",r-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Jp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jp=new WeakMap;var tg;class iP extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,tg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),l=e.borderStyle.width,u=w(this,tg,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",r/2),u.setAttribute("rx",n/2-l/2),u.setAttribute("ry",r/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}tg=new WeakMap;var eg;class Nx extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,eg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:o},width:l,height:u}=this;if(!n)return this.container;const h=this.svgFactory.create(l,u,!0);let f=[];for(let y=0,v=n.length;y<v;y+=2){const S=n[y]-e[0],_=e[3]-n[y+1];f.push(`${S},${_}`)}f=f.join(" ");const p=w(this,eg,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",f),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,eg)}addHighlightArea(){this.container.classList.add("highlightArea")}}eg=new WeakMap;class rP extends Nx{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class aP extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var ng,Sc,sg,uA;class YA extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,sg);b(this,ng,null);b(this,Sc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ht.HIGHLIGHT:Ht.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:o,popupRef:l}}=this,{transform:u,width:h,height:f}=E(this,sg,uA).call(this,n,e),p=this.svgFactory.create(h,f,!0),y=w(this,ng,this.svgFactory.createElement("svg:g"));p.append(y),y.setAttribute("stroke-width",o.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",u);for(let v=0,S=r.length;v<S;v++){const _=this.svgFactory.createElement(this.svgElementName);a(this,Sc).push(_),_.setAttribute("points",r[v].join(",")),y.append(_)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:o}=e,l=a(this,ng);if(n>=0&&l.setAttribute("stroke-width",n||1),r)for(let u=0,h=a(this,Sc).length;u<h;u++)a(this,Sc)[u].setAttribute("points",r[u].join(","));if(o){const{transform:u,width:h,height:f}=E(this,sg,uA).call(this,this.data.rotation,o);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return a(this,Sc)}addHighlightArea(){this.container.classList.add("highlightArea")}}ng=new WeakMap,Sc=new WeakMap,sg=new WeakSet,uA=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Ix extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ht.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class oP extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class lP extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class cP extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Fx extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ht.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var ig,rg,hA;class uP extends Ve{constructor(e){var r;super(e,{isRenderable:!0});b(this,rg);b(this,ig,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,rg,hA).bind(this)),w(this,ig,r);const{isMac:o}=bn.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&E(this,rg,hA).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return a(this,ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}ig=new WeakMap,rg=new WeakSet,hA=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var bc,Ec,$h,Go,ag,xc,Qs,og,za,fy,fA;const sS=class sS{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){b(this,za);b(this,bc,null);b(this,Ec,null);b(this,$h,null);b(this,Go,new Map);b(this,ag,null);b(this,xc,null);b(this,Qs,[]);b(this,og,!1);this.div=t,w(this,bc,e),w(this,Ec,n),w(this,ag,u||null),w(this,xc,f||null),w(this,$h,p||new VA),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return a(this,Go).size>0}async render(t){var u;const{annotations:e}=t,n=this.div;Wc(n,this.viewport);const r=new Map,o=[],l={data:null,layer:n,linkService:a(this,xc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new By,annotationStorage:a(this,$h),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const f=h.annotationType===cn.POPUP;if(f){const v=r.get(h.id);if(!v)continue;if(!this._commentManager){o.push(h);continue}l.elements=v}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;l.data=h;const p=hw.create(l);if(!p.isRenderable)continue;if(!f&&(a(this,Qs).push(p),h.popupRef)){const v=r.get(h.popupRef);v?v.push(p):r.set(h.popupRef,[p])}const y=p.render();h.hidden&&(y.style.visibility="hidden"),p._isEditable&&(a(this,Go).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}await E(this,za,fy).call(this);for(const h of o){const f=l.elements=r.get(h.id);l.data=h;const p=hw.create(l);if(!p.isRenderable)continue;const y=p.render();p.contentElement.id=`${Lu}${h.id}`,h.hidden&&(y.style.visibility="hidden"),f.at(-1).container.after(y)}E(this,za,fA).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:a(this,xc),svgFactory:new By,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=sS._defaultBorderStyle),e.data=n;const r=hw.create(e);r.isRenderable&&(r.render(),r.contentElement.id=`${Lu}${n.id}`,a(this,Qs).push(r))}await E(this,za,fy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Wc(e,{rotation:t.rotation}),E(this,za,fA).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Go).values())}getEditableAnnotation(t){return a(this,Go).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:r}=t,o=new qT({data:{id:n,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:a(this,xc),annotationStorage:a(this,$h)});return o.render(),o.contentElement.id=`${Lu}${n}`,o.createOrUpdatePopup(),a(this,Qs).push(o),o}removeAnnotation(t){var r;const e=a(this,Qs).findIndex(o=>o.data.id===t);if(e<0)return;const[n]=a(this,Qs).splice(e,1);(r=a(this,bc))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);E(this,za,fy).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Ut(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:xu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};bc=new WeakMap,Ec=new WeakMap,$h=new WeakMap,Go=new WeakMap,ag=new WeakMap,xc=new WeakMap,Qs=new WeakMap,og=new WeakMap,za=new WeakSet,fy=async function(){var n,r,o;if(a(this,Qs).length===0)return;this.div.replaceChildren();const t=[];if(!a(this,og)){w(this,og,!0);for(const{contentElement:l,data:{id:u}}of a(this,Qs)){const h=l.id=`${Lu}${u}`;t.push((n=a(this,ag))==null?void 0:n.getAriaAttributes(h).then(f=>{if(f)for(const[p,y]of f)l.setAttribute(p,y)}))}}a(this,Qs).sort(({data:{rect:[l,u,h,f]}},{data:{rect:[p,y,v,S]}})=>{if(l===h&&u===f)return 1;if(p===v&&y===S)return-1;const _=f,x=u,T=(u+f)/2,k=S,M=y,P=(y+S)/2;if(T>=k&&P<=x)return-1;if(P>=_&&T<=M)return 1;const L=(l+h)/2,D=(p+v)/2;return L-D});const e=document.createDocumentFragment();for(const l of a(this,Qs))e.append(l.container),this._commentManager?(o=((r=l.extraPopupElement)==null?void 0:r.popup)||l.popup)==null||o.renderCommentButton():l.extraPopupElement&&e.append(l.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),a(this,bc))for(const l of a(this,Qs))a(this,bc).addPointerInTextLayer(l.contentElement,!1)},fA=function(){var e;if(!a(this,Ec))return;const t=this.div;for(const[n,r]of a(this,Ec)){const o=t.querySelector(`[data-annotation-id="${n}"]`);if(!o)continue;r.className="annotationContent";const{firstChild:l}=o;l?l.nodeName==="CANVAS"?l.replaceWith(r):l.classList.contains("annotationContent")?l.after(r):l.before(r):o.append(r);const u=a(this,Go).get(n);u&&(u._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,o.id,r),u._hasNoCanvas=!1):u.canvas=r)}a(this,Ec).clear()};let dA=sS;const Xm=/\r\n?|\n/g;var Zs,lg,Cc,Js,hn,Ox,Bx,Ux,py,ja,gy,my,zx,gA,jx;const Ie=class Ie extends Le{constructor(e){super({...e,name:"freeTextEditor"});b(this,hn);b(this,Zs,"");b(this,lg,`${this.id}-editor`);b(this,Cc,null);b(this,Js);K(this,"_colorPicker",null);this.color=e.color||Ie._defaultColor||Le._defaultLineColor,w(this,Js,e.fontSize||Ie._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Ie.prototype,n=l=>l.isEmpty(),r=Vc.TRANSLATE_SMALL,o=Vc.TRANSLATE_BIG;return Ut(this,"_keyboardManager",new Rg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){Le.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case te.FREETEXT_SIZE:Ie._defaultFontSize=n;break;case te.FREETEXT_COLOR:Ie._defaultColor=n;break}}updateParams(e,n){switch(e){case te.FREETEXT_SIZE:E(this,hn,Ox).call(this,n);break;case te.FREETEXT_COLOR:E(this,hn,Bx).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[te.FREETEXT_SIZE,Ie._defaultFontSize],[te.FREETEXT_COLOR,Ie._defaultColor||Le._defaultLineColor]]}get propertiesToUpdate(){return[[te.FREETEXT_SIZE,a(this,Js)],[te.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Oy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return te.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ie._internalPadding*e,-(Ie._internalPadding+a(this,Js))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),w(this,Cc,new AbortController);const e=this._uiManager.combinedSignal(a(this,Cc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,lg)),this._isDraggable=!0,(e=a(this,Cc))==null||e.abort(),w(this,Cc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,Zs),n=w(this,Zs,E(this,hn,Ux).call(this).trimEnd());if(e===n)return;const r=o=>{if(w(this,Zs,o),!o){this.remove();return}E(this,hn,my).call(this),this._uiManager.rebuild(this),E(this,hn,py).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),E(this,hn,py).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ie._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,lg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${a(this,Js)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[p,y]=this.pageDimensions,[v,S]=this.pageTranslation;let _,x;switch(this.rotation){case 0:_=e+(u[0]-v)/p,x=n+this.height-(u[1]-S)/y;break;case 90:_=e+(u[0]-v)/p,x=n-(u[1]-S)/y,[h,f]=[f,-h];break;case 180:_=e-this.width+(u[0]-v)/p,x=n-(u[1]-S)/y,[h,f]=[-h,-f];break;case 270:_=e+(u[0]-v-this.height*y)/p,x=n+(u[1]-S-this.width*p)/y,[h,f]=[-f,h];break}this.setAt(_*o,x*l,h,f)}else this._moveAfterPaste(e,n);E(this,hn,my).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,x,T;const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const o=E(_=Ie,ja,gA).call(_,n.getData("text")||"").replaceAll(Xm,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:f}=u,p=[],y=[];if(h.nodeType===Node.TEXT_NODE){const k=h.parentElement;if(y.push(h.nodeValue.slice(f).replaceAll(Xm,"")),k!==this.editorDiv){let M=p;for(const P of this.editorDiv.childNodes){if(P===k){M=y;continue}M.push(E(x=Ie,ja,gy).call(x,P))}}p.push(h.nodeValue.slice(0,f).replaceAll(Xm,""))}else if(h===this.editorDiv){let k=p,M=0;for(const P of this.editorDiv.childNodes)M++===f&&(k=y),k.push(E(T=Ie,ja,gy).call(T,P))}w(this,Zs,`${p.join(`
`)}${o}${y.join(`
`)}`),E(this,hn,my).call(this);const v=new Range;let S=Math.sumPrecise(p.map(k=>k.length));for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const M=k.nodeValue.length;if(S<=M){v.setStart(k,S),v.setEnd(k,S);break}S-=M}l.removeAllRanges(),l.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ie._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,r){var u;let o=null;if(e instanceof Dx){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:p,rotation:y,id:v,popupRef:S,richText:_,contentsObj:x,creationDate:T,modificationDate:k},textContent:M,textPosition:P,parent:{page:{pageNumber:L}}}=e;if(!M||M.length===0)return null;o=e={annotationType:Ht.FREETEXT,color:Array.from(f),fontSize:h,value:M.join(`
`),position:P,pageIndex:L-1,rect:p.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,popupRef:S,comment:(x==null?void 0:x.str)||null,richText:_,creationDate:T,modificationDate:k}}const l=await super.deserialize(e,n,r);return w(l,Js,e.fontSize),l.color=ut.makeHexColor(...e.color),w(l,Zs,E(u=Ie,ja,gA).call(u,e.value)),l._initialData=o,e.comment&&l.setCommentData(e),l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Le._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:n,fontSize:a(this,Js),value:E(this,hn,zx).call(this)});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!E(this,hn,jx).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${a(this,Js)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const o of a(this,Zs).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),n.append(l)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,Zs)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Zs=new WeakMap,lg=new WeakMap,Cc=new WeakMap,Js=new WeakMap,hn=new WeakSet,Ox=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-a(this,Js))*this.parentScale),w(this,Js,o),E(this,hn,py).call(this)},r=a(this,Js);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Bx=function(e){const n=o=>{this.color=o,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ux=function(){var r;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(E(r=Ie,ja,gy).call(r,o)),n=o);return e.join(`
`)},py=function(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,u=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),r=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()},ja=new WeakSet,gy=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Xm,"")},my=function(){if(this.editorDiv.replaceChildren(),!!a(this,Zs))for(const e of a(this,Zs).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},zx=function(){return a(this,Zs).replaceAll(""," ")},gA=function(e){return e.replaceAll(" ","")},jx=function(e){const{value:n,fontSize:r,color:o,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((u,h)=>u!==o[h])||e.pageIndex!==l},b(Ie,ja),K(Ie,"_freeTextDefaultContent",""),K(Ie,"_internalPadding",0),K(Ie,"_defaultColor",null),K(Ie,"_defaultFontSize",10),K(Ie,"_type","freetext"),K(Ie,"_editorType",Ht.FREETEXT);let pA=Ie;class gt{toSVGPath(){Te("Abstract method `toSVGPath` must be implemented.")}get box(){Te("Abstract getter `box` must be implemented.")}serialize(t,e){Te("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,o,l){l||(l=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u]*r,l[u+1]=n+t[u+1]*o;return l}static _rescaleAndSwap(t,e,n,r,o,l){l||(l=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u+1]*r,l[u+1]=n+t[u]*o;return l}static _translate(t,e,n,r){r||(r=new Float32Array(t.length));for(let o=0,l=t.length;o<l;o+=2)r[o]=e+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,o){switch(o){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,o,l){return[(t+5*n)/6,(e+5*r)/6,(5*n+o)/6,(5*r+l)/6,(n+o)/2,(r+l)/2]}}K(gt,"PRECISION",1e-4);var ti,Ji,Wh,Vh,Dr,Kt,_c,kc,cg,ug,Gh,Xh,Xo,hg,s0,i0,Sn,_f,Hx,$x,Wx,Vx,Gx,Xx;const sa=class sa{constructor({x:t,y:e},n,r,o,l,u=0){b(this,Sn);b(this,ti);b(this,Ji,[]);b(this,Wh);b(this,Vh);b(this,Dr,[]);b(this,Kt,new Float32Array(18));b(this,_c);b(this,kc);b(this,cg);b(this,ug);b(this,Gh);b(this,Xh);b(this,Xo,[]);w(this,ti,n),w(this,Xh,o*r),w(this,Vh,l),a(this,Kt).set([NaN,NaN,NaN,NaN,t,e],6),w(this,Wh,u),w(this,ug,a(sa,hg)*r),w(this,cg,a(sa,i0)*r),w(this,Gh,r),a(this,Xo).push(t,e)}isEmpty(){return isNaN(a(this,Kt)[8])}add({x:t,y:e}){var Y;w(this,_c,t),w(this,kc,e);const[n,r,o,l]=a(this,ti);let[u,h,f,p]=a(this,Kt).subarray(8,12);const y=t-f,v=e-p,S=Math.hypot(y,v);if(S<a(this,cg))return!1;const _=S-a(this,ug),x=_/S,T=x*y,k=x*v;let M=u,P=h;u=f,h=p,f+=T,p+=k,(Y=a(this,Xo))==null||Y.push(t,e);const L=-k/_,D=T/_,I=L*a(this,Xh),U=D*a(this,Xh);return a(this,Kt).set(a(this,Kt).subarray(2,8),0),a(this,Kt).set([f+I,p+U],4),a(this,Kt).set(a(this,Kt).subarray(14,18),12),a(this,Kt).set([f-I,p-U],16),isNaN(a(this,Kt)[6])?(a(this,Dr).length===0&&(a(this,Kt).set([u+I,h+U],2),a(this,Dr).push(NaN,NaN,NaN,NaN,(u+I-n)/o,(h+U-r)/l),a(this,Kt).set([u-I,h-U],14),a(this,Ji).push(NaN,NaN,NaN,NaN,(u-I-n)/o,(h-U-r)/l)),a(this,Kt).set([M,P,u,h,f,p],6),!this.isEmpty()):(a(this,Kt).set([M,P,u,h,f,p],6),Math.abs(Math.atan2(P-h,M-u)-Math.atan2(k,T))<Math.PI/2?([u,h,f,p]=a(this,Kt).subarray(2,6),a(this,Dr).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((h+p)/2-r)/l),[u,h,M,P]=a(this,Kt).subarray(14,18),a(this,Ji).push(NaN,NaN,NaN,NaN,((M+u)/2-n)/o,((P+h)/2-r)/l),!0):([M,P,u,h,f,p]=a(this,Kt).subarray(0,6),a(this,Dr).push(((M+5*u)/6-n)/o,((P+5*h)/6-r)/l,((5*u+f)/6-n)/o,((5*h+p)/6-r)/l,((u+f)/2-n)/o,((h+p)/2-r)/l),[f,p,u,h,M,P]=a(this,Kt).subarray(12,18),a(this,Ji).push(((M+5*u)/6-n)/o,((P+5*h)/6-r)/l,((5*u+f)/6-n)/o,((5*h+p)/6-r)/l,((u+f)/2-n)/o,((h+p)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Dr),e=a(this,Ji);if(isNaN(a(this,Kt)[6])&&!this.isEmpty())return E(this,Sn,Hx).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);E(this,Sn,Wx).call(this,n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return E(this,Sn,$x).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,r,o,l){return new qx(t,e,n,r,o,l)}getOutlines(){var y;const t=a(this,Dr),e=a(this,Ji),n=a(this,Kt),[r,o,l,u]=a(this,ti),h=new Float32Array((((y=a(this,Xo))==null?void 0:y.length)??0)+2);for(let v=0,S=h.length-2;v<S;v+=2)h[v]=(a(this,Xo)[v]-r)/l,h[v+1]=(a(this,Xo)[v+1]-o)/u;if(h[h.length-2]=(a(this,_c)-r)/l,h[h.length-1]=(a(this,kc)-o)/u,isNaN(n[6])&&!this.isEmpty())return E(this,Sn,Vx).call(this,h);const f=new Float32Array(a(this,Dr).length+24+a(this,Ji).length);let p=t.length;for(let v=0;v<p;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}p=E(this,Sn,Xx).call(this,f,p);for(let v=e.length-6;v>=6;v-=6)for(let S=0;S<6;S+=2){if(isNaN(e[v+S])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[v+S],f[p+1]=e[v+S+1],p+=2}return E(this,Sn,Gx).call(this,f,p),this.newFreeDrawOutline(f,h,a(this,ti),a(this,Gh),a(this,Wh),a(this,Vh))}};ti=new WeakMap,Ji=new WeakMap,Wh=new WeakMap,Vh=new WeakMap,Dr=new WeakMap,Kt=new WeakMap,_c=new WeakMap,kc=new WeakMap,cg=new WeakMap,ug=new WeakMap,Gh=new WeakMap,Xh=new WeakMap,Xo=new WeakMap,hg=new WeakMap,s0=new WeakMap,i0=new WeakMap,Sn=new WeakSet,_f=function(){const t=a(this,Kt).subarray(4,6),e=a(this,Kt).subarray(16,18),[n,r,o,l]=a(this,ti);return[(a(this,_c)+(t[0]-e[0])/2-n)/o,(a(this,kc)+(t[1]-e[1])/2-r)/l,(a(this,_c)+(e[0]-t[0])/2-n)/o,(a(this,kc)+(e[1]-t[1])/2-r)/l]},Hx=function(){const[t,e,n,r]=a(this,ti),[o,l,u,h]=E(this,Sn,_f).call(this);return`M${(a(this,Kt)[2]-t)/n} ${(a(this,Kt)[3]-e)/r} L${(a(this,Kt)[4]-t)/n} ${(a(this,Kt)[5]-e)/r} L${o} ${l} L${u} ${h} L${(a(this,Kt)[16]-t)/n} ${(a(this,Kt)[17]-e)/r} L${(a(this,Kt)[14]-t)/n} ${(a(this,Kt)[15]-e)/r} Z`},$x=function(t){const e=a(this,Ji);t.push(`L${e[4]} ${e[5]} Z`)},Wx=function(t){const[e,n,r,o]=a(this,ti),l=a(this,Kt).subarray(4,6),u=a(this,Kt).subarray(16,18),[h,f,p,y]=E(this,Sn,_f).call(this);t.push(`L${(l[0]-e)/r} ${(l[1]-n)/o} L${h} ${f} L${p} ${y} L${(u[0]-e)/r} ${(u[1]-n)/o}`)},Vx=function(t){const e=a(this,Kt),[n,r,o,l]=a(this,ti),[u,h,f,p]=E(this,Sn,_f).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-r)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-r)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-r)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-r)/l],0),this.newFreeDrawOutline(y,t,a(this,ti),a(this,Gh),a(this,Wh),a(this,Vh))},Gx=function(t,e){const n=a(this,Ji);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},Xx=function(t,e){const n=a(this,Kt).subarray(4,6),r=a(this,Kt).subarray(16,18),[o,l,u,h]=a(this,ti),[f,p,y,v]=E(this,Sn,_f).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/h],e),e+=24},b(sa,hg,8),b(sa,s0,2),b(sa,i0,a(sa,hg)+a(sa,s0));let Uy=sa;var qh,Tc,Ma,dg,ei,fg,sn,r0,Yx;class qx extends gt{constructor(e,n,r,o,l,u){super();b(this,r0);b(this,qh);b(this,Tc,new Float32Array(4));b(this,Ma);b(this,dg);b(this,ei);b(this,fg);b(this,sn);w(this,sn,e),w(this,ei,n),w(this,qh,r),w(this,fg,o),w(this,Ma,l),w(this,dg,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,r0,Yx).call(this,u);const[h,f,p,y]=a(this,Tc);for(let v=0,S=e.length;v<S;v+=2)e[v]=(e[v]-h)/p,e[v+1]=(e[v+1]-f)/y;for(let v=0,S=n.length;v<S;v+=2)n[v]=(n[v]-h)/p,n[v+1]=(n[v+1]-f)/y}toSVGPath(){const e=[`M${a(this,sn)[4]} ${a(this,sn)[5]}`];for(let n=6,r=a(this,sn).length;n<r;n+=6){if(isNaN(a(this,sn)[n])){e.push(`L${a(this,sn)[n+4]} ${a(this,sn)[n+5]}`);continue}e.push(`C${a(this,sn)[n]} ${a(this,sn)[n+1]} ${a(this,sn)[n+2]} ${a(this,sn)[n+3]} ${a(this,sn)[n+4]} ${a(this,sn)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,o],l){const u=r-e,h=o-n;let f,p;switch(l){case 0:f=gt._rescale(a(this,sn),e,o,u,-h),p=gt._rescale(a(this,ei),e,o,u,-h);break;case 90:f=gt._rescaleAndSwap(a(this,sn),e,n,u,h),p=gt._rescaleAndSwap(a(this,ei),e,n,u,h);break;case 180:f=gt._rescale(a(this,sn),r,n,-u,h),p=gt._rescale(a(this,ei),r,n,-u,h);break;case 270:f=gt._rescaleAndSwap(a(this,sn),r,o,-u,-h),p=gt._rescaleAndSwap(a(this,ei),r,o,-u,-h);break}return{outline:Array.from(f),points:[Array.from(p)]}}get box(){return a(this,Tc)}newOutliner(e,n,r,o,l,u=0){return new Uy(e,n,r,o,l,u)}getNewOutline(e,n){const[r,o,l,u]=a(this,Tc),[h,f,p,y]=a(this,qh),v=l*p,S=u*y,_=r*p+h,x=o*y+f,T=this.newOutliner({x:a(this,ei)[0]*v+_,y:a(this,ei)[1]*S+x},a(this,qh),a(this,fg),e,a(this,dg),n??a(this,Ma));for(let k=2;k<a(this,ei).length;k+=2)T.add({x:a(this,ei)[k]*v+_,y:a(this,ei)[k+1]*S+x});return T.getOutlines()}}qh=new WeakMap,Tc=new WeakMap,Ma=new WeakMap,dg=new WeakMap,ei=new WeakMap,fg=new WeakMap,sn=new WeakMap,r0=new WeakSet,Yx=function(e){const n=a(this,sn);let r=n[4],o=n[5];const l=[r,o,r,o];let u=r,h=o,f=r,p=o;const y=e?Math.max:Math.min,v=new Float32Array(4);for(let _=6,x=n.length;_<x;_+=6){const T=n[_+4],k=n[_+5];isNaN(n[_])?(ut.pointBoundingBox(T,k,l),h>k?(u=T,h=k):h===k&&(u=y(u,T)),p<k?(f=T,p=k):p===k&&(f=y(f,T))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,ut.bezierBoundingBox(r,o,...n.slice(_,_+6),v),ut.rectBoundingBox(v[0],v[1],v[2],v[3],l),h>v[1]?(u=v[0],h=v[1]):h===v[1]&&(u=y(u,v[0])),p<v[3]?(f=v[2],p=v[3]):p===v[3]&&(f=y(f,v[2]))),r=T,o=k}const S=a(this,Tc);S[0]=l[0]-a(this,Ma),S[1]=l[1]-a(this,Ma),S[2]=l[2]-l[0]+2*a(this,Ma),S[3]=l[3]-l[1]+2*a(this,Ma),this.firstPoint=[u,h],this.lastPoint=[f,p]};var pg,gg,mg,qo,tr,ys,Kx,yy,Qx,Zx,yA;class mA{constructor(t,e=0,n=0,r=!0){b(this,ys);b(this,pg);b(this,gg);b(this,mg);b(this,qo,[]);b(this,tr,[]);const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:T,width:k,height:M}of t){const P=Math.floor((x-e)/l)*l,L=Math.ceil((x+k+e)/l)*l,D=Math.floor((T-e)/l)*l,I=Math.ceil((T+M+e)/l)*l,U=[P,D,I,!0],V=[L,D,I,!1];a(this,qo).push(U,V),ut.rectBoundingBox(P,D,L,I,o)}const u=o[2]-o[0]+2*n,h=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n;let y=r?-1/0:1/0,v=1/0;const S=a(this,qo).at(r?-1:-2),_=[S[0],S[2]];for(const x of a(this,qo)){const[T,k,M,P]=x;!P&&r?k<v?(v=k,y=T):k===v&&(y=Math.max(y,T)):P&&!r&&(k<v?(v=k,y=T):k===v&&(y=Math.min(y,T))),x[0]=(T-f)/u,x[1]=(k-p)/h,x[2]=(M-p)/h}w(this,pg,new Float32Array([f,p,u,h])),w(this,gg,[y,v]),w(this,mg,_)}getOutlines(){a(this,qo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of a(this,qo))e[3]?(t.push(...E(this,ys,yA).call(this,e)),E(this,ys,Qx).call(this,e)):(E(this,ys,Zx).call(this,e),t.push(...E(this,ys,yA).call(this,e)));return E(this,ys,Kx).call(this,t)}}pg=new WeakMap,gg=new WeakMap,mg=new WeakMap,qo=new WeakMap,tr=new WeakMap,ys=new WeakSet,Kx=function(t){const e=[],n=new Set;for(const l of t){const[u,h,f]=l;e.push([u,h,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const h=e[l][2],f=e[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[u,h,f,p,y]=l;n.delete(l);let v=u,S=h;for(o=[u,f],r.push(o);;){let _;if(n.has(p))_=p;else if(n.has(y))_=y;else break;n.delete(_),[u,h,f,p,y]=_,v!==u&&(o.push(v,S,u,S===h?h:f),v=u),S=S===h?f:h}o.push(v,S)}return new hP(r,a(this,pg),a(this,gg),a(this,mg))},yy=function(t){const e=a(this,tr);let n=0,r=e.length-1;for(;n<=r;){const o=n+r>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:r=o-1}return r+1},Qx=function([,t,e]){const n=E(this,ys,yy).call(this,t);a(this,tr).splice(n,0,[t,e])},Zx=function([,t,e]){const n=E(this,ys,yy).call(this,t);for(let r=n;r<a(this,tr).length;r++){const[o,l]=a(this,tr)[r];if(o!==t)break;if(o===t&&l===e){a(this,tr).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=a(this,tr)[r];if(o!==t)break;if(o===t&&l===e){a(this,tr).splice(r,1);return}}},yA=function(t){const[e,n,r]=t,o=[[e,n,r]],l=E(this,ys,yy).call(this,r);for(let u=0;u<l;u++){const[h,f]=a(this,tr)[u];for(let p=0,y=o.length;p<y;p++){const[,v,S]=o[p];if(!(f<=v||S<=h)){if(v>=h){if(S>f)o[p][1]=f;else{if(y===1)return[];o.splice(p,1),p--,y--}continue}o[p][2]=h,S>f&&o.push([e,f,S])}}}return o};var yg,Yh;class hP extends gt{constructor(e,n,r,o){super();b(this,yg);b(this,Yh);w(this,Yh,e),w(this,yg,n),this.firstPoint=r,this.lastPoint=o}toSVGPath(){const e=[];for(const n of a(this,Yh)){let[r,o]=n;e.push(`M${r} ${o}`);for(let l=2;l<n.length;l+=2){const u=n[l],h=n[l+1];u===r?(e.push(`V${h}`),o=h):h===o&&(e.push(`H${u}`),r=u)}e.push("Z")}return e.join(" ")}serialize([e,n,r,o],l){const u=[],h=r-e,f=o-n;for(const p of a(this,Yh)){const y=new Array(p.length);for(let v=0;v<p.length;v+=2)y[v]=e+p[v]*h,y[v+1]=o-p[v+1]*f;u.push(y)}return u}get box(){return a(this,yg)}get classNamesForOutlining(){return["highlightOutline"]}}yg=new WeakMap,Yh=new WeakMap;class vA extends Uy{newFreeDrawOutline(t,e,n,r,o,l){return new dP(t,e,n,r,o,l)}}class dP extends qx{newOutliner(t,e,n,r,o,l=0){return new vA(t,e,n,r,o,l)}}var Kh,vg,La,Pc,wg,Ls,Ag,Sg,Rc,ni,si,jn,Qh,Zh,ss,Jh,Ri,bg,Vt,wA,vy,Jx,tC,eC,AA,Cl,Li,Ru,nC,wy,Ay,sC,iC,rC,aC,oC;const oe=class oe extends Le{constructor(e){super({...e,name:"highlightEditor"});b(this,Vt);b(this,Kh,null);b(this,vg,0);b(this,La);b(this,Pc,null);b(this,wg,null);b(this,Ls,null);b(this,Ag,null);b(this,Sg,0);b(this,Rc,null);b(this,ni,null);b(this,si,null);b(this,jn,!1);b(this,Qh,null);b(this,Zh,null);b(this,ss,null);b(this,Jh,"");b(this,Ri);b(this,bg,"");this.color=e.color||oe._defaultColor,w(this,Ri,e.thickness||oe._defaultThickness),this.opacity=e.opacity||oe._defaultOpacity,w(this,La,e.boxes||null),w(this,bg,e.methodOfCreation||""),w(this,Jh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(w(this,jn,!0),E(this,Vt,vy).call(this,e),E(this,Vt,Cl).call(this)):a(this,La)&&(w(this,Kh,e.anchorNode),w(this,vg,e.anchorOffset),w(this,Ag,e.focusNode),w(this,Sg,e.focusOffset),E(this,Vt,wA).call(this),E(this,Vt,Cl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=oe.prototype;return Ut(this,"_keyboardManager",new Rg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,jn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,Ri),methodOfCreation:a(this,bg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var r;Le.initialize(e,n),oe._defaultColor||(oe._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case te.HIGHLIGHT_COLOR:oe._defaultColor=n;break;case te.HIGHLIGHT_THICKNESS:oe._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return a(this,Zh)}get commentButtonPosition(){return a(this,Qh)}updateParams(e,n){switch(e){case te.HIGHLIGHT_COLOR:E(this,Vt,Jx).call(this,n);break;case te.HIGHLIGHT_THICKNESS:E(this,Vt,tC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[te.HIGHLIGHT_COLOR,oe._defaultColor],[te.HIGHLIGHT_THICKNESS,oe._defaultThickness]]}get propertiesToUpdate(){return[[te.HIGHLIGHT_COLOR,this.color||oe._defaultColor],[te.HIGHLIGHT_THICKNESS,a(this,Ri)||oe._defaultThickness],[te.HIGHLIGHT_FREE,a(this,jn)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(a(this,si),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=a(this,wg))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",w(this,wg,new Fy({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Vt,Ay).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,E(this,Vt,Ay).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,Vt,AA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Vt,Cl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?E(this,Vt,AA).call(this):e&&(E(this,Vt,Cl).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,l,u;const{drawLayer:n}=this.parent;let r;a(this,jn)?(e=(e-this.rotation+360)%360,r=E(o=oe,Li,Ru).call(o,a(this,ni).box,e)):r=E(l=oe,Li,Ru).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(a(this,si),{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(a(this,ss),{bbox:E(u=oe,Li,Ru).call(u,a(this,Ls).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,Jh)&&(e.setAttribute("aria-label",a(this,Jh)),e.setAttribute("role","mark")),a(this,jn)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,Vt,nC).bind(this),{signal:this._uiManager._signal});const n=w(this,Rc,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=a(this,Pc),this.setDims(),_E(this,a(this,Rc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,ss),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,ss),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,Vt,wy).call(this,!0);break;case 1:case 3:E(this,Vt,wy).call(this,!1);break}}select(){var e;super.select(),a(this,ss)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,ss),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,ss)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,ss),{rootClass:{selected:!1}}),a(this,jn)||E(this,Vt,wy).call(this,!1))}get _mustFixPosition(){return!a(this,jn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,si),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,ss),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:r,x:o,y:l}){const{x:u,y:h,width:f,height:p}=r.getBoundingClientRect(),y=new AbortController,v=e.combinedSignal(y),S=_=>{y.abort(),E(this,Li,aC).call(this,e,_)};window.addEventListener("blur",S,{signal:v}),window.addEventListener("pointerup",S,{signal:v}),window.addEventListener("pointerdown",tn,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ni,{signal:v}),r.addEventListener("pointermove",E(this,Li,rC).bind(this,e),{signal:v}),this._freeHighlight=new vA({x:o,y:l},[u,h,f,p],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,r){var x,T,k,M;let o=null;if(e instanceof Ix){const{data:{quadPoints:P,rect:L,rotation:D,id:I,color:U,opacity:V,popupRef:Y,richText:et,contentsObj:Z,creationDate:Ct,modificationDate:_t},parent:{page:{pageNumber:At}}}=e;o=e={annotationType:Ht.HIGHLIGHT,color:Array.from(U),opacity:V,quadPoints:P,boxes:null,pageIndex:At-1,rect:L.slice(0),rotation:D,annotationElementId:I,id:I,deleted:!1,popupRef:Y,richText:et,comment:(Z==null?void 0:Z.str)||null,creationDate:Ct,modificationDate:_t}}else if(e instanceof YA){const{data:{inkLists:P,rect:L,rotation:D,id:I,color:U,borderStyle:{rawWidth:V},popupRef:Y,richText:et,contentsObj:Z,creationDate:Ct,modificationDate:_t},parent:{page:{pageNumber:At}}}=e;o=e={annotationType:Ht.HIGHLIGHT,color:Array.from(U),thickness:V,inkLists:P,boxes:null,pageIndex:At-1,rect:L.slice(0),rotation:D,annotationElementId:I,id:I,deleted:!1,popupRef:Y,richText:et,comment:(Z==null?void 0:Z.str)||null,creationDate:Ct,modificationDate:_t}}const{color:l,quadPoints:u,inkLists:h,opacity:f}=e,p=await super.deserialize(e,n,r);p.color=ut.makeHexColor(...l),p.opacity=f||1,h&&w(p,Ri,e.thickness),p._initialData=o,e.comment&&p.setCommentData(e);const[y,v]=p.pageDimensions,[S,_]=p.pageTranslation;if(u){const P=w(p,La,[]);for(let L=0;L<u.length;L+=8)P.push({x:(u[L]-S)/y,y:1-(u[L+1]-_)/v,width:(u[L+2]-u[L])/y,height:(u[L+1]-u[L+5])/v});E(x=p,Vt,wA).call(x),E(T=p,Vt,Cl).call(T),p.rotate(p.rotation)}else if(h){w(p,jn,!0);const P=h[0],L={x:P[0]-S,y:v-(P[1]-_)},D=new vA(L,[0,0,y,v],1,a(p,Ri)/2,!0,.001);for(let V=0,Y=P.length;V<Y;V+=2)L.x=P[V]-S,L.y=v-(P[V+1]-_),D.add(L);const{id:I,clipPathId:U}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:D.toSVGPath()}},!0,!0);E(k=p,Vt,vy).call(k,{highlightOutlines:D.getOutlines(),highlightId:I,clipPathId:U}),E(M=p,Vt,Cl).call(M),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Le._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:n,opacity:this.opacity,thickness:a(this,Ri),quadPoints:E(this,Vt,sC).call(this),outlines:E(this,Vt,iC).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!E(this,Vt,oC).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Kh=new WeakMap,vg=new WeakMap,La=new WeakMap,Pc=new WeakMap,wg=new WeakMap,Ls=new WeakMap,Ag=new WeakMap,Sg=new WeakMap,Rc=new WeakMap,ni=new WeakMap,si=new WeakMap,jn=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,ss=new WeakMap,Jh=new WeakMap,Ri=new WeakMap,bg=new WeakMap,Vt=new WeakSet,wA=function(){const e=new mA(a(this,La),.001);w(this,ni,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,ni).box;const n=new mA(a(this,La),.0025,.001,this._uiManager.direction==="ltr");w(this,Ls,n.getOutlines());const{firstPoint:r}=a(this,ni);w(this,Qh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:o}=a(this,Ls);w(this,Zh,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},vy=function({highlightOutlines:e,highlightId:n,clipPathId:r}){var v,S;if(w(this,ni,e),w(this,Ls,e.getNewOutline(a(this,Ri)/2+1.5,.0025)),n>=0)w(this,si,n),w(this,Pc,r),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),w(this,ss,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Ls).box,path:{d:a(this,Ls).toSVGPath()}},!0));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,si),{bbox:E(v=oe,Li,Ru).call(v,a(this,ni).box,(_-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,ss),{bbox:E(S=oe,Li,Ru).call(S,a(this,Ls).box,_),path:{d:a(this,Ls).toSVGPath()}})}const[l,u,h,f]=e.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=h,this.height=f;break;case 90:{const[_,x]=this.parentDimensions;this.x=u,this.y=1-l,this.width=h*x/_,this.height=f*_/x;break}case 180:this.x=1-l,this.y=1-u,this.width=h,this.height=f;break;case 270:{const[_,x]=this.parentDimensions;this.x=1-u,this.y=l,this.width=h*x/_,this.height=f*_/x;break}}const{firstPoint:p}=e;w(this,Qh,[(p[0]-l)/h,(p[1]-u)/f]);const{lastPoint:y}=a(this,Ls);w(this,Zh,[(y[0]-l)/h,(y[1]-u)/f])},Jx=function(e){const n=(l,u)=>{this.color=l,this.opacity=u,this.onUpdatedColor()},r=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,e,oe._defaultOpacity),undo:n.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},tC=function(e){const n=a(this,Ri),r=o=>{w(this,Ri,o),E(this,Vt,eC).call(this,o)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},eC=function(e){a(this,jn)&&(E(this,Vt,vy).call(this,{highlightOutlines:a(this,ni).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},AA=function(){a(this,si)===null||!this.parent||(this.parent.drawLayer.remove(a(this,si)),w(this,si,null),this.parent.drawLayer.remove(a(this,ss)),w(this,ss,null))},Cl=function(e=this.parent){a(this,si)===null&&({id:mn(this,si)._,clipPathId:mn(this,Pc)._}=e.drawLayer.draw({bbox:a(this,ni).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,jn)},path:{d:a(this,ni).toSVGPath()}},!1,!0),w(this,ss,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,jn)},bbox:a(this,Ls).box,path:{d:a(this,Ls).toSVGPath()}},a(this,jn))),a(this,Rc)&&(a(this,Rc).style.clipPath=a(this,Pc)))},Li=new WeakSet,Ru=function([e,n,r,o],l){switch(l){case 90:return[1-n-o,e,o,r];case 180:return[1-e-r,1-n-o,r,o];case 270:return[n,1-e-r,o,r]}return[e,n,r,o]},nC=function(e){oe._keyboardManager.exec(this,e)},wy=function(e){if(!a(this,Kh))return;const n=window.getSelection();e?n.setPosition(a(this,Kh),a(this,vg)):n.setPosition(a(this,Ag),a(this,Sg))},Ay=function(){return a(this,jn)?this.rotation:0},sC=function(){if(a(this,jn))return null;const[e,n]=this.pageDimensions,[r,o]=this.pageTranslation,l=a(this,La),u=new Float32Array(l.length*8);let h=0;for(const{x:f,y:p,width:y,height:v}of l){const S=f*e+r,_=(1-p)*n+o;u[h]=u[h+4]=S,u[h+1]=u[h+3]=_,u[h+2]=u[h+6]=S+y*e,u[h+5]=u[h+7]=_-v*n,h+=8}return u},iC=function(e){return a(this,ni).serialize(e,E(this,Vt,Ay).call(this))},rC=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},aC=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},oC=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((r,o)=>r!==n[o])},b(oe,Li),K(oe,"_defaultColor",null),K(oe,"_defaultOpacity",1),K(oe,"_defaultThickness",12),K(oe,"_type","highlight"),K(oe,"_editorType",Ht.HIGHLIGHT),K(oe,"_freeHighlightId",-1),K(oe,"_freeHighlight",null),K(oe,"_freeHighlightClipId","");let zy=oe;var Mc;class lC{constructor(){b(this,Mc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){a(this,Mc)[t]=e}toSVGProperties(){const t=a(this,Mc);return w(this,Mc,Object.create(null)),{root:t}}reset(){w(this,Mc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Te("Not implemented")}}Mc=new WeakMap;var ii,td,Pn,Lc,Dc,ie,SA,bA,EA,kf,cC,Sy,Tf,Mu;const Jt=class Jt extends Le{constructor(e){super(e);b(this,ie);b(this,ii,null);b(this,td);K(this,"_colorPicker",null);K(this,"_drawId",null);w(this,td,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(E(this,ie,SA).call(this,e),E(this,ie,kf).call(this))}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[o,l]of Object.entries(n))r.has(o)?Object.assign(e[o],l):e[o]=l;return e}static getDefaultDrawingOptions(e){Te("Not implemented")}static get typesMap(){Te("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(a(Jt,Pn).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,o]of this.typesMap)e.push([r,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,o]of this.constructor.typesMap)e.push([r,n[o]]);return e}_updateProperty(e,n,r){const o=this._drawingOptions,l=o[n],u=h=>{var p;o.updateProperty(n,h);const f=a(this,ii).updateProperty(n,h);f&&E(this,ie,Tf).call(this,f),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,r),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Jt._mergeSVGProperties(a(this,ii).getPathResizingSVGProperties(E(this,ie,Sy).call(this)),{bbox:E(this,ie,Mu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Jt._mergeSVGProperties(a(this,ii).getPathResizedSVGProperties(E(this,ie,Sy).call(this)),{bbox:E(this,ie,Mu).call(this)}))}_onTranslating(e,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,ie,Mu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Jt._mergeSVGProperties(a(this,ii).getPathTranslatedSVGProperties(E(this,ie,Sy).call(this),this.parentDimensions),{bbox:E(this,ie,Mu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,td)&&(w(this,td,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,ie,EA).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,ie,kf).call(this),E(this,ie,Tf).call(this,a(this,ii).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,ie,EA).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,ie,kf).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Jt._mergeSVGProperties({bbox:E(this,ie,Mu).call(this)},a(this,ii).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,ie,Tf).call(this,a(this,ii).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const o=document.createElement("div");return r.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,o,l){Te("Not implemented")}static startDrawing(e,n,r,o){var T;const{target:l,offsetX:u,offsetY:h,pointerId:f,pointerType:p}=o;if(Zn.isInitializedAndDifferentPointerType(p))return;const{viewport:{rotation:y}}=e,{width:v,height:S}=l.getBoundingClientRect(),_=w(Jt,Lc,new AbortController),x=e.combinedSignal(_);if(Zn.setPointer(p,f),window.addEventListener("pointerup",k=>{Zn.isSamePointerIdOrRemove(k.pointerId)&&this._endDraw(k)},{signal:x}),window.addEventListener("pointercancel",k=>{Zn.isSamePointerIdOrRemove(k.pointerId)&&this._currentParent.endDrawingSession()},{signal:x}),window.addEventListener("pointerdown",k=>{Zn.isSamePointerType(k.pointerType)&&(Zn.initializeAndAddPointerId(k.pointerId),a(Jt,Pn).isCancellable()&&(a(Jt,Pn).removeLastElement(),a(Jt,Pn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Ni,{signal:x}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),l.addEventListener("touchmove",k=>{Zn.isSameTimeStamp(k.timeStamp)&&tn(k)},{signal:x}),e.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),a(Jt,Pn)){e.drawLayer.updateProperties(this._currentDrawId,a(Jt,Pn).startNew(u,h,v,S,y));return}n.updateUIForDefaultProperties(this),w(Jt,Pn,this.createDrawerInstance(u,h,v,S,y)),w(Jt,Dc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(Jt,Dc).toSVGProperties(),a(Jt,Pn).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Zn.isSameTimeStamp(e.timeStamp),!a(Jt,Pn))return;const{offsetX:n,offsetY:r,pointerId:o}=e;if(Zn.isSamePointerId(o)){if(Zn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(Jt,Pn).add(n,r)),Zn.setTimeStamp(e.timeStamp),tn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,w(Jt,Pn,null),w(Jt,Dc,null),Zn.clearTimeStamp()),a(Jt,Lc)&&(a(Jt,Lc).abort(),w(Jt,Lc,null),Zn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,a(Jt,Pn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=a(Jt,Pn),o=this._currentDrawId,l=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,r.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:te.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(te.DRAW_STEP),!a(Jt,Pn).isEmpty()){const{pageDimensions:[r,o],scale:l}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(Jt,Pn).getOutlines(r*l,o*l,l,this._INNER_MARGIN),drawingOptions:a(Jt,Dc),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,o,l,u){Te("Not implemented")}static async deserialize(e,n,r){var y,v;const{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}=n.viewport,f=this.deserializeDraw(u,h,o,l,this._INNER_MARGIN,e),p=await super.deserialize(e,n,r);return p.createDrawingOptions(e),E(y=p,ie,SA).call(y,{drawOutlines:f}),E(v=p,ie,kf).call(v),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[n,r]=this.pageTranslation,[o,l]=this.pageDimensions;return a(this,ii).serialize([n,r,o,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ii=new WeakMap,td=new WeakMap,Pn=new WeakMap,Lc=new WeakMap,Dc=new WeakMap,ie=new WeakSet,SA=function({drawOutlines:e,drawId:n,drawingOptions:r}){w(this,ii,e),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=E(this,ie,bA).call(this,e,this.parent),E(this,ie,Tf).call(this,e.box)},bA=function(e,n){const{id:r}=n.drawLayer.draw(Jt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},EA=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},kf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,ie,bA).call(this,a(this,ii),e)}},cC=function([e,n,r,o]){const{parentDimensions:[l,u],rotation:h}=this;switch(h){case 90:return[n,1-e,r*(u/l),o*(l/u)];case 180:return[1-e,1-n,r,o];case 270:return[1-n,e,r*(u/l),o*(l/u)];default:return[e,n,r,o]}},Sy=function(){const{x:e,y:n,width:r,height:o,parentDimensions:[l,u],rotation:h}=this;switch(h){case 90:return[1-n,e,r*(l/u),o*(u/l)];case 180:return[1-e,1-n,r,o];case 270:return[n,1-e,r*(l/u),o*(u/l)];default:return[e,n,r,o]}},Tf=function(e){[this.x,this.y,this.width,this.height]=E(this,ie,cC).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Mu=function(){const{x:e,y:n,width:r,height:o,rotation:l,parentRotation:u,parentDimensions:[h,f]}=this;switch((l*4+u)/90){case 1:return[1-n-o,e,o,r];case 2:return[1-e-r,1-n-o,r,o];case 3:return[n,1-e-r,o,r];case 4:return[e,n-r*(h/f),o*(f/h),r*(h/f)];case 5:return[1-n,e,r*(h/f),o*(f/h)];case 6:return[1-e-o*(f/h),1-n,o*(f/h),r*(h/f)];case 7:return[n-r*(h/f),1-e-o*(f/h),r*(h/f),o*(f/h)];case 8:return[e-r,n-o,r,o];case 9:return[1-n,e-r,o,r];case 10:return[1-e,1-n,r,o];case 11:return[n-o,1-e,o,r];case 12:return[e-o*(f/h),n,o*(f/h),r*(h/f)];case 13:return[1-n-r*(h/f),e-o*(f/h),r*(h/f),o*(f/h)];case 14:return[1-e,1-n-r*(h/f),o*(f/h),r*(h/f)];case 15:return[n,1-e,r*(h/f),o*(f/h)];default:return[e,n,r,o]}},K(Jt,"_currentDrawId",-1),K(Jt,"_currentParent",null),b(Jt,Pn,null),b(Jt,Lc,null),b(Jt,Dc,null),K(Jt,"_INNER_MARGIN",3);let jy=Jt;var Nr,Rn,Mn,Nc,ed,hs,Hn,Mi,Ic,Fc,Oc,nd,by;class fP{constructor(t,e,n,r,o,l){b(this,nd);b(this,Nr,new Float64Array(6));b(this,Rn);b(this,Mn);b(this,Nc);b(this,ed);b(this,hs);b(this,Hn,"");b(this,Mi,0);b(this,Ic,new Lg);b(this,Fc);b(this,Oc);w(this,Fc,n),w(this,Oc,r),w(this,Nc,o),w(this,ed,l),[t,e]=E(this,nd,by).call(this,t,e);const u=w(this,Rn,[NaN,NaN,NaN,NaN,t,e]);w(this,hs,[t,e]),w(this,Mn,[{line:u,points:a(this,hs)}]),a(this,Nr).set(u,0)}updateProperty(t,e){t==="stroke-width"&&w(this,ed,e)}isEmpty(){return!a(this,Mn)||a(this,Mn).length===0}isCancellable(){return a(this,hs).length<=10}add(t,e){[t,e]=E(this,nd,by).call(this,t,e);const[n,r,o,l]=a(this,Nr).subarray(2,6),u=t-o,h=e-l;return Math.hypot(a(this,Fc)*u,a(this,Oc)*h)<=2?null:(a(this,hs).push(t,e),isNaN(n)?(a(this,Nr).set([o,l,t,e],2),a(this,Rn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Nr)[0])&&a(this,Rn).splice(6,6),a(this,Nr).set([n,r,o,l,t,e],0),a(this,Rn).push(...gt.createBezierPoints(n,r,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(a(this,hs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,o){w(this,Fc,n),w(this,Oc,r),w(this,Nc,o),[t,e]=E(this,nd,by).call(this,t,e);const l=w(this,Rn,[NaN,NaN,NaN,NaN,t,e]);w(this,hs,[t,e]);const u=a(this,Mn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),a(this,Mn).push({line:l,points:a(this,hs)}),a(this,Nr).set(l,0),w(this,Mi,0),this.toSVGPath(),null}getLastElement(){return a(this,Mn).at(-1)}setLastElement(t){return a(this,Mn)?(a(this,Mn).push(t),w(this,Rn,t.line),w(this,hs,t.points),w(this,Mi,0),{path:{d:this.toSVGPath()}}):a(this,Ic).setLastElement(t)}removeLastElement(){if(!a(this,Mn))return a(this,Ic).removeLastElement();a(this,Mn).pop(),w(this,Hn,"");for(let t=0,e=a(this,Mn).length;t<e;t++){const{line:n,points:r}=a(this,Mn)[t];w(this,Rn,n),w(this,hs,r),w(this,Mi,0),this.toSVGPath()}return{path:{d:a(this,Hn)}}}toSVGPath(){const t=gt.svgRound(a(this,Rn)[4]),e=gt.svgRound(a(this,Rn)[5]);if(a(this,hs).length===2)return w(this,Hn,`${a(this,Hn)} M ${t} ${e} Z`),a(this,Hn);if(a(this,hs).length<=6){const r=a(this,Hn).lastIndexOf("M");w(this,Hn,`${a(this,Hn).slice(0,r)} M ${t} ${e}`),w(this,Mi,6)}if(a(this,hs).length===4){const r=gt.svgRound(a(this,Rn)[10]),o=gt.svgRound(a(this,Rn)[11]);return w(this,Hn,`${a(this,Hn)} L ${r} ${o}`),w(this,Mi,12),a(this,Hn)}const n=[];a(this,Mi)===0&&(n.push(`M ${t} ${e}`),w(this,Mi,6));for(let r=a(this,Mi),o=a(this,Rn).length;r<o;r+=6){const[l,u,h,f,p,y]=a(this,Rn).slice(r,r+6).map(gt.svgRound);n.push(`C${l} ${u} ${h} ${f} ${p} ${y}`)}return w(this,Hn,a(this,Hn)+n.join(" ")),w(this,Mi,a(this,Rn).length),a(this,Hn)}getOutlines(t,e,n,r){const o=a(this,Mn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),a(this,Ic).build(a(this,Mn),t,e,n,a(this,Nc),a(this,ed),r),w(this,Nr,null),w(this,Rn,null),w(this,Mn,null),w(this,Hn,null),a(this,Ic)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Nr=new WeakMap,Rn=new WeakMap,Mn=new WeakMap,Nc=new WeakMap,ed=new WeakMap,hs=new WeakMap,Hn=new WeakMap,Mi=new WeakMap,Ic=new WeakMap,Fc=new WeakMap,Oc=new WeakMap,nd=new WeakSet,by=function(t,e){return gt._normalizePoint(t,e,a(this,Fc),a(this,Oc),a(this,Nc))};var ds,Eg,xg,ri,Ir,Fr,sd,id,Bc,Wn,ea,uC,hC,dC;class Lg extends gt{constructor(){super(...arguments);b(this,Wn);b(this,ds);b(this,Eg,0);b(this,xg);b(this,ri);b(this,Ir);b(this,Fr);b(this,sd);b(this,id);b(this,Bc)}build(e,n,r,o,l,u,h){w(this,Ir,n),w(this,Fr,r),w(this,sd,o),w(this,id,l),w(this,Bc,u),w(this,xg,h??0),w(this,ri,e),E(this,Wn,hC).call(this)}get thickness(){return a(this,Bc)}setLastElement(e){return a(this,ri).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,ri).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of a(this,ri)){if(e.push(`M${gt.svgRound(n[4])} ${gt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${gt.svgRound(n[10])} ${gt.svgRound(n[11])}`);continue}for(let r=6,o=n.length;r<o;r+=6){const[l,u,h,f,p,y]=n.subarray(r,r+6).map(gt.svgRound);e.push(`C${l} ${u} ${h} ${f} ${p} ${y}`)}}return e.join("")}serialize([e,n,r,o],l){const u=[],h=[],[f,p,y,v]=E(this,Wn,uC).call(this);let S,_,x,T,k,M,P,L,D;switch(a(this,id)){case 0:D=gt._rescale,S=e,_=n+o,x=r,T=-o,k=e+f*r,M=n+(1-p-v)*o,P=e+(f+y)*r,L=n+(1-p)*o;break;case 90:D=gt._rescaleAndSwap,S=e,_=n,x=r,T=o,k=e+p*r,M=n+f*o,P=e+(p+v)*r,L=n+(f+y)*o;break;case 180:D=gt._rescale,S=e+r,_=n,x=-r,T=o,k=e+(1-f-y)*r,M=n+p*o,P=e+(1-f)*r,L=n+(p+v)*o;break;case 270:D=gt._rescaleAndSwap,S=e+r,_=n+o,x=-r,T=-o,k=e+(1-p-v)*r,M=n+(1-f-y)*o,P=e+(1-p)*r,L=n+(1-f)*o;break}for(const{line:I,points:U}of a(this,ri))u.push(D(I,S,_,x,T,l?new Array(I.length):null)),h.push(D(U,S,_,x,T,l?new Array(U.length):null));return{lines:u,points:h,rect:[k,M,P,L]}}static deserialize(e,n,r,o,l,{paths:{lines:u,points:h},rotation:f,thickness:p}){const y=[];let v,S,_,x,T;switch(f){case 0:T=gt._rescale,v=-e/r,S=n/o+1,_=1/r,x=-1/o;break;case 90:T=gt._rescaleAndSwap,v=-n/o,S=-e/r,_=1/o,x=1/r;break;case 180:T=gt._rescale,v=e/r+1,S=-n/o,_=-1/r,x=1/o;break;case 270:T=gt._rescaleAndSwap,v=n/o+1,S=e/r+1,_=-1/o,x=-1/r;break}if(!u){u=[];for(const M of h){const P=M.length;if(P===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(P===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const L=new Float32Array(3*(P-2));u.push(L);let[D,I,U,V]=M.subarray(0,4);L.set([NaN,NaN,NaN,NaN,D,I],0);for(let Y=4;Y<P;Y+=2){const et=M[Y],Z=M[Y+1];L.set(gt.createBezierPoints(D,I,U,V,et,Z),(Y-2)*3),[D,I,U,V]=[U,V,et,Z]}}}for(let M=0,P=u.length;M<P;M++)y.push({line:T(u[M].map(L=>L??NaN),v,S,_,x),points:T(h[M].map(L=>L??NaN),v,S,_,x)});const k=new this.prototype.constructor;return k.build(y,r,o,1,f,p,l),k}get box(){return a(this,ds)}updateProperty(e,n){return e==="stroke-width"?E(this,Wn,dC).call(this,n):null}updateParentDimensions([e,n],r){const[o,l]=E(this,Wn,ea).call(this);w(this,Ir,e),w(this,Fr,n),w(this,sd,r);const[u,h]=E(this,Wn,ea).call(this),f=u-o,p=h-l,y=a(this,ds);return y[0]-=f,y[1]-=p,y[2]+=2*f,y[3]+=2*p,y}updateRotation(e){return w(this,Eg,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,ds).map(gt.svgRound).join(" ")}get defaultProperties(){const[e,n]=a(this,ds);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=a(this,ds);let r=0,o=0,l=0,u=0,h=0,f=0;switch(a(this,Eg)){case 90:o=n/e,l=-e/n,h=e;break;case 180:r=-1,u=-1,h=e,f=n;break;case 270:o=-n/e,l=e/n,f=n;break;default:return""}return`matrix(${r} ${o} ${l} ${u} ${gt.svgRound(h)} ${gt.svgRound(f)})`}getPathResizingSVGProperties([e,n,r,o]){const[l,u]=E(this,Wn,ea).call(this),[h,f,p,y]=a(this,ds);if(Math.abs(p-l)<=gt.PRECISION||Math.abs(y-u)<=gt.PRECISION){const T=e+r/2-(h+p/2),k=n+o/2-(f+y/2);return{path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${k})`}}}const v=(r-2*l)/(p-2*l),S=(o-2*u)/(y-2*u),_=p/r,x=y/o;return{path:{"transform-origin":`${gt.svgRound(h)} ${gt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${_} ${x}) translate(${gt.svgRound(l)} ${gt.svgRound(u)}) scale(${v} ${S}) translate(${gt.svgRound(-l)} ${gt.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,r,o]){const[l,u]=E(this,Wn,ea).call(this),h=a(this,ds),[f,p,y,v]=h;if(h[0]=e,h[1]=n,h[2]=r,h[3]=o,Math.abs(y-l)<=gt.PRECISION||Math.abs(v-u)<=gt.PRECISION){const k=e+r/2-(f+y/2),M=n+o/2-(p+v/2);for(const{line:P,points:L}of a(this,ri))gt._translate(P,k,M,P),gt._translate(L,k,M,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(r-2*l)/(y-2*l),_=(o-2*u)/(v-2*u),x=-S*(f+l)+e+l,T=-_*(p+u)+n+u;if(S!==1||_!==1||x!==0||T!==0)for(const{line:k,points:M}of a(this,ri))gt._rescale(k,x,T,S,_,k),gt._rescale(M,x,T,S,_,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[o,l]=r,u=a(this,ds),h=e-u[0],f=n-u[1];if(a(this,Ir)===o&&a(this,Fr)===l)for(const{line:p,points:y}of a(this,ri))gt._translate(p,h,f,p),gt._translate(y,h,f,y);else{const p=a(this,Ir)/o,y=a(this,Fr)/l;w(this,Ir,o),w(this,Fr,l);for(const{line:v,points:S}of a(this,ri))gt._rescale(v,h,f,p,y,v),gt._rescale(S,h,f,p,y,S);u[2]*=p,u[3]*=y}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`}}}get defaultSVGProperties(){const e=a(this,ds);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${gt.svgRound(e[0])} ${gt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}ds=new WeakMap,Eg=new WeakMap,xg=new WeakMap,ri=new WeakMap,Ir=new WeakMap,Fr=new WeakMap,sd=new WeakMap,id=new WeakMap,Bc=new WeakMap,Wn=new WeakSet,ea=function(e=a(this,Bc)){const n=a(this,xg)+e/2*a(this,sd);return a(this,id)%180===0?[n/a(this,Ir),n/a(this,Fr)]:[n/a(this,Fr),n/a(this,Ir)]},uC=function(){const[e,n,r,o]=a(this,ds),[l,u]=E(this,Wn,ea).call(this,0);return[e+l,n+u,r-2*l,o-2*u]},hC=function(){const e=w(this,ds,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of a(this,ri)){if(o.length<=12){for(let h=4,f=o.length;h<f;h+=6)ut.pointBoundingBox(o[h],o[h+1],e);continue}let l=o[4],u=o[5];for(let h=6,f=o.length;h<f;h+=6){const[p,y,v,S,_,x]=o.subarray(h,h+6);ut.bezierBoundingBox(l,u,p,y,v,S,_,x,e),l=_,u=x}}const[n,r]=E(this,Wn,ea).call(this);e[0]=gs(e[0]-n,0,1),e[1]=gs(e[1]-r,0,1),e[2]=gs(e[2]+n,0,1),e[3]=gs(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},dC=function(e){const[n,r]=E(this,Wn,ea).call(this);w(this,Bc,e);const[o,l]=E(this,Wn,ea).call(this),[u,h]=[o-n,l-r],f=a(this,ds);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f};class f0 extends lC{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Le._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new f0(this._viewParameters);return t.updateAll(this),t}}var a0,fC;const Ou=class Ou extends jy{constructor(e){super({...e,name:"inkEditor"});b(this,a0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Le.initialize(e,n),this._defaultDrawingOptions=new f0(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ut(this,"typesMap",new Map([[te.INK_THICKNESS,"stroke-width"],[te.INK_COLOR,"stroke"],[te.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,o,l){return new fP(e,n,r,o,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,o,l,u){return Lg.deserialize(e,n,r,o,l,u)}static async deserialize(e,n,r){let o=null;if(e instanceof YA){const{data:{inkLists:u,rect:h,rotation:f,id:p,color:y,opacity:v,borderStyle:{rawWidth:S},popupRef:_,richText:x,contentsObj:T,creationDate:k,modificationDate:M},parent:{page:{pageNumber:P}}}=e;o=e={annotationType:Ht.INK,color:Array.from(y),thickness:S,opacity:v,paths:{points:u},boxes:null,pageIndex:P-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:_,richText:x,comment:(T==null?void 0:T.str)||null,creationDate:k,modificationDate:M}}const l=await super.deserialize(e,n,r);return l._initialData=o,e.comment&&l.setCommentData(e),l}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Oy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return te.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=Ou.getDefaultDrawingOptions({stroke:ut.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":u}}=this,h=Object.assign(super.serialize(e),{color:Le._colorManager.convert(o),opacity:l,thickness:u,paths:{lines:n,points:r}});return this.addComment(h),e?(h.isCopy=!0,h):this.annotationElementId&&!E(this,a0,fC).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};a0=new WeakSet,fC=function(e){const{color:n,thickness:r,opacity:o,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((u,h)=>u!==n[h])||e.thickness!==r||e.opacity!==o||e.pageIndex!==l},K(Ou,"_type","ink"),K(Ou,"_editorType",Ht.INK),K(Ou,"_defaultDrawingOptions",null);let xA=Ou;class CA extends Lg{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const qm=8,lf=3;var Uc,de,_A,er,pC,gC,kA,Ey,mC,yC,vC,TA,PA,wC;class Ba{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},o,l,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const y=200,v=p.font=`${n} ${r} ${y}px ${e}`,{actualBoundingBoxLeft:S,actualBoundingBoxRight:_,actualBoundingBoxAscent:x,actualBoundingBoxDescent:T,fontBoundingBoxAscent:k,fontBoundingBoxDescent:M,width:P}=p.measureText(t),L=1.5,D=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||0,P)*L),I=Math.ceil(Math.max(Math.abs(x)+Math.abs(T)||y,Math.abs(k)+Math.abs(M)||y)*L);f=new OffscreenCanvas(D,I),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,I),p.fillStyle="black",p.fillText(t,D*(L-1)/2,I*(3-L)/2);const U=E(this,de,TA).call(this,p.getImageData(0,0,D,I).data),V=E(this,de,vC).call(this,U),Y=E(this,de,PA).call(this,V),et=E(this,de,kA).call(this,U,D,I,Y);return this.processDrawnLines({lines:{curves:et,width:D,height:I},pageWidth:o,pageHeight:l,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,o){const[l,u,h]=E(this,de,wC).call(this,t),[f,p]=E(this,de,yC).call(this,l,u,h,Math.hypot(u,h)*a(this,Uc).sigmaSFactor,a(this,Uc).sigmaR,a(this,Uc).kernelSize),y=E(this,de,PA).call(this,p),v=E(this,de,kA).call(this,f,u,h,y);return this.processDrawnLines({lines:{curves:v,width:u,height:h},pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([e,n]=[n,e]);const{curves:h,width:f,height:p}=t,y=t.thickness??0,v=[],S=Math.min(e/f,n/p),_=S/e,x=S/n,T=[];for(const{points:M}of h){const P=l?E(this,de,mC).call(this,M):M;if(!P)continue;T.push(P);const L=P.length,D=new Float32Array(L),I=new Float32Array(3*(L===2?2:L-2));if(v.push({line:I,points:D}),L===2){D[0]=P[0]*_,D[1]=P[1]*x,I.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[U,V,Y,et]=P;U*=_,V*=x,Y*=_,et*=x,D.set([U,V,Y,et],0),I.set([NaN,NaN,NaN,NaN,U,V],0);for(let Z=4;Z<L;Z+=2){const Ct=D[Z]=P[Z]*_,_t=D[Z+1]=P[Z+1]*x;I.set(gt.createBezierPoints(U,V,Y,et,Ct,_t),(Z-2)*3),[U,V,Y,et]=[Y,et,Ct,_t]}}if(v.length===0)return null;const k=u?new CA:new Lg;return k.build(v,e,n,1,r,u?0:y,o),{outline:k,newCurves:T,areContours:u,thickness:y,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:o}){let l=1/0,u=-1/0,h=0;for(const P of t){h+=P.length;for(let L=2,D=P.length;L<D;L++){const I=P[L]-P[L-2];l=Math.min(l,I),u=Math.max(u,I)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,y=qm+lf*p,v=new Uint32Array(y);let S=0;v[S++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,v[S++]=0,v[S++]=r,v[S++]=o,v[S++]=e?0:1,v[S++]=Math.max(0,Math.floor(n??0)),v[S++]=p,v[S++]=f.BYTES_PER_ELEMENT;for(const P of t)v[S++]=P.length-2,v[S++]=P[0],v[S++]=P[1];const _=new CompressionStream("deflate-raw"),x=_.writable.getWriter();await x.ready,x.write(v);const T=f.prototype.constructor;for(const P of t){const L=new T(P.length-2);for(let D=2,I=P.length;D<I;D++)L[D-2]=P[D]-P[D-2];x.write(L)}x.close();const k=await new Response(_.readable).arrayBuffer(),M=new Uint8Array(k);return yE(M)}static async decompressSignature(t){try{const e=Tk(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const P of n)l||(l=new Uint8Array(new Uint32Array(P.buffer,0,4)[0])),l.set(P,u),u+=P.length;const h=new Uint32Array(l.buffer,0,l.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],y=h[3],v=h[4]===0,S=h[5],_=h[6],x=h[7],T=[],k=(qm+lf*_)*Uint32Array.BYTES_PER_ELEMENT;let M;switch(x){case Int8Array.BYTES_PER_ELEMENT:M=new Int8Array(l.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:M=new Int16Array(l.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:M=new Int32Array(l.buffer,k);break}u=0;for(let P=0;P<_;P++){const L=h[lf*P+qm],D=new Float32Array(L+2);T.push(D);for(let I=0;I<lf-1;I++)D[I]=h[lf*P+qm+I+1];for(let I=0;I<L;I++)D[I+2]=D[I]+M[u++]}return{areContours:v,thickness:S,outlines:T,width:p,height:y}}catch(e){return Bt(`decompressSignature: ${e}`),null}}}Uc=new WeakMap,de=new WeakSet,_A=function(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r},er=new WeakMap,pC=function(t,e,n,r,o,l,u){const h=E(this,de,_A).call(this,n,r,o,l);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,y=a(this,er)[2*p],v=a(this,er)[2*p+1];if(t[(n+y)*e+(r+v)]!==0)return p}return-1},gC=function(t,e,n,r,o,l,u){const h=E(this,de,_A).call(this,n,r,o,l);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,y=a(this,er)[2*p],v=a(this,er)[2*p+1];if(t[(n+y)*e+(r+v)]!==0)return p}return-1},kA=function(t,e,n,r){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=r?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let u=1,h;const f=[];for(let p=1;p<n-1;p++){h=1;for(let y=1;y<e-1;y++){const v=p*e+y,S=l[v];if(S===0)continue;let _=p,x=y;if(S===1&&l[v-1]===0)u+=1,x-=1;else if(S>=1&&l[v+1]===0)u+=1,x+=1,S>1&&(h=S);else{S!==1&&(h=Math.abs(S));continue}const T=[y,p],k=x===y+1,M={isHole:k,points:T,id:u,parent:0};f.push(M);let P;for(const Z of f)if(Z.id===h){P=Z;break}P?P.isHole?M.parent=k?P.parent:h:M.parent=k?h:P.parent:M.parent=k?h:0;const L=E(this,de,pC).call(this,l,e,p,y,_,x,0);if(L===-1){l[v]=-u,l[v]!==1&&(h=Math.abs(l[v]));continue}let D=a(this,er)[2*L],I=a(this,er)[2*L+1];const U=p+D,V=y+I;_=U,x=V;let Y=p,et=y;for(;;){const Z=E(this,de,gC).call(this,l,e,Y,et,_,x,1);D=a(this,er)[2*Z],I=a(this,er)[2*Z+1];const Ct=Y+D,_t=et+I;T.push(_t,Ct);const At=Y*e+et;if(l[At+1]===0?l[At]=-u:l[At]===1&&(l[At]=u),Ct===p&&_t===y&&Y===U&&et===V){l[v]!==1&&(h=Math.abs(l[v]));break}else _=Y,x=et,Y=Ct,et=_t}}}return f},Ey=function(t,e,n,r){if(n-e<=4){for(let U=e;U<n-2;U+=2)r.push(t[U],t[U+1]);return}const o=t[e],l=t[e+1],u=t[n-4]-o,h=t[n-3]-l,f=Math.hypot(u,h),p=u/f,y=h/f,v=p*l-y*o,S=h/u,_=1/f,x=Math.atan(S),T=Math.cos(x),k=Math.sin(x),M=_*(Math.abs(T)+Math.abs(k)),P=_*(1-M+M**2),L=Math.max(Math.atan(Math.abs(k+T)*P),Math.atan(Math.abs(k-T)*P));let D=0,I=e;for(let U=e+2;U<n-2;U+=2){const V=Math.abs(v-p*t[U+1]+y*t[U]);V>D&&(I=U,D=V)}D>(f*L)**2?(E(this,de,Ey).call(this,t,e,I+2,r),E(this,de,Ey).call(this,t,I,n,r)):r.push(o,l)},mC=function(t){const e=[],n=t.length;return E(this,de,Ey).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},yC=function(t,e,n,r,o,l){const u=new Float32Array(l**2),h=-2*r**2,f=l>>1;for(let x=0;x<l;x++){const T=(x-f)**2;for(let k=0;k<l;k++)u[x*l+k]=Math.exp((T+(k-f)**2)/h)}const p=new Float32Array(256),y=-2*o**2;for(let x=0;x<256;x++)p[x]=Math.exp(x**2/y);const v=t.length,S=new Uint8Array(v),_=new Uint32Array(256);for(let x=0;x<n;x++)for(let T=0;T<e;T++){const k=x*e+T,M=t[k];let P=0,L=0;for(let I=0;I<l;I++){const U=x+I-f;if(!(U<0||U>=n))for(let V=0;V<l;V++){const Y=T+V-f;if(Y<0||Y>=e)continue;const et=t[U*e+Y],Z=u[I*l+V]*p[Math.abs(et-M)];P+=et*Z,L+=Z}}const D=S[k]=Math.round(P/L);_[D]++}return[S,_]},vC=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},TA=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,o=1/0;for(let u=0,h=n.length;u<h;u++){const f=n[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const l=255/(r-o);for(let u=0,h=n.length;u<h;u++)n[u]=(n[u]-o)*l;return n},PA=function(t){let e,n=-1/0,r=-1/0;const o=t.findIndex(h=>h!==0);let l=o,u=o;for(e=o;e<256;e++){const h=t[e];h>n&&(e-l>r&&(r=e-l,u=e-1),n=h,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e},wC=function(t){const e=t,{width:n,height:r}=t,{maxDim:o}=a(this,Uc);let l=n,u=r;if(n>o||r>o){let v=n,S=r,_=Math.log2(Math.max(n,r)/o);const x=Math.floor(_);_=_===x?x-1:x;for(let k=0;k<_;k++){l=Math.ceil(v/2),u=Math.ceil(S/2);const M=new OffscreenCanvas(l,u);M.getContext("2d").drawImage(t,0,0,v,S,0,0,l,u),v=l,S=u,t!==e&&t.close(),t=M.transferToImageBitmap()}const T=Math.min(o/l,o/u);l=Math.round(l*T),u=Math.round(u*T)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const p=f.getImageData(0,0,l,u).data;return[E(this,de,TA).call(this,p),l,u]},b(Ba,de),b(Ba,Uc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),b(Ba,er,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class KA extends lC{constructor(){super(),super.updateProperties({fill:Le._defaultLineColor,"stroke-width":0})}clone(){const t=new KA;return t.updateAll(this),t}}class QA extends f0{constructor(t){super(t),super.updateProperties({stroke:Le._defaultLineColor,"stroke-width":1})}clone(){const t=new QA(this._viewParameters);return t.updateAll(this),t}}var Yo,Or,Ko,zc;const js=class js extends jy{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});b(this,Yo,!1);b(this,Or,null);b(this,Ko,null);b(this,zc,null);this._willKeepAspectRatio=!0,w(this,Ko,e.signatureData||null),w(this,Or,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Le.initialize(e,n),this._defaultDrawingOptions=new KA,this._defaultDrawnSignatureOptions=new QA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ut(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,Or)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(a(this,Ko)){const{lines:o,mustSmooth:l,areContours:u,description:h,uuid:f,heightInPage:p}=a(this,Ko),{rawDims:{pageWidth:y,pageHeight:v},rotation:S}=this.parent.viewport,_=Ba.processDrawnLines({lines:o,pageWidth:y,pageHeight:v,rotation:S,innerMargin:js._INNER_MARGIN,mustSmooth:l,areContours:u});this.addSignature(_,p,h,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,Or)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){w(this,zc,e),this.addEditToolbar()}getUuid(){return a(this,zc)}get description(){return a(this,Or)}set description(e){w(this,Or,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:o,height:l}=a(this,Ko),u=Math.max(o,l),h=Ba.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:r,width:o,height:l},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,r,o){const{x:l,y:u}=this,{outline:h}=w(this,Ko,e);w(this,Yo,h instanceof CA),this.description=r;let f;a(this,Yo)?f=js.getDefaultDrawingOptions():(f=js._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:f});const[,p]=this.pageDimensions;let y=n/p;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=l,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Ba.process(e,n,r,o,js._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:o},rotation:l}=this.parent.viewport;return Ba.extractContoursFromText(e,n,r,o,l,js._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Ba.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:o,innerMargin:js._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=js.getDefaultDrawingOptions():(this._drawingOptions=js._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l=Object.assign(super.serialize(e),{isSignature:!0,areContours:a(this,Yo),color:[0,0,0],thickness:a(this,Yo)?0:o});return this.addComment(l),e?(l.paths={lines:n,points:r},l.uuid=a(this,zc),l.isCopy=!0):l.lines=n,a(this,Or)&&(l.accessibilityData={type:"Figure",alt:a(this,Or)}),l}static deserializeDraw(e,n,r,o,l,u){return u.areContours?CA.deserialize(e,n,r,o,l,u):Lg.deserialize(e,n,r,o,l,u)}static async deserialize(e,n,r){var l;const o=await super.deserialize(e,n,r);return w(o,Yo,e.areContours),o.description=((l=e.accessibilityData)==null?void 0:l.alt)||"",w(o,zc,e.uuid),o}};Yo=new WeakMap,Or=new WeakMap,Ko=new WeakMap,zc=new WeakMap,K(js,"_type","signature"),K(js,"_editorType",Ht.SIGNATURE),K(js,"_defaultDrawingOptions",null);let RA=js;var Ue,Ln,Qo,Da,Zo,rd,Na,jc,Br,ai,ad,re,Pf,Rf,xy,Cy,_y,LA,ky,AC;class MA extends Le{constructor(e){super({...e,name:"stampEditor"});b(this,re);b(this,Ue,null);b(this,Ln,null);b(this,Qo,null);b(this,Da,null);b(this,Zo,null);b(this,rd,"");b(this,Na,null);b(this,jc,!1);b(this,Br,null);b(this,ai,!1);b(this,ad,!1);w(this,Da,e.bitmapUrl),w(this,Zo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Le.initialize(e,n)}static isHandlingMimeForPasting(e){return mw.includes(e)}static paste(e,n){n.pasteEditor({mode:Ht.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:u}=e||this.copyCanvas(null,null,!0).imageData,h=await r.guess({name:"altText",request:{data:o,width:l,height:u,channels:o.length/(l*u)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;a(this,Ln)&&(w(this,Ue,null),this._uiManager.imageManager.deleteId(a(this,Ln)),(e=a(this,Na))==null||e.remove(),w(this,Na,null),a(this,Br)&&(clearTimeout(a(this,Br)),w(this,Br,null))),super.remove()}rebuild(){if(!this.parent){a(this,Ln)&&E(this,re,xy).call(this);return}super.rebuild(),this.div!==null&&(a(this,Ln)&&a(this,Na)===null&&E(this,re,xy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,Qo)||a(this,Ue)||a(this,Da)||a(this,Zo)||a(this,Ln)||a(this,jc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,jc)||(a(this,Ue)?E(this,re,Cy).call(this):E(this,re,xy).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(w(this,Ln,r),o&&w(this,Ue,o),w(this,jc,!1),E(this,re,Cy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Br)!==null&&clearTimeout(a(this,Br)),w(this,Br,setTimeout(()=>{w(this,Br,null),E(this,re,LA).call(this)},200))}copyCanvas(e,n,r=!1){e||(e=224);const{width:o,height:l}=a(this,Ue),u=new zr;let h=a(this,Ue),f=o,p=l,y=null;if(n){if(o>n||l>n){const U=Math.min(n/o,n/l);f=Math.floor(o*U),p=Math.floor(l*U)}y=document.createElement("canvas");const S=y.width=Math.ceil(f*u.sx),_=y.height=Math.ceil(p*u.sy);a(this,ai)||(h=E(this,re,_y).call(this,S,_));const x=y.getContext("2d");x.filter=this._uiManager.hcmFilter;let T="white",k="#cfcfd8";this._uiManager.hcmFilter!=="none"?k="black":Nk.isDarkMode&&(T="#8f8f9d",k="#42414d");const M=15,P=M*u.sx,L=M*u.sy,D=new OffscreenCanvas(P*2,L*2),I=D.getContext("2d");I.fillStyle=T,I.fillRect(0,0,P*2,L*2),I.fillStyle=k,I.fillRect(0,0,P,L),I.fillRect(P,L,P,L),x.fillStyle=x.createPattern(D,"repeat"),x.fillRect(0,0,S,_),x.drawImage(h,0,0,h.width,h.height,0,0,S,_)}let v=null;if(r){let S,_;if(u.symmetric&&h.width<e&&h.height<e)S=h.width,_=h.height;else if(h=a(this,Ue),o>e||l>e){const k=Math.min(e/o,e/l);S=Math.floor(o*k),_=Math.floor(l*k),a(this,ai)||(h=E(this,re,_y).call(this,S,_))}const T=new OffscreenCanvas(S,_).getContext("2d",{willReadFrequently:!0});T.drawImage(h,0,0,h.width,h.height,0,0,S,_),v={width:S,height:_,data:T.getImageData(0,0,S,_).data}}return{canvas:y,width:f,height:p,imageData:v}}static async deserialize(e,n,r){var T;let o=null,l=!1;if(e instanceof Fx){const{data:{rect:k,rotation:M,id:P,structParent:L,popupRef:D,richText:I,contentsObj:U,creationDate:V,modificationDate:Y},container:et,parent:{page:{pageNumber:Z}},canvas:Ct}=e;let _t,At;Ct?(delete e.canvas,{id:_t,bitmap:At}=r.imageManager.getFromCanvas(et.id,Ct),Ct.remove()):(l=!0,e._hasNoCanvas=!0);const Tt=((T=await n._structTree.getAriaAttributes(`${Lu}${P}`))==null?void 0:T.get("aria-label"))||"";o=e={annotationType:Ht.STAMP,bitmapId:_t,bitmap:At,pageIndex:Z-1,rect:k.slice(0),rotation:M,annotationElementId:P,id:P,deleted:!1,accessibilityData:{decorative:!1,altText:Tt},isSvg:!1,structParent:L,popupRef:D,richText:I,comment:(U==null?void 0:U.str)||null,creationDate:V,modificationDate:Y}}const u=await super.deserialize(e,n,r),{rect:h,bitmap:f,bitmapUrl:p,bitmapId:y,isSvg:v,accessibilityData:S}=e;l?(r.addMissingCanvas(e.id,u),w(u,jc,!0)):y&&r.imageManager.isValidId(y)?(w(u,Ln,y),f&&w(u,Ue,f)):w(u,Da,p),w(u,ai,v);const[_,x]=u.pageDimensions;return u.width=(h[2]-h[0])/_,u.height=(h[3]-h[1])/x,S&&(u.altTextData=S),u._initialData=o,e.comment&&u.setCommentData(e),w(u,ad,!!o),u}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:a(this,Ln),isSvg:a(this,ai)});if(this.addComment(r),e)return r.bitmapUrl=E(this,re,ky).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(r.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=E(this,re,AC).call(this,r);return h.isSame?null:(h.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const u=a(this,ai)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(a(this,Ln)))n.stamps.set(a(this,Ln),{area:u,serialized:r}),r.bitmap=E(this,re,ky).call(this,!1);else if(a(this,ai)){const h=n.stamps.get(a(this,Ln));u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=E(this,re,ky).call(this,!1))}return r}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Ue=new WeakMap,Ln=new WeakMap,Qo=new WeakMap,Da=new WeakMap,Zo=new WeakMap,rd=new WeakMap,Na=new WeakMap,jc=new WeakMap,Br=new WeakMap,ai=new WeakMap,ad=new WeakMap,re=new WeakSet,Pf=function(e,n=!1){if(!e){this.remove();return}w(this,Ue,e.bitmap),n||(w(this,Ln,e.id),w(this,ai,e.isSvg)),e.file&&w(this,rd,e.file.name),E(this,re,Cy).call(this)},Rf=function(){if(w(this,Qo,null),this._uiManager.enableWaiting(!1),!!a(this,Na)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Ue)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Ue)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},xy=function(){if(a(this,Ln)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Ln)).then(r=>E(this,re,Pf).call(this,r,!0)).finally(()=>E(this,re,Rf).call(this));return}if(a(this,Da)){const r=a(this,Da);w(this,Da,null),this._uiManager.enableWaiting(!0),w(this,Qo,this._uiManager.imageManager.getFromUrl(r).then(o=>E(this,re,Pf).call(this,o)).finally(()=>E(this,re,Rf).call(this)));return}if(a(this,Zo)){const r=a(this,Zo);w(this,Zo,null),this._uiManager.enableWaiting(!0),w(this,Qo,this._uiManager.imageManager.getFromFile(r).then(o=>E(this,re,Pf).call(this,o)).finally(()=>E(this,re,Rf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=mw.join(",");const n=this._uiManager._signal;w(this,Qo,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,re,Pf).call(this,o)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>E(this,re,Rf).call(this))),e.click()},Cy=function(){var f;const{div:e}=this;let{width:n,height:r}=a(this,Ue);const[o,l]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,r=this.height*l;else if(n>u*o||r>u*l){const p=Math.min(u*o/n,u*l/r);n*=p,r*=p}this._uiManager.enableWaiting(!1);const h=w(this,Na,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/o,this.height=r/l,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,re,LA).call(this),a(this,ad)||(this.parent.addUndoableEditor(this),w(this,ad,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,rd)&&this.div.setAttribute("aria-description",a(this,rd)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},_y=function(e,n){const{width:r,height:o}=a(this,Ue);let l=r,u=o,h=a(this,Ue);for(;l>2*e||u>2*n;){const f=l,p=u;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(l,u);y.getContext("2d").drawImage(h,0,0,f,p,0,0,l,u),h=y.transferToImageBitmap()}return h},LA=function(){const[e,n]=this.parentDimensions,{width:r,height:o}=this,l=new zr,u=Math.ceil(r*e*l.sx),h=Math.ceil(o*n*l.sy),f=a(this,Na);if(!f||f.width===u&&f.height===h)return;f.width=u,f.height=h;const p=a(this,ai)?a(this,Ue):E(this,re,_y).call(this,u,h),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(p,0,0,p.width,p.height,0,0,u,h)},ky=function(e){if(e){if(a(this,ai)){const o=this._uiManager.imageManager.getSvgUrl(a(this,Ln));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=a(this,Ue),n.getContext("2d").drawImage(a(this,Ue),0,0),n.toDataURL()}if(a(this,ai)){const[n,r]=this.pageDimensions,o=Math.round(this.width*n*rl.PDF_TO_CSS_UNITS),l=Math.round(this.height*r*rl.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,l);return u.getContext("2d").drawImage(a(this,Ue),0,0,a(this,Ue).width,a(this,Ue).height,0,0,o,l),u.transferToImageBitmap()}return structuredClone(a(this,Ue))},AC=function(e){var u;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,o=e.pageIndex===n,l=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&l,isSameAltText:l}},K(MA,"_type","stamp"),K(MA,"_editorType",Ht.STAMP);var Hc,od,Jo,tl,Ia,Ds,el,ld,cd,nr,Fa,Dn,Oa,nl,ud,St,sl,ke,NA,SC,mr,IA,FA,Ty;const Vi=class Vi{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:h,viewport:f,l10n:p}){b(this,ke);b(this,Hc);b(this,od,!1);b(this,Jo,null);b(this,tl,null);b(this,Ia,null);b(this,Ds,new Map);b(this,el,!1);b(this,ld,!1);b(this,cd,!1);b(this,nr,null);b(this,Fa,null);b(this,Dn,null);b(this,Oa,null);b(this,nl,null);b(this,ud,-1);b(this,St);const y=[...a(Vi,sl).values()];if(!Vi._initialized){Vi._initialized=!0;for(const v of y)v.initialize(p,t)}t.registerEditorTypes(y),w(this,St,t),this.pageIndex=e,this.div=n,w(this,Hc,o),w(this,Jo,l),this.viewport=f,w(this,Dn,h),this.drawLayer=u,this._structTree=r,a(this,St).addLayer(this)}get isEmpty(){return a(this,Ds).size===0}get isInvisible(){return this.isEmpty&&a(this,St).getMode()===Ht.NONE}updateToolbar(t){a(this,St).updateToolbar(t)}updateMode(t=a(this,St).getMode()){switch(E(this,ke,Ty).call(this),t){case Ht.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ht.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ht.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Ht.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of a(Vi,sl).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Dn))==null?void 0:e.div)}setEditingState(t){a(this,St).setEditingState(t)}addCommands(t){a(this,St).addCommands(t)}cleanUndoStack(t){a(this,St).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,Jo))==null||e.togglePointerEvents(t)}async enable(){var n;w(this,cd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=a(this,nl))==null||n.abort(),w(this,nl,null);const t=new Set;for(const r of a(this,ke,NA))r.enableEditing(),r.show(!0),r.annotationElementId&&(a(this,St).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));const e=a(this,Jo);if(e)for(const r of e.getEditableAnnotations()){if(r.hide(),a(this,St).isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;const o=await this.deserialize(r);o&&(this.addOrRebuild(o),o.enableEditing())}w(this,cd,!1),a(this,St)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(w(this,ld,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,Dn)&&!a(this,nl)){w(this,nl,new AbortController);const o=a(this,St).combinedSignal(a(this,nl));a(this,Dn).div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:f,timeStamp:p}=l,y=a(this,ud);if(p-y>500){w(this,ud,p);return}w(this,ud,-1);const{classList:v}=this.div;v.toggle("getElements",!0);const S=document.elementsFromPoint(h,f);if(v.toggle("getElements",!1),!this.div.contains(S[0]))return;let _;const x=new RegExp(`^${Mf}[0-9]+$`);for(const k of S)if(x.test(k.id)){_=k.id;break}if(!_)return;const T=a(this,Ds).get(_);(T==null?void 0:T.annotationElementId)===null&&(l.stopPropagation(),l.preventDefault(),T.dblclick(l))},{signal:o,capture:!0})}const t=a(this,Jo),e=[];if(t){const o=new Map,l=new Map;for(const h of a(this,ke,NA)){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){o.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);(r=this.getEditableAnnotation(h.annotationElementId))==null||r.show(),h.remove()}const u=t.getEditableAnnotations();for(const h of u){const{id:f}=h.data;if(a(this,St).isDeletedAnnotationElement(f)){h.updateEdited({deleted:!0});continue}let p=l.get(f);if(p){p.resetAnnotationElement(h),p.show(!1),h.show();continue}p=o.get(f),p&&(a(this,St).addChangedExistingAnnotation(p),p.renderAnnotationElement(h)&&p.show(!1)),h.show()}}E(this,ke,Ty).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of a(Vi,sl).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),w(this,ld,!1)}getEditableAnnotation(t){var e;return((e=a(this,Jo))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,St).getActive()!==t&&a(this,St).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Dn))!=null&&t.div&&!a(this,Oa)){w(this,Oa,new AbortController);const e=a(this,St).combinedSignal(a(this,Oa));a(this,Dn).div.addEventListener("pointerdown",E(this,ke,SC).bind(this),{signal:e}),a(this,Dn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Dn))!=null&&t.div&&a(this,Oa)&&(a(this,Oa).abort(),w(this,Oa,null),a(this,Dn).div.classList.remove("highlighting"))}enableClick(){if(a(this,tl))return;w(this,tl,new AbortController);const t=a(this,St).combinedSignal(a(this,tl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,tl))==null||t.abort(),w(this,tl,null)}attach(t){a(this,Ds).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,St).isDeletedAnnotationElement(e)&&a(this,St).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Ds).delete(t.id),(e=a(this,Hc))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,ld)&&t.annotationElementId&&a(this,St).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,St).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,St).addDeletedAnnotationElement(t),Le.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,St).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,cd)),a(this,St).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Ia)&&(t._focusEventsAllowed=!1,w(this,Ia,setTimeout(()=>{w(this,Ia,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,St)._signal}),e.focus())},0))),t._structTreeParentId=(n=a(this,Hc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of a(this,Ds).values())if(e.uid===t)return e;return null}getNextId(){return a(this,St).getId()}combinedSignal(t){return a(this,St).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,ke,mr))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,St).updateMode(t.mode);const{offsetX:n,offsetY:r}=E(this,ke,FA).call(this),o=this.getNextId(),l=E(this,ke,IA).call(this,{parent:this,id:o,x:n,y:r,uiManager:a(this,St),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=a(Vi,sl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,St)))||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),o=E(this,ke,IA).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:a(this,St),isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(E(this,ke,FA).call(this),!0,t)}setSelected(t){a(this,St).setSelected(t)}toggleSelected(t){a(this,St).toggleSelected(t)}unselect(t){a(this,St).unselect(t)}pointerup(t){var r;const{isMac:e}=bn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,el)||(w(this,el,!1),(r=a(this,ke,mr))!=null&&r.isDrawer&&a(this,ke,mr).supportMultipleDrawings))return;if(!a(this,od)){w(this,od,!0);return}const n=a(this,St).getMode();if(n===Ht.STAMP||n===Ht.SIGNATURE){a(this,St).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(a(this,St).getMode()===Ht.HIGHLIGHT&&this.enableTextSelection(),a(this,el)){w(this,el,!1);return}const{isMac:e}=bn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(w(this,el,!0),(r=a(this,ke,mr))!=null&&r.isDrawer){this.startDrawingSession(t);return}const n=a(this,St).getActive();w(this,od,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,nr)){a(this,ke,mr).startDrawing(this,a(this,St),!1,t);return}a(this,St).setCurrentDrawingSession(this),w(this,nr,new AbortController);const e=a(this,St).combinedSignal(a(this,nr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(w(this,Fa,null),this.commitOrRemove())},{signal:e}),a(this,ke,mr).startDrawing(this,a(this,St),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&w(this,Fa,e);return}a(this,Fa)&&setTimeout(()=>{var e;(e=a(this,Fa))==null||e.focus(),w(this,Fa,null)},0)}endDrawingSession(t=!1){return a(this,nr)?(a(this,St).setCurrentDrawingSession(null),a(this,nr).abort(),w(this,nr,null),w(this,Fa,null),a(this,ke,mr).endDrawing(t)):null}findNewParent(t,e,n){const r=a(this,St).findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return a(this,nr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,nr)&&a(this,ke,mr).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,St).getActive())==null?void 0:t.parent)===this&&(a(this,St).commitOrRemove(),a(this,St).setActiveEditor(null)),a(this,Ia)&&(clearTimeout(a(this,Ia)),w(this,Ia,null));for(const n of a(this,Ds).values())(e=a(this,Hc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,a(this,Ds).clear(),a(this,St).removeLayer(this)}render({viewport:t}){this.viewport=t,Wc(this.div,t);for(const e of a(this,St).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,St).commitOrRemove(),E(this,ke,Ty).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Wc(this.div,{rotation:n}),e!==n)for(const r of a(this,Ds).values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,St).viewParameters.realScale}};Hc=new WeakMap,od=new WeakMap,Jo=new WeakMap,tl=new WeakMap,Ia=new WeakMap,Ds=new WeakMap,el=new WeakMap,ld=new WeakMap,cd=new WeakMap,nr=new WeakMap,Fa=new WeakMap,Dn=new WeakMap,Oa=new WeakMap,nl=new WeakMap,ud=new WeakMap,St=new WeakMap,sl=new WeakMap,ke=new WeakSet,NA=function(){return a(this,Ds).size!==0?a(this,Ds).values():a(this,St).getEditors(this.pageIndex)},SC=function(t){a(this,St).unselectAll();const{target:e}=t;if(e===a(this,Dn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Dn).div.contains(e)){const{isMac:n}=bn.platform;if(t.button!==0||t.ctrlKey&&n)return;a(this,St).showAllEditors("highlight",!0,!0),a(this,Dn).div.classList.add("free"),this.toggleDrawing(),zy.startHighlighting(this,a(this,St).direction==="ltr",{target:a(this,Dn).div,x:t.x,y:t.y}),a(this,Dn).div.addEventListener("pointerup",()=>{a(this,Dn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,St)._signal}),t.preventDefault()}},mr=function(){return a(Vi,sl).get(a(this,St).getMode())},IA=function(t){const e=a(this,ke,mr);return e?new e.prototype.constructor(t):null},FA=function(){const{x:t,y:e,width:n,height:r}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+r),f=(o+u)/2-t,p=(l+h)/2-e,[y,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:y,offsetY:v}},Ty=function(){for(const t of a(this,Ds).values())t.isEmpty()&&t.remove()},K(Vi,"_initialized",!1),b(Vi,sl,new Map([pA,xA,MA,zy,RA].map(t=>[t._editorType,t])));let DA=Vi;var sr,fs,$c,Cg,o0,bC,jr,BA,EC,UA;const vn=class vn{constructor({pageIndex:t}){b(this,jr);b(this,sr,null);b(this,fs,new Map);b(this,$c,new Map);this.pageIndex=t}setParent(t){if(!a(this,sr)){w(this,sr,t);return}if(a(this,sr)!==t){if(a(this,fs).size>0)for(const e of a(this,fs).values())e.remove(),t.append(e);w(this,sr,t)}}static get _svgFactory(){return Ut(this,"_svgFactory",new By)}draw(t,e=!1,n=!1){const r=mn(vn,Cg)._++,o=E(this,jr,BA).call(this),l=vn._svgFactory.createElement("defs");o.append(l);const u=vn._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,$c).set(r,u);const f=n?E(this,jr,EC).call(this,l,h):null,p=vn._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,t),a(this,fs).set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=mn(vn,Cg)._++,r=E(this,jr,BA).call(this),o=vn._svgFactory.createElement("defs");r.append(o);const l=vn._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const y=vn._svgFactory.createElement("mask");o.append(y),h=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const v=vn._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const S=vn._svgFactory.createElement("use");y.append(S),S.setAttribute("href",`#${u}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const f=vn._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),a(this,fs).set(n,r),n}finalizeDraw(t,e){a(this,$c).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:n,bbox:r,rootClass:o,path:l}=e,u=typeof t=="number"?a(this,fs).get(t):t;if(u){if(n&&E(this,jr,UA).call(this,u,n),r&&E(h=vn,o0,bC).call(h,u,r),o){const{classList:f}=u;for(const[p,y]of Object.entries(o))f.toggle(p,y)}if(l){const p=u.firstElementChild.firstElementChild;E(this,jr,UA).call(this,p,l)}}}updateParent(t,e){if(e===this)return;const n=a(this,fs).get(t);n&&(a(e,sr).append(n),a(this,fs).delete(t),a(e,fs).set(t,n))}remove(t){a(this,$c).delete(t),a(this,sr)!==null&&(a(this,fs).get(t).remove(),a(this,fs).delete(t))}destroy(){w(this,sr,null);for(const t of a(this,fs).values())t.remove();a(this,fs).clear(),a(this,$c).clear()}};sr=new WeakMap,fs=new WeakMap,$c=new WeakMap,Cg=new WeakMap,o0=new WeakSet,bC=function(t,[e,n,r,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*r}%`,l.height=`${100*o}%`},jr=new WeakSet,BA=function(){const t=vn._svgFactory.create(1,1,!0);return a(this,sr).append(t),t.setAttribute("aria-hidden",!0),t},EC=function(t,e){const n=vn._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=vn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r},UA=function(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)},b(vn,o0),b(vn,Cg,0);let OA=vn;globalThis._pdfjsTestingUtils={HighlightOutliner:mA};globalThis.pdfjsLib={AbortException:il,AnnotationEditorLayer:DA,AnnotationEditorParamsType:te,AnnotationEditorType:Ht,AnnotationEditorUIManager:Vc,AnnotationLayer:dA,AnnotationMode:fo,AnnotationType:cn,applyOpacity:Fk,build:WT,ColorPicker:Fy,createValidAbsoluteUrl:fE,CSSConstants:Ik,DOMSVGFactory:By,DrawLayer:OA,FeatureTest:bn,fetchData:kg,findContrastColor:Ok,getDocument:Sx,getFilenameFromUrl:Pk,getPdfFilenameFromUrl:Rk,getRGB:Pg,getUuid:mE,getXfaPageViewport:Lk,GlobalWorkerOptions:Ur,ImageKind:Ym,InvalidPDFException:pw,isDataScheme:h0,isPdfFile:WA,isValidExplicitDest:qk,MathClamp:gs,noContextMenu:Ni,normalizeUnicode:_k,OPS:Lf,OutputScale:zr,PasswordResponses:yk,PDFDataRangeTransport:bx,PDFDateString:Ry,PDFWorker:If,PermissionFlag:mk,PixelsPerInch:rl,RenderingCancelledException:$A,renderRichText:wE,ResponseException:Py,setLayerDimensions:Wc,shadow:Ut,SignatureExtractor:Ba,stopEvent:tn,SupportedImageMimeTypes:mw,TextLayer:Nf,TouchManager:Ly,updateUrlHash:pE,Util:ut,VerbosityLevel:l0,version:$T,XfaLayer:vE};const pP="/assets/pdf.worker.min-LyOxJPrg.mjs";Ur.workerSrc=pP;const he="(?:Mr|Mrs|Ms|Miss|Dr|Prof|Professor|Governor|Mayor|Senator|Representative|Congressman|Congresswoman|King|Queen|Prince|Princess|Duke|Duchess|Sir|Madam|Madame|Lord|Lady|President|Vice\\s+President|Secretary|General|Admiral|Colonel|Major|Captain|Lieutenant|Sergeant|Chief|Judge|Justice|Ambassador|Minister|Chancellor|Premier|Prime\\s+Minister)\\.?\\s+";function gP(g){return g.replace(/\r\n/g,`
`).replace(/\r/g,`
`)}function it(...g){}function p0(g){return gP(g).replace(/\u00A0/g," ").replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[]/g,"(").replace(/[]/g,")").replace(/[]/g,":")}function lE(g){const t=p0(g).trim();if(!t||/\s/.test(t))return null;const e=t.replace(/^<(.+)>$/,"$1").trim();try{const n=new URL(e);return n.protocol!=="http:"&&n.protocol!=="https:"?null:n.toString()}catch{return null}}function mP(g){const t=p0(g),e=new RegExp(`((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*)`,"g"),n=Array.from(t.matchAll(e)).filter(p=>p.index!==void 0);if(n.length===0)return t.split(/\n{2,}/).map(p=>p.trim()).filter(Boolean);const r=p=>{const v=p.trim().match(new RegExp(`^(?:${he})?((?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3})|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`));return v?v[1].trim():null},o=p=>p.replace(/^[\u2026]+/g,"").replace(/^\.{3,}/g,"").trim(),l=[],u=p=>{const y=p.trim();y&&l.push(y)};let h="",f=null;for(let p=0;p<n.length;p++){const y=n[p].index,v=p<n.length-1?n[p+1].index:t.length,S=n[p][0]||"",_=r(S),x=t.slice(y,v).trim();if(!x)continue;const T=x.slice(S.length).trimStart();if(_&&f&&_.toLowerCase()===f.toLowerCase()){const k=o(T);k&&(h=(h?`${h} ${k}`:k).trim());continue}h&&u(h),f=_,h=T?`${S.trim()} ${T}`.trim():S.trim()}return h&&u(h),l}function yP(g){var l,u;const t=new RegExp(`^(${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*`,""),e=new RegExp(`^(${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){1,3}|[Ss]peaker\\s+[0-9]+)\\s*:\\s*`,""),n=g.reduce((h,f)=>{const p=(f==null?void 0:f.trim())||"";return h+(e.test(p)?1:0)},0),r=h=>!!(t.test(h)||n>=3&&e.test(h)),o=[];for(let h=0;h<g.length;h++){const f=(l=g[h])==null?void 0:l.trim();if(!f)continue;if(!r(f)){o.push(f);continue}let p=f,y=h+1;for(;y<g.length;){const v=(u=g[y])==null?void 0:u.trim();if(!v){y+=1;continue}if(r(v))break;p=`${p} ${v}`.trim(),y+=1}o.push(p),h=y-1}return o}function cE(g){const t=g.length;return t%2===0?t/2-1||0:(t-1)/2||0}function vP(g){if(!g)return 0;if(!g.includes(" "))return cE(g);const t=[];for(let n=0;n<g.length;n+=1)g[n]!==" "&&t.push(n);if(t.length===0)return 0;const e=cE("x".repeat(t.length));return t[Math.min(Math.max(e,0),t.length-1)]}function wP(g){const t=p0(g),e=new RegExp(`((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*)`,"g"),n=Array.from(t.matchAll(e)),r=new RegExp(`(^|\\n)\\s*((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){1,3}|[Ss]peaker\\s+[0-9]+))\\s*:\\s*`,"gm"),o=Array.from(t.matchAll(r));if(n.length>0||o.length>=3){const f=[],p=v=>{const S=jA(v);if(!S)return;const _=AP(S);_.length>0&&f.push({raw:S,words:_})};return mP(t).forEach(p),f}const u=t.split(/\n{2,}|\r{2,}/).map(f=>f.trim()).filter(Boolean);return u.length?yP(u).map(f=>{const p=f.replace(/[\u201C\u201D]/g,'"').replace(/[\u2018\u2019]/g,"'").split(/\s+/).filter(Boolean);return{raw:f,words:p}}):[]}function zA(g){const t=g.trim().split(/\s+/),e=new Set,n=[];for(const r of t){const o=r.toLowerCase();e.has(o)||(e.add(o),n.push(r))}return n.join(" ")}function Hy(g){it("[Dedupe] Starting deduplication",{textLength:g.length,textPreview:g.substring(0,300)});const t=`(?:${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)`,e=new RegExp(`(${t})\\s*:`,"g");let n=g,r="",o=0;const l=10;for(;n!==r&&o<l;){r=n,o++;const u=n;n=n.replace(e,(f,p,y)=>{const v=zA(p),S=n.substring(Math.max(0,y-500),y);v.toLowerCase();const _=v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`(${_})(?:\\s+\\1)+\\s*:`,"g").test(S+f)&&it("[Dedupe] Found repeated full name",{original:f,cleaned:v+" :",beforeMatch:S.substring(Math.max(0,S.length-100))}),v+" :"});const h=new RegExp(`(${t})\\s+\\1(?:\\s+\\1)*\\s*:`,"g");n=n.replace(h,(f,p)=>zA(p)+" :"),n!==u&&it("[Dedupe] Iteration changed result",{iteration:o,changed:!0,resultPreview:n.substring(0,300)})}return it("[Dedupe] Deduplication complete",{iterations:o,originalLength:g.length,resultLength:n.length,resultPreview:n.substring(0,300)}),n}function jA(g){let t=g.trim();return t=t.replace(/\([0-9]{1,2}:[0-9]{2}\)\s*/g," "),t=t.replace(/\s+/g," "),t=Hy(t),t=t.replace(/Topics?:[A-Za-z\s]*$/i,""),t=t.replace(/Topics?:\s*No\s+items\s+found.*$/i,""),t=t.replace(/Hungry\s+For\s+More\?.*$/i,""),t=t.replace(/Luckily\s+for\s+you.*$/i,""),t=t.replace(/Subscribe\s+to\s+our\s+blog.*$/i,""),t=t.replace(/Thank\s+You\s+for\s+Subscribing!.*$/i,""),t=t.replace(/A\s+confirmation\s+email.*$/i,""),t=t.replace(/\[inaudible[^\]]*\]/gi," "),t=t.replace(/Transcripts\s+Home.*$/i,""),t=t.replace(/Read\s+the\s+transcript\s+here.*$/i,""),t=t.replace(/.*\s+\|\s+Rev.*$/i,""),t=t.replace(/Help\s+Center\s+Developers.*$/i,""),t=t.replace(/Contact\s+Support.*$/i,""),t=t.replace(/Human-Verified.*$/i,""),t=t.replace(/AI\s+Platform\s+Features.*$/i,""),t=t.replace(/Premium\s+Tools.*$/i,""),t=t.replace(/Industries.*$/i,""),t=t.replace(/Resources.*$/i,""),t=t.replace(/Blog\s+Home.*$/i,""),t=t.replace(/Copyright\s+Disclaimer.*$/i,""),t=t.replace(/Under\s+Title\s+17.*$/i,""),t=t.replace(/fair\s+use.*$/i,""),t=t.replace(/\s+/g," "),t=t.replace(/&amp;/g,"&"),t=t.replace(/&#x27;/g,"'"),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"'),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t.trim()}function uE(g){const t=new RegExp(`^((${he})?([A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+))\\s+\\([0-9]{1,2}:[0-9]{2}\\):`),e=new RegExp(`^((${he})?([A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+))\\s*:`);let n=g.match(t),r=!0;if(n||(n=g.match(e),r=!1),!n)return null;const o=n[1].trim(),l=n[0],u=new RegExp(`^(${he})`),h=l.match(u);h&&h[1].trim();const f=new RegExp(`(?:${he})?([A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)`),p=l.match(f),y=p?p[1].trim():"";if(/^speaker\b/i.test(y)){const T=r?o.replace(new RegExp("\\s+\\([0-9]{1,2}:[0-9]{2}\\):\\s*$"),"").trim():o.replace(/:\s*$/,"").trim();return{fullName:o,fullNameWithoutTimestamp:T,shortNames:[y.replace(/^speaker/i,"Speaker")]}}const v=y.split(/\s+/).filter(Boolean);if(v.length===0)return null;const S=o,_=y,x=[];if(v.length>=2){const T=v[0],k=v[v.length-1];x.push(T),x.push(k),x.push(`${T} ${k}`)}else x.push(v[0]);return{fullName:S,fullNameWithoutTimestamp:_,shortNames:x}}function AP(g){var o;let t=g.replace(/[\u201C\u201D]/g,'"').replace(/[\u2018\u2019]/g,"'");it("[Word Split] splitTranscriptWords called",{textPreview:t.substring(0,200),textLength:t.length});const e=t.match(new RegExp(`^((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*)(.*)$`,"i")),n=t.match(new RegExp(`^((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|Speaker\\s+[0-9]+)\\s*:\\s*)(.*)$`,"i")),r=e||n;if(r){let l=r[1].trim();const u=((o=r[r.length-1])==null?void 0:o.trim())||"";it("[Word Split] Found speaker line",{fullSpeakerLine:l,contentPreview:u.substring(0,50)}),l=Hy(l);const h=zA(l.replace(/:\s*$/,"").trim());it("[Word Split] After deduplication",{original:r[1].trim(),deduplicated:h});const f=h.match(new RegExp(`^(${he})`,"i")),p=f?f[1].trim():"",y=new RegExp(`(?:${he})?(Speaker\\s+[0-9]+|[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3})`,"i"),v=h.match(y),S=v?v[1].trim():"",_=[];if(p&&S?(_.push(p),_.push(S+":")):S?_.push(S+":"):_.push(h+":"),u){const x=u.split(/\s+/).filter(Boolean);_.push(...x),it("[Word Split] Added content words",{contentWordCount:x.length})}return it("[Word Split] Final words array",{wordCount:_.length,firstWords:_.slice(0,5)}),_}return t.split(/\s+/).filter(Boolean)}function SP(g){return g.flatMap(t=>t.words)}function cf(g,t){let e=0;for(let n=0;n<g.length;n+=1){const r=g[n];if(t<e+r.words.length)return{wordIndex:t-e,paragraphIndex:n};e+=r.words.length}return{wordIndex:0,paragraphIndex:0}}const bP=()=>{const[g,t]=Wt.useState(""),[e,n]=Wt.useState([]),[r,o]=Wt.useState([]),[l,u]=Wt.useState(350),[h,f]=Wt.useState(!1),[p,y]=Wt.useState(0),[v,S]=Wt.useState(!1),[_,x]=Wt.useState(!1),[T,k]=Wt.useState(!1),[M,P]=Wt.useState(!1),[L,D]=Wt.useState(!1),[I,U]=Wt.useState(null),[V,Y]=Wt.useState(!1),[et,Z]=Wt.useState(null),[Ct,_t]=Wt.useState("system-ui"),[At,Tt]=Wt.useState(5),[ot,st]=Wt.useState("#ff4e4e"),[W,dt]=Wt.useState(new Map),tt=$=>$*.015-.05,O=[{value:"system-ui",label:"System UI",example:"The quick brown"},{value:"Georgia, serif",label:"Georgia",example:"The quick brown"},{value:"'Times New Roman', Times, serif",label:"Times New Roman",example:"The quick brown"},{value:"Arial, Helvetica, sans-serif",label:"Arial",example:"The quick brown"},{value:"'Courier New', Courier, monospace",label:"Courier New",example:"The quick brown"},{value:"Verdana, Geneva, sans-serif",label:"Verdana",example:"The quick brown"},{value:"'Trebuchet MS', sans-serif",label:"Trebuchet MS",example:"The quick brown"},{value:"'Comic Sans MS', cursive",label:"Comic Sans MS",example:"The quick brown"},{value:"'Roboto', sans-serif",label:"Roboto",example:"The quick brown"},{value:"'Open Sans', sans-serif",label:"Open Sans",example:"The quick brown"}],H=Wt.useRef(null),ft=Wt.useRef(null),Pt=Wt.useRef(null),bt=Wt.useRef(null),Rt=Wt.useRef(null),Mt=Wt.useRef(null),qt=Wt.useRef(null),[le,Ge]=Wt.useState(0),[vs,Wa]=Wt.useState(0),[is,ar]=Wt.useState(null),Yc=Wt.useRef(0),ce=r.length>0,hd=["Mr","Mrs","Ms","Miss","Dr","Prof","Professor","Governor","Mayor","Senator","Representative","Congressman","Congresswoman","King","Queen","Prince","Princess","Duke","Duchess","Sir","Madam","Madame","Lord","Lady","President","Vice President","Secretary","General","Admiral","Colonel","Major","Captain","Lieutenant","Sergeant","Chief","Judge","Justice","Ambassador","Minister","Chancellor","Premier","Prime Minister"],dd=$=>{if(!$)return!1;const G=$.replace(/\./g,"").trim().toLowerCase();return hd.some(ct=>ct.toLowerCase()===G)},Kc=$=>$.replace(/^[^A-Za-z0-9'-]+/,"").replace(/[^A-Za-z0-9'-]+$/,"").trim(),Ii=$=>{const G=r[$]??"";if(!G||!e.length)return{display:G,advance:1};const ct=cf(e,$),kt=e[ct.paragraphIndex],zt=ct.wordIndex,xt=kt.words[zt]??"",Qt=kt.words[zt+1]??"";if(xt&&Qt){const ue=Kc(xt),Ee=Kc(Qt);if(ue&&Ee&&!dd(ue)&&!dd(Ee)){const Zt=`${ue} ${Ee}`;if(W.has(Zt))return{display:`${xt} ${Qt}`,advance:2}}}return{display:xt||G,advance:1}},Va=$=>{const G=Math.max($-1,0);return G<=0?G:Ii(G-1).advance===2?G-1:G},Qc=Wt.useMemo(()=>ce?r[p]:"",[ce,r,p]),Is=Wt.useMemo(()=>!ce||!Qc?"":Ii(p).display,[Qc,W,e,p,ce,r]),fd=Wt.useMemo(()=>Is?vP(Is):0,[Is]),ol=Wt.useMemo(()=>{if(!Is)return{left:"",pivot:"",right:""};const $=Math.min(Math.max(fd,0),Is.length-1);return{left:Is.slice(0,$),pivot:Is.charAt($),right:Is.slice($+1)}},[Is,fd]),Hr=Wt.useMemo(()=>{if(!e.length||!ce)return null;const $=cf(e,p),G=e[$.paragraphIndex],ct=G.words.slice(0,$.wordIndex),kt=G.words[$.wordIndex]??"",zt=G.words.slice($.wordIndex+1);return{paragraphIndex:$.paragraphIndex,before:ct.join(" "),active:kt,after:zt.join(" ")}},[e,ce,p]),ll=Wt.useMemo(()=>{const $=[];let G=0;for(const ct of e)$.push(G),G+=ct.words.length;return $},[e]),or=Wt.useMemo(()=>l<=0?0:6e4/l|0,[l]);Wt.useEffect(()=>{if(!h||!ce||or<=0){H.current!==null&&(window.clearInterval(H.current),H.current=null);return}return ft.current=performance.now(),H.current=window.setInterval(()=>{y($=>{if($>=r.length-1)return f(!1),$;const G=Ii($).advance;if(_&&e.length){const ct=cf(e,$),zt=(ll[ct.paragraphIndex]??0)+e[ct.paragraphIndex].words.length-1;if($+G-1>=zt&&$<r.length-1)return f(!1),$}return Math.min($+G,r.length-1)})},or),()=>{H.current!==null&&(window.clearInterval(H.current),H.current=null)}},[h,ce,or,r.length,e,W,r,_,ll]),Wt.useEffect(()=>{if(!ce||!Pt.current||!bt.current||!Rt.current||!qt.current){Ge(0),ar(null);return}const $=Pt.current.offsetWidth,G=bt.current.offsetWidth,ct=Rt.current.offsetWidth,kt=$+G/2,zt=qt.current.clientWidth,xt=zt/2,Qt=$+G+ct,Ee=(zt-Qt)/2+kt,Zt=xt-Ee;Ge(Zt);const yt=Math.max(0,zt-24);if(!Yc.current||is===null){const me=window.getComputedStyle(qt.current).fontSize,dn=Number.parseFloat(me);Number.isFinite(dn)&&dn>0&&(Yc.current=dn)}const Nt=Yc.current||0;if(!Nt||Qt<=yt){is!==null&&ar(null);return}const Xt=Math.max(22,Nt*(yt/Qt)),Ot=Math.min(Nt,Xt);(is===null||Math.abs(is-Ot)>.5)&&ar(Ot)},[Is,ol,ce,At,Ct,vs,is]),Wt.useEffect(()=>{const $=()=>{ar(null),Wa(G=>G+1)};return window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]),Wt.useEffect(()=>{h&&ce&&or>0&&f(!1)},[or]);const lr=$=>{const G=p0($),ct=new Map,kt=new Set(["the","a","an","if","and","or","but","to","of","in","on","for","with","at","from","by","as","this","that","these","those"]);it("[Speaker Names] Extracting from original text",{textLength:G.length});const zt=new RegExp(`((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*)`,"g"),xt=G.matchAll(zt);for(const Ee of xt){const Zt=Ee[1].trim(),yt=uE(Zt);if(yt&&(it("[Speaker Names] Extracted speaker info",{fullName:yt.fullName,fullNameWithoutTimestamp:yt.fullNameWithoutTimestamp,shortNames:yt.shortNames}),yt.shortNames.forEach(Nt=>{const Xt=Nt.trim(),Ot=Xt.toLowerCase();if(!Xt||kt.has(Ot))return;const me=ct.get(Nt);(!me||yt.fullNameWithoutTimestamp.length>me.length)&&ct.set(Nt,yt.fullNameWithoutTimestamp)}),ct.set(yt.fullName,yt.fullNameWithoutTimestamp),ct.set(yt.fullNameWithoutTimestamp,yt.fullNameWithoutTimestamp),yt.fullName.includes("Speaker"))){const Nt=yt.fullName.match(/Speaker\s+(\d+)/i);if(Nt){const Xt=Nt[1];ct.set(Xt,yt.fullNameWithoutTimestamp)}}}const Qt=wP(G);it("[Speaker Names] Also checking cleaned paragraphs",{paragraphCount:Qt.length}),Qt.forEach((Ee,Zt)=>{const yt=Ee.raw,Nt=new RegExp(`^((${he})?([A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+))\\s*:`),Xt=yt.match(Nt);if(Xt&&Zt<10){it("[Speaker Names] Found speaker in cleaned text",{index:Zt,match:Xt[0],rawPreview:yt.substring(0,100)});const Ot=uE(yt);if(Ot&&(it("[Speaker Names] Extracted from cleaned text",{fullName:Ot.fullName,fullNameWithoutTimestamp:Ot.fullNameWithoutTimestamp,shortNames:Ot.shortNames}),Ot.shortNames.forEach(me=>{const dn=me.trim(),Gn=dn.toLowerCase();if(!dn||kt.has(Gn))return;const ws=ct.get(me);(!ws||Ot.fullNameWithoutTimestamp.length>ws.length)&&ct.set(me,Ot.fullNameWithoutTimestamp)}),ct.set(Ot.fullName,Ot.fullNameWithoutTimestamp),ct.set(Ot.fullNameWithoutTimestamp,Ot.fullNameWithoutTimestamp),Ot.fullName.includes("Speaker"))){const me=Ot.fullName.match(/Speaker\s+(\d+)/i);if(me){const dn=me[1];ct.set(dn,Ot.fullNameWithoutTimestamp)}}}}),it("[Speaker Names] Final extracted speaker names",{nameMapSize:ct.size,names:Array.from(ct.entries())}),dt(ct);const ue=SP(Qt);n(Qt),o(ue),y(0),f(!1),k(!0)},cl=()=>{t(""),n([]),o([]),y(0),f(!1),k(!1),D(!1),U(null),Y(!1),Z(null),dt(new Map)},ul=()=>{if(ce){if(!h&&_&&e.length){const $=cf(e,p),ct=(ll[$.paragraphIndex]??0)+e[$.paragraphIndex].words.length-1,kt=Ii(p).advance;p+kt-1>=ct&&p<r.length-1&&y(Math.min(p+kt,r.length-1))}f($=>!$)}},g0=()=>{ce&&y(0)},pd=$=>{ce&&y(G=>{if($===-1)return Math.min(Math.max(Va(G),0),r.length-1);const ct=Ii(G).advance;return Math.min(Math.max(G+ct,0),r.length-1)})},gd=$=>{if(!e.length||!ce)return;const G=cf(e,p),ct=Math.min(Math.max(G.paragraphIndex+$,0),e.length-1);let kt=0;for(let zt=0;zt<ct;zt+=1)kt+=e[zt].words.length;y(kt)},m0=()=>{if(!g.trim()){n([]),o([]),y(0),f(!1);return}const $=lE(g);if($){t($),et&&Z(null),V||Wr($);return}lr(g)},md=()=>{setTimeout(()=>{var ct;const $=((ct=Mt.current)==null?void 0:ct.value)||g;if(!$.trim()){n([]),o([]),y(0),f(!1);return}const G=lE($);if(G){t(G),et&&Z(null),V||Wr(G);return}lr($)},0)},cr=$=>{const G=$.trim();if(G.length<3)return!0;if(G.match(/\([0-9]{1,2}:[0-9]{2}\):/)||G.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i")))return!1;if([/^copyright\s+disclaimer/i,/^share\s+this\s+post/i,/^thank\s+you\s+for\s+subscribing/i,/^thank\s+you\s+for\s+subscribing!/i,/^a\s+confirmation\s+email\s+is\s+on\s+its?\s+way/i,/^confirmation\s+email/i,/^hungry\s+for\s+more/i,/^hungry\s+for\s+more\?/i,/^subscribe\s+to\s+our\s+blog/i,/^subscribe\s+to\s+our\s+blog\s+today/i,/^luckily\s+for\s+you/i,/^we\s+deliver/i,/^keep\s+reading/i,/^read\s+trending\s+articles/i,/^help\s+center/i,/^contact\s+support/i,/^contact\s+support\s*\|/i,/^log\s+in$/i,/^get\s+started$/i,/^request\s+a\s+demo$/i,/^product\s+back\s+to\s+menu/i,/^industries\s+back\s+to\s+menu/i,/^resources\s+back\s+to\s+menu/i,/^about\s+rev$/i,/^pricing$/i,/^legal\s+security\s+terms/i,/^privacy\s+policy/i,/^sitemap$/i,/^reviews$/i,/^\s*rev\.com/i,/^topics?:$/i,/^topics?:[A-Za-z\s]*$/i,/^topics?:\s*no\s+items\s+found/i,/^transcripts\s+home/i,/^transcripts\s+home\s+news/i,/^read\s+the\s+transcript\s+here/i,/^linkedin\s*$/i,/^facebook\s*$/i,/^x\s+logo\s*$/i,/^pinterest\s*$/i,/^reddit\s+logo\s*$/i,/^email\s*$/i,/^services\s*$/i,/^integrations\s*$/i,/^blog\s*$/i,/^blog\s+home/i,/^developers\s*$/i,/^careers\s*$/i,/^freelancers\s*$/i,/^press\s*$/i,/^support\s*$/i,/^youtube\s*$/i,/^instagram\s*$/i,/^spotify\s*$/i,/^apple\s*$/i,/^the\s+rev\s+logo\s+icon\.\s*$/i,/^under\s+title\s+17/i,/^fair\s+use/i,/^fair\s+use\s+is\s+permitted/i,/^allowance\s+is\s+made/i,/^copyright\s+statute/i,/^might\s+otherwise\s+be\s+infringing/i,/^rev's\s+logo$/i,/^human-verified/i,/^human-verified\s+&/i,/^human\s+transcription\s+expert/i,/^ai\s+platform\s+features$/i,/^premium\s+tools/i,/^premium\s+tools\.\s+premium\s+perks/i,/^multi-file\s+analysis$/i,/^subscribe\s+to\s+the\s+rev\s+blog/i,/^sign\s+up\s+to\s+get/i,/^content\s+delivered\s+straight/i,/^\[inaudible/i,/^.*\s+\|\s+rev$/i,/^help\s+center\s+developers\s+security/i,/^human\s+transcription\s+expert\s+human\s+transcription/i,/^human\s+captions/i,/^court\s+reporting\s+self-service/i,/^global\s+subtitles/i,/^view\s+all\s+pay-per-minute\s+services/i,/^transcription,\s+captions/i,/^ai\s+transcription/i,/^ai\s+notetaker/i,/^ai\s+captions/i,/^rev\s+mobile\s+app/i,/^view\s+all\s+ai\s+features/i,/^save\s+on\s+human\s+transcription/i,/^spot\s+inconsistencies/i,/^industries\s+legal/i,/^criminal\s+prosecution/i,/^eliminate\s+evidence\s+backlogs/i,/^criminal\s+defense/i,/^cut\s+hours\s+of\s+review/i,/^investigators/i,/^turn\s+piles\s+of\s+evidence/i,/^civil\s+law/i,/^build\s+stronger\s+cases/i,/^court\s+reporting\s+agencies/i,/^a\s+trusted\s+partner/i,/^smartdepo/i,/^ai\s+summaries/i,/^resources\s+blog/i,/^expert\s+insights/i,/^latest\s+news\s+about\s+rev/i,/^reports\s+&\s+guides/i,/^whitepapers/i,/^learning\s+center/i,/^guides\s+and\s+tutorials/i,/^transcript\s+library/i,/^free\s+transcripts/i,/^case\s+studies/i,/^discover\s+how\s+rev/i,/^trusted\s+feedback/i,/^the\s+rough\s+draft/i,/^where\s+journalists/i,/^partners/i,/^discover\s+our\s+bar\s+association/i,/^we're\s+hiring/i,/^ambitious\s+team\s+members/i,/^how\s+law\s+enforcement/i,/^court\s+hearing\s+types/i,/^state\s+bar\s+of\s+texas/i,/^legal\s+professionals\s+are\s+burned\s+out/i,/^transcription\s+closed\s+captions/i,/^accessibility\s+technology/i,/^thank\s+you!\s+your\s+submission/i,/^oops!\s+something\s+went\s+wrong/i,/^2024\s+election/i,/^ai\s+&\s+speech\s+recognition/i,/^artificial\s+intelligence/i,/^automated\s+transcription/i,/^congressional\s+testimony/i,/^customer\s+features/i,/^historical\s+speeches/i,/^how-to\s+guides/i,/^rev\s+spotlight/i,/^speech\s+to\s+text\s+technology/i,/^surveys\s+and\s+data/i,/^video\s+editing/i,/^transcripts\s+home\s+news$/i,/^keep\s+reading$/i,/^ny\s+state\s+of\s+the\s+state/i,/^supreme\s+court\s+hearing/i,/^nurse\s+strike/i,/^u\.n\.\s+humanitarian/i,/^subscribe\s+to\s+the\s+rev\s+blog/i,/^sign\s+up\s+to\s+get/i,/^the\s+rev\s+logo/i].some(kt=>kt.test(G))||G.match(/^topics?:[A-Za-z\s]+$/i)||G.match(/^transcripts\s+home\s+news/i)||(G.includes("&amp;")||G.includes("&#x27;")||G.includes("&#39;"))&&!G.match(/\([0-9]{1,2}:[0-9]{2}\):/)&&!G.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"))||G.match(/^\d+\(\d{3}\)\s+\d{3}-\d{4}/)||G.match(/^view\s+all/i)&&G.length<50||G.match(/^share\s+this\s+post\s+topics?:/i)||G.match(/^topics?:\s*no\s+items\s+found\.\s*hungry\s+for\s+more/i)||G.match(/^keep\s+reading/i)&&G.length<100||G.length<3)return!0;if(G.length<10&&!G.match(/\([0-9:]+\)/)&&!G.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"))){const kt=/[.!?]/.test(G),zt=/^[A-Z]/.test(G);if(!kt&&!zt)return!0}return!1},Zc=$=>{const G=$.trim();return[new RegExp(`^${he}(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3})\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"),/^[A-Z][a-z]+(?:\s+[A-Z][a-z]+)+\s+\([0-9]{1,2}:[0-9]{2}\):/,/^[A-Z][a-z]+\s+\([0-9]{1,2}:[0-9]{2}\):/,/^[A-Z][a-z]+(?:\s+[A-Z][a-z]+)+\s*\([0-9]{1,2}:[0-9]{2}\):/,/^Speaker\s+[0-9]+\s+\([0-9]{1,2}:[0-9]{2}\):/i].some(kt=>kt.test(G))},Jc=$=>{it("[URL Parse] splitTranscriptBySpeakers called",{textLength:$.length});const G=[],ct=new RegExp(`((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):\\s*)`,"g"),kt=Array.from($.matchAll(ct)).filter(Nt=>Nt.index!==void 0),zt=Nt=>{const Xt=jA(Nt);Xt&&Xt.length>0&&G.push(Xt)},xt=Nt=>{const Ot=Nt.trim().match(new RegExp(`^(?:${he})?((?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3})|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"));return Ot?Ot[1].trim():null},Qt=Nt=>Nt.replace(/^[\u2026]+/g,"").replace(/^\.{3,}/g,"").trim();if(kt.length===0){const Nt=jA($);return Nt?[Nt]:[]}const ue=$.slice(0,kt[0].index).trim();if(ue&&!cr(ue)){const Nt=ue.split(/\n{2,}/).map(Xt=>Xt.trim()).filter(Boolean);Nt.length?Nt.forEach(zt):zt(ue)}let Ee="",Zt=null;for(let Nt=0;Nt<kt.length;Nt++){const Xt=kt[Nt].index,Ot=Nt<kt.length-1?kt[Nt+1].index:$.length,me=kt[Nt][0]||"",dn=xt(me),Gn=$.slice(Xt,Ot).trim();if(!Gn||cr(Gn))continue;const ws=Gn.slice(me.length).trimStart();if(dn&&Zt&&dn.toLowerCase()===Zt.toLowerCase()){const Fi=Qt(ws);Fi&&(Ee=(Ee?`${Ee} ${Fi}`:Fi).trim());continue}Ee&&zt(Ee),Zt=dn,Ee=ws?`${me.trim()} ${ws}`.trim():me.trim()}Ee&&zt(Ee);const yt=G.filter(Nt=>{const Xt=Nt.trim();return Xt.length===0?!1:Xt.match(/\([0-9]{1,2}:[0-9]{2}\):/)||Xt.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"))?!0:cr(Xt)?!1:Xt.length>5});return it("[URL Parse] Transcript paragraphs filtered",{originalCount:G.length,filteredCount:yt.length}),yt},yd=$=>{var G,ct,kt,zt,xt,Qt,ue,Ee,Zt,yt,Nt;it("[URL Parse] parseHtmlToText called",{htmlLength:$.length,htmlFirstChars:$.substring(0,200)});try{const Ot=new DOMParser().parseFromString($,"text/html"),me=((G=Ot.body)==null?void 0:G.textContent)||"",dn=me.match(/\([0-9]{1,2}:[0-9]{2}\):/g);it("[URL Parse] HTML parsed into DOM",{bodyTextLength:me.length,bodyTextPreview:me.substring(0,300),hasBody:!!Ot.body,title:Ot.title||"no title",bodyTimestampCount:dn?dn.length:0,bodyTimestampsSample:dn?dn.slice(0,10):[]});const Gn=Ot.querySelectorAll("script, style, noscript, iframe, embed, object, svg, canvas, nav, header, footer, aside, .nav, .navigation, .menu, .sidebar, .sidebar-content, .advertisement, .ads, .ad, [class*='ad-'], [id*='ad-'], .social, .share, .comments, .comment-section, .cookie, .cookie-banner, .newsletter, .subscribe, .footer, .header, .site-header, .site-footer, [class*='footer'], [class*='header'], [id*='footer'], [id*='header'], .breadcrumb, .breadcrumbs, .related, .related-posts, .tags, .categories, .meta, .post-meta, form, button, input, select, textarea, [class*='product'], [class*='industries'], [class*='resources'], [class*='help-center'], [class*='contact'], [class*='login'], [class*='get-started'], [class*='request-demo'], [class*='human-verified'], [class*='ai-platform'], [class*='premium-tools'], [class*='multi-file'], [class*='transcripts-home'], a[href*='#'], a[href*='javascript']");it("[URL Parse] Elements to remove identified",{count:Gn.length});const ws=(kt=(ct=Ot.body)==null?void 0:ct.textContent)==null?void 0:kt.match(/\([0-9]{1,2}:[0-9]{2}\):/g);it("[URL Parse] Timestamps before removing elements",{count:ws?ws.length:0,sample:ws?ws.slice(0,10):[]}),Gn.forEach(rt=>{const lt=rt.textContent||"",ne=lt.match(/\([0-9]{1,2}:[0-9]{2}\):/g),Xe=ne&&ne.length>=2,as=rt.id==="main-content"||rt.id==="transcript-content"||rt.id==="content";if(Xe||as){it("[URL Parse] PRESERVING element with transcript content",{tagName:rt.tagName,className:rt.className||"none",id:rt.id||"none",timestampCount:ne?ne.length:0,timestamps:ne?ne.slice(0,5):[],textPreview:lt.substring(0,300),reason:Xe?"has transcript timestamps":"has main content ID"});return}ne&&ne.length>0&&it("[URL Parse] Removing element with timestamps (but < 2, so likely not transcript)",{tagName:rt.tagName,className:rt.className||"none",id:rt.id||"none",timestampCount:ne.length,timestamps:ne.slice(0,5),textPreview:lt.substring(0,200)}),rt.remove()});const Fi=(xt=(zt=Ot.body)==null?void 0:zt.textContent)==null?void 0:xt.match(/\([0-9]{1,2}:[0-9]{2}\):/g);it("[URL Parse] Timestamps after removing elements",{count:Fi?Fi.length:0,sample:Fi?Fi.slice(0,10):[]});const y0=Ot.createTreeWalker(Ot.body,NodeFilter.SHOW_TEXT,null),vd=[];let tu;for(;tu=y0.nextNode();)tu.nodeType===Node.TEXT_NODE&&vd.push(tu);vd.forEach(rt=>{let lt=rt.textContent||"";(lt.includes("&amp;")||lt.includes("&#x27;")||lt.includes("&#39;"))&&(lt=lt.replace(/&amp;/g,"&"),lt=lt.replace(/&#x27;/g,"'"),lt=lt.replace(/&#39;/g,"'"),lt=lt.replace(/&quot;/g,'"'),rt.textContent=lt)});let Nn=null;const Ig=["#main-content","#transcript-content","#content","[class*='transcript']","[id*='transcript']","[class*='content']","article","main","[role='main']",".article",".post",".entry",".story"];it("[URL Parse] Searching for transcript container"),it("[URL Parse] Body text sample (first 2000 chars):",me.substring(0,2e3)),it("[URL Parse] Body text sample (last 2000 chars):",me.substring(Math.max(0,me.length-2e3)));for(const rt of Ig){const lt=Ot.querySelector(rt);if(lt){const ne=lt.textContent||"",Xe=((Qt=ne.split(`
`)[0])==null?void 0:Qt.trim())||"",as=Zc(Xe),rn=ne.match(new RegExp(`(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+\\s+)\\([0-9]{1,2}:[0-9]{2}\\):`,"i")),Oi=ne.match(/\([0-9]{1,2}:[0-9]{2}\):/),an=ne.match(/\([0-9]{1,2}:[0-9]{2}\):/g);if(it("[URL Parse] Checking selector",{selector:rt,found:!!lt,textLength:ne.length,textPreview:ne.substring(0,500),firstLine:Xe,hasTranscriptLine:as,hasTranscriptPattern:!!rn,hasTimestamp:!!Oi,timestampMatches:an,timestampCount:an?an.length:0,elementTagName:lt.tagName,elementClassName:lt.className,elementId:lt.id}),as||rn||Oi){Nn=lt,it("[URL Parse] Transcript container found",{selector:rt,textLength:ne.length,timestampCount:an?an.length:0});break}}else it("[URL Parse] Selector not found",{selector:rt})}if(!Nn){Nn=Ot.body;const rt=((ue=Ot.body)==null?void 0:ue.textContent)||"",lt=rt.match(/\([0-9]{1,2}:[0-9]{2}\):/g);it("[URL Parse] No transcript container found, using body",{originalBodyTextLength:me.length,currentBodyTextLength:rt.length,bodyTextSample:rt.substring(0,1e3),allTimestampsInBody:lt,timestampCount:lt?lt.length:0,bodyChildren:Array.from(((Ee=Ot.body)==null?void 0:Ee.children)||[]).map(ne=>{var Xe,as;return{tagName:ne.tagName,className:ne.className||"none",id:ne.id||"none",textLength:((Xe=ne.textContent)==null?void 0:Xe.length)||0,hasTimestamps:!!((as=ne.textContent)!=null&&as.match(/\([0-9]{1,2}:[0-9]{2}\):/g))}})})}const v0=Nn.querySelectorAll("*");for(const rt of v0){const lt=((Zt=rt.textContent)==null?void 0:Zt.trim())||"";lt&&(lt.match(/^transcripts\s+home\s+news/i)||lt.match(/^ny\s+universal\s+childcare\s+announcement\s+ny\s+universal/i)||lt.match(/^help\s+center\s+developers\s+security/i)||lt.match(/^contact\s+support/i)||lt.match(/^human-verified/i)&&!lt.match(/\([0-9]{1,2}:[0-9]{2}\):/)||lt.match(/^ai\s+platform\s+features$/i)&&!lt.match(/\([0-9]{1,2}:[0-9]{2}\):/))&&(lt.match(/\([0-9]{1,2}:[0-9]{2}\):/)||rt.remove())}const ze=Nn.textContent||"",xe=ze.match(/\([0-9]{1,2}:[0-9]{2}\):/g),wd=ze.match(new RegExp(`(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+\\s+)\\([0-9]{1,2}:[0-9]{2}\\):`,"gi"));it("[URL Parse] Full text extracted from container",{fullTextLength:ze.length,fullTextPreview:ze.substring(0,2e3),fullTextFirstChars:ze.substring(0,500),fullTextLastChars:ze.substring(Math.max(0,ze.length-500)),lineCount:ze.split(`
`).length,allTimestamps:xe,timestampCount:xe?xe.length:0,timestampLocations:xe?xe.map(rt=>{const lt=ze.indexOf(rt);return{timestamp:rt,index:lt,context:ze.substring(Math.max(0,lt-50),Math.min(ze.length,lt+100))}}).slice(0,5):[],speakerPatternMatches:wd,speakerPatternCount:wd?wd.length:0,containerTagName:Nn.tagName,containerClassName:Nn.className||"none",containerId:Nn.id||"none",containerChildrenCount:Nn.children.length,containerInnerHTMLLength:((yt=Nn.innerHTML)==null?void 0:yt.length)||0});const hi=ze.match(new RegExp(`(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+\\s+)\\([0-9]{1,2}:[0-9]{2}\\):`,"gi")),Ad=hi&&hi.length>=2,Fs=ze.match(/\([0-9]{1,2}:[0-9]{2}\):/g),Fg=Fs&&Fs.length>=3;if(it("[URL Parse] Transcript format detection",{transcriptLineMatchesCount:(hi==null?void 0:hi.length)||0,transcriptLineMatchesPreview:(hi==null?void 0:hi.slice(0,5))||[],hasTranscriptFormat:Ad,allTimestampMatchesCount:(Fs==null?void 0:Fs.length)||0,allTimestampMatchesPreview:(Fs==null?void 0:Fs.slice(0,10))||[],hasMultipleTimestamps:Fg,fullTextSample:ze.substring(0,1e3)}),Ad||Fg){it("[URL Parse] Processing as transcript format");const rt=Jc(ze);if(it("[URL Parse] Transcript paragraphs split",{paragraphCount:rt.length}),rt.length>0){let lt=rt.join(`

`);return lt=Hy(lt),it("[URL Parse] Returning transcript paragraphs",{resultLength:lt.length}),lt}}const Sd=ze.match(/\([0-9]{1,2}:[0-9]{2}\):/);if(it("[URL Parse] Checking for any transcript line",{hasAnyTranscriptLine:!!Sd}),Sd){it("[URL Parse] Processing as transcript with single timestamp");const rt=Jc(ze);if(it("[URL Parse] Transcript paragraphs split (single timestamp)",{paragraphCount:rt.length}),rt.length>0){let lt=rt.join(`

`);return lt=Hy(lt),it("[URL Parse] Returning transcript paragraphs (single timestamp)",{resultLength:lt.length}),lt}}const En=[],rs=new Set,Og=(rt,lt=0)=>{var Xe,as;const ne=Array.from(rt.children);if(ne.length===0){const rn=((Xe=rt.textContent)==null?void 0:Xe.trim())||"";if(rn&&rn.length>5){const Oi=rn.match(/\([0-9]{1,2}:[0-9]{2}\):/)||rn.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"));(Oi||!cr(rn))&&(rs.has(rn)||(rs.add(rn),En.push(rn),Oi&&it("[URL Parse] Found paragraph with transcript marker",{depth:lt,textLength:rn.length,textPreview:rn.substring(0,200),tagName:rt.tagName,className:rt.className||"none"})))}return}for(const rn of ne){const Oi=rn.tagName.toUpperCase(),an=((as=rn.textContent)==null?void 0:as.trim())||"";if(Oi==="P"||Oi==="DIV"&&an.length>20){if(an){const Ed=an.match(/\([0-9]{1,2}:[0-9]{2}\):/)||an.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"));(Ed||!cr(an))&&(rs.has(an)||(rs.add(an),En.push(an),Ed&&lt<3&&it("[URL Parse] Found paragraph with transcript marker (P/DIV)",{depth:lt,tagName:Oi,textLength:an.length,textPreview:an.substring(0,200),className:rn.className||"none"})))}}else Og(rn,lt+1)}};if(it("[URL Parse] Starting paragraph collection from container",{containerTagName:Nn.tagName,containerTextLength:((Nt=Nn.textContent)==null?void 0:Nt.length)||0,containerChildrenCount:Nn.children.length}),Og(Nn),it("[URL Parse] Paragraphs collected",{paragraphCount:En.length,paragraphsPreview:En.slice(0,10).map((rt,lt)=>({index:lt,length:rt.length,preview:rt.substring(0,150),firstChars:rt.substring(0,100),hasTimestamp:!!rt.match(/\([0-9]{1,2}:[0-9]{2}\):/),timestampCount:(rt.match(/\([0-9]{1,2}:[0-9]{2}\):/g)||[]).length})),allParagraphLengths:En.map(rt=>rt.length),paragraphsWithTimestamps:En.filter(rt=>rt.match(/\([0-9]{1,2}:[0-9]{2}\):/)).length}),En.length===0)return it("[URL Parse] No paragraphs found, returning full text",{fullTextLength:ze.length,fullTextPreview:ze.substring(0,500)}),ze.trim();let fn=-1;for(let rt=0;rt<En.length;rt++)if(Zc(En[rt])||En[rt].match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+\\s+)\\([0-9]{1,2}:[0-9]{2}\\):`,"i"))){fn=rt,it("[URL Parse] Transcript start found (method 1)",{index:rt});break}if(fn===-1){for(let rt=0;rt<En.length;rt++)if(En[rt].match(/\([0-9]{1,2}:[0-9]{2}\):/)){fn=rt,it("[URL Parse] Transcript start found (method 2)",{index:rt});break}}fn===-1&&(fn=0,it("[URL Parse] No transcript start found, using index 0"));const bd=En.slice(fn).filter(rt=>{const lt=rt.trim();return lt.length===0?!1:lt.match(/\([0-9]{1,2}:[0-9]{2}\):/)?!0:!cr(lt)}).map(rt=>rt.trim()).filter((rt,lt,ne)=>{if(lt===0)return!0;const Xe=ne[lt-1];return!(rt===Xe||rt.length<20&&Xe.includes(rt)||Xe.length<20&&rt.includes(Xe))});if(it("[URL Parse] Transcript paragraphs filtered",{transcriptParagraphsCount:bd.length,transcriptStartIndex:fn}),bd.length===0)return it("[URL Parse] No transcript paragraphs after filtering, returning full text"),ze.trim();const Bg=bd.join(`

`);return it("[URL Parse] Returning final result",{resultLength:Bg.length}),Bg}catch(Xt){console.error("[URL Parse] HTML parsing error:",Xt);const Ot=$.replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?<\/style>/gi,"").replace(/<noscript[\s\S]*?<\/noscript>/gi,"").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();return it("[URL Parse] Fallback text extracted",{fallbackLength:Ot.length}),Ot}},$r=async($,G=0)=>{var Qt;const ct=[`https://api.allorigins.win/raw?url=${encodeURIComponent($)}`,`https://corsproxy.io/?${encodeURIComponent($)}`,`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent($)}`];if(it("[URL Parse] fetchWithProxy called",{url:$,proxyIndex:G,totalProxies:ct.length,proxyService:((Qt=ct[G])==null?void 0:Qt.substring(0,50))+"..."}),G>=ct.length)throw new Error("All proxy services failed");const kt=ct[G];it("[URL Parse] Attempting proxy fetch",{proxyIndex:G,proxyUrl:kt.substring(0,100)+"...",targetUrl:$});const zt=await fetch(kt,{headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}}),xt=zt.headers.get("content-type");return it("[URL Parse] Proxy fetch response",{proxyIndex:G,status:zt.status,statusText:zt.statusText,ok:zt.ok,contentType:xt||"unknown",headers:Object.fromEntries(zt.headers.entries())}),!zt.ok&&G<ct.length-1?$r($,G+1):zt},Wr=async $=>{var kt,zt;const G=($??g).trim();if(!G)return;const ct=G;if(it("[URL Parse] Starting URL submission",{url:ct,urlLength:ct.length}),!ct.match(/^https?:\/\//i)){it("[URL Parse] Invalid URL format",{url:ct,urlLength:ct.length}),Z("Please enter a valid URL starting with http:// or https://");return}Y(!0),Z(null),k(!1);try{let xt,Qt=!1;it("[URL Parse] Attempting direct fetch",{url:ct,urlLength:ct.length});try{xt=await fetch(ct,{headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});const yt=xt.headers.get("content-type");it("[URL Parse] Direct fetch successful",{status:xt.status,statusText:xt.statusText,contentType:yt||"unknown",ok:xt.ok,headers:Object.fromEntries(xt.headers.entries())})}catch(yt){const Nt=yt instanceof Error?yt.message:String(yt),Xt=String(yt),Ot=yt instanceof TypeError&&(Nt.includes("Failed to fetch")||Nt.includes("network")||Nt.includes("CORS")||Xt.includes("CORS")||Xt.includes("Access-Control"));if(it("[URL Parse] Direct fetch failed",{error:Nt,errorString:Xt,errorType:((kt=yt==null?void 0:yt.constructor)==null?void 0:kt.name)||typeof yt,isCorsError:Ot,errorName:yt instanceof Error?yt.name:"Unknown"}),yt instanceof Error&&it("[URL Parse] Error stack:",yt.stack),Ot){it("[URL Parse] CORS error detected, retrying with proxy"),Qt=!0,xt=await $r(ct);const me=xt.headers.get("content-type");it("[URL Parse] Proxy fetch successful",{status:xt.status,statusText:xt.statusText,contentType:me||"unknown",ok:xt.ok,usedProxy:!0})}else throw it("[URL Parse] Non-CORS error, rethrowing",{error:Nt}),yt}if(!xt.ok)throw it("[URL Parse] HTTP error response",{status:xt.status,statusText:xt.statusText}),new Error(`HTTP error! status: ${xt.status}`);const ue=xt.headers.get("content-type")||"",Ee=ue.includes("text/html");it("[URL Parse] Response content type determined",{contentType:ue,isHtml:Ee,contentLength:xt.headers.get("content-length")});const Zt=await xt.text();if(it("[URL Parse] Response text received",{htmlLength:Zt.length,htmlPreview:Zt.substring(0,200),htmlFirstChars:Zt.substring(0,100),htmlLastChars:Zt.substring(Math.max(0,Zt.length-100))}),Ee){it("[URL Parse] Parsing HTML content");const yt=yd(Zt);if(it("[URL Parse] HTML parsing complete",{extractedTextLength:yt.length,extractedTextPreview:yt.substring(0,300),extractedTextFirstChars:yt.substring(0,150),extractedTextLastChars:yt.substring(Math.max(0,yt.length-150)),wordCount:yt.split(/\s+/).filter(Xt=>Xt.length>0).length}),!yt.trim()){it("[URL Parse] No text content extracted from HTML"),Z("No readable text content found on this page. The page may require JavaScript to load content."),Y(!1);return}const Nt=yt.split(/\s+/).filter(Xt=>Xt.length>0).length;it("[URL Parse] Setting extracted text and resetting reader",{extractedTextLength:yt.length,wordCount:Nt,extractedTextPreview:yt.substring(0,400),paragraphCount:yt.split(/\n\n/).length}),t(yt),lr(yt),k(!0)}else{if(it("[URL Parse] Non-HTML content, using as plain text",{htmlLength:Zt.length}),!Zt.trim()){it("[URL Parse] Empty text content"),Z("No text content found at this URL."),Y(!1);return}t(Zt),lr(Zt),k(!0),it("[URL Parse] Plain text content loaded",{textLength:Zt.length,wordCount:Zt.split(/\s+/).length})}Y(!1),it("[URL Parse] URL submission completed successfully")}catch(xt){console.error("[URL Parse] ===== ERROR CAUGHT IN OUTER CATCH =====",xt),it("[URL Parse] Error details",{error:xt,errorType:(zt=xt==null?void 0:xt.constructor)==null?void 0:zt.name,errorMessage:xt instanceof Error?xt.message:String(xt),errorString:String(xt),errorStack:xt instanceof Error?xt.stack:void 0});const Qt=xt instanceof Error?xt:new Error(String(xt));let ue;Qt.message.includes("All proxy services failed")?ue="Failed to fetch URL: All proxy services are unavailable. The URL may be blocked or inaccessible.":Qt instanceof TypeError&&Qt.message.includes("Failed to fetch")?ue="Network error: Unable to connect. Please check your internet connection and try again.":ue=`Failed to fetch URL: ${Qt.message}. The URL may be inaccessible or blocked.`,it("[URL Parse] Error handling complete",{errorMessage:ue,errorType:Qt.constructor.name,errorMessageDetail:Qt.message}),Z(ue),Y(!1),k(!1)}},Dg=async $=>{if($){D(!0),U(null),k(!1);try{const G=await $.arrayBuffer(),ct=await Sx({data:G}).promise,kt=ct.numPages,zt=[];for(let Qt=1;Qt<=kt;Qt++){const Zt=(await(await ct.getPage(Qt)).getTextContent()).items.map(yt=>yt.str).join(" ");zt.push(Zt)}const xt=zt.join(`

`);if(!xt.trim()){U("No text content found in PDF. The PDF may be image-based or encrypted."),D(!1);return}t(xt),lr(xt),k(!0),D(!1)}catch(G){console.error("Failed to parse PDF:",G),U(G instanceof Error?`Failed to parse PDF: ${G.message}`:"Failed to parse PDF. The file may be corrupted or encrypted."),D(!1),k(!1)}}},Ng=async $=>{var ct;const G=((ct=$.target.files)==null?void 0:ct[0])??null;if(G)if(G.type==="application/pdf"||G.name.toLowerCase().endsWith(".pdf"))await Dg(G);else if(G.type.startsWith("text/")){const kt=await G.text();t(kt),lr(kt)}else{const kt=await G.text().catch(()=>"");kt&&(t(kt),lr(kt))}};return nt.jsxs("div",{className:"app-shell",children:[nt.jsx("header",{className:"app-header",children:nt.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[nt.jsxs("div",{children:[nt.jsx("div",{className:"app-title",children:"Speed Reader"}),nt.jsx("div",{className:"app-subtitle",children:"One word at a time, with a red pivot letter to keep your eyes anchored."})]}),nt.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>P(!M),style:{marginTop:"4px"},children:" Settings"})]})}),M&&nt.jsxs("section",{className:"card settings-panel",style:{marginBottom:"20px"},children:[nt.jsxs("div",{className:"card-header",children:[nt.jsx("div",{className:"card-title",children:"Settings"}),nt.jsx("button",{className:"btn btn-ghost btn-icon",type:"button",onClick:()=>P(!1),children:""})]}),nt.jsxs("div",{className:"settings-content",children:[nt.jsxs("div",{className:"setting-group",children:[nt.jsx("label",{className:"setting-label",children:"Font Family"}),nt.jsx("div",{className:"font-grid",children:O.map($=>nt.jsx("button",{type:"button",className:`font-option ${Ct===$.value?"active":""}`,onClick:()=>_t($.value),children:nt.jsx("div",{className:"font-preview",style:{fontFamily:$.value},children:$.label})},$.value))})]}),nt.jsxs("div",{className:"setting-group",children:[nt.jsxs("label",{className:"setting-label",children:["Letter Spacing: ",At]}),nt.jsxs("div",{className:"setting-slider-group",children:[nt.jsx("input",{className:"slider range-input",type:"range",min:0,max:10,step:1,value:At,onChange:$=>Tt(Number($.target.value))}),nt.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>Tt(5),style:{fontSize:"0.8rem",padding:"4px 8px"},children:"Reset"})]})]}),nt.jsxs("div",{className:"setting-group",children:[nt.jsx("label",{className:"setting-label",children:"Pivot Letter Color"}),nt.jsxs("div",{className:"setting-color-group",children:[nt.jsx("input",{className:"setting-color-input",type:"color",value:ot,onChange:$=>st($.target.value)}),nt.jsx("input",{className:"setting-color-text",type:"text",value:ot,onChange:$=>st($.target.value),placeholder:"#ff4e4e"}),nt.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>st("#ff4e4e"),style:{fontSize:"0.8rem",padding:"4px 8px"},children:"Reset"})]})]}),nt.jsxs("div",{className:"setting-group",children:[nt.jsx("label",{className:"setting-label",children:"Pause at paragraph end"}),nt.jsxs("label",{className:"toggle-row",children:[nt.jsx("input",{type:"checkbox",checked:_,onChange:$=>x($.target.checked)}),nt.jsx("span",{className:"toggle-text",children:"Stop after each paragraph."})]})]})]})]}),nt.jsx("main",{className:"layout",children:nt.jsx("div",{className:"reader-stage",children:nt.jsxs("section",{className:"card reader-card",children:[nt.jsxs("div",{className:"card-header",children:[nt.jsx("div",{className:"card-title",children:"Reader"}),nt.jsxs("div",{className:"card-badges",children:[nt.jsx("div",{className:"card-badge",children:ce?`${p+1} / ${r.length} words`:"Idle"}),ce&&e.length?nt.jsxs("div",{className:"card-badge",children:["Paragraph ",Hr?Hr.paragraphIndex+1:1," of"," ",e.length]}):null]})]}),nt.jsxs("div",{className:"reader-screen",children:[nt.jsx("div",{ref:qt,className:"word-display",style:{fontFamily:Ct,letterSpacing:`${tt(At)}em`,fontSize:is?`${is}px`:void 0},children:ce?nt.jsxs("div",{className:"word-line",style:{transform:`translateX(${le}px)`},children:[nt.jsx("span",{ref:Pt,className:"word-left",children:ol.left}),nt.jsx("span",{ref:bt,className:"pivot-letter",style:{color:ot},children:ol.pivot}),nt.jsx("span",{ref:Rt,className:"word-right",children:ol.right})]}):nt.jsx("div",{className:"reader-input",children:(()=>{const $=V||L,G=et||I,ct=!!G&&!$;return nt.jsxs(nt.Fragment,{children:[$?nt.jsx("div",{className:"input-loading","aria-label":"Loading",children:nt.jsx("div",{className:"spinner"})}):null,ct?nt.jsx("div",{className:"input-error",children:G}):null,nt.jsx("textarea",{ref:Mt,className:"text-input reader-textarea",placeholder:"Paste text or a URL (by itself)",value:g,onChange:kt=>t(kt.target.value),onBlur:m0,onPaste:md,disabled:$}),nt.jsxs("div",{className:"input-footer reader-input-footer",children:[nt.jsx("span",{className:"input-hint",children:"Paste text, paste a URL, or open a file."}),nt.jsx("label",{className:"file-input",children:nt.jsx("input",{type:"file",accept:".txt,application/pdf",onChange:Ng,disabled:$})})]})]})})()})}),nt.jsx("div",{className:"pivot-guide"}),ce?nt.jsxs("div",{className:"controls-row",children:[nt.jsxs("div",{className:"wpm-group",children:[nt.jsx("button",{className:"btn btn-icon btn-ghost",onClick:()=>pd(-1),disabled:!ce||p===0,type:"button",children:""}),nt.jsx("button",{className:"btn btn-primary",onClick:ul,disabled:!ce,type:"button",children:h?"Pause":"Play"}),nt.jsx("button",{className:"btn btn-icon btn-ghost",onClick:()=>pd(1),disabled:!ce||p>=r.length-1,type:"button",children:""}),nt.jsx("button",{className:"btn btn-ghost",onClick:g0,disabled:!ce,type:"button",children:"Restart"})]}),nt.jsxs("div",{className:"wpm-group",children:[nt.jsxs("span",{className:"wpm-value",children:[l," wpm"]}),nt.jsx("input",{className:"slider range-input",type:"range",min:150,max:900,step:10,value:l,onChange:$=>u(Number($.target.value))})]})]}):null,ce?nt.jsxs("div",{className:"controls-row",children:[nt.jsxs("div",{className:"wpm-group",children:[nt.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>gd(-1),disabled:!ce,children:" Paragraph"}),nt.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>gd(1),disabled:!ce,children:" Paragraph"})]}),nt.jsxs("div",{className:"wpm-group",children:[nt.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>S($=>!$),disabled:!ce,children:v?"Hide context":"Show paragraph"}),nt.jsx("button",{className:"btn btn-primary",type:"button",onClick:cl,children:"New input"})]})]}):null,v&&Hr&&nt.jsx("div",{className:"reader-context",children:nt.jsxs("div",{className:"paragraph-context",children:[nt.jsxs("span",{children:[Hr.before," "]}),nt.jsx("strong",{children:Hr.active}),nt.jsxs("span",{children:[" ",Hr.after]})]})})]})]})})})]})};gk.createRoot(document.getElementById("root")).render(nt.jsx(lk.StrictMode,{children:nt.jsx(bP,{})}));
