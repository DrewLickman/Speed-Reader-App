var sk=Object.defineProperty;var k1=g=>{throw TypeError(g)};var ik=(g,t,e)=>t in g?sk(g,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[t]=e;var K=(g,t,e)=>ik(g,typeof t!="symbol"?t+"":t,e),Zv=(g,t,e)=>t.has(g)||k1("Cannot "+e);var a=(g,t,e)=>(Zv(g,t,"read from private field"),e?e.call(g):t.get(g)),b=(g,t,e)=>t.has(g)?k1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(g):t.set(g,e),w=(g,t,e,n)=>(Zv(g,t,"write to private field"),n?n.call(g,e):t.set(g,e),e),E=(g,t,e)=>(Zv(g,t,"access private method"),e);var gn=(g,t,e,n)=>({set _(r){w(g,t,r,e)},get _(){return a(g,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function fE(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var Jv={exports:{}},sf={},tw={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function rk(){if(T1)return Yt;T1=1;var g=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,x={};function T(O,H,ut){this.props=O,this.context=H,this.refs=x,this.updater=ut||S}T.prototype.isReactComponent={},T.prototype.setState=function(O,H){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,H,"setState")},T.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function k(){}k.prototype=T.prototype;function M(O,H,ut){this.props=O,this.context=H,this.refs=x,this.updater=ut||S}var P=M.prototype=new k;P.constructor=M,_(P,T.prototype),P.isPureReactComponent=!0;var L=Array.isArray,D=Object.prototype.hasOwnProperty,I={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function G(O,H,ut){var Lt,Ct={},_t=null,Dt=null;if(H!=null)for(Lt in H.ref!==void 0&&(Dt=H.ref),H.key!==void 0&&(_t=""+H.key),H)D.call(H,Lt)&&!U.hasOwnProperty(Lt)&&(Ct[Lt]=H[Lt]);var Qt=arguments.length-2;if(Qt===1)Ct.children=ut;else if(1<Qt){for(var ae=Array(Qt),je=0;je<Qt;je++)ae[je]=arguments[je+2];Ct.children=ae}if(O&&O.defaultProps)for(Lt in Qt=O.defaultProps,Qt)Ct[Lt]===void 0&&(Ct[Lt]=Qt[Lt]);return{$$typeof:g,type:O,key:_t,ref:Dt,props:Ct,_owner:I.current}}function Y(O,H){return{$$typeof:g,type:O.type,key:H,ref:O.ref,props:O.props,_owner:O._owner}}function nt(O){return typeof O=="object"&&O!==null&&O.$$typeof===g}function Z(O){var H={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ut){return H[ut]})}var kt=/\/+/g;function Tt(O,H){return typeof O=="object"&&O!==null&&O.key!=null?Z(""+O.key):H.toString(36)}function St(O,H,ut,Lt,Ct){var _t=typeof O;(_t==="undefined"||_t==="boolean")&&(O=null);var Dt=!1;if(O===null)Dt=!0;else switch(_t){case"string":case"number":Dt=!0;break;case"object":switch(O.$$typeof){case g:case t:Dt=!0}}if(Dt)return Dt=O,Ct=Ct(Dt),O=Lt===""?"."+Tt(Dt,0):Lt,L(Ct)?(ut="",O!=null&&(ut=O.replace(kt,"$&/")+"/"),St(Ct,H,ut,"",function(je){return je})):Ct!=null&&(nt(Ct)&&(Ct=Y(Ct,ut+(!Ct.key||Dt&&Dt.key===Ct.key?"":(""+Ct.key).replace(kt,"$&/")+"/")+O)),H.push(Ct)),1;if(Dt=0,Lt=Lt===""?".":Lt+":",L(O))for(var Qt=0;Qt<O.length;Qt++){_t=O[Qt];var ae=Lt+Tt(_t,Qt);Dt+=St(_t,H,ut,ae,Ct)}else if(ae=v(O),typeof ae=="function")for(O=ae.call(O),Qt=0;!(_t=O.next()).done;)_t=_t.value,ae=Lt+Tt(_t,Qt++),Dt+=St(_t,H,ut,ae,Ct);else if(_t==="object")throw H=String(O),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Dt}function Pt(O,H,ut){if(O==null)return O;var Lt=[],Ct=0;return St(O,Lt,"","",function(_t){return H.call(ut,_t,Ct++)}),Lt}function lt(O){if(O._status===-1){var H=O._result;H=H(),H.then(function(ut){(O._status===0||O._status===-1)&&(O._status=1,O._result=ut)},function(ut){(O._status===0||O._status===-1)&&(O._status=2,O._result=ut)}),O._status===-1&&(O._status=0,O._result=H)}if(O._status===1)return O._result.default;throw O._result}var st={current:null},V={transition:null},ft={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:V,ReactCurrentOwner:I};function tt(){throw Error("act(...) is not supported in production builds of React.")}return Yt.Children={map:Pt,forEach:function(O,H,ut){Pt(O,function(){H.apply(this,arguments)},ut)},count:function(O){var H=0;return Pt(O,function(){H++}),H},toArray:function(O){return Pt(O,function(H){return H})||[]},only:function(O){if(!nt(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Yt.Component=T,Yt.Fragment=e,Yt.Profiler=r,Yt.PureComponent=M,Yt.StrictMode=n,Yt.Suspense=h,Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ft,Yt.act=tt,Yt.cloneElement=function(O,H,ut){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Lt=_({},O.props),Ct=O.key,_t=O.ref,Dt=O._owner;if(H!=null){if(H.ref!==void 0&&(_t=H.ref,Dt=I.current),H.key!==void 0&&(Ct=""+H.key),O.type&&O.type.defaultProps)var Qt=O.type.defaultProps;for(ae in H)D.call(H,ae)&&!U.hasOwnProperty(ae)&&(Lt[ae]=H[ae]===void 0&&Qt!==void 0?Qt[ae]:H[ae])}var ae=arguments.length-2;if(ae===1)Lt.children=ut;else if(1<ae){Qt=Array(ae);for(var je=0;je<ae;je++)Qt[je]=arguments[je+2];Lt.children=Qt}return{$$typeof:g,type:O.type,key:Ct,ref:_t,props:Lt,_owner:Dt}},Yt.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:o,_context:O},O.Consumer=O},Yt.createElement=G,Yt.createFactory=function(O){var H=G.bind(null,O);return H.type=O,H},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(O){return{$$typeof:u,render:O}},Yt.isValidElement=nt,Yt.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:lt}},Yt.memo=function(O,H){return{$$typeof:f,type:O,compare:H===void 0?null:H}},Yt.startTransition=function(O){var H=V.transition;V.transition={};try{O()}finally{V.transition=H}},Yt.unstable_act=tt,Yt.useCallback=function(O,H){return st.current.useCallback(O,H)},Yt.useContext=function(O){return st.current.useContext(O)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(O){return st.current.useDeferredValue(O)},Yt.useEffect=function(O,H){return st.current.useEffect(O,H)},Yt.useId=function(){return st.current.useId()},Yt.useImperativeHandle=function(O,H,ut){return st.current.useImperativeHandle(O,H,ut)},Yt.useInsertionEffect=function(O,H){return st.current.useInsertionEffect(O,H)},Yt.useLayoutEffect=function(O,H){return st.current.useLayoutEffect(O,H)},Yt.useMemo=function(O,H){return st.current.useMemo(O,H)},Yt.useReducer=function(O,H,ut){return st.current.useReducer(O,H,ut)},Yt.useRef=function(O){return st.current.useRef(O)},Yt.useState=function(O){return st.current.useState(O)},Yt.useSyncExternalStore=function(O,H,ut){return st.current.useSyncExternalStore(O,H,ut)},Yt.useTransition=function(){return st.current.useTransition()},Yt.version="18.3.1",Yt}var P1;function $A(){return P1||(P1=1,tw.exports=rk()),tw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1;function ak(){if(R1)return sf;R1=1;var g=$A(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,f){var p,y={},v=null,S=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(S=h.ref);for(p in h)n.call(h,p)&&!o.hasOwnProperty(p)&&(y[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)y[p]===void 0&&(y[p]=h[p]);return{$$typeof:t,type:u,key:v,ref:S,props:y,_owner:r.current}}return sf.Fragment=e,sf.jsx=l,sf.jsxs=l,sf}var M1;function ok(){return M1||(M1=1,Jv.exports=ak()),Jv.exports}var et=ok(),Ut=$A();const lk=fE(Ut);var Wm={},ew={exports:{}},Es={},nw={exports:{}},sw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1;function ck(){return L1||(L1=1,(function(g){function t(V,ft){var tt=V.length;V.push(ft);t:for(;0<tt;){var O=tt-1>>>1,H=V[O];if(0<r(H,ft))V[O]=ft,V[tt]=H,tt=O;else break t}}function e(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var ft=V[0],tt=V.pop();if(tt!==ft){V[0]=tt;t:for(var O=0,H=V.length,ut=H>>>1;O<ut;){var Lt=2*(O+1)-1,Ct=V[Lt],_t=Lt+1,Dt=V[_t];if(0>r(Ct,tt))_t<H&&0>r(Dt,Ct)?(V[O]=Dt,V[_t]=tt,O=_t):(V[O]=Ct,V[Lt]=tt,O=Lt);else if(_t<H&&0>r(Dt,tt))V[O]=Dt,V[_t]=tt,O=_t;else break t}}return ft}function r(V,ft){var tt=V.sortIndex-ft.sortIndex;return tt!==0?tt:V.id-ft.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;g.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();g.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,y=null,v=3,S=!1,_=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(V){for(var ft=e(f);ft!==null;){if(ft.callback===null)n(f);else if(ft.startTime<=V)n(f),ft.sortIndex=ft.expirationTime,t(h,ft);else break;ft=e(f)}}function L(V){if(x=!1,P(V),!_)if(e(h)!==null)_=!0,lt(D);else{var ft=e(f);ft!==null&&st(L,ft.startTime-V)}}function D(V,ft){_=!1,x&&(x=!1,k(G),G=-1),S=!0;var tt=v;try{for(P(ft),y=e(h);y!==null&&(!(y.expirationTime>ft)||V&&!Z());){var O=y.callback;if(typeof O=="function"){y.callback=null,v=y.priorityLevel;var H=O(y.expirationTime<=ft);ft=g.unstable_now(),typeof H=="function"?y.callback=H:y===e(h)&&n(h),P(ft)}else n(h);y=e(h)}if(y!==null)var ut=!0;else{var Lt=e(f);Lt!==null&&st(L,Lt.startTime-ft),ut=!1}return ut}finally{y=null,v=tt,S=!1}}var I=!1,U=null,G=-1,Y=5,nt=-1;function Z(){return!(g.unstable_now()-nt<Y)}function kt(){if(U!==null){var V=g.unstable_now();nt=V;var ft=!0;try{ft=U(!0,V)}finally{ft?Tt():(I=!1,U=null)}}else I=!1}var Tt;if(typeof M=="function")Tt=function(){M(kt)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,Pt=St.port2;St.port1.onmessage=kt,Tt=function(){Pt.postMessage(null)}}else Tt=function(){T(kt,0)};function lt(V){U=V,I||(I=!0,Tt())}function st(V,ft){G=T(function(){V(g.unstable_now())},ft)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(V){V.callback=null},g.unstable_continueExecution=function(){_||S||(_=!0,lt(D))},g.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<V?Math.floor(1e3/V):5},g.unstable_getCurrentPriorityLevel=function(){return v},g.unstable_getFirstCallbackNode=function(){return e(h)},g.unstable_next=function(V){switch(v){case 1:case 2:case 3:var ft=3;break;default:ft=v}var tt=v;v=ft;try{return V()}finally{v=tt}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(V,ft){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var tt=v;v=V;try{return ft()}finally{v=tt}},g.unstable_scheduleCallback=function(V,ft,tt){var O=g.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?O+tt:O):tt=O,V){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=tt+H,V={id:p++,callback:ft,priorityLevel:V,startTime:tt,expirationTime:H,sortIndex:-1},tt>O?(V.sortIndex=tt,t(f,V),e(h)===null&&V===e(f)&&(x?(k(G),G=-1):x=!0,st(L,tt-O))):(V.sortIndex=H,t(h,V),_||S||(_=!0,lt(D))),V},g.unstable_shouldYield=Z,g.unstable_wrapCallback=function(V){var ft=v;return function(){var tt=v;v=ft;try{return V.apply(this,arguments)}finally{v=tt}}}})(sw)),sw}var D1;function uk(){return D1||(D1=1,nw.exports=ck()),nw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function hk(){if(N1)return Es;N1=1;var g=$A(),t=uk();function e(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function o(s,i){l(s,i),l(s+"Capture",i)}function l(s,i){for(r[s]=i,s=0;s<i.length;s++)n.add(i[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function v(s){return h.call(y,s)?!0:h.call(p,s)?!1:f.test(s)?y[s]=!0:(p[s]=!0,!1)}function S(s,i,c,d){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function _(s,i,c,d){if(i===null||typeof i>"u"||S(s,i,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function x(s,i,c,d,m,A,C){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=i,this.sanitizeURL=A,this.removeEmptyString=C}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new x(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];T[i]=new x(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new x(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new x(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new x(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new x(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new x(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new x(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new x(s,5,!1,s.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(k,M);T[i]=new x(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(k,M);T[i]=new x(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(k,M);T[i]=new x(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new x(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new x(s,1,!1,s.toLowerCase(),null,!0,!0)});function P(s,i,c,d){var m=T.hasOwnProperty(i)?T[i]:null;(m!==null?m.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,c,m,d)&&(c=null),d||m===null?v(i)&&(c===null?s.removeAttribute(i):s.setAttribute(i,""+c)):m.mustUseProperty?s[m.propertyName]=c===null?m.type===3?!1:"":c:(i=m.attributeName,d=m.attributeNamespace,c===null?s.removeAttribute(i):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,d?s.setAttributeNS(d,i,c):s.setAttribute(i,c))))}var L=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),I=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),Z=Symbol.for("react.context"),kt=Symbol.for("react.forward_ref"),Tt=Symbol.for("react.suspense"),St=Symbol.for("react.suspense_list"),Pt=Symbol.for("react.memo"),lt=Symbol.for("react.lazy"),st=Symbol.for("react.offscreen"),V=Symbol.iterator;function ft(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var tt=Object.assign,O;function H(s){if(O===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+s}var ut=!1;function Lt(s,i){if(!s||ut)return"";ut=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(j){var d=j}Reflect.construct(s,[],i)}else{try{i.call()}catch(j){d=j}s.call(i.prototype)}else{try{throw Error()}catch(j){d=j}s()}}catch(j){if(j&&d&&typeof j.stack=="string"){for(var m=j.stack.split(`
`),A=d.stack.split(`
`),C=m.length-1,R=A.length-1;1<=C&&0<=R&&m[C]!==A[R];)R--;for(;1<=C&&0<=R;C--,R--)if(m[C]!==A[R]){if(C!==1||R!==1)do if(C--,R--,0>R||m[C]!==A[R]){var N=`
`+m[C].replace(" at new "," at ");return s.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",s.displayName)),N}while(1<=C&&0<=R);break}}}finally{ut=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?H(s):""}function Ct(s){switch(s.tag){case 5:return H(s.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return s=Lt(s.type,!1),s;case 11:return s=Lt(s.type.render,!1),s;case 1:return s=Lt(s.type,!0),s;default:return""}}function _t(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case I:return"Portal";case Y:return"Profiler";case G:return"StrictMode";case Tt:return"Suspense";case St:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Z:return(s.displayName||"Context")+".Consumer";case nt:return(s._context.displayName||"Context")+".Provider";case kt:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Pt:return i=s.displayName||null,i!==null?i:_t(s.type)||"Memo";case lt:i=s._payload,s=s._init;try{return _t(s(i))}catch{}}return null}function Dt(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _t(i);case 8:return i===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Qt(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ae(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function je(s){var i=ae(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),d=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,A=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return m.call(this)},set:function(C){d=""+C,A.call(this,C)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function es(s){s._valueTracker||(s._valueTracker=je(s))}function Ni(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return s&&(d=ae(s)?s.checked?"true":"false":s.value),s=d,s!==c?(i.setValue(s),!0):!1}function jr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function $a(s,i){var c=i.checked;return tt({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function Ng(s,i){var c=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;c=Qt(i.value!=null?i.value:c),s._wrapperState={initialChecked:d,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ig(s,i){i=i.checked,i!=null&&P(s,"checked",i,!1)}function Ii(s,i){Ig(s,i);var c=Qt(i.value),d=i.type;if(c!=null)d==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?ul(s,i.type,c):i.hasOwnProperty("defaultValue")&&ul(s,i.type,Qt(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function cl(s,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,c||i===s.value||(s.value=i),s.defaultValue=i}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function ul(s,i,c){(i!=="number"||jr(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var ne=Array.isArray;function Wa(s,i,c,d){if(s=s.options,i){i={};for(var m=0;m<c.length;m++)i["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=i.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&d&&(s[c].defaultSelected=!0)}else{for(c=""+Qt(c),i=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,d&&(s[m].defaultSelected=!0);return}i!==null||s[m].disabled||(i=s[m])}i!==null&&(i.selected=!0)}}function Jc(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(e(91));return tt({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function pd(s,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(e(92));if(ne(c)){if(1<c.length)throw Error(e(93));c=c[0]}i=c}i==null&&(i=""),c=i}s._wrapperState={initialValue:Qt(c)}}function Va(s,i){var c=Qt(i.value),d=Qt(i.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),i.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),d!=null&&(s.defaultValue=""+d)}function Fg(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function gd(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gs(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?gd(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var hl,dl=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,d,m){MSApp.execUnsafeLocalFunction(function(){return s(i,c,d,m)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=hl.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function ci(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fl=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(s){fl.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),Hr[i]=Hr[s]})});function or(s,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||Hr.hasOwnProperty(s)&&Hr[s]?(""+i).trim():i+"px"}function Og(s,i){s=s.style;for(var c in i)if(i.hasOwnProperty(c)){var d=c.indexOf("--")===0,m=or(c,i[c],d);c==="float"&&(c="cssFloat"),d?s.setProperty(c,m):s[c]=m}}var A0=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function md(s,i){if(i){if(A0[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(e(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(e(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(e(61))}if(i.style!=null&&typeof i.style!="object")throw Error(e(62))}}function tu(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eu=null;function yd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var vd=null,Ds=null,$r=null;function wd(s){if(s=Hd(s)){if(typeof vd!="function")throw Error(e(280));var i=s.stateNode;i&&(i=rm(i),vd(s.stateNode,s.type,i))}}function Bg(s){Ds?$r?$r.push(s):$r=[s]:Ds=s}function Ad(){if(Ds){var s=Ds,i=$r;if($r=Ds=null,wd(s),i)for(s=0;s<i.length;s++)wd(i[s])}}function Sd(s,i){return s(i)}function Ug(){}var bd=!1;function $(s,i,c){if(bd)return s(i,c);bd=!0;try{return Sd(s,i,c)}finally{bd=!1,(Ds!==null||$r!==null)&&(Ug(),Ad())}}function W(s,i){var c=s.stateNode;if(c===null)return null;var d=rm(c);if(d===null)return null;c=d[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(e(231,i,typeof c));return c}var at=!1;if(u)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){at=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{at=!1}function Bt(s,i,c,d,m,A,C,R,N){var j=Array.prototype.slice.call(arguments,3);try{i.apply(c,j)}catch(q){this.onError(q)}}var vt=!1,qt=null,fe=!1,pe=null,oe={onError:function(s){vt=!0,qt=s}};function wt(s,i,c,d,m,A,C,R,N){vt=!1,qt=null,Bt.apply(oe,arguments)}function It(s,i,c,d,m,A,C,R,N){if(wt.apply(this,arguments),vt){if(vt){var j=qt;vt=!1,qt=null}else throw Error(e(198));fe||(fe=!0,pe=j)}}function Ht(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function Ft(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function ge(s){if(Ht(s)!==s)throw Error(e(188))}function hn(s){var i=s.alternate;if(!i){if(i=Ht(s),i===null)throw Error(e(188));return i!==s?null:s}for(var c=s,d=i;;){var m=c.return;if(m===null)break;var A=m.alternate;if(A===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===A.child){for(A=m.child;A;){if(A===c)return ge(m),s;if(A===d)return ge(m),i;A=A.sibling}throw Error(e(188))}if(c.return!==d.return)c=m,d=A;else{for(var C=!1,R=m.child;R;){if(R===c){C=!0,c=m,d=A;break}if(R===d){C=!0,d=m,c=A;break}R=R.sibling}if(!C){for(R=A.child;R;){if(R===c){C=!0,c=A,d=m;break}if(R===d){C=!0,d=A,c=m;break}R=R.sibling}if(!C)throw Error(e(189))}}if(c.alternate!==d)throw Error(e(190))}if(c.tag!==3)throw Error(e(188));return c.stateNode.current===c?s:i}function Fi(s){return s=hn(s),s!==null?ms(s):null}function ms(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=ms(s);if(i!==null)return i;s=s.sibling}return null}var Oi=t.unstable_scheduleCallback,zg=t.unstable_cancelCallback,jg=t.unstable_shouldYield,Ed=t.unstable_requestPaint,Zt=t.unstable_now,S0=t.unstable_getCurrentPriorityLevel,xd=t.unstable_ImmediatePriority,Fe=t.unstable_UserBlockingPriority,lr=t.unstable_NormalPriority,Cd=t.unstable_LowPriority,Bi=t.unstable_IdlePriority,pl=null,dn=null;function Hg(s){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(pl,s,void 0,(s.current.flags&128)===128)}catch{}}var ys=Math.clz32?Math.clz32:$g,ns=Math.log,nu=Math.LN2;function $g(s){return s>>>=0,s===0?32:31-(ns(s)/nu|0)|0}var ui=64,Ga=4194304;function Xa(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function it(s,i){var c=s.pendingLanes;if(c===0)return 0;var d=0,m=s.suspendedLanes,A=s.pingedLanes,C=c&268435455;if(C!==0){var R=C&~m;R!==0?d=Xa(R):(A&=C,A!==0&&(d=Xa(A)))}else C=c&~m,C!==0?d=Xa(C):A!==0&&(d=Xa(A));if(d===0)return 0;if(i!==0&&i!==d&&(i&m)===0&&(m=d&-d,A=i&-i,m>=A||m===16&&(A&4194240)!==0))return i;if((d&4)!==0&&(d|=c&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=d;0<i;)c=31-ys(i),m=1<<c,d|=s[c],i&=~m;return d}function dt(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ce(s,i){for(var c=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,A=s.pendingLanes;0<A;){var C=31-ys(A),R=1<<C,N=m[C];N===-1?((R&c)===0||(R&d)!==0)&&(m[C]=dt(R,i)):N<=i&&(s.expiredLanes|=R),A&=~R}}function rn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ns(){var s=ui;return ui<<=1,(ui&4194240)===0&&(ui=64),s}function Xe(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function ss(s,i,c){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-ys(i),s[i]=c}function bn(s,i){var c=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-ys(c),A=1<<m;i[m]=0,d[m]=-1,s[m]=-1,c&=~A}}function su(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var d=31-ys(c),m=1<<d;m&i|s[d]&i&&(s[d]|=i),c&=~m}}var me=0;function rS(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var aS,b0,oS,lS,cS,E0=!1,Wg=[],qa=null,Ya=null,Ka=null,_d=new Map,kd=new Map,Qa=[],CC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uS(s,i){switch(s){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":_d.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":kd.delete(i.pointerId)}}function Td(s,i,c,d,m,A){return s===null||s.nativeEvent!==A?(s={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:A,targetContainers:[m]},i!==null&&(i=Hd(i),i!==null&&b0(i)),s):(s.eventSystemFlags|=d,i=s.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),s)}function _C(s,i,c,d,m){switch(i){case"focusin":return qa=Td(qa,s,i,c,d,m),!0;case"dragenter":return Ya=Td(Ya,s,i,c,d,m),!0;case"mouseover":return Ka=Td(Ka,s,i,c,d,m),!0;case"pointerover":var A=m.pointerId;return _d.set(A,Td(_d.get(A)||null,s,i,c,d,m)),!0;case"gotpointercapture":return A=m.pointerId,kd.set(A,Td(kd.get(A)||null,s,i,c,d,m)),!0}return!1}function hS(s){var i=gl(s.target);if(i!==null){var c=Ht(i);if(c!==null){if(i=c.tag,i===13){if(i=Ft(c),i!==null){s.blockedOn=i,cS(s.priority,function(){oS(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Vg(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=C0(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);eu=d,c.target.dispatchEvent(d),eu=null}else return i=Hd(c),i!==null&&b0(i),s.blockedOn=c,!1;i.shift()}return!0}function dS(s,i,c){Vg(s)&&c.delete(i)}function kC(){E0=!1,qa!==null&&Vg(qa)&&(qa=null),Ya!==null&&Vg(Ya)&&(Ya=null),Ka!==null&&Vg(Ka)&&(Ka=null),_d.forEach(dS),kd.forEach(dS)}function Pd(s,i){s.blockedOn===i&&(s.blockedOn=null,E0||(E0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kC)))}function Rd(s){function i(m){return Pd(m,s)}if(0<Wg.length){Pd(Wg[0],s);for(var c=1;c<Wg.length;c++){var d=Wg[c];d.blockedOn===s&&(d.blockedOn=null)}}for(qa!==null&&Pd(qa,s),Ya!==null&&Pd(Ya,s),Ka!==null&&Pd(Ka,s),_d.forEach(i),kd.forEach(i),c=0;c<Qa.length;c++)d=Qa[c],d.blockedOn===s&&(d.blockedOn=null);for(;0<Qa.length&&(c=Qa[0],c.blockedOn===null);)hS(c),c.blockedOn===null&&Qa.shift()}var iu=L.ReactCurrentBatchConfig,Gg=!0;function TC(s,i,c,d){var m=me,A=iu.transition;iu.transition=null;try{me=1,x0(s,i,c,d)}finally{me=m,iu.transition=A}}function PC(s,i,c,d){var m=me,A=iu.transition;iu.transition=null;try{me=4,x0(s,i,c,d)}finally{me=m,iu.transition=A}}function x0(s,i,c,d){if(Gg){var m=C0(s,i,c,d);if(m===null)H0(s,i,d,Xg,c),uS(s,d);else if(_C(m,s,i,c,d))d.stopPropagation();else if(uS(s,d),i&4&&-1<CC.indexOf(s)){for(;m!==null;){var A=Hd(m);if(A!==null&&aS(A),A=C0(s,i,c,d),A===null&&H0(s,i,d,Xg,c),A===m)break;m=A}m!==null&&d.stopPropagation()}else H0(s,i,d,null,c)}}var Xg=null;function C0(s,i,c,d){if(Xg=null,s=yd(d),s=gl(s),s!==null)if(i=Ht(s),i===null)s=null;else if(c=i.tag,c===13){if(s=Ft(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return Xg=s,null}function fS(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S0()){case xd:return 1;case Fe:return 4;case lr:case Cd:return 16;case Bi:return 536870912;default:return 16}default:return 16}}var Za=null,_0=null,qg=null;function pS(){if(qg)return qg;var s,i=_0,c=i.length,d,m="value"in Za?Za.value:Za.textContent,A=m.length;for(s=0;s<c&&i[s]===m[s];s++);var C=c-s;for(d=1;d<=C&&i[c-d]===m[A-d];d++);return qg=m.slice(s,1<d?1-d:void 0)}function Yg(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Kg(){return!0}function gS(){return!1}function Is(s){function i(c,d,m,A,C){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=A,this.target=C,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(c=s[R],this[R]=c?c(A):A[R]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Kg:gS,this.isPropagationStopped=gS,this}return tt(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Kg)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Kg)},persist:function(){},isPersistent:Kg}),i}var ru={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},k0=Is(ru),Md=tt({},ru,{view:0,detail:0}),RC=Is(Md),T0,P0,Ld,Qg=tt({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M0,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ld&&(Ld&&s.type==="mousemove"?(T0=s.screenX-Ld.screenX,P0=s.screenY-Ld.screenY):P0=T0=0,Ld=s),T0)},movementY:function(s){return"movementY"in s?s.movementY:P0}}),mS=Is(Qg),MC=tt({},Qg,{dataTransfer:0}),LC=Is(MC),DC=tt({},Md,{relatedTarget:0}),R0=Is(DC),NC=tt({},ru,{animationName:0,elapsedTime:0,pseudoElement:0}),IC=Is(NC),FC=tt({},ru,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),OC=Is(FC),BC=tt({},ru,{data:0}),yS=Is(BC),UC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HC(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=jC[s])?!!i[s]:!1}function M0(){return HC}var $C=tt({},Md,{key:function(s){if(s.key){var i=UC[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Yg(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?zC[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M0,charCode:function(s){return s.type==="keypress"?Yg(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Yg(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),WC=Is($C),VC=tt({},Qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vS=Is(VC),GC=tt({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M0}),XC=Is(GC),qC=tt({},ru,{propertyName:0,elapsedTime:0,pseudoElement:0}),YC=Is(qC),KC=tt({},Qg,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),QC=Is(KC),ZC=[9,13,27,32],L0=u&&"CompositionEvent"in window,Dd=null;u&&"documentMode"in document&&(Dd=document.documentMode);var JC=u&&"TextEvent"in window&&!Dd,wS=u&&(!L0||Dd&&8<Dd&&11>=Dd),AS=" ",SS=!1;function bS(s,i){switch(s){case"keyup":return ZC.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ES(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var au=!1;function t_(s,i){switch(s){case"compositionend":return ES(i);case"keypress":return i.which!==32?null:(SS=!0,AS);case"textInput":return s=i.data,s===AS&&SS?null:s;default:return null}}function e_(s,i){if(au)return s==="compositionend"||!L0&&bS(s,i)?(s=pS(),qg=_0=Za=null,au=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return wS&&i.locale!=="ko"?null:i.data;default:return null}}var n_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xS(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!n_[s.type]:i==="textarea"}function CS(s,i,c,d){Bg(d),i=nm(i,"onChange"),0<i.length&&(c=new k0("onChange","change",null,c,d),s.push({event:c,listeners:i}))}var Nd=null,Id=null;function s_(s){$S(s,0)}function Zg(s){var i=hu(s);if(Ni(i))return s}function i_(s,i){if(s==="change")return i}var _S=!1;if(u){var D0;if(u){var N0="oninput"in document;if(!N0){var kS=document.createElement("div");kS.setAttribute("oninput","return;"),N0=typeof kS.oninput=="function"}D0=N0}else D0=!1;_S=D0&&(!document.documentMode||9<document.documentMode)}function TS(){Nd&&(Nd.detachEvent("onpropertychange",PS),Id=Nd=null)}function PS(s){if(s.propertyName==="value"&&Zg(Id)){var i=[];CS(i,Id,s,yd(s)),$(s_,i)}}function r_(s,i,c){s==="focusin"?(TS(),Nd=i,Id=c,Nd.attachEvent("onpropertychange",PS)):s==="focusout"&&TS()}function a_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zg(Id)}function o_(s,i){if(s==="click")return Zg(i)}function l_(s,i){if(s==="input"||s==="change")return Zg(i)}function c_(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Ui=typeof Object.is=="function"?Object.is:c_;function Fd(s,i){if(Ui(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!h.call(i,m)||!Ui(s[m],i[m]))return!1}return!0}function RS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function MS(s,i){var c=RS(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=i&&d>=i)return{node:c,offset:i-s};s=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=RS(c)}}function LS(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?LS(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function DS(){for(var s=window,i=jr();i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=jr(s.document)}return i}function I0(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function u_(s){var i=DS(),c=s.focusedElem,d=s.selectionRange;if(i!==c&&c&&c.ownerDocument&&LS(c.ownerDocument.documentElement,c)){if(d!==null&&I0(c)){if(i=d.start,s=d.end,s===void 0&&(s=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(s,c.value.length);else if(s=(i=c.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var m=c.textContent.length,A=Math.min(d.start,m);d=d.end===void 0?A:Math.min(d.end,m),!s.extend&&A>d&&(m=d,d=A,A=m),m=MS(c,A);var C=MS(c,d);m&&C&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==C.node||s.focusOffset!==C.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),s.removeAllRanges(),A>d?(s.addRange(i),s.extend(C.node,C.offset)):(i.setEnd(C.node,C.offset),s.addRange(i)))}}for(i=[],s=c;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)s=i[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var h_=u&&"documentMode"in document&&11>=document.documentMode,ou=null,F0=null,Od=null,O0=!1;function NS(s,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;O0||ou==null||ou!==jr(d)||(d=ou,"selectionStart"in d&&I0(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Od&&Fd(Od,d)||(Od=d,d=nm(F0,"onSelect"),0<d.length&&(i=new k0("onSelect","select",null,i,c),s.push({event:i,listeners:d}),i.target=ou)))}function Jg(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var lu={animationend:Jg("Animation","AnimationEnd"),animationiteration:Jg("Animation","AnimationIteration"),animationstart:Jg("Animation","AnimationStart"),transitionend:Jg("Transition","TransitionEnd")},B0={},IS={};u&&(IS=document.createElement("div").style,"AnimationEvent"in window||(delete lu.animationend.animation,delete lu.animationiteration.animation,delete lu.animationstart.animation),"TransitionEvent"in window||delete lu.transitionend.transition);function tm(s){if(B0[s])return B0[s];if(!lu[s])return s;var i=lu[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in IS)return B0[s]=i[c];return s}var FS=tm("animationend"),OS=tm("animationiteration"),BS=tm("animationstart"),US=tm("transitionend"),zS=new Map,jS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(s,i){zS.set(s,i),o(i,[s])}for(var U0=0;U0<jS.length;U0++){var z0=jS[U0],d_=z0.toLowerCase(),f_=z0[0].toUpperCase()+z0.slice(1);Ja(d_,"on"+f_)}Ja(FS,"onAnimationEnd"),Ja(OS,"onAnimationIteration"),Ja(BS,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(US,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bd));function HS(s,i,c){var d=s.type||"unknown-event";s.currentTarget=c,It(d,i,void 0,s),s.currentTarget=null}function $S(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],m=d.event;d=d.listeners;t:{var A=void 0;if(i)for(var C=d.length-1;0<=C;C--){var R=d[C],N=R.instance,j=R.currentTarget;if(R=R.listener,N!==A&&m.isPropagationStopped())break t;HS(m,R,j),A=N}else for(C=0;C<d.length;C++){if(R=d[C],N=R.instance,j=R.currentTarget,R=R.listener,N!==A&&m.isPropagationStopped())break t;HS(m,R,j),A=N}}}if(fe)throw s=pe,fe=!1,pe=null,s}function De(s,i){var c=i[q0];c===void 0&&(c=i[q0]=new Set);var d=s+"__bubble";c.has(d)||(WS(i,s,2,!1),c.add(d))}function j0(s,i,c){var d=0;i&&(d|=4),WS(c,s,d,i)}var em="_reactListening"+Math.random().toString(36).slice(2);function Ud(s){if(!s[em]){s[em]=!0,n.forEach(function(c){c!=="selectionchange"&&(p_.has(c)||j0(c,!1,s),j0(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[em]||(i[em]=!0,j0("selectionchange",!1,i))}}function WS(s,i,c,d){switch(fS(i)){case 1:var m=TC;break;case 4:m=PC;break;default:m=x0}c=m.bind(null,i,c,s),m=void 0,!at||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),d?m!==void 0?s.addEventListener(i,c,{capture:!0,passive:m}):s.addEventListener(i,c,!0):m!==void 0?s.addEventListener(i,c,{passive:m}):s.addEventListener(i,c,!1)}function H0(s,i,c,d,m){var A=d;if((i&1)===0&&(i&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var R=d.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(C===4)for(C=d.return;C!==null;){var N=C.tag;if((N===3||N===4)&&(N=C.stateNode.containerInfo,N===m||N.nodeType===8&&N.parentNode===m))return;C=C.return}for(;R!==null;){if(C=gl(R),C===null)return;if(N=C.tag,N===5||N===6){d=A=C;continue t}R=R.parentNode}}d=d.return}$(function(){var j=A,q=yd(c),Q=[];t:{var X=zS.get(s);if(X!==void 0){var ht=k0,yt=s;switch(s){case"keypress":if(Yg(c)===0)break t;case"keydown":case"keyup":ht=WC;break;case"focusin":yt="focus",ht=R0;break;case"focusout":yt="blur",ht=R0;break;case"beforeblur":case"afterblur":ht=R0;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=mS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=LC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=XC;break;case FS:case OS:case BS:ht=IC;break;case US:ht=YC;break;case"scroll":ht=RC;break;case"wheel":ht=QC;break;case"copy":case"cut":case"paste":ht=OC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=vS}var At=(i&4)!==0,en=!At&&s==="scroll",B=At?X!==null?X+"Capture":null:X;At=[];for(var F=j,z;F!==null;){z=F;var J=z.stateNode;if(z.tag===5&&J!==null&&(z=J,B!==null&&(J=W(F,B),J!=null&&At.push(zd(F,J,z)))),en)break;F=F.return}0<At.length&&(X=new ht(X,yt,null,c,q),Q.push({event:X,listeners:At}))}}if((i&7)===0){t:{if(X=s==="mouseover"||s==="pointerover",ht=s==="mouseout"||s==="pointerout",X&&c!==eu&&(yt=c.relatedTarget||c.fromElement)&&(gl(yt)||yt[Wr]))break t;if((ht||X)&&(X=q.window===q?q:(X=q.ownerDocument)?X.defaultView||X.parentWindow:window,ht?(yt=c.relatedTarget||c.toElement,ht=j,yt=yt?gl(yt):null,yt!==null&&(en=Ht(yt),yt!==en||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(ht=null,yt=j),ht!==yt)){if(At=mS,J="onMouseLeave",B="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(At=vS,J="onPointerLeave",B="onPointerEnter",F="pointer"),en=ht==null?X:hu(ht),z=yt==null?X:hu(yt),X=new At(J,F+"leave",ht,c,q),X.target=en,X.relatedTarget=z,J=null,gl(q)===j&&(At=new At(B,F+"enter",yt,c,q),At.target=z,At.relatedTarget=en,J=At),en=J,ht&&yt)e:{for(At=ht,B=yt,F=0,z=At;z;z=cu(z))F++;for(z=0,J=B;J;J=cu(J))z++;for(;0<F-z;)At=cu(At),F--;for(;0<z-F;)B=cu(B),z--;for(;F--;){if(At===B||B!==null&&At===B.alternate)break e;At=cu(At),B=cu(B)}At=null}else At=null;ht!==null&&VS(Q,X,ht,At,!1),yt!==null&&en!==null&&VS(Q,en,yt,At,!0)}}t:{if(X=j?hu(j):window,ht=X.nodeName&&X.nodeName.toLowerCase(),ht==="select"||ht==="input"&&X.type==="file")var xt=i_;else if(xS(X))if(_S)xt=l_;else{xt=a_;var Rt=r_}else(ht=X.nodeName)&&ht.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(xt=o_);if(xt&&(xt=xt(s,j))){CS(Q,xt,c,q);break t}Rt&&Rt(s,X,j),s==="focusout"&&(Rt=X._wrapperState)&&Rt.controlled&&X.type==="number"&&ul(X,"number",X.value)}switch(Rt=j?hu(j):window,s){case"focusin":(xS(Rt)||Rt.contentEditable==="true")&&(ou=Rt,F0=j,Od=null);break;case"focusout":Od=F0=ou=null;break;case"mousedown":O0=!0;break;case"contextmenu":case"mouseup":case"dragend":O0=!1,NS(Q,c,q);break;case"selectionchange":if(h_)break;case"keydown":case"keyup":NS(Q,c,q)}var Mt;if(L0)t:{switch(s){case"compositionstart":var Ot="onCompositionStart";break t;case"compositionend":Ot="onCompositionEnd";break t;case"compositionupdate":Ot="onCompositionUpdate";break t}Ot=void 0}else au?bS(s,c)&&(Ot="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ot="onCompositionStart");Ot&&(wS&&c.locale!=="ko"&&(au||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&au&&(Mt=pS()):(Za=q,_0="value"in Za?Za.value:Za.textContent,au=!0)),Rt=nm(j,Ot),0<Rt.length&&(Ot=new yS(Ot,s,null,c,q),Q.push({event:Ot,listeners:Rt}),Mt?Ot.data=Mt:(Mt=ES(c),Mt!==null&&(Ot.data=Mt)))),(Mt=JC?t_(s,c):e_(s,c))&&(j=nm(j,"onBeforeInput"),0<j.length&&(q=new yS("onBeforeInput","beforeinput",null,c,q),Q.push({event:q,listeners:j}),q.data=Mt))}$S(Q,i)})}function zd(s,i,c){return{instance:s,listener:i,currentTarget:c}}function nm(s,i){for(var c=i+"Capture",d=[];s!==null;){var m=s,A=m.stateNode;m.tag===5&&A!==null&&(m=A,A=W(s,c),A!=null&&d.unshift(zd(s,A,m)),A=W(s,i),A!=null&&d.push(zd(s,A,m))),s=s.return}return d}function cu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function VS(s,i,c,d,m){for(var A=i._reactName,C=[];c!==null&&c!==d;){var R=c,N=R.alternate,j=R.stateNode;if(N!==null&&N===d)break;R.tag===5&&j!==null&&(R=j,m?(N=W(c,A),N!=null&&C.unshift(zd(c,N,R))):m||(N=W(c,A),N!=null&&C.push(zd(c,N,R)))),c=c.return}C.length!==0&&s.push({event:i,listeners:C})}var g_=/\r\n?/g,m_=/\u0000|\uFFFD/g;function GS(s){return(typeof s=="string"?s:""+s).replace(g_,`
`).replace(m_,"")}function sm(s,i,c){if(i=GS(i),GS(s)!==i&&c)throw Error(e(425))}function im(){}var $0=null,W0=null;function V0(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var G0=typeof setTimeout=="function"?setTimeout:void 0,y_=typeof clearTimeout=="function"?clearTimeout:void 0,XS=typeof Promise=="function"?Promise:void 0,v_=typeof queueMicrotask=="function"?queueMicrotask:typeof XS<"u"?function(s){return XS.resolve(null).then(s).catch(w_)}:G0;function w_(s){setTimeout(function(){throw s})}function X0(s,i){var c=i,d=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(d===0){s.removeChild(m),Rd(i);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=m}while(c);Rd(i)}function to(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function qS(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}var uu=Math.random().toString(36).slice(2),cr="__reactFiber$"+uu,jd="__reactProps$"+uu,Wr="__reactContainer$"+uu,q0="__reactEvents$"+uu,A_="__reactListeners$"+uu,S_="__reactHandles$"+uu;function gl(s){var i=s[cr];if(i)return i;for(var c=s.parentNode;c;){if(i=c[Wr]||c[cr]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=qS(s);s!==null;){if(c=s[cr])return c;s=qS(s)}return i}s=c,c=s.parentNode}return null}function Hd(s){return s=s[cr]||s[Wr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function hu(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(e(33))}function rm(s){return s[jd]||null}var Y0=[],du=-1;function eo(s){return{current:s}}function Ne(s){0>du||(s.current=Y0[du],Y0[du]=null,du--)}function Pe(s,i){du++,Y0[du]=s.current,s.current=i}var no={},Wn=eo(no),vs=eo(!1),ml=no;function fu(s,i){var c=s.type.contextTypes;if(!c)return no;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var m={},A;for(A in c)m[A]=i[A];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=m),m}function ws(s){return s=s.childContextTypes,s!=null}function am(){Ne(vs),Ne(Wn)}function YS(s,i,c){if(Wn.current!==no)throw Error(e(168));Pe(Wn,i),Pe(vs,c)}function KS(s,i,c){var d=s.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var m in d)if(!(m in i))throw Error(e(108,Dt(s)||"Unknown",m));return tt({},c,d)}function om(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||no,ml=Wn.current,Pe(Wn,s),Pe(vs,vs.current),!0}function QS(s,i,c){var d=s.stateNode;if(!d)throw Error(e(169));c?(s=KS(s,i,ml),d.__reactInternalMemoizedMergedChildContext=s,Ne(vs),Ne(Wn),Pe(Wn,s)):Ne(vs),Pe(vs,c)}var Vr=null,lm=!1,K0=!1;function ZS(s){Vr===null?Vr=[s]:Vr.push(s)}function b_(s){lm=!0,ZS(s)}function so(){if(!K0&&Vr!==null){K0=!0;var s=0,i=me;try{var c=Vr;for(me=1;s<c.length;s++){var d=c[s];do d=d(!0);while(d!==null)}Vr=null,lm=!1}catch(m){throw Vr!==null&&(Vr=Vr.slice(s+1)),Oi(xd,so),m}finally{me=i,K0=!1}}return null}var pu=[],gu=0,cm=null,um=0,hi=[],di=0,yl=null,Gr=1,Xr="";function vl(s,i){pu[gu++]=um,pu[gu++]=cm,cm=s,um=i}function JS(s,i,c){hi[di++]=Gr,hi[di++]=Xr,hi[di++]=yl,yl=s;var d=Gr;s=Xr;var m=32-ys(d)-1;d&=~(1<<m),c+=1;var A=32-ys(i)+m;if(30<A){var C=m-m%5;A=(d&(1<<C)-1).toString(32),d>>=C,m-=C,Gr=1<<32-ys(i)+m|c<<m|d,Xr=A+s}else Gr=1<<A|c<<m|d,Xr=s}function Q0(s){s.return!==null&&(vl(s,1),JS(s,1,0))}function Z0(s){for(;s===cm;)cm=pu[--gu],pu[gu]=null,um=pu[--gu],pu[gu]=null;for(;s===yl;)yl=hi[--di],hi[di]=null,Xr=hi[--di],hi[di]=null,Gr=hi[--di],hi[di]=null}var Fs=null,Os=null,Oe=!1,zi=null;function tb(s,i){var c=mi(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=s,i=s.deletions,i===null?(s.deletions=[c],s.flags|=16):i.push(c)}function eb(s,i){switch(s.tag){case 5:var c=s.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,Fs=s,Os=to(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,Fs=s,Os=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=yl!==null?{id:Gr,overflow:Xr}:null,s.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=mi(18,null,null,0),c.stateNode=i,c.return=s,s.child=c,Fs=s,Os=null,!0):!1;default:return!1}}function J0(s){return(s.mode&1)!==0&&(s.flags&128)===0}function tv(s){if(Oe){var i=Os;if(i){var c=i;if(!eb(s,i)){if(J0(s))throw Error(e(418));i=to(c.nextSibling);var d=Fs;i&&eb(s,i)?tb(d,c):(s.flags=s.flags&-4097|2,Oe=!1,Fs=s)}}else{if(J0(s))throw Error(e(418));s.flags=s.flags&-4097|2,Oe=!1,Fs=s}}}function nb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Fs=s}function hm(s){if(s!==Fs)return!1;if(!Oe)return nb(s),Oe=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!V0(s.type,s.memoizedProps)),i&&(i=Os)){if(J0(s))throw sb(),Error(e(418));for(;i;)tb(s,i),i=to(i.nextSibling)}if(nb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(e(317));t:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(i===0){Os=to(s.nextSibling);break t}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}s=s.nextSibling}Os=null}}else Os=Fs?to(s.stateNode.nextSibling):null;return!0}function sb(){for(var s=Os;s;)s=to(s.nextSibling)}function mu(){Os=Fs=null,Oe=!1}function ev(s){zi===null?zi=[s]:zi.push(s)}var E_=L.ReactCurrentBatchConfig;function $d(s,i,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(e(309));var d=c.stateNode}if(!d)throw Error(e(147,s));var m=d,A=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===A?i.ref:(i=function(C){var R=m.refs;C===null?delete R[A]:R[A]=C},i._stringRef=A,i)}if(typeof s!="string")throw Error(e(284));if(!c._owner)throw Error(e(290,s))}return s}function dm(s,i){throw s=Object.prototype.toString.call(i),Error(e(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function ib(s){var i=s._init;return i(s._payload)}function rb(s){function i(B,F){if(s){var z=B.deletions;z===null?(B.deletions=[F],B.flags|=16):z.push(F)}}function c(B,F){if(!s)return null;for(;F!==null;)i(B,F),F=F.sibling;return null}function d(B,F){for(B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function m(B,F){return B=ho(B,F),B.index=0,B.sibling=null,B}function A(B,F,z){return B.index=z,s?(z=B.alternate,z!==null?(z=z.index,z<F?(B.flags|=2,F):z):(B.flags|=2,F)):(B.flags|=1048576,F)}function C(B){return s&&B.alternate===null&&(B.flags|=2),B}function R(B,F,z,J){return F===null||F.tag!==6?(F=Gv(z,B.mode,J),F.return=B,F):(F=m(F,z),F.return=B,F)}function N(B,F,z,J){var xt=z.type;return xt===U?q(B,F,z.props.children,J,z.key):F!==null&&(F.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===lt&&ib(xt)===F.type)?(J=m(F,z.props),J.ref=$d(B,F,z),J.return=B,J):(J=Fm(z.type,z.key,z.props,null,B.mode,J),J.ref=$d(B,F,z),J.return=B,J)}function j(B,F,z,J){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=Xv(z,B.mode,J),F.return=B,F):(F=m(F,z.children||[]),F.return=B,F)}function q(B,F,z,J,xt){return F===null||F.tag!==7?(F=_l(z,B.mode,J,xt),F.return=B,F):(F=m(F,z),F.return=B,F)}function Q(B,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Gv(""+F,B.mode,z),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case D:return z=Fm(F.type,F.key,F.props,null,B.mode,z),z.ref=$d(B,null,F),z.return=B,z;case I:return F=Xv(F,B.mode,z),F.return=B,F;case lt:var J=F._init;return Q(B,J(F._payload),z)}if(ne(F)||ft(F))return F=_l(F,B.mode,z,null),F.return=B,F;dm(B,F)}return null}function X(B,F,z,J){var xt=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return xt!==null?null:R(B,F,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D:return z.key===xt?N(B,F,z,J):null;case I:return z.key===xt?j(B,F,z,J):null;case lt:return xt=z._init,X(B,F,xt(z._payload),J)}if(ne(z)||ft(z))return xt!==null?null:q(B,F,z,J,null);dm(B,z)}return null}function ht(B,F,z,J,xt){if(typeof J=="string"&&J!==""||typeof J=="number")return B=B.get(z)||null,R(F,B,""+J,xt);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case D:return B=B.get(J.key===null?z:J.key)||null,N(F,B,J,xt);case I:return B=B.get(J.key===null?z:J.key)||null,j(F,B,J,xt);case lt:var Rt=J._init;return ht(B,F,z,Rt(J._payload),xt)}if(ne(J)||ft(J))return B=B.get(z)||null,q(F,B,J,xt,null);dm(F,J)}return null}function yt(B,F,z,J){for(var xt=null,Rt=null,Mt=F,Ot=F=0,Cn=null;Mt!==null&&Ot<z.length;Ot++){Mt.index>Ot?(Cn=Mt,Mt=null):Cn=Mt.sibling;var le=X(B,Mt,z[Ot],J);if(le===null){Mt===null&&(Mt=Cn);break}s&&Mt&&le.alternate===null&&i(B,Mt),F=A(le,F,Ot),Rt===null?xt=le:Rt.sibling=le,Rt=le,Mt=Cn}if(Ot===z.length)return c(B,Mt),Oe&&vl(B,Ot),xt;if(Mt===null){for(;Ot<z.length;Ot++)Mt=Q(B,z[Ot],J),Mt!==null&&(F=A(Mt,F,Ot),Rt===null?xt=Mt:Rt.sibling=Mt,Rt=Mt);return Oe&&vl(B,Ot),xt}for(Mt=d(B,Mt);Ot<z.length;Ot++)Cn=ht(Mt,B,Ot,z[Ot],J),Cn!==null&&(s&&Cn.alternate!==null&&Mt.delete(Cn.key===null?Ot:Cn.key),F=A(Cn,F,Ot),Rt===null?xt=Cn:Rt.sibling=Cn,Rt=Cn);return s&&Mt.forEach(function(fo){return i(B,fo)}),Oe&&vl(B,Ot),xt}function At(B,F,z,J){var xt=ft(z);if(typeof xt!="function")throw Error(e(150));if(z=xt.call(z),z==null)throw Error(e(151));for(var Rt=xt=null,Mt=F,Ot=F=0,Cn=null,le=z.next();Mt!==null&&!le.done;Ot++,le=z.next()){Mt.index>Ot?(Cn=Mt,Mt=null):Cn=Mt.sibling;var fo=X(B,Mt,le.value,J);if(fo===null){Mt===null&&(Mt=Cn);break}s&&Mt&&fo.alternate===null&&i(B,Mt),F=A(fo,F,Ot),Rt===null?xt=fo:Rt.sibling=fo,Rt=fo,Mt=Cn}if(le.done)return c(B,Mt),Oe&&vl(B,Ot),xt;if(Mt===null){for(;!le.done;Ot++,le=z.next())le=Q(B,le.value,J),le!==null&&(F=A(le,F,Ot),Rt===null?xt=le:Rt.sibling=le,Rt=le);return Oe&&vl(B,Ot),xt}for(Mt=d(B,Mt);!le.done;Ot++,le=z.next())le=ht(Mt,B,Ot,le.value,J),le!==null&&(s&&le.alternate!==null&&Mt.delete(le.key===null?Ot:le.key),F=A(le,F,Ot),Rt===null?xt=le:Rt.sibling=le,Rt=le);return s&&Mt.forEach(function(nk){return i(B,nk)}),Oe&&vl(B,Ot),xt}function en(B,F,z,J){if(typeof z=="object"&&z!==null&&z.type===U&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case D:t:{for(var xt=z.key,Rt=F;Rt!==null;){if(Rt.key===xt){if(xt=z.type,xt===U){if(Rt.tag===7){c(B,Rt.sibling),F=m(Rt,z.props.children),F.return=B,B=F;break t}}else if(Rt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===lt&&ib(xt)===Rt.type){c(B,Rt.sibling),F=m(Rt,z.props),F.ref=$d(B,Rt,z),F.return=B,B=F;break t}c(B,Rt);break}else i(B,Rt);Rt=Rt.sibling}z.type===U?(F=_l(z.props.children,B.mode,J,z.key),F.return=B,B=F):(J=Fm(z.type,z.key,z.props,null,B.mode,J),J.ref=$d(B,F,z),J.return=B,B=J)}return C(B);case I:t:{for(Rt=z.key;F!==null;){if(F.key===Rt)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){c(B,F.sibling),F=m(F,z.children||[]),F.return=B,B=F;break t}else{c(B,F);break}else i(B,F);F=F.sibling}F=Xv(z,B.mode,J),F.return=B,B=F}return C(B);case lt:return Rt=z._init,en(B,F,Rt(z._payload),J)}if(ne(z))return yt(B,F,z,J);if(ft(z))return At(B,F,z,J);dm(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,F!==null&&F.tag===6?(c(B,F.sibling),F=m(F,z),F.return=B,B=F):(c(B,F),F=Gv(z,B.mode,J),F.return=B,B=F),C(B)):c(B,F)}return en}var yu=rb(!0),ab=rb(!1),fm=eo(null),pm=null,vu=null,nv=null;function sv(){nv=vu=pm=null}function iv(s){var i=fm.current;Ne(fm),s._currentValue=i}function rv(s,i,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),s===c)break;s=s.return}}function wu(s,i){pm=s,nv=vu=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(As=!0),s.firstContext=null)}function fi(s){var i=s._currentValue;if(nv!==s)if(s={context:s,memoizedValue:i,next:null},vu===null){if(pm===null)throw Error(e(308));vu=s,pm.dependencies={lanes:0,firstContext:s}}else vu=vu.next=s;return i}var wl=null;function av(s){wl===null?wl=[s]:wl.push(s)}function ob(s,i,c,d){var m=i.interleaved;return m===null?(c.next=c,av(i)):(c.next=m.next,m.next=c),i.interleaved=c,qr(s,d)}function qr(s,i){s.lanes|=i;var c=s.alternate;for(c!==null&&(c.lanes|=i),c=s,s=s.return;s!==null;)s.childLanes|=i,c=s.alternate,c!==null&&(c.childLanes|=i),c=s,s=s.return;return c.tag===3?c.stateNode:null}var io=!1;function ov(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lb(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Yr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function ro(s,i,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(se&2)!==0){var m=d.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i,qr(s,c)}return m=d.interleaved,m===null?(i.next=i,av(d)):(i.next=m.next,m.next=i),d.interleaved=i,qr(s,c)}function gm(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var d=i.lanes;d&=s.pendingLanes,c|=d,i.lanes=c,su(s,c)}}function cb(s,i){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,A=null;if(c=c.firstBaseUpdate,c!==null){do{var C={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};A===null?m=A=C:A=A.next=C,c=c.next}while(c!==null);A===null?m=A=i:A=A.next=i}else m=A=i;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:A,shared:d.shared,effects:d.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}function mm(s,i,c,d){var m=s.updateQueue;io=!1;var A=m.firstBaseUpdate,C=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var N=R,j=N.next;N.next=null,C===null?A=j:C.next=j,C=N;var q=s.alternate;q!==null&&(q=q.updateQueue,R=q.lastBaseUpdate,R!==C&&(R===null?q.firstBaseUpdate=j:R.next=j,q.lastBaseUpdate=N))}if(A!==null){var Q=m.baseState;C=0,q=j=N=null,R=A;do{var X=R.lane,ht=R.eventTime;if((d&X)===X){q!==null&&(q=q.next={eventTime:ht,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});t:{var yt=s,At=R;switch(X=i,ht=c,At.tag){case 1:if(yt=At.payload,typeof yt=="function"){Q=yt.call(ht,Q,X);break t}Q=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=At.payload,X=typeof yt=="function"?yt.call(ht,Q,X):yt,X==null)break t;Q=tt({},Q,X);break t;case 2:io=!0}}R.callback!==null&&R.lane!==0&&(s.flags|=64,X=m.effects,X===null?m.effects=[R]:X.push(R))}else ht={eventTime:ht,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},q===null?(j=q=ht,N=Q):q=q.next=ht,C|=X;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;X=R,R=X.next,X.next=null,m.lastBaseUpdate=X,m.shared.pending=null}}while(!0);if(q===null&&(N=Q),m.baseState=N,m.firstBaseUpdate=j,m.lastBaseUpdate=q,i=m.shared.interleaved,i!==null){m=i;do C|=m.lane,m=m.next;while(m!==i)}else A===null&&(m.shared.lanes=0);bl|=C,s.lanes=C,s.memoizedState=Q}}function ub(s,i,c){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var d=s[i],m=d.callback;if(m!==null){if(d.callback=null,d=c,typeof m!="function")throw Error(e(191,m));m.call(d)}}}var Wd={},ur=eo(Wd),Vd=eo(Wd),Gd=eo(Wd);function Al(s){if(s===Wd)throw Error(e(174));return s}function lv(s,i){switch(Pe(Gd,i),Pe(Vd,s),Pe(ur,Wd),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:gs(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=gs(i,s)}Ne(ur),Pe(ur,i)}function Au(){Ne(ur),Ne(Vd),Ne(Gd)}function hb(s){Al(Gd.current);var i=Al(ur.current),c=gs(i,s.type);i!==c&&(Pe(Vd,s),Pe(ur,c))}function cv(s){Vd.current===s&&(Ne(ur),Ne(Vd))}var He=eo(0);function ym(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var uv=[];function hv(){for(var s=0;s<uv.length;s++)uv[s]._workInProgressVersionPrimary=null;uv.length=0}var vm=L.ReactCurrentDispatcher,dv=L.ReactCurrentBatchConfig,Sl=0,$e=null,fn=null,En=null,wm=!1,Xd=!1,qd=0,x_=0;function Vn(){throw Error(e(321))}function fv(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!Ui(s[c],i[c]))return!1;return!0}function pv(s,i,c,d,m,A){if(Sl=A,$e=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,vm.current=s===null||s.memoizedState===null?T_:P_,s=c(d,m),Xd){A=0;do{if(Xd=!1,qd=0,25<=A)throw Error(e(301));A+=1,En=fn=null,i.updateQueue=null,vm.current=R_,s=c(d,m)}while(Xd)}if(vm.current=bm,i=fn!==null&&fn.next!==null,Sl=0,En=fn=$e=null,wm=!1,i)throw Error(e(300));return s}function gv(){var s=qd!==0;return qd=0,s}function hr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?$e.memoizedState=En=s:En=En.next=s,En}function pi(){if(fn===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=fn.next;var i=En===null?$e.memoizedState:En.next;if(i!==null)En=i,fn=s;else{if(s===null)throw Error(e(310));fn=s,s={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},En===null?$e.memoizedState=En=s:En=En.next=s}return En}function Yd(s,i){return typeof i=="function"?i(s):i}function mv(s){var i=pi(),c=i.queue;if(c===null)throw Error(e(311));c.lastRenderedReducer=s;var d=fn,m=d.baseQueue,A=c.pending;if(A!==null){if(m!==null){var C=m.next;m.next=A.next,A.next=C}d.baseQueue=m=A,c.pending=null}if(m!==null){A=m.next,d=d.baseState;var R=C=null,N=null,j=A;do{var q=j.lane;if((Sl&q)===q)N!==null&&(N=N.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),d=j.hasEagerState?j.eagerState:s(d,j.action);else{var Q={lane:q,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};N===null?(R=N=Q,C=d):N=N.next=Q,$e.lanes|=q,bl|=q}j=j.next}while(j!==null&&j!==A);N===null?C=d:N.next=R,Ui(d,i.memoizedState)||(As=!0),i.memoizedState=d,i.baseState=C,i.baseQueue=N,c.lastRenderedState=d}if(s=c.interleaved,s!==null){m=s;do A=m.lane,$e.lanes|=A,bl|=A,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function yv(s){var i=pi(),c=i.queue;if(c===null)throw Error(e(311));c.lastRenderedReducer=s;var d=c.dispatch,m=c.pending,A=i.memoizedState;if(m!==null){c.pending=null;var C=m=m.next;do A=s(A,C.action),C=C.next;while(C!==m);Ui(A,i.memoizedState)||(As=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),c.lastRenderedState=A}return[A,d]}function db(){}function fb(s,i){var c=$e,d=pi(),m=i(),A=!Ui(d.memoizedState,m);if(A&&(d.memoizedState=m,As=!0),d=d.queue,vv(mb.bind(null,c,d,s),[s]),d.getSnapshot!==i||A||En!==null&&En.memoizedState.tag&1){if(c.flags|=2048,Kd(9,gb.bind(null,c,d,m,i),void 0,null),xn===null)throw Error(e(349));(Sl&30)!==0||pb(c,i,m)}return m}function pb(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=$e.updateQueue,i===null?(i={lastEffect:null,stores:null},$e.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function gb(s,i,c,d){i.value=c,i.getSnapshot=d,yb(i)&&vb(s)}function mb(s,i,c){return c(function(){yb(i)&&vb(s)})}function yb(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!Ui(s,c)}catch{return!0}}function vb(s){var i=qr(s,1);i!==null&&Wi(i,s,1,-1)}function wb(s){var i=hr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:s},i.queue=s,s=s.dispatch=k_.bind(null,$e,s),[i.memoizedState,s]}function Kd(s,i,c,d){return s={tag:s,create:i,destroy:c,deps:d,next:null},i=$e.updateQueue,i===null?(i={lastEffect:null,stores:null},$e.updateQueue=i,i.lastEffect=s.next=s):(c=i.lastEffect,c===null?i.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,i.lastEffect=s)),s}function Ab(){return pi().memoizedState}function Am(s,i,c,d){var m=hr();$e.flags|=s,m.memoizedState=Kd(1|i,c,void 0,d===void 0?null:d)}function Sm(s,i,c,d){var m=pi();d=d===void 0?null:d;var A=void 0;if(fn!==null){var C=fn.memoizedState;if(A=C.destroy,d!==null&&fv(d,C.deps)){m.memoizedState=Kd(i,c,A,d);return}}$e.flags|=s,m.memoizedState=Kd(1|i,c,A,d)}function Sb(s,i){return Am(8390656,8,s,i)}function vv(s,i){return Sm(2048,8,s,i)}function bb(s,i){return Sm(4,2,s,i)}function Eb(s,i){return Sm(4,4,s,i)}function xb(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Cb(s,i,c){return c=c!=null?c.concat([s]):null,Sm(4,4,xb.bind(null,i,s),c)}function wv(){}function _b(s,i){var c=pi();i=i===void 0?null:i;var d=c.memoizedState;return d!==null&&i!==null&&fv(i,d[1])?d[0]:(c.memoizedState=[s,i],s)}function kb(s,i){var c=pi();i=i===void 0?null:i;var d=c.memoizedState;return d!==null&&i!==null&&fv(i,d[1])?d[0]:(s=s(),c.memoizedState=[s,i],s)}function Tb(s,i,c){return(Sl&21)===0?(s.baseState&&(s.baseState=!1,As=!0),s.memoizedState=c):(Ui(c,i)||(c=Ns(),$e.lanes|=c,bl|=c,s.baseState=!0),i)}function C_(s,i){var c=me;me=c!==0&&4>c?c:4,s(!0);var d=dv.transition;dv.transition={};try{s(!1),i()}finally{me=c,dv.transition=d}}function Pb(){return pi().memoizedState}function __(s,i,c){var d=co(s);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},Rb(s))Mb(i,c);else if(c=ob(s,i,c,d),c!==null){var m=rs();Wi(c,s,d,m),Lb(c,i,d)}}function k_(s,i,c){var d=co(s),m={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Rb(s))Mb(i,m);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var C=i.lastRenderedState,R=A(C,c);if(m.hasEagerState=!0,m.eagerState=R,Ui(R,C)){var N=i.interleaved;N===null?(m.next=m,av(i)):(m.next=N.next,N.next=m),i.interleaved=m;return}}catch{}finally{}c=ob(s,i,m,d),c!==null&&(m=rs(),Wi(c,s,d,m),Lb(c,i,d))}}function Rb(s){var i=s.alternate;return s===$e||i!==null&&i===$e}function Mb(s,i){Xd=wm=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function Lb(s,i,c){if((c&4194240)!==0){var d=i.lanes;d&=s.pendingLanes,c|=d,i.lanes=c,su(s,c)}}var bm={readContext:fi,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},T_={readContext:fi,useCallback:function(s,i){return hr().memoizedState=[s,i===void 0?null:i],s},useContext:fi,useEffect:Sb,useImperativeHandle:function(s,i,c){return c=c!=null?c.concat([s]):null,Am(4194308,4,xb.bind(null,i,s),c)},useLayoutEffect:function(s,i){return Am(4194308,4,s,i)},useInsertionEffect:function(s,i){return Am(4,2,s,i)},useMemo:function(s,i){var c=hr();return i=i===void 0?null:i,s=s(),c.memoizedState=[s,i],s},useReducer:function(s,i,c){var d=hr();return i=c!==void 0?c(i):i,d.memoizedState=d.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},d.queue=s,s=s.dispatch=__.bind(null,$e,s),[d.memoizedState,s]},useRef:function(s){var i=hr();return s={current:s},i.memoizedState=s},useState:wb,useDebugValue:wv,useDeferredValue:function(s){return hr().memoizedState=s},useTransition:function(){var s=wb(!1),i=s[0];return s=C_.bind(null,s[1]),hr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,c){var d=$e,m=hr();if(Oe){if(c===void 0)throw Error(e(407));c=c()}else{if(c=i(),xn===null)throw Error(e(349));(Sl&30)!==0||pb(d,i,c)}m.memoizedState=c;var A={value:c,getSnapshot:i};return m.queue=A,Sb(mb.bind(null,d,A,s),[s]),d.flags|=2048,Kd(9,gb.bind(null,d,A,c,i),void 0,null),c},useId:function(){var s=hr(),i=xn.identifierPrefix;if(Oe){var c=Xr,d=Gr;c=(d&~(1<<32-ys(d)-1)).toString(32)+c,i=":"+i+"R"+c,c=qd++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=x_++,i=":"+i+"r"+c.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},P_={readContext:fi,useCallback:_b,useContext:fi,useEffect:vv,useImperativeHandle:Cb,useInsertionEffect:bb,useLayoutEffect:Eb,useMemo:kb,useReducer:mv,useRef:Ab,useState:function(){return mv(Yd)},useDebugValue:wv,useDeferredValue:function(s){var i=pi();return Tb(i,fn.memoizedState,s)},useTransition:function(){var s=mv(Yd)[0],i=pi().memoizedState;return[s,i]},useMutableSource:db,useSyncExternalStore:fb,useId:Pb,unstable_isNewReconciler:!1},R_={readContext:fi,useCallback:_b,useContext:fi,useEffect:vv,useImperativeHandle:Cb,useInsertionEffect:bb,useLayoutEffect:Eb,useMemo:kb,useReducer:yv,useRef:Ab,useState:function(){return yv(Yd)},useDebugValue:wv,useDeferredValue:function(s){var i=pi();return fn===null?i.memoizedState=s:Tb(i,fn.memoizedState,s)},useTransition:function(){var s=yv(Yd)[0],i=pi().memoizedState;return[s,i]},useMutableSource:db,useSyncExternalStore:fb,useId:Pb,unstable_isNewReconciler:!1};function ji(s,i){if(s&&s.defaultProps){i=tt({},i),s=s.defaultProps;for(var c in s)i[c]===void 0&&(i[c]=s[c]);return i}return i}function Av(s,i,c,d){i=s.memoizedState,c=c(d,i),c=c==null?i:tt({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Em={isMounted:function(s){return(s=s._reactInternals)?Ht(s)===s:!1},enqueueSetState:function(s,i,c){s=s._reactInternals;var d=rs(),m=co(s),A=Yr(d,m);A.payload=i,c!=null&&(A.callback=c),i=ro(s,A,m),i!==null&&(Wi(i,s,m,d),gm(i,s,m))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var d=rs(),m=co(s),A=Yr(d,m);A.tag=1,A.payload=i,c!=null&&(A.callback=c),i=ro(s,A,m),i!==null&&(Wi(i,s,m,d),gm(i,s,m))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=rs(),d=co(s),m=Yr(c,d);m.tag=2,i!=null&&(m.callback=i),i=ro(s,m,d),i!==null&&(Wi(i,s,d,c),gm(i,s,d))}};function Db(s,i,c,d,m,A,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,A,C):i.prototype&&i.prototype.isPureReactComponent?!Fd(c,d)||!Fd(m,A):!0}function Nb(s,i,c){var d=!1,m=no,A=i.contextType;return typeof A=="object"&&A!==null?A=fi(A):(m=ws(i)?ml:Wn.current,d=i.contextTypes,A=(d=d!=null)?fu(s,m):no),i=new i(c,A),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Em,s.stateNode=i,i._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=A),i}function Ib(s,i,c,d){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==s&&Em.enqueueReplaceState(i,i.state,null)}function Sv(s,i,c,d){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},ov(s);var A=i.contextType;typeof A=="object"&&A!==null?m.context=fi(A):(A=ws(i)?ml:Wn.current,m.context=fu(s,A)),m.state=s.memoizedState,A=i.getDerivedStateFromProps,typeof A=="function"&&(Av(s,i,A,c),m.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&Em.enqueueReplaceState(m,m.state,null),mm(s,c,m,d),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Su(s,i){try{var c="",d=i;do c+=Ct(d),d=d.return;while(d);var m=c}catch(A){m=`
Error generating stack: `+A.message+`
`+A.stack}return{value:s,source:i,stack:m,digest:null}}function bv(s,i,c){return{value:s,source:null,stack:c??null,digest:i??null}}function Ev(s,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var M_=typeof WeakMap=="function"?WeakMap:Map;function Fb(s,i,c){c=Yr(-1,c),c.tag=3,c.payload={element:null};var d=i.value;return c.callback=function(){Rm||(Rm=!0,Bv=d),Ev(s,i)},c}function Ob(s,i,c){c=Yr(-1,c),c.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=i.value;c.payload=function(){return d(m)},c.callback=function(){Ev(s,i)}}var A=s.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(c.callback=function(){Ev(s,i),typeof d!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var C=i.stack;this.componentDidCatch(i.value,{componentStack:C!==null?C:""})}),c}function Bb(s,i,c){var d=s.pingCache;if(d===null){d=s.pingCache=new M_;var m=new Set;d.set(i,m)}else m=d.get(i),m===void 0&&(m=new Set,d.set(i,m));m.has(c)||(m.add(c),s=V_.bind(null,s,i,c),i.then(s,s))}function Ub(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function zb(s,i,c,d,m){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=Yr(-1,1),i.tag=2,ro(c,i,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var L_=L.ReactCurrentOwner,As=!1;function is(s,i,c,d){i.child=s===null?ab(i,null,c,d):yu(i,s.child,c,d)}function jb(s,i,c,d,m){c=c.render;var A=i.ref;return wu(i,m),d=pv(s,i,c,d,A,m),c=gv(),s!==null&&!As?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~m,Kr(s,i,m)):(Oe&&c&&Q0(i),i.flags|=1,is(s,i,d,m),i.child)}function Hb(s,i,c,d,m){if(s===null){var A=c.type;return typeof A=="function"&&!Vv(A)&&A.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=A,$b(s,i,A,d,m)):(s=Fm(c.type,null,d,i,i.mode,m),s.ref=i.ref,s.return=i,i.child=s)}if(A=s.child,(s.lanes&m)===0){var C=A.memoizedProps;if(c=c.compare,c=c!==null?c:Fd,c(C,d)&&s.ref===i.ref)return Kr(s,i,m)}return i.flags|=1,s=ho(A,d),s.ref=i.ref,s.return=i,i.child=s}function $b(s,i,c,d,m){if(s!==null){var A=s.memoizedProps;if(Fd(A,d)&&s.ref===i.ref)if(As=!1,i.pendingProps=d=A,(s.lanes&m)!==0)(s.flags&131072)!==0&&(As=!0);else return i.lanes=s.lanes,Kr(s,i,m)}return xv(s,i,c,d,m)}function Wb(s,i,c){var d=i.pendingProps,m=d.children,A=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Eu,Bs),Bs|=c;else{if((c&1073741824)===0)return s=A!==null?A.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,Pe(Eu,Bs),Bs|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=A!==null?A.baseLanes:c,Pe(Eu,Bs),Bs|=d}else A!==null?(d=A.baseLanes|c,i.memoizedState=null):d=c,Pe(Eu,Bs),Bs|=d;return is(s,i,m,c),i.child}function Vb(s,i){var c=i.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function xv(s,i,c,d,m){var A=ws(c)?ml:Wn.current;return A=fu(i,A),wu(i,m),c=pv(s,i,c,d,A,m),d=gv(),s!==null&&!As?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~m,Kr(s,i,m)):(Oe&&d&&Q0(i),i.flags|=1,is(s,i,c,m),i.child)}function Gb(s,i,c,d,m){if(ws(c)){var A=!0;om(i)}else A=!1;if(wu(i,m),i.stateNode===null)Cm(s,i),Nb(i,c,d),Sv(i,c,d,m),d=!0;else if(s===null){var C=i.stateNode,R=i.memoizedProps;C.props=R;var N=C.context,j=c.contextType;typeof j=="object"&&j!==null?j=fi(j):(j=ws(c)?ml:Wn.current,j=fu(i,j));var q=c.getDerivedStateFromProps,Q=typeof q=="function"||typeof C.getSnapshotBeforeUpdate=="function";Q||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(R!==d||N!==j)&&Ib(i,C,d,j),io=!1;var X=i.memoizedState;C.state=X,mm(i,d,C,m),N=i.memoizedState,R!==d||X!==N||vs.current||io?(typeof q=="function"&&(Av(i,c,q,d),N=i.memoizedState),(R=io||Db(i,c,R,d,X,N,j))?(Q||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(i.flags|=4194308)):(typeof C.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=N),C.props=d,C.state=N,C.context=j,d=R):(typeof C.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{C=i.stateNode,lb(s,i),R=i.memoizedProps,j=i.type===i.elementType?R:ji(i.type,R),C.props=j,Q=i.pendingProps,X=C.context,N=c.contextType,typeof N=="object"&&N!==null?N=fi(N):(N=ws(c)?ml:Wn.current,N=fu(i,N));var ht=c.getDerivedStateFromProps;(q=typeof ht=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(R!==Q||X!==N)&&Ib(i,C,d,N),io=!1,X=i.memoizedState,C.state=X,mm(i,d,C,m);var yt=i.memoizedState;R!==Q||X!==yt||vs.current||io?(typeof ht=="function"&&(Av(i,c,ht,d),yt=i.memoizedState),(j=io||Db(i,c,j,d,X,yt,N)||!1)?(q||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,yt,N),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,yt,N)),typeof C.componentDidUpdate=="function"&&(i.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof C.componentDidUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=yt),C.props=d,C.state=yt,C.context=N,d=j):(typeof C.componentDidUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=1024),d=!1)}return Cv(s,i,c,d,A,m)}function Cv(s,i,c,d,m,A){Vb(s,i);var C=(i.flags&128)!==0;if(!d&&!C)return m&&QS(i,c,!1),Kr(s,i,A);d=i.stateNode,L_.current=i;var R=C&&typeof c.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,s!==null&&C?(i.child=yu(i,s.child,null,A),i.child=yu(i,null,R,A)):is(s,i,R,A),i.memoizedState=d.state,m&&QS(i,c,!0),i.child}function Xb(s){var i=s.stateNode;i.pendingContext?YS(s,i.pendingContext,i.pendingContext!==i.context):i.context&&YS(s,i.context,!1),lv(s,i.containerInfo)}function qb(s,i,c,d,m){return mu(),ev(m),i.flags|=256,is(s,i,c,d),i.child}var _v={dehydrated:null,treeContext:null,retryLane:0};function kv(s){return{baseLanes:s,cachePool:null,transitions:null}}function Yb(s,i,c){var d=i.pendingProps,m=He.current,A=!1,C=(i.flags&128)!==0,R;if((R=C)||(R=s!==null&&s.memoizedState===null?!1:(m&2)!==0),R?(A=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),Pe(He,m&1),s===null)return tv(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(C=d.children,s=d.fallback,A?(d=i.mode,A=i.child,C={mode:"hidden",children:C},(d&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=C):A=Om(C,d,0,null),s=_l(s,d,c,null),A.return=i,s.return=i,A.sibling=s,i.child=A,i.child.memoizedState=kv(c),i.memoizedState=_v,s):Tv(i,C));if(m=s.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return D_(s,i,C,d,R,m,c);if(A){A=d.fallback,C=i.mode,m=s.child,R=m.sibling;var N={mode:"hidden",children:d.children};return(C&1)===0&&i.child!==m?(d=i.child,d.childLanes=0,d.pendingProps=N,i.deletions=null):(d=ho(m,N),d.subtreeFlags=m.subtreeFlags&14680064),R!==null?A=ho(R,A):(A=_l(A,C,c,null),A.flags|=2),A.return=i,d.return=i,d.sibling=A,i.child=d,d=A,A=i.child,C=s.child.memoizedState,C=C===null?kv(c):{baseLanes:C.baseLanes|c,cachePool:null,transitions:C.transitions},A.memoizedState=C,A.childLanes=s.childLanes&~c,i.memoizedState=_v,d}return A=s.child,s=A.sibling,d=ho(A,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=c),d.return=i,d.sibling=null,s!==null&&(c=i.deletions,c===null?(i.deletions=[s],i.flags|=16):c.push(s)),i.child=d,i.memoizedState=null,d}function Tv(s,i){return i=Om({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function xm(s,i,c,d){return d!==null&&ev(d),yu(i,s.child,null,c),s=Tv(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function D_(s,i,c,d,m,A,C){if(c)return i.flags&256?(i.flags&=-257,d=bv(Error(e(422))),xm(s,i,C,d)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(A=d.fallback,m=i.mode,d=Om({mode:"visible",children:d.children},m,0,null),A=_l(A,m,C,null),A.flags|=2,d.return=i,A.return=i,d.sibling=A,i.child=d,(i.mode&1)!==0&&yu(i,s.child,null,C),i.child.memoizedState=kv(C),i.memoizedState=_v,A);if((i.mode&1)===0)return xm(s,i,C,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var R=d.dgst;return d=R,A=Error(e(419)),d=bv(A,d,void 0),xm(s,i,C,d)}if(R=(C&s.childLanes)!==0,As||R){if(d=xn,d!==null){switch(C&-C){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|C))!==0?0:m,m!==0&&m!==A.retryLane&&(A.retryLane=m,qr(s,m),Wi(d,s,m,-1))}return Wv(),d=bv(Error(e(421))),xm(s,i,C,d)}return m.data==="$?"?(i.flags|=128,i.child=s.child,i=G_.bind(null,s),m._reactRetry=i,null):(s=A.treeContext,Os=to(m.nextSibling),Fs=i,Oe=!0,zi=null,s!==null&&(hi[di++]=Gr,hi[di++]=Xr,hi[di++]=yl,Gr=s.id,Xr=s.overflow,yl=i),i=Tv(i,d.children),i.flags|=4096,i)}function Kb(s,i,c){s.lanes|=i;var d=s.alternate;d!==null&&(d.lanes|=i),rv(s.return,i,c)}function Pv(s,i,c,d,m){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(A.isBackwards=i,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=c,A.tailMode=m)}function Qb(s,i,c){var d=i.pendingProps,m=d.revealOrder,A=d.tail;if(is(s,i,d.children,c),d=He.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Kb(s,c,i);else if(s.tag===19)Kb(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Pe(He,d),(i.mode&1)===0)i.memoizedState=null;else switch(m){case"forwards":for(c=i.child,m=null;c!==null;)s=c.alternate,s!==null&&ym(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=i.child,i.child=null):(m=c.sibling,c.sibling=null),Pv(i,!1,m,c,A);break;case"backwards":for(c=null,m=i.child,i.child=null;m!==null;){if(s=m.alternate,s!==null&&ym(s)===null){i.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Pv(i,!0,c,null,A);break;case"together":Pv(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Cm(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Kr(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),bl|=i.lanes,(c&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(e(153));if(i.child!==null){for(s=i.child,c=ho(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=ho(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function N_(s,i,c){switch(i.tag){case 3:Xb(i),mu();break;case 5:hb(i);break;case 1:ws(i.type)&&om(i);break;case 4:lv(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,m=i.memoizedProps.value;Pe(fm,d._currentValue),d._currentValue=m;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Pe(He,He.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?Yb(s,i,c):(Pe(He,He.current&1),s=Kr(s,i,c),s!==null?s.sibling:null);Pe(He,He.current&1);break;case 19:if(d=(c&i.childLanes)!==0,(s.flags&128)!==0){if(d)return Qb(s,i,c);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Pe(He,He.current),d)break;return null;case 22:case 23:return i.lanes=0,Wb(s,i,c)}return Kr(s,i,c)}var Zb,Rv,Jb,t1;Zb=function(s,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Rv=function(){},Jb=function(s,i,c,d){var m=s.memoizedProps;if(m!==d){s=i.stateNode,Al(ur.current);var A=null;switch(c){case"input":m=$a(s,m),d=$a(s,d),A=[];break;case"select":m=tt({},m,{value:void 0}),d=tt({},d,{value:void 0}),A=[];break;case"textarea":m=Jc(s,m),d=Jc(s,d),A=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=im)}md(c,d);var C;c=null;for(j in m)if(!d.hasOwnProperty(j)&&m.hasOwnProperty(j)&&m[j]!=null)if(j==="style"){var R=m[j];for(C in R)R.hasOwnProperty(C)&&(c||(c={}),c[C]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(r.hasOwnProperty(j)?A||(A=[]):(A=A||[]).push(j,null));for(j in d){var N=d[j];if(R=m!=null?m[j]:void 0,d.hasOwnProperty(j)&&N!==R&&(N!=null||R!=null))if(j==="style")if(R){for(C in R)!R.hasOwnProperty(C)||N&&N.hasOwnProperty(C)||(c||(c={}),c[C]="");for(C in N)N.hasOwnProperty(C)&&R[C]!==N[C]&&(c||(c={}),c[C]=N[C])}else c||(A||(A=[]),A.push(j,c)),c=N;else j==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,R=R?R.__html:void 0,N!=null&&R!==N&&(A=A||[]).push(j,N)):j==="children"?typeof N!="string"&&typeof N!="number"||(A=A||[]).push(j,""+N):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(r.hasOwnProperty(j)?(N!=null&&j==="onScroll"&&De("scroll",s),A||R===N||(A=[])):(A=A||[]).push(j,N))}c&&(A=A||[]).push("style",c);var j=A;(i.updateQueue=j)&&(i.flags|=4)}},t1=function(s,i,c,d){c!==d&&(i.flags|=4)};function Qd(s,i){if(!Oe)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Gn(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(i)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=c,i}function I_(s,i,c){var d=i.pendingProps;switch(Z0(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(i),null;case 1:return ws(i.type)&&am(),Gn(i),null;case 3:return d=i.stateNode,Au(),Ne(vs),Ne(Wn),hv(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(hm(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,zi!==null&&(jv(zi),zi=null))),Rv(s,i),Gn(i),null;case 5:cv(i);var m=Al(Gd.current);if(c=i.type,s!==null&&i.stateNode!=null)Jb(s,i,c,d,m),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(e(166));return Gn(i),null}if(s=Al(ur.current),hm(i)){d=i.stateNode,c=i.type;var A=i.memoizedProps;switch(d[cr]=i,d[jd]=A,s=(i.mode&1)!==0,c){case"dialog":De("cancel",d),De("close",d);break;case"iframe":case"object":case"embed":De("load",d);break;case"video":case"audio":for(m=0;m<Bd.length;m++)De(Bd[m],d);break;case"source":De("error",d);break;case"img":case"image":case"link":De("error",d),De("load",d);break;case"details":De("toggle",d);break;case"input":Ng(d,A),De("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!A.multiple},De("invalid",d);break;case"textarea":pd(d,A),De("invalid",d)}md(c,A),m=null;for(var C in A)if(A.hasOwnProperty(C)){var R=A[C];C==="children"?typeof R=="string"?d.textContent!==R&&(A.suppressHydrationWarning!==!0&&sm(d.textContent,R,s),m=["children",R]):typeof R=="number"&&d.textContent!==""+R&&(A.suppressHydrationWarning!==!0&&sm(d.textContent,R,s),m=["children",""+R]):r.hasOwnProperty(C)&&R!=null&&C==="onScroll"&&De("scroll",d)}switch(c){case"input":es(d),cl(d,A,!0);break;case"textarea":es(d),Fg(d);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(d.onclick=im)}d=m,i.updateQueue=d,d!==null&&(i.flags|=4)}else{C=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=gd(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=C.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=C.createElement(c,{is:d.is}):(s=C.createElement(c),c==="select"&&(C=s,d.multiple?C.multiple=!0:d.size&&(C.size=d.size))):s=C.createElementNS(s,c),s[cr]=i,s[jd]=d,Zb(s,i,!1,!1),i.stateNode=s;t:{switch(C=tu(c,d),c){case"dialog":De("cancel",s),De("close",s),m=d;break;case"iframe":case"object":case"embed":De("load",s),m=d;break;case"video":case"audio":for(m=0;m<Bd.length;m++)De(Bd[m],s);m=d;break;case"source":De("error",s),m=d;break;case"img":case"image":case"link":De("error",s),De("load",s),m=d;break;case"details":De("toggle",s),m=d;break;case"input":Ng(s,d),m=$a(s,d),De("invalid",s);break;case"option":m=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},m=tt({},d,{value:void 0}),De("invalid",s);break;case"textarea":pd(s,d),m=Jc(s,d),De("invalid",s);break;default:m=d}md(c,m),R=m;for(A in R)if(R.hasOwnProperty(A)){var N=R[A];A==="style"?Og(s,N):A==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&dl(s,N)):A==="children"?typeof N=="string"?(c!=="textarea"||N!=="")&&ci(s,N):typeof N=="number"&&ci(s,""+N):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(r.hasOwnProperty(A)?N!=null&&A==="onScroll"&&De("scroll",s):N!=null&&P(s,A,N,C))}switch(c){case"input":es(s),cl(s,d,!1);break;case"textarea":es(s),Fg(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Qt(d.value));break;case"select":s.multiple=!!d.multiple,A=d.value,A!=null?Wa(s,!!d.multiple,A,!1):d.defaultValue!=null&&Wa(s,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=im)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Gn(i),null;case 6:if(s&&i.stateNode!=null)t1(s,i,s.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(e(166));if(c=Al(Gd.current),Al(ur.current),hm(i)){if(d=i.stateNode,c=i.memoizedProps,d[cr]=i,(A=d.nodeValue!==c)&&(s=Fs,s!==null))switch(s.tag){case 3:sm(d.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&sm(d.nodeValue,c,(s.mode&1)!==0)}A&&(i.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[cr]=i,i.stateNode=d}return Gn(i),null;case 13:if(Ne(He),d=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Oe&&Os!==null&&(i.mode&1)!==0&&(i.flags&128)===0)sb(),mu(),i.flags|=98560,A=!1;else if(A=hm(i),d!==null&&d.dehydrated!==null){if(s===null){if(!A)throw Error(e(318));if(A=i.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(e(317));A[cr]=i}else mu(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gn(i),A=!1}else zi!==null&&(jv(zi),zi=null),A=!0;if(!A)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(He.current&1)!==0?pn===0&&(pn=3):Wv())),i.updateQueue!==null&&(i.flags|=4),Gn(i),null);case 4:return Au(),Rv(s,i),s===null&&Ud(i.stateNode.containerInfo),Gn(i),null;case 10:return iv(i.type._context),Gn(i),null;case 17:return ws(i.type)&&am(),Gn(i),null;case 19:if(Ne(He),A=i.memoizedState,A===null)return Gn(i),null;if(d=(i.flags&128)!==0,C=A.rendering,C===null)if(d)Qd(A,!1);else{if(pn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(C=ym(s),C!==null){for(i.flags|=128,Qd(A,!1),d=C.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=c,c=i.child;c!==null;)A=c,s=d,A.flags&=14680066,C=A.alternate,C===null?(A.childLanes=0,A.lanes=s,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=C.childLanes,A.lanes=C.lanes,A.child=C.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=C.memoizedProps,A.memoizedState=C.memoizedState,A.updateQueue=C.updateQueue,A.type=C.type,s=C.dependencies,A.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Pe(He,He.current&1|2),i.child}s=s.sibling}A.tail!==null&&Zt()>xu&&(i.flags|=128,d=!0,Qd(A,!1),i.lanes=4194304)}else{if(!d)if(s=ym(C),s!==null){if(i.flags|=128,d=!0,c=s.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),Qd(A,!0),A.tail===null&&A.tailMode==="hidden"&&!C.alternate&&!Oe)return Gn(i),null}else 2*Zt()-A.renderingStartTime>xu&&c!==1073741824&&(i.flags|=128,d=!0,Qd(A,!1),i.lanes=4194304);A.isBackwards?(C.sibling=i.child,i.child=C):(c=A.last,c!==null?c.sibling=C:i.child=C,A.last=C)}return A.tail!==null?(i=A.tail,A.rendering=i,A.tail=i.sibling,A.renderingStartTime=Zt(),i.sibling=null,c=He.current,Pe(He,d?c&1|2:c&1),i):(Gn(i),null);case 22:case 23:return $v(),d=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(Bs&1073741824)!==0&&(Gn(i),i.subtreeFlags&6&&(i.flags|=8192)):Gn(i),null;case 24:return null;case 25:return null}throw Error(e(156,i.tag))}function F_(s,i){switch(Z0(i),i.tag){case 1:return ws(i.type)&&am(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Au(),Ne(vs),Ne(Wn),hv(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return cv(i),null;case 13:if(Ne(He),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(e(340));mu()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return Ne(He),null;case 4:return Au(),null;case 10:return iv(i.type._context),null;case 22:case 23:return $v(),null;case 24:return null;default:return null}}var _m=!1,Xn=!1,O_=typeof WeakSet=="function"?WeakSet:Set,mt=null;function bu(s,i){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){qe(s,i,d)}else c.current=null}function Mv(s,i,c){try{c()}catch(d){qe(s,i,d)}}var e1=!1;function B_(s,i){if($0=Gg,s=DS(),I0(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else t:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,A=d.focusNode;d=d.focusOffset;try{c.nodeType,A.nodeType}catch{c=null;break t}var C=0,R=-1,N=-1,j=0,q=0,Q=s,X=null;e:for(;;){for(var ht;Q!==c||m!==0&&Q.nodeType!==3||(R=C+m),Q!==A||d!==0&&Q.nodeType!==3||(N=C+d),Q.nodeType===3&&(C+=Q.nodeValue.length),(ht=Q.firstChild)!==null;)X=Q,Q=ht;for(;;){if(Q===s)break e;if(X===c&&++j===m&&(R=C),X===A&&++q===d&&(N=C),(ht=Q.nextSibling)!==null)break;Q=X,X=Q.parentNode}Q=ht}c=R===-1||N===-1?null:{start:R,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(W0={focusedElem:s,selectionRange:c},Gg=!1,mt=i;mt!==null;)if(i=mt,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,mt=s;else for(;mt!==null;){i=mt;try{var yt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var At=yt.memoizedProps,en=yt.memoizedState,B=i.stateNode,F=B.getSnapshotBeforeUpdate(i.elementType===i.type?At:ji(i.type,At),en);B.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(J){qe(i,i.return,J)}if(s=i.sibling,s!==null){s.return=i.return,mt=s;break}mt=i.return}return yt=e1,e1=!1,yt}function Zd(s,i,c){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&s)===s){var A=m.destroy;m.destroy=void 0,A!==void 0&&Mv(i,c,A)}m=m.next}while(m!==d)}}function km(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&s)===s){var d=c.create;c.destroy=d()}c=c.next}while(c!==i)}}function Lv(s){var i=s.ref;if(i!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof i=="function"?i(s):i.current=s}}function n1(s){var i=s.alternate;i!==null&&(s.alternate=null,n1(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[cr],delete i[jd],delete i[q0],delete i[A_],delete i[S_])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function s1(s){return s.tag===5||s.tag===3||s.tag===4}function i1(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||s1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Dv(s,i,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(s,i):c.insertBefore(s,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(s,c)):(i=c,i.appendChild(s)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=im));else if(d!==4&&(s=s.child,s!==null))for(Dv(s,i,c),s=s.sibling;s!==null;)Dv(s,i,c),s=s.sibling}function Nv(s,i,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Nv(s,i,c),s=s.sibling;s!==null;)Nv(s,i,c),s=s.sibling}var Dn=null,Hi=!1;function ao(s,i,c){for(c=c.child;c!==null;)r1(s,i,c),c=c.sibling}function r1(s,i,c){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(pl,c)}catch{}switch(c.tag){case 5:Xn||bu(c,i);case 6:var d=Dn,m=Hi;Dn=null,ao(s,i,c),Dn=d,Hi=m,Dn!==null&&(Hi?(s=Dn,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):Dn.removeChild(c.stateNode));break;case 18:Dn!==null&&(Hi?(s=Dn,c=c.stateNode,s.nodeType===8?X0(s.parentNode,c):s.nodeType===1&&X0(s,c),Rd(s)):X0(Dn,c.stateNode));break;case 4:d=Dn,m=Hi,Dn=c.stateNode.containerInfo,Hi=!0,ao(s,i,c),Dn=d,Hi=m;break;case 0:case 11:case 14:case 15:if(!Xn&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var A=m,C=A.destroy;A=A.tag,C!==void 0&&((A&2)!==0||(A&4)!==0)&&Mv(c,i,C),m=m.next}while(m!==d)}ao(s,i,c);break;case 1:if(!Xn&&(bu(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(R){qe(c,i,R)}ao(s,i,c);break;case 21:ao(s,i,c);break;case 22:c.mode&1?(Xn=(d=Xn)||c.memoizedState!==null,ao(s,i,c),Xn=d):ao(s,i,c);break;default:ao(s,i,c)}}function a1(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new O_),i.forEach(function(d){var m=X_.bind(null,s,d);c.has(d)||(c.add(d),d.then(m,m))})}}function $i(s,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d];try{var A=s,C=i,R=C;t:for(;R!==null;){switch(R.tag){case 5:Dn=R.stateNode,Hi=!1;break t;case 3:Dn=R.stateNode.containerInfo,Hi=!0;break t;case 4:Dn=R.stateNode.containerInfo,Hi=!0;break t}R=R.return}if(Dn===null)throw Error(e(160));r1(A,C,m),Dn=null,Hi=!1;var N=m.alternate;N!==null&&(N.return=null),m.return=null}catch(j){qe(m,i,j)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)o1(i,s),i=i.sibling}function o1(s,i){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if($i(i,s),dr(s),d&4){try{Zd(3,s,s.return),km(3,s)}catch(At){qe(s,s.return,At)}try{Zd(5,s,s.return)}catch(At){qe(s,s.return,At)}}break;case 1:$i(i,s),dr(s),d&512&&c!==null&&bu(c,c.return);break;case 5:if($i(i,s),dr(s),d&512&&c!==null&&bu(c,c.return),s.flags&32){var m=s.stateNode;try{ci(m,"")}catch(At){qe(s,s.return,At)}}if(d&4&&(m=s.stateNode,m!=null)){var A=s.memoizedProps,C=c!==null?c.memoizedProps:A,R=s.type,N=s.updateQueue;if(s.updateQueue=null,N!==null)try{R==="input"&&A.type==="radio"&&A.name!=null&&Ig(m,A),tu(R,C);var j=tu(R,A);for(C=0;C<N.length;C+=2){var q=N[C],Q=N[C+1];q==="style"?Og(m,Q):q==="dangerouslySetInnerHTML"?dl(m,Q):q==="children"?ci(m,Q):P(m,q,Q,j)}switch(R){case"input":Ii(m,A);break;case"textarea":Va(m,A);break;case"select":var X=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!A.multiple;var ht=A.value;ht!=null?Wa(m,!!A.multiple,ht,!1):X!==!!A.multiple&&(A.defaultValue!=null?Wa(m,!!A.multiple,A.defaultValue,!0):Wa(m,!!A.multiple,A.multiple?[]:"",!1))}m[jd]=A}catch(At){qe(s,s.return,At)}}break;case 6:if($i(i,s),dr(s),d&4){if(s.stateNode===null)throw Error(e(162));m=s.stateNode,A=s.memoizedProps;try{m.nodeValue=A}catch(At){qe(s,s.return,At)}}break;case 3:if($i(i,s),dr(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Rd(i.containerInfo)}catch(At){qe(s,s.return,At)}break;case 4:$i(i,s),dr(s);break;case 13:$i(i,s),dr(s),m=s.child,m.flags&8192&&(A=m.memoizedState!==null,m.stateNode.isHidden=A,!A||m.alternate!==null&&m.alternate.memoizedState!==null||(Ov=Zt())),d&4&&a1(s);break;case 22:if(q=c!==null&&c.memoizedState!==null,s.mode&1?(Xn=(j=Xn)||q,$i(i,s),Xn=j):$i(i,s),dr(s),d&8192){if(j=s.memoizedState!==null,(s.stateNode.isHidden=j)&&!q&&(s.mode&1)!==0)for(mt=s,q=s.child;q!==null;){for(Q=mt=q;mt!==null;){switch(X=mt,ht=X.child,X.tag){case 0:case 11:case 14:case 15:Zd(4,X,X.return);break;case 1:bu(X,X.return);var yt=X.stateNode;if(typeof yt.componentWillUnmount=="function"){d=X,c=X.return;try{i=d,yt.props=i.memoizedProps,yt.state=i.memoizedState,yt.componentWillUnmount()}catch(At){qe(d,c,At)}}break;case 5:bu(X,X.return);break;case 22:if(X.memoizedState!==null){u1(Q);continue}}ht!==null?(ht.return=X,mt=ht):u1(Q)}q=q.sibling}t:for(q=null,Q=s;;){if(Q.tag===5){if(q===null){q=Q;try{m=Q.stateNode,j?(A=m.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(R=Q.stateNode,N=Q.memoizedProps.style,C=N!=null&&N.hasOwnProperty("display")?N.display:null,R.style.display=or("display",C))}catch(At){qe(s,s.return,At)}}}else if(Q.tag===6){if(q===null)try{Q.stateNode.nodeValue=j?"":Q.memoizedProps}catch(At){qe(s,s.return,At)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===s)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===s)break t;for(;Q.sibling===null;){if(Q.return===null||Q.return===s)break t;q===Q&&(q=null),Q=Q.return}q===Q&&(q=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:$i(i,s),dr(s),d&4&&a1(s);break;case 21:break;default:$i(i,s),dr(s)}}function dr(s){var i=s.flags;if(i&2){try{t:{for(var c=s.return;c!==null;){if(s1(c)){var d=c;break t}c=c.return}throw Error(e(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(ci(m,""),d.flags&=-33);var A=i1(s);Nv(s,A,m);break;case 3:case 4:var C=d.stateNode.containerInfo,R=i1(s);Dv(s,R,C);break;default:throw Error(e(161))}}catch(N){qe(s,s.return,N)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function U_(s,i,c){mt=s,l1(s)}function l1(s,i,c){for(var d=(s.mode&1)!==0;mt!==null;){var m=mt,A=m.child;if(m.tag===22&&d){var C=m.memoizedState!==null||_m;if(!C){var R=m.alternate,N=R!==null&&R.memoizedState!==null||Xn;R=_m;var j=Xn;if(_m=C,(Xn=N)&&!j)for(mt=m;mt!==null;)C=mt,N=C.child,C.tag===22&&C.memoizedState!==null?h1(m):N!==null?(N.return=C,mt=N):h1(m);for(;A!==null;)mt=A,l1(A),A=A.sibling;mt=m,_m=R,Xn=j}c1(s)}else(m.subtreeFlags&8772)!==0&&A!==null?(A.return=m,mt=A):c1(s)}}function c1(s){for(;mt!==null;){var i=mt;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Xn||km(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Xn)if(c===null)d.componentDidMount();else{var m=i.elementType===i.type?c.memoizedProps:ji(i.type,c.memoizedProps);d.componentDidUpdate(m,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var A=i.updateQueue;A!==null&&ub(i,A,d);break;case 3:var C=i.updateQueue;if(C!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}ub(i,C,c)}break;case 5:var R=i.stateNode;if(c===null&&i.flags&4){c=R;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&c.focus();break;case"img":N.src&&(c.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var j=i.alternate;if(j!==null){var q=j.memoizedState;if(q!==null){var Q=q.dehydrated;Q!==null&&Rd(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Xn||i.flags&512&&Lv(i)}catch(X){qe(i,i.return,X)}}if(i===s){mt=null;break}if(c=i.sibling,c!==null){c.return=i.return,mt=c;break}mt=i.return}}function u1(s){for(;mt!==null;){var i=mt;if(i===s){mt=null;break}var c=i.sibling;if(c!==null){c.return=i.return,mt=c;break}mt=i.return}}function h1(s){for(;mt!==null;){var i=mt;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{km(4,i)}catch(N){qe(i,c,N)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var m=i.return;try{d.componentDidMount()}catch(N){qe(i,m,N)}}var A=i.return;try{Lv(i)}catch(N){qe(i,A,N)}break;case 5:var C=i.return;try{Lv(i)}catch(N){qe(i,C,N)}}}catch(N){qe(i,i.return,N)}if(i===s){mt=null;break}var R=i.sibling;if(R!==null){R.return=i.return,mt=R;break}mt=i.return}}var z_=Math.ceil,Tm=L.ReactCurrentDispatcher,Iv=L.ReactCurrentOwner,gi=L.ReactCurrentBatchConfig,se=0,xn=null,an=null,Nn=0,Bs=0,Eu=eo(0),pn=0,Jd=null,bl=0,Pm=0,Fv=0,tf=null,Ss=null,Ov=0,xu=1/0,Qr=null,Rm=!1,Bv=null,oo=null,Mm=!1,lo=null,Lm=0,ef=0,Uv=null,Dm=-1,Nm=0;function rs(){return(se&6)!==0?Zt():Dm!==-1?Dm:Dm=Zt()}function co(s){return(s.mode&1)===0?1:(se&2)!==0&&Nn!==0?Nn&-Nn:E_.transition!==null?(Nm===0&&(Nm=Ns()),Nm):(s=me,s!==0||(s=window.event,s=s===void 0?16:fS(s.type)),s)}function Wi(s,i,c,d){if(50<ef)throw ef=0,Uv=null,Error(e(185));ss(s,c,d),((se&2)===0||s!==xn)&&(s===xn&&((se&2)===0&&(Pm|=c),pn===4&&uo(s,Nn)),bs(s,d),c===1&&se===0&&(i.mode&1)===0&&(xu=Zt()+500,lm&&so()))}function bs(s,i){var c=s.callbackNode;ce(s,i);var d=it(s,s===xn?Nn:0);if(d===0)c!==null&&zg(c),s.callbackNode=null,s.callbackPriority=0;else if(i=d&-d,s.callbackPriority!==i){if(c!=null&&zg(c),i===1)s.tag===0?b_(f1.bind(null,s)):ZS(f1.bind(null,s)),v_(function(){(se&6)===0&&so()}),c=null;else{switch(rS(d)){case 1:c=xd;break;case 4:c=Fe;break;case 16:c=lr;break;case 536870912:c=Bi;break;default:c=lr}c=S1(c,d1.bind(null,s))}s.callbackPriority=i,s.callbackNode=c}}function d1(s,i){if(Dm=-1,Nm=0,(se&6)!==0)throw Error(e(327));var c=s.callbackNode;if(Cu()&&s.callbackNode!==c)return null;var d=it(s,s===xn?Nn:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||i)i=Im(s,d);else{i=d;var m=se;se|=2;var A=g1();(xn!==s||Nn!==i)&&(Qr=null,xu=Zt()+500,xl(s,i));do try{$_();break}catch(R){p1(s,R)}while(!0);sv(),Tm.current=A,se=m,an!==null?i=0:(xn=null,Nn=0,i=pn)}if(i!==0){if(i===2&&(m=rn(s),m!==0&&(d=m,i=zv(s,m))),i===1)throw c=Jd,xl(s,0),uo(s,d),bs(s,Zt()),c;if(i===6)uo(s,d);else{if(m=s.current.alternate,(d&30)===0&&!j_(m)&&(i=Im(s,d),i===2&&(A=rn(s),A!==0&&(d=A,i=zv(s,A))),i===1))throw c=Jd,xl(s,0),uo(s,d),bs(s,Zt()),c;switch(s.finishedWork=m,s.finishedLanes=d,i){case 0:case 1:throw Error(e(345));case 2:Cl(s,Ss,Qr);break;case 3:if(uo(s,d),(d&130023424)===d&&(i=Ov+500-Zt(),10<i)){if(it(s,0)!==0)break;if(m=s.suspendedLanes,(m&d)!==d){rs(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=G0(Cl.bind(null,s,Ss,Qr),i);break}Cl(s,Ss,Qr);break;case 4:if(uo(s,d),(d&4194240)===d)break;for(i=s.eventTimes,m=-1;0<d;){var C=31-ys(d);A=1<<C,C=i[C],C>m&&(m=C),d&=~A}if(d=m,d=Zt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*z_(d/1960))-d,10<d){s.timeoutHandle=G0(Cl.bind(null,s,Ss,Qr),d);break}Cl(s,Ss,Qr);break;case 5:Cl(s,Ss,Qr);break;default:throw Error(e(329))}}}return bs(s,Zt()),s.callbackNode===c?d1.bind(null,s):null}function zv(s,i){var c=tf;return s.current.memoizedState.isDehydrated&&(xl(s,i).flags|=256),s=Im(s,i),s!==2&&(i=Ss,Ss=c,i!==null&&jv(i)),s}function jv(s){Ss===null?Ss=s:Ss.push.apply(Ss,s)}function j_(s){for(var i=s;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var m=c[d],A=m.getSnapshot;m=m.value;try{if(!Ui(A(),m))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function uo(s,i){for(i&=~Fv,i&=~Pm,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var c=31-ys(i),d=1<<c;s[c]=-1,i&=~d}}function f1(s){if((se&6)!==0)throw Error(e(327));Cu();var i=it(s,0);if((i&1)===0)return bs(s,Zt()),null;var c=Im(s,i);if(s.tag!==0&&c===2){var d=rn(s);d!==0&&(i=d,c=zv(s,d))}if(c===1)throw c=Jd,xl(s,0),uo(s,i),bs(s,Zt()),c;if(c===6)throw Error(e(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,Cl(s,Ss,Qr),bs(s,Zt()),null}function Hv(s,i){var c=se;se|=1;try{return s(i)}finally{se=c,se===0&&(xu=Zt()+500,lm&&so())}}function El(s){lo!==null&&lo.tag===0&&(se&6)===0&&Cu();var i=se;se|=1;var c=gi.transition,d=me;try{if(gi.transition=null,me=1,s)return s()}finally{me=d,gi.transition=c,se=i,(se&6)===0&&so()}}function $v(){Bs=Eu.current,Ne(Eu)}function xl(s,i){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,y_(c)),an!==null)for(c=an.return;c!==null;){var d=c;switch(Z0(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&am();break;case 3:Au(),Ne(vs),Ne(Wn),hv();break;case 5:cv(d);break;case 4:Au();break;case 13:Ne(He);break;case 19:Ne(He);break;case 10:iv(d.type._context);break;case 22:case 23:$v()}c=c.return}if(xn=s,an=s=ho(s.current,null),Nn=Bs=i,pn=0,Jd=null,Fv=Pm=bl=0,Ss=tf=null,wl!==null){for(i=0;i<wl.length;i++)if(c=wl[i],d=c.interleaved,d!==null){c.interleaved=null;var m=d.next,A=c.pending;if(A!==null){var C=A.next;A.next=m,d.next=C}c.pending=d}wl=null}return s}function p1(s,i){do{var c=an;try{if(sv(),vm.current=bm,wm){for(var d=$e.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}wm=!1}if(Sl=0,En=fn=$e=null,Xd=!1,qd=0,Iv.current=null,c===null||c.return===null){pn=1,Jd=i,an=null;break}t:{var A=s,C=c.return,R=c,N=i;if(i=Nn,R.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var j=N,q=R,Q=q.tag;if((q.mode&1)===0&&(Q===0||Q===11||Q===15)){var X=q.alternate;X?(q.updateQueue=X.updateQueue,q.memoizedState=X.memoizedState,q.lanes=X.lanes):(q.updateQueue=null,q.memoizedState=null)}var ht=Ub(C);if(ht!==null){ht.flags&=-257,zb(ht,C,R,A,i),ht.mode&1&&Bb(A,j,i),i=ht,N=j;var yt=i.updateQueue;if(yt===null){var At=new Set;At.add(N),i.updateQueue=At}else yt.add(N);break t}else{if((i&1)===0){Bb(A,j,i),Wv();break t}N=Error(e(426))}}else if(Oe&&R.mode&1){var en=Ub(C);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),zb(en,C,R,A,i),ev(Su(N,R));break t}}A=N=Su(N,R),pn!==4&&(pn=2),tf===null?tf=[A]:tf.push(A),A=C;do{switch(A.tag){case 3:A.flags|=65536,i&=-i,A.lanes|=i;var B=Fb(A,N,i);cb(A,B);break t;case 1:R=N;var F=A.type,z=A.stateNode;if((A.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(oo===null||!oo.has(z)))){A.flags|=65536,i&=-i,A.lanes|=i;var J=Ob(A,R,i);cb(A,J);break t}}A=A.return}while(A!==null)}y1(c)}catch(xt){i=xt,an===c&&c!==null&&(an=c=c.return);continue}break}while(!0)}function g1(){var s=Tm.current;return Tm.current=bm,s===null?bm:s}function Wv(){(pn===0||pn===3||pn===2)&&(pn=4),xn===null||(bl&268435455)===0&&(Pm&268435455)===0||uo(xn,Nn)}function Im(s,i){var c=se;se|=2;var d=g1();(xn!==s||Nn!==i)&&(Qr=null,xl(s,i));do try{H_();break}catch(m){p1(s,m)}while(!0);if(sv(),se=c,Tm.current=d,an!==null)throw Error(e(261));return xn=null,Nn=0,pn}function H_(){for(;an!==null;)m1(an)}function $_(){for(;an!==null&&!jg();)m1(an)}function m1(s){var i=A1(s.alternate,s,Bs);s.memoizedProps=s.pendingProps,i===null?y1(s):an=i,Iv.current=null}function y1(s){var i=s;do{var c=i.alternate;if(s=i.return,(i.flags&32768)===0){if(c=I_(c,i,Bs),c!==null){an=c;return}}else{if(c=F_(c,i),c!==null){c.flags&=32767,an=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{pn=6,an=null;return}}if(i=i.sibling,i!==null){an=i;return}an=i=s}while(i!==null);pn===0&&(pn=5)}function Cl(s,i,c){var d=me,m=gi.transition;try{gi.transition=null,me=1,W_(s,i,c,d)}finally{gi.transition=m,me=d}return null}function W_(s,i,c,d){do Cu();while(lo!==null);if((se&6)!==0)throw Error(e(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(e(177));s.callbackNode=null,s.callbackPriority=0;var A=c.lanes|c.childLanes;if(bn(s,A),s===xn&&(an=xn=null,Nn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Mm||(Mm=!0,S1(lr,function(){return Cu(),null})),A=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||A){A=gi.transition,gi.transition=null;var C=me;me=1;var R=se;se|=4,Iv.current=null,B_(s,c),o1(c,s),u_(W0),Gg=!!$0,W0=$0=null,s.current=c,U_(c),Ed(),se=R,me=C,gi.transition=A}else s.current=c;if(Mm&&(Mm=!1,lo=s,Lm=m),A=s.pendingLanes,A===0&&(oo=null),Hg(c.stateNode),bs(s,Zt()),i!==null)for(d=s.onRecoverableError,c=0;c<i.length;c++)m=i[c],d(m.value,{componentStack:m.stack,digest:m.digest});if(Rm)throw Rm=!1,s=Bv,Bv=null,s;return(Lm&1)!==0&&s.tag!==0&&Cu(),A=s.pendingLanes,(A&1)!==0?s===Uv?ef++:(ef=0,Uv=s):ef=0,so(),null}function Cu(){if(lo!==null){var s=rS(Lm),i=gi.transition,c=me;try{if(gi.transition=null,me=16>s?16:s,lo===null)var d=!1;else{if(s=lo,lo=null,Lm=0,(se&6)!==0)throw Error(e(331));var m=se;for(se|=4,mt=s.current;mt!==null;){var A=mt,C=A.child;if((mt.flags&16)!==0){var R=A.deletions;if(R!==null){for(var N=0;N<R.length;N++){var j=R[N];for(mt=j;mt!==null;){var q=mt;switch(q.tag){case 0:case 11:case 15:Zd(8,q,A)}var Q=q.child;if(Q!==null)Q.return=q,mt=Q;else for(;mt!==null;){q=mt;var X=q.sibling,ht=q.return;if(n1(q),q===j){mt=null;break}if(X!==null){X.return=ht,mt=X;break}mt=ht}}}var yt=A.alternate;if(yt!==null){var At=yt.child;if(At!==null){yt.child=null;do{var en=At.sibling;At.sibling=null,At=en}while(At!==null)}}mt=A}}if((A.subtreeFlags&2064)!==0&&C!==null)C.return=A,mt=C;else t:for(;mt!==null;){if(A=mt,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Zd(9,A,A.return)}var B=A.sibling;if(B!==null){B.return=A.return,mt=B;break t}mt=A.return}}var F=s.current;for(mt=F;mt!==null;){C=mt;var z=C.child;if((C.subtreeFlags&2064)!==0&&z!==null)z.return=C,mt=z;else t:for(C=F;mt!==null;){if(R=mt,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:km(9,R)}}catch(xt){qe(R,R.return,xt)}if(R===C){mt=null;break t}var J=R.sibling;if(J!==null){J.return=R.return,mt=J;break t}mt=R.return}}if(se=m,so(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(pl,s)}catch{}d=!0}return d}finally{me=c,gi.transition=i}}return!1}function v1(s,i,c){i=Su(c,i),i=Fb(s,i,1),s=ro(s,i,1),i=rs(),s!==null&&(ss(s,1,i),bs(s,i))}function qe(s,i,c){if(s.tag===3)v1(s,s,c);else for(;i!==null;){if(i.tag===3){v1(i,s,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(oo===null||!oo.has(d))){s=Su(c,s),s=Ob(i,s,1),i=ro(i,s,1),s=rs(),i!==null&&(ss(i,1,s),bs(i,s));break}}i=i.return}}function V_(s,i,c){var d=s.pingCache;d!==null&&d.delete(i),i=rs(),s.pingedLanes|=s.suspendedLanes&c,xn===s&&(Nn&c)===c&&(pn===4||pn===3&&(Nn&130023424)===Nn&&500>Zt()-Ov?xl(s,0):Fv|=c),bs(s,i)}function w1(s,i){i===0&&((s.mode&1)===0?i=1:(i=Ga,Ga<<=1,(Ga&130023424)===0&&(Ga=4194304)));var c=rs();s=qr(s,i),s!==null&&(ss(s,i,c),bs(s,c))}function G_(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),w1(s,c)}function X_(s,i){var c=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(e(314))}d!==null&&d.delete(i),w1(s,c)}var A1;A1=function(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps||vs.current)As=!0;else{if((s.lanes&c)===0&&(i.flags&128)===0)return As=!1,N_(s,i,c);As=(s.flags&131072)!==0}else As=!1,Oe&&(i.flags&1048576)!==0&&JS(i,um,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Cm(s,i),s=i.pendingProps;var m=fu(i,Wn.current);wu(i,c),m=pv(null,i,d,s,m,c);var A=gv();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,ws(d)?(A=!0,om(i)):A=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,ov(i),m.updater=Em,i.stateNode=m,m._reactInternals=i,Sv(i,d,s,c),i=Cv(null,i,d,!0,A,c)):(i.tag=0,Oe&&A&&Q0(i),is(null,i,m,c),i=i.child),i;case 16:d=i.elementType;t:{switch(Cm(s,i),s=i.pendingProps,m=d._init,d=m(d._payload),i.type=d,m=i.tag=Y_(d),s=ji(d,s),m){case 0:i=xv(null,i,d,s,c);break t;case 1:i=Gb(null,i,d,s,c);break t;case 11:i=jb(null,i,d,s,c);break t;case 14:i=Hb(null,i,d,ji(d.type,s),c);break t}throw Error(e(306,d,""))}return i;case 0:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:ji(d,m),xv(s,i,d,m,c);case 1:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:ji(d,m),Gb(s,i,d,m,c);case 3:t:{if(Xb(i),s===null)throw Error(e(387));d=i.pendingProps,A=i.memoizedState,m=A.element,lb(s,i),mm(i,d,null,c);var C=i.memoizedState;if(d=C.element,A.isDehydrated)if(A={element:d,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){m=Su(Error(e(423)),i),i=qb(s,i,d,c,m);break t}else if(d!==m){m=Su(Error(e(424)),i),i=qb(s,i,d,c,m);break t}else for(Os=to(i.stateNode.containerInfo.firstChild),Fs=i,Oe=!0,zi=null,c=ab(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(mu(),d===m){i=Kr(s,i,c);break t}is(s,i,d,c)}i=i.child}return i;case 5:return hb(i),s===null&&tv(i),d=i.type,m=i.pendingProps,A=s!==null?s.memoizedProps:null,C=m.children,V0(d,m)?C=null:A!==null&&V0(d,A)&&(i.flags|=32),Vb(s,i),is(s,i,C,c),i.child;case 6:return s===null&&tv(i),null;case 13:return Yb(s,i,c);case 4:return lv(i,i.stateNode.containerInfo),d=i.pendingProps,s===null?i.child=yu(i,null,d,c):is(s,i,d,c),i.child;case 11:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:ji(d,m),jb(s,i,d,m,c);case 7:return is(s,i,i.pendingProps,c),i.child;case 8:return is(s,i,i.pendingProps.children,c),i.child;case 12:return is(s,i,i.pendingProps.children,c),i.child;case 10:t:{if(d=i.type._context,m=i.pendingProps,A=i.memoizedProps,C=m.value,Pe(fm,d._currentValue),d._currentValue=C,A!==null)if(Ui(A.value,C)){if(A.children===m.children&&!vs.current){i=Kr(s,i,c);break t}}else for(A=i.child,A!==null&&(A.return=i);A!==null;){var R=A.dependencies;if(R!==null){C=A.child;for(var N=R.firstContext;N!==null;){if(N.context===d){if(A.tag===1){N=Yr(-1,c&-c),N.tag=2;var j=A.updateQueue;if(j!==null){j=j.shared;var q=j.pending;q===null?N.next=N:(N.next=q.next,q.next=N),j.pending=N}}A.lanes|=c,N=A.alternate,N!==null&&(N.lanes|=c),rv(A.return,c,i),R.lanes|=c;break}N=N.next}}else if(A.tag===10)C=A.type===i.type?null:A.child;else if(A.tag===18){if(C=A.return,C===null)throw Error(e(341));C.lanes|=c,R=C.alternate,R!==null&&(R.lanes|=c),rv(C,c,i),C=A.sibling}else C=A.child;if(C!==null)C.return=A;else for(C=A;C!==null;){if(C===i){C=null;break}if(A=C.sibling,A!==null){A.return=C.return,C=A;break}C=C.return}A=C}is(s,i,m.children,c),i=i.child}return i;case 9:return m=i.type,d=i.pendingProps.children,wu(i,c),m=fi(m),d=d(m),i.flags|=1,is(s,i,d,c),i.child;case 14:return d=i.type,m=ji(d,i.pendingProps),m=ji(d.type,m),Hb(s,i,d,m,c);case 15:return $b(s,i,i.type,i.pendingProps,c);case 17:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:ji(d,m),Cm(s,i),i.tag=1,ws(d)?(s=!0,om(i)):s=!1,wu(i,c),Nb(i,d,m),Sv(i,d,m,c),Cv(null,i,d,!0,s,c);case 19:return Qb(s,i,c);case 22:return Wb(s,i,c)}throw Error(e(156,i.tag))};function S1(s,i){return Oi(s,i)}function q_(s,i,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(s,i,c,d){return new q_(s,i,c,d)}function Vv(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Y_(s){if(typeof s=="function")return Vv(s)?1:0;if(s!=null){if(s=s.$$typeof,s===kt)return 11;if(s===Pt)return 14}return 2}function ho(s,i){var c=s.alternate;return c===null?(c=mi(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Fm(s,i,c,d,m,A){var C=2;if(d=s,typeof s=="function")Vv(s)&&(C=1);else if(typeof s=="string")C=5;else t:switch(s){case U:return _l(c.children,m,A,i);case G:C=8,m|=8;break;case Y:return s=mi(12,c,i,m|2),s.elementType=Y,s.lanes=A,s;case Tt:return s=mi(13,c,i,m),s.elementType=Tt,s.lanes=A,s;case St:return s=mi(19,c,i,m),s.elementType=St,s.lanes=A,s;case st:return Om(c,m,A,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case nt:C=10;break t;case Z:C=9;break t;case kt:C=11;break t;case Pt:C=14;break t;case lt:C=16,d=null;break t}throw Error(e(130,s==null?s:typeof s,""))}return i=mi(C,c,i,m),i.elementType=s,i.type=d,i.lanes=A,i}function _l(s,i,c,d){return s=mi(7,s,d,i),s.lanes=c,s}function Om(s,i,c,d){return s=mi(22,s,d,i),s.elementType=st,s.lanes=c,s.stateNode={isHidden:!1},s}function Gv(s,i,c){return s=mi(6,s,null,i),s.lanes=c,s}function Xv(s,i,c){return i=mi(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function K_(s,i,c,d,m){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xe(0),this.expirationTimes=Xe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xe(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function qv(s,i,c,d,m,A,C,R,N){return s=new K_(s,i,c,R,N),i===1?(i=1,A===!0&&(i|=8)):i=0,A=mi(3,null,null,i),s.current=A,A.stateNode=s,A.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},ov(A),s}function Q_(s,i,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:d==null?null:""+d,children:s,containerInfo:i,implementation:c}}function b1(s){if(!s)return no;s=s._reactInternals;t:{if(Ht(s)!==s||s.tag!==1)throw Error(e(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break t;case 1:if(ws(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break t}}i=i.return}while(i!==null);throw Error(e(171))}if(s.tag===1){var c=s.type;if(ws(c))return KS(s,c,i)}return i}function E1(s,i,c,d,m,A,C,R,N){return s=qv(c,d,!0,s,m,A,C,R,N),s.context=b1(null),c=s.current,d=rs(),m=co(c),A=Yr(d,m),A.callback=i??null,ro(c,A,m),s.current.lanes=m,ss(s,m,d),bs(s,d),s}function Bm(s,i,c,d){var m=i.current,A=rs(),C=co(m);return c=b1(c),i.context===null?i.context=c:i.pendingContext=c,i=Yr(A,C),i.payload={element:s},d=d===void 0?null:d,d!==null&&(i.callback=d),s=ro(m,i,C),s!==null&&(Wi(s,m,C,A),gm(s,m,C)),C}function Um(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function x1(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function Yv(s,i){x1(s,i),(s=s.alternate)&&x1(s,i)}function Z_(){return null}var C1=typeof reportError=="function"?reportError:function(s){console.error(s)};function Kv(s){this._internalRoot=s}zm.prototype.render=Kv.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(e(409));Bm(s,i,null,null)},zm.prototype.unmount=Kv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;El(function(){Bm(null,s,null,null)}),i[Wr]=null}};function zm(s){this._internalRoot=s}zm.prototype.unstable_scheduleHydration=function(s){if(s){var i=lS();s={blockedOn:null,target:s,priority:i};for(var c=0;c<Qa.length&&i!==0&&i<Qa[c].priority;c++);Qa.splice(c,0,s),c===0&&hS(s)}};function Qv(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function jm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function _1(){}function J_(s,i,c,d,m){if(m){if(typeof d=="function"){var A=d;d=function(){var j=Um(C);A.call(j)}}var C=E1(i,d,s,0,null,!1,!1,"",_1);return s._reactRootContainer=C,s[Wr]=C.current,Ud(s.nodeType===8?s.parentNode:s),El(),C}for(;m=s.lastChild;)s.removeChild(m);if(typeof d=="function"){var R=d;d=function(){var j=Um(N);R.call(j)}}var N=qv(s,0,!1,null,null,!1,!1,"",_1);return s._reactRootContainer=N,s[Wr]=N.current,Ud(s.nodeType===8?s.parentNode:s),El(function(){Bm(i,N,c,d)}),N}function Hm(s,i,c,d,m){var A=c._reactRootContainer;if(A){var C=A;if(typeof m=="function"){var R=m;m=function(){var N=Um(C);R.call(N)}}Bm(i,C,s,m)}else C=J_(c,i,s,m,d);return Um(C)}aS=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var c=Xa(i.pendingLanes);c!==0&&(su(i,c|1),bs(i,Zt()),(se&6)===0&&(xu=Zt()+500,so()))}break;case 13:El(function(){var d=qr(s,1);if(d!==null){var m=rs();Wi(d,s,1,m)}}),Yv(s,1)}},b0=function(s){if(s.tag===13){var i=qr(s,134217728);if(i!==null){var c=rs();Wi(i,s,134217728,c)}Yv(s,134217728)}},oS=function(s){if(s.tag===13){var i=co(s),c=qr(s,i);if(c!==null){var d=rs();Wi(c,s,i,d)}Yv(s,i)}},lS=function(){return me},cS=function(s,i){var c=me;try{return me=s,i()}finally{me=c}},vd=function(s,i,c){switch(i){case"input":if(Ii(s,c),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==s&&d.form===s.form){var m=rm(d);if(!m)throw Error(e(90));Ni(d),Ii(d,m)}}}break;case"textarea":Va(s,c);break;case"select":i=c.value,i!=null&&Wa(s,!!c.multiple,i,!1)}},Sd=Hv,Ug=El;var tk={usingClientEntryPoint:!1,Events:[Hd,hu,rm,Bg,Ad,Hv]},nf={findFiberByHostInstance:gl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ek={bundleType:nf.bundleType,version:nf.version,rendererPackageName:nf.rendererPackageName,rendererConfig:nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Fi(s),s===null?null:s.stateNode},findFiberByHostInstance:nf.findFiberByHostInstance||Z_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$m.isDisabled&&$m.supportsFiber)try{pl=$m.inject(ek),dn=$m}catch{}}return Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tk,Es.createPortal=function(s,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qv(i))throw Error(e(200));return Q_(s,i,null,c)},Es.createRoot=function(s,i){if(!Qv(s))throw Error(e(299));var c=!1,d="",m=C1;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=qv(s,1,!1,null,null,c,!1,d,m),s[Wr]=i.current,Ud(s.nodeType===8?s.parentNode:s),new Kv(i)},Es.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(e(188)):(s=Object.keys(s).join(","),Error(e(268,s)));return s=Fi(i),s=s===null?null:s.stateNode,s},Es.flushSync=function(s){return El(s)},Es.hydrate=function(s,i,c){if(!jm(i))throw Error(e(200));return Hm(null,s,i,!0,c)},Es.hydrateRoot=function(s,i,c){if(!Qv(s))throw Error(e(405));var d=c!=null&&c.hydratedSources||null,m=!1,A="",C=C1;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(A=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),i=E1(i,null,s,1,c??null,m,!1,A,C),s[Wr]=i.current,Ud(s),d)for(s=0;s<d.length;s++)c=d[s],m=c._getVersion,m=m(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,m]:i.mutableSourceEagerHydrationData.push(c,m);return new zm(i)},Es.render=function(s,i,c){if(!jm(i))throw Error(e(200));return Hm(null,s,i,!1,c)},Es.unmountComponentAtNode=function(s){if(!jm(s))throw Error(e(40));return s._reactRootContainer?(El(function(){Hm(null,null,s,!1,function(){s._reactRootContainer=null,s[Wr]=null})}),!0):!1},Es.unstable_batchedUpdates=Hv,Es.unstable_renderSubtreeIntoContainer=function(s,i,c,d){if(!jm(c))throw Error(e(200));if(s==null||s._reactInternals===void 0)throw Error(e(38));return Hm(s,i,c,!1,d)},Es.version="18.3.1-next-f1338f8080-20240426",Es}var I1;function dk(){if(I1)return ew.exports;I1=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),ew.exports=hk(),ew.exports}var F1;function fk(){if(F1)return Wm;F1=1;var g=dk();return Wm.createRoot=g.createRoot,Wm.hydrateRoot=g.hydrateRoot,Wm}var pk=fk();const gk=fE(pk),hs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),fw=[.001,0,0,.001,0,0],iw=1.35,ri={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},go={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Lf="pdfjs_internal_editor_",Wt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},te={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},mk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pw={TRIANGLES:1,LATTICE:2},mn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ty={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ln={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ku={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},f0={ERRORS:0,WARNINGS:1,INFOS:5},Df={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},rf={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},yk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let p0=f0.WARNINGS;function vk(g){Number.isInteger(g)&&(p0=g)}function wk(){return p0}function g0(g){p0>=f0.INFOS&&console.info(`Info: ${g}`)}function zt(g){p0>=f0.WARNINGS&&console.warn(`Warning: ${g}`)}function Te(g){throw new Error(g)}function ee(g,t){g||Te(t)}function Ak(g){switch(g==null?void 0:g.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pE(g,t=null,e=null){if(!g)return null;if(e&&typeof g=="string"){if(e.addDefaultProtocol&&g.startsWith("www.")){const r=g.match(/\./g);(r==null?void 0:r.length)>=2&&(g=`http://${g}`)}if(e.tryConvertEncoding)try{g=Ck(g)}catch{}}const n=t?URL.parse(g,t):URL.parse(g);return Ak(n)?n:null}function gE(g,t,e=!1){const n=URL.parse(g);return n?(n.hash=t,n.href):e&&pE(g,"http://example.com")?g.split("#",1)[0]+`${t?`#${t}`:""}`:""}function jt(g,t,e,n=!1){return Object.defineProperty(g,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Qc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class O1 extends Qc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class rw extends Qc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class gw extends Qc{constructor(t){super(t,"InvalidPDFException")}}class Ny extends Qc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class Sk extends Qc{constructor(t){super(t,"FormatError")}}class al extends Qc{constructor(t){super(t,"AbortException")}}function mE(g){(typeof g!="object"||(g==null?void 0:g.length)===void 0)&&Te("Invalid argument for bytesToString");const t=g.length,e=8192;if(t<e)return String.fromCharCode.apply(null,g);const n=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),l=g.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function kg(g){typeof g!="string"&&Te("Invalid argument for stringToBytes");const t=g.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=g.charCodeAt(n)&255;return e}function bk(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function Ek(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function xk(){try{return new Function(""),!0}catch{return!1}}class Sn{static get isLittleEndian(){return jt(this,"isLittleEndian",Ek())}static get isEvalSupported(){return jt(this,"isEvalSupported",xk())}static get isOffscreenCanvasSupported(){return jt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return jt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return jt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return jt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return jt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return jt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const aw=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));var Ba,ey,mw;class ct{static makeHexColor(t,e,n){return`#${aw[t]}${aw[e]}${aw[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const r=t[n],o=t[n+1];t[n]=r*e[0]+o*e[2]+e[4],t[n+1]=r*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5];for(let p=0;p<6;p+=2){const y=t[n+p],v=t[n+p+1];t[n+p]=y*r+v*l+h,t[n+p+1]=y*o+v*u+f}}static applyInverseTransform(t,e){const n=t[0],r=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const r=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5],p=t[0],y=t[1],v=t[2],S=t[3];let _=r*p+h,x=_,T=r*v+h,k=T,M=u*y+f,P=M,L=u*S+f,D=L;if(o!==0||l!==0){const I=o*p,U=o*v,G=l*y,Y=l*S;_+=G,k+=G,T+=Y,x+=Y,M+=I,D+=I,L+=U,P+=U}n[0]=Math.min(n[0],_,T,x,k),n[1]=Math.min(n[1],M,L,P,D),n[2]=Math.max(n[2],_,T,x,k),n[3]=Math.max(n[3],M,L,P,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],o=t[2],l=t[3],u=n**2+r**2,h=n*o+r*l,f=o**2+l**2,p=(u+f)/2,y=Math.sqrt(p**2-(u*f-h**2));e[0]=Math.sqrt(p+y||1),e[1]=Math.sqrt(p-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,r,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,r),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,r)}static bezierBoundingBox(t,e,n,r,o,l,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),E(this,Ba,mw).call(this,t,n,o,u,e,r,l,h,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),E(this,Ba,mw).call(this,t,n,o,u,e,r,l,h,3*(-e+3*(r-l)+h),6*(e-2*r+l),3*(r-e),f)}}Ba=new WeakSet,ey=function(t,e,n,r,o,l,u,h,f,p){if(f<=0||f>=1)return;const y=1-f,v=f*f,S=v*f,_=y*(y*(y*t+3*f*e)+3*v*n)+S*r,x=y*(y*(y*o+3*f*l)+3*v*u)+S*h;p[0]=Math.min(p[0],_),p[1]=Math.min(p[1],x),p[2]=Math.max(p[2],_),p[3]=Math.max(p[3],x)},mw=function(t,e,n,r,o,l,u,h,f,p,y,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&E(this,Ba,ey).call(this,t,e,n,r,o,l,u,h,-y/p,v);return}const S=p**2-4*y*f;if(S<0)return;const _=Math.sqrt(S),x=2*f;E(this,Ba,ey).call(this,t,e,n,r,o,l,u,h,(-p+_)/x,v),E(this,Ba,ey).call(this,t,e,n,r,o,l,u,h,(-p-_)/x,v)},b(ct,Ba);function Ck(g){return decodeURIComponent(escape(g))}let ow=null,B1=null;function _k(g){return ow||(ow=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,B1=new Map([["","t"]])),g.replaceAll(ow,(t,e,n)=>e?e.normalize("NFKC"):B1.get(n))}function yE(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const g=new Uint8Array(32);return crypto.getRandomValues(g),mE(g)}const Iu="pdfjs_internal_id_";function kk(g,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...o]=e;if(!g(n)&&!Number.isInteger(n)||!t(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function ds(g,t,e){return Math.min(Math.max(g,t),e)}function vE(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(mE(g))}function Tk(g){return Uint8Array.fromBase64?Uint8Array.fromBase64(g):kg(atob(g))}typeof Promise.try!="function"&&(Promise.try=function(g,...t){return new Promise(e=>{e(g(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(g){return g.reduce((t,e)=>t+e,0)});class Nf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(o){var h;if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Nf.shouldBuildText(u))(h=o==null?void 0:o.attributes)!=null&&h.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const f of o.children)r(f)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class wE{static setupStorage(t,e,n,r,o){const l=r.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var y,v;const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const u=o!=="richText",h=t.div;if(h.append(l),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=S}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const S=document.createTextNode(r.value);l.append(S),u&&Nf.shouldBuildText(r.name)&&f.push(S)}return{textDivs:f}}const p=[[r,-1,l]];for(;p.length>0;){const[S,_,x]=p.at(-1);if(_+1===S.children.length){p.pop();continue}const T=S.children[++p.at(-1)[1]];if(T===null)continue;const{name:k}=T;if(k==="#text"){const P=document.createTextNode(T.value);f.push(P),x.append(P);continue}const M=(y=T==null?void 0:T.attributes)!=null&&y.xmlns?document.createElementNS(T.attributes.xmlns,k):document.createElement(k);if(x.append(M),T.attributes&&this.setAttributes({html:M,element:T,storage:e,intent:o,linkService:n}),((v=T.children)==null?void 0:v.length)>0)p.push([T,-1,M]);else if(T.value){const P=document.createTextNode(T.value);u&&Nf.shouldBuildText(k)&&f.push(P),M.append(P)}}for(const S of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Zr="http://www.w3.org/2000/svg",Rl=class Rl{};K(Rl,"CSS",96),K(Rl,"PDF",72),K(Rl,"PDF_TO_CSS_UNITS",Rl.CSS/Rl.PDF);let ol=Rl;async function Tg(g,t="text"){if(hf(g,document.baseURI)){const e=await fetch(g);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",g,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Pg{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,y,v,S;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,y=0,v=0,S=1;break;case 90:p=0,y=1,v=1,S=0;break;case 270:p=0,y=-1,v=-1,S=0;break;case 0:p=1,y=0,v=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,S=-S);let _,x,T,k;p===0?(_=Math.abs(f-t[1])*n+o,x=Math.abs(h-t[0])*n+l,T=(t[3]-t[1])*n,k=(t[2]-t[0])*n):(_=Math.abs(h-t[0])*n+o,x=Math.abs(f-t[1])*n+l,T=(t[2]-t[0])*n,k=(t[3]-t[1])*n),this.transform=[p*n,y*n,v*n,S*n,_-p*n*h-v*n*f,x-y*n*h-S*n*f],this.width=T,this.height=k}get rawDims(){const t=this.viewBox;return jt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Pg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return ct.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ct.applyTransform(e,this.transform);const n=[t[2],t[3]];return ct.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ct.applyInverseTransform(n,this.transform),n}}class WA extends Qc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function m0(g){const t=g.length;let e=0;for(;e<t&&g[e].trim()==="";)e++;return g.substring(e,e+5).toLowerCase()==="data:"}function VA(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function Pk(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function Rk(g,t="document.pdf"){if(typeof g!="string")return t;if(m0(g))return zt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(g);if(!n)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return r(l);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return r(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return r(h[0])}return t}class U1{constructor(){K(this,"started",Object.create(null));K(this,"times",[])}time(t){t in this.started&&zt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||zt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-r}ms
`);return t.join("")}}function hf(g,t){const e=t?URL.parse(g,t):URL.parse(g);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Di(g){g.preventDefault()}function tn(g){g.preventDefault(),g.stopPropagation()}function Mk(g){console.log("Deprecated API usage: "+g)}var Of;class Iy{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;a(this,Of)||w(this,Of,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Of).exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=p,u+=y):f==="+"&&(l-=p,u-=y),new Date(Date.UTC(n,r,o,l,u,h))}}Of=new WeakMap,b(Iy,Of);function Lk(g,{scale:t=1,rotation:e=0}){const{width:n,height:r}=g.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new Pg({viewBox:o,userUnit:1,scale:t,rotation:e})}function Rg(g){if(g.startsWith("#")){const t=parseInt(g.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(t=>parseInt(t)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(zt(`Not a valid color format: "${g}"`),[0,0,0])}function Dk(g){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of g.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;g.set(e,Rg(n))}t.remove()}function Ve(g){const{a:t,b:e,c:n,d:r,e:o,f:l}=g.getTransform();return[t,e,n,r,o,l]}function fr(g){const{a:t,b:e,c:n,d:r,e:o,f:l}=g.getTransform().invertSelf();return[t,e,n,r,o,l]}function qc(g,t,e=!1,n=!0){if(t instanceof Pg){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=g,u=Sn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=y):(l.width=y,l.height=p)}n&&g.setAttribute("data-main-rotation",t.rotation)}class Ur{constructor(){const{pixelRatio:t}=Ur;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,o=-1){let l=1/0,u=1/0,h=1/0;n=Ur.capPixels(n,o),n>0&&(l=Math.sqrt(n/(t*e))),r!==-1&&(u=r/t,h=r/e);const f=Math.min(l,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const yw=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Nk{static get isDarkMode(){var t;return jt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class Ik{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),jt(this,"commentForegroundColor",Rg(n))}}function Fk(g,t,e,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return g=Math.round(g*n+r),t=Math.round(t*n+r),e=Math.round(e*n+r),[g,t,e]}function z1(g,t){const e=g[0]/255,n=g[1]/255,r=g[2]/255,o=Math.max(e,n,r),l=Math.min(e,n,r),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const h=o-l;switch(t[1]=u<.5?h/(o+l):h/(2-o-l),o){case e:t[0]=((n-r)/h+(n<r?6:0))*60;break;case n:t[0]=((r-e)/h+2)*60;break;case r:t[0]=((e-n)/h+4)*60;break}}t[2]=u}function vw(g,t){const e=g[0],n=g[1],r=g[2],o=(1-Math.abs(2*r-1))*n,l=o*(1-Math.abs(e/60%2-1)),u=r-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function j1(g){return g<=.03928?g/12.92:((g+.055)/1.055)**2.4}function H1(g,t,e){vw(g,e),e.map(j1);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];vw(t,e),e.map(j1);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const $1=new Map;function Ok(g,t){const e=g[0]+g[1]*256+g[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=$1.get(e);if(n)return n;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);z1(g,l);const u=r.subarray(6,9);z1(t,u);const h=u[2]<.5,f=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),H1(l,u,o)<f){let p,y;h?(p=l[2],y=1):(p=0,y=l[2]);const v=.005;for(;y-p>v;){const S=l[2]=(p+y)/2;h===H1(l,u,o)<f?p=S:y=S}l[2]=h?y:p}return vw(l,o),n=ct.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),$1.set(e,n),n}function AE({html:g,dir:t,className:e},n){const r=document.createDocumentFragment();if(typeof g=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=g.split(/(?:\r\n?|\n)/);for(let u=0,h=l.length;u<h;++u){const f=l[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}r.append(o)}else wE.render({xfaHtml:g,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",e),n.append(r)}function SE(g){const t=new Path2D;if(!g)return t;for(let e=0,n=g.length;e<n;)switch(g[e++]){case rf.moveTo:t.moveTo(g[e++],g[e++]);break;case rf.lineTo:t.lineTo(g[e++],g[e++]);break;case rf.curveTo:t.bezierCurveTo(g[e++],g[e++],g[e++],g[e++],g[e++],g[e++]);break;case rf.quadraticCurveTo:t.quadraticCurveTo(g[e++],g[e++],g[e++],g[e++]);break;case rf.closePath:t.closePath();break;default:zt(`Unrecognized drawing path operator: ${g[e-1]}`);break}return t}var mo,yo,wi,Ai,Bf,vo,Hu,$u,Uf,qy,bE,$n,EE,xE,Tu,df;const ea=class ea{constructor(t){b(this,$n);b(this,mo,null);b(this,yo,null);b(this,wi);b(this,Ai,null);b(this,Bf,null);b(this,vo,null);b(this,Hu,null);b(this,$u,null);w(this,wi,t),a(ea,Uf)||w(ea,Uf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=w(this,mo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,wi)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Di,{signal:e}),t.addEventListener("pointerdown",E(ea,qy,bE),{signal:e}));const n=w(this,Ai,document.createElement("div"));n.className="buttons",t.append(n);const r=a(this,wi).toolbarPosition;if(r){const{style:o}=t,l=a(this,wi)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return a(this,mo)}hide(){var t;a(this,mo).classList.add("hidden"),(t=a(this,yo))==null||t.hideDropdown()}show(){var t,e;a(this,mo).classList.remove("hidden"),(t=a(this,Bf))==null||t.shown(),(e=a(this,vo))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=a(this,wi),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",a(ea,Uf)[t]),E(this,$n,Tu).call(this,n)&&n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),a(this,Ai).append(n)}async addAltText(t){const e=await t.render();E(this,$n,Tu).call(this,e),a(this,Ai).append(e,a(this,$n,df)),w(this,Bf,t)}addComment(t,e=null){if(a(this,vo))return;const n=t.renderForToolbar();if(!n)return;E(this,$n,Tu).call(this,n);const r=w(this,Hu,a(this,$n,df));e?(a(this,Ai).insertBefore(n,e),a(this,Ai).insertBefore(r,e)):a(this,Ai).append(n,r),w(this,vo,t),t.toolbar=this}addColorPicker(t){if(a(this,yo))return;w(this,yo,t);const e=t.renderButton();E(this,$n,Tu).call(this,e),a(this,Ai).append(e,a(this,$n,df))}async addEditSignatureButton(t){const e=w(this,$u,await t.renderEditButton(a(this,wi)));E(this,$n,Tu).call(this,e),a(this,Ai).append(e,a(this,$n,df))}removeButton(t){var e,n;switch(t){case"comment":(e=a(this,vo))==null||e.removeToolbarCommentButton(),w(this,vo,null),(n=a(this,Hu))==null||n.remove(),w(this,Hu,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const r=a(this,Ai).querySelector(n);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){a(this,$u)&&(a(this,$u).title=t)}remove(){var t;a(this,mo).remove(),(t=a(this,yo))==null||t.destroy(),w(this,yo,null)}};mo=new WeakMap,yo=new WeakMap,wi=new WeakMap,Ai=new WeakMap,Bf=new WeakMap,vo=new WeakMap,Hu=new WeakMap,$u=new WeakMap,Uf=new WeakMap,qy=new WeakSet,bE=function(t){t.stopPropagation()},$n=new WeakSet,EE=function(t){a(this,wi)._focusEventsAllowed=!1,tn(t)},xE=function(t){a(this,wi)._focusEventsAllowed=!0,tn(t)},Tu=function(t){const e=a(this,wi)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",E(this,$n,EE).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,$n,xE).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Di,{signal:e}),!0)},df=function(){const t=document.createElement("div");return t.className="divider",t},b(ea,qy),b(ea,Uf,null);let ww=ea;var zf,Dl,sa,ja,CE,_E,Aw;class Bk{constructor(t){b(this,ja);b(this,zf,null);b(this,Dl,null);b(this,sa);w(this,sa,t)}show(t,e,n){const[r,o]=E(this,ja,_E).call(this,e,n),{style:l}=a(this,Dl)||w(this,Dl,E(this,ja,CE).call(this));t.append(a(this,Dl)),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Dl).remove()}}zf=new WeakMap,Dl=new WeakMap,sa=new WeakMap,ja=new WeakSet,CE=function(){const t=w(this,Dl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=a(this,sa)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Di,{signal:e});const n=w(this,zf,document.createElement("div"));return n.className="buttons",t.append(n),a(this,sa).hasCommentManager()&&E(this,ja,Aw).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,sa).commentSelection("floating_button")}),E(this,ja,Aw).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,sa).highlightSelection("floating_button")}),t},_E=function(t,e){let n=0,r=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const u=o.x+(e?o.width:0);if(l>n){r=u,n=l;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,n]},Aw=function(t,e,n,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const u=a(this,sa)._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",Di,{signal:u}),o.addEventListener("click",r,{signal:u})),a(this,zf).append(o)};function kE(g,t,e){for(const n of e)t.addEventListener(n,g[n].bind(g))}var Nl,Il,Wu,Fl;const we=class we{static initializeAndAddPointerId(t){(a(we,Il)||w(we,Il,new Set)).add(t)}static setPointer(t,e){a(we,Nl)||w(we,Nl,e),a(we,Fl)??w(we,Fl,t)}static setTimeStamp(t){w(we,Wu,t)}static isSamePointerId(t){return a(we,Nl)===t}static isSamePointerIdOrRemove(t){var e;return a(we,Nl)===t?!0:((e=a(we,Il))==null||e.delete(t),!1)}static isSamePointerType(t){return a(we,Fl)===t}static isInitializedAndDifferentPointerType(t){return a(we,Fl)!==null&&!we.isSamePointerType(t)}static isSameTimeStamp(t){return a(we,Wu)===t}static isUsingMultiplePointers(){var t;return((t=a(we,Il))==null?void 0:t.size)>=1}static clearPointerType(){w(we,Fl,null)}static clearPointerIds(){w(we,Nl,NaN),w(we,Il,null)}static clearTimeStamp(){w(we,Wu,NaN)}};Nl=new WeakMap,Il=new WeakMap,Wu=new WeakMap,Fl=new WeakMap,b(we,Nl,NaN),b(we,Il,null),b(we,Wu,NaN),b(we,Fl,null);let Yn=we;var Yy;class Uk{constructor(){b(this,Yy,0)}get id(){return`${Lf}${gn(this,Yy)._++}`}}Yy=new WeakMap;var Vu,jf,Kn,Gu,ny;const JA=class JA{constructor(){b(this,Gu);b(this,Vu,yE());b(this,jf,0);b(this,Kn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return jt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:r,type:o}=t;return E(this,Gu,ny).call(this,`${e}_${n}_${r}_${o}`,t)}async getFromUrl(t){return E(this,Gu,ny).call(this,t,t)}async getFromBlob(t,e){const n=await e;return E(this,Gu,ny).call(this,t,n)}async getFromId(t){a(this,Kn)||w(this,Kn,new Map);const e=a(this,Kn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,Kn)||w(this,Kn,new Map);let n=a(this,Kn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${a(this,Vu)}_${gn(this,jf)._++}`,refCounter:1,isSvg:!1},a(this,Kn).set(t,n),a(this,Kn).set(n.id,n),n}getSvgUrl(t){const e=a(this,Kn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;a(this,Kn)||w(this,Kn,new Map);const e=a(this,Kn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(r=n.close)==null||r.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,Vu)}_`)}};Vu=new WeakMap,jf=new WeakMap,Kn=new WeakMap,Gu=new WeakSet,ny=async function(t,e){a(this,Kn)||w(this,Kn,new Map);let n=a(this,Kn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${a(this,Vu)}_${gn(this,jf)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(n.url=e,r=await Tg(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=JA._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const y=n.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=p});l.readAsDataURL(r),await h}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){zt(r),n=null}return a(this,Kn).set(t,n),n&&a(this,Kn).set(n.id,n),n};let Sw=JA;var nn,wo,Hf,We;class zk{constructor(t=128){b(this,nn,[]);b(this,wo,!1);b(this,Hf);b(this,We,-1);w(this,Hf,t)}add({cmd:t,undo:e,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&t(),a(this,wo))return;const h={cmd:t,undo:e,post:n,type:o};if(a(this,We)===-1){a(this,nn).length>0&&(a(this,nn).length=0),w(this,We,0),a(this,nn).push(h);return}if(l&&a(this,nn)[a(this,We)].type===o){u&&(h.undo=a(this,nn)[a(this,We)].undo),a(this,nn)[a(this,We)]=h;return}const f=a(this,We)+1;f===a(this,Hf)?a(this,nn).splice(0,1):(w(this,We,f),f<a(this,nn).length&&a(this,nn).splice(f)),a(this,nn).push(h)}undo(){if(a(this,We)===-1)return;w(this,wo,!0);const{undo:t,post:e}=a(this,nn)[a(this,We)];t(),e==null||e(),w(this,wo,!1),w(this,We,a(this,We)-1)}redo(){if(a(this,We)<a(this,nn).length-1){w(this,We,a(this,We)+1),w(this,wo,!0);const{cmd:t,post:e}=a(this,nn)[a(this,We)];t(),e==null||e(),w(this,wo,!1)}}hasSomethingToUndo(){return a(this,We)!==-1}hasSomethingToRedo(){return a(this,We)<a(this,nn).length-1}cleanType(t){if(a(this,We)!==-1){for(let e=a(this,We);e>=0;e--)if(a(this,nn)[e].type!==t){a(this,nn).splice(e+1,a(this,We)-e),w(this,We,e);return}a(this,nn).length=0,w(this,We,-1)}}destroy(){w(this,nn,null)}}nn=new WeakMap,wo=new WeakMap,Hf=new WeakMap,We=new WeakMap;var Ky,TE;class Mg{constructor(t){b(this,Ky);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Sn.platform;for(const[n,r,o={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(E(this,Ky,TE).call(this,e));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(r.bind(t,...l,e)(),o||tn(e))}}Ky=new WeakSet,TE=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Qy=class Qy{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Dk(t),jt(this,"_colors",t)}convert(t){const e=Rg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((o,l)=>o===e[l]))return Qy._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ct.makeHexColor(...e):t}};K(Qy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let bw=Qy;var Xu,zs,qu,Ye,vn,Yu,Si,Ku,bi,Qn,Ao,So,Qu,bo,mr,Ei,Ol,$f,Wf,Zu,Vf,yr,Eo,Ju,xo,vr,Zy,Co,th,Gf,_o,Bl,eh,ko,Xf,cn,ye,ia,To,Po,qf,nh,Yf,Ro,wr,ra,Kf,Qf,xi,ot,sy,Ew,PE,RE,ff,ME,LE,DE,xw,NE,IE,FE,OE,as,Jr,BE,UE,Cw,zE,pf,_w;const Ou=class Ou{constructor(t,e,n,r,o,l,u,h,f,p,y,v,S,_,x,T){b(this,ot);b(this,Xu,new AbortController);b(this,zs,null);b(this,qu,null);b(this,Ye,new Map);b(this,vn,new Map);b(this,Yu,null);b(this,Si,null);b(this,Ku,null);b(this,bi,new zk);b(this,Qn,null);b(this,Ao,null);b(this,So,null);b(this,Qu,0);b(this,bo,new Set);b(this,mr,null);b(this,Ei,null);b(this,Ol,new Set);K(this,"_editorUndoBar",null);b(this,$f,!1);b(this,Wf,!1);b(this,Zu,!1);b(this,Vf,null);b(this,yr,null);b(this,Eo,null);b(this,Ju,null);b(this,xo,!1);b(this,vr,null);b(this,Zy,new Uk);b(this,Co,!1);b(this,th,!1);b(this,Gf,!1);b(this,_o,null);b(this,Bl,null);b(this,eh,null);b(this,ko,null);b(this,Xf,null);b(this,cn,Wt.NONE);b(this,ye,new Set);b(this,ia,null);b(this,To,null);b(this,Po,null);b(this,qf,null);b(this,nh,null);b(this,Yf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,Ro,[0,0]);b(this,wr,null);b(this,ra,null);b(this,Kf,null);b(this,Qf,null);b(this,xi,null);const k=this._signal=a(this,Xu).signal;w(this,ra,t),w(this,Kf,e),w(this,Qf,n),w(this,Yu,r),w(this,Qn,o),w(this,To,l),w(this,nh,h),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:k}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:k}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:k}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:k}),u._on("setpreference",this.onSetPreference.bind(this),{signal:k}),u._on("switchannotationeditorparams",M=>this.updateParams(M.type,M.value),{signal:k}),window.addEventListener("pointerdown",()=>{w(this,th,!0)},{capture:!0,signal:k}),window.addEventListener("pointerup",()=>{w(this,th,!1)},{capture:!0,signal:k}),E(this,ot,ME).call(this),E(this,ot,OE).call(this),E(this,ot,xw).call(this),w(this,Si,h.annotationStorage),w(this,Vf,h.filterFactory),w(this,Po,f),w(this,Ju,p||null),w(this,$f,y),w(this,Wf,v),w(this,Zu,S),w(this,Xf,_||null),this.viewParameters={realScale:ol.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=T!==!1,o==null||o.setSidebarUiManager(this)}static get _keyboardManager(){const t=Ou.prototype,e=l=>a(l,ra).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return jt(this,"_keyboardManager",new Mg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&a(l,ra).contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&a(l,ra).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,r,o,l,u,h,f;(t=a(this,xi))==null||t.resolve(),w(this,xi,null),(e=a(this,Xu))==null||e.abort(),w(this,Xu,null),this._signal=null;for(const p of a(this,vn).values())p.destroy();a(this,vn).clear(),a(this,Ye).clear(),a(this,Ol).clear(),(n=a(this,ko))==null||n.clear(),w(this,zs,null),a(this,ye).clear(),a(this,bi).destroy(),(r=a(this,Yu))==null||r.destroy(),(o=a(this,Qn))==null||o.destroy(),(l=a(this,To))==null||l.destroy(),(u=a(this,vr))==null||u.hide(),w(this,vr,null),(h=a(this,eh))==null||h.destroy(),w(this,eh,null),w(this,qu,null),a(this,yr)&&(clearTimeout(a(this,yr)),w(this,yr,null)),a(this,wr)&&(clearTimeout(a(this,wr)),w(this,wr,null)),(f=this._editorUndoBar)==null||f.destroy(),w(this,nh,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Xf)}get useNewAltTextFlow(){return a(this,Wf)}get useNewAltTextWhenAddingImage(){return a(this,Zu)}get hcmFilter(){return jt(this,"hcmFilter",a(this,Po)?a(this,Vf).addHCMFilter(a(this,Po).foreground,a(this,Po).background):"none")}get direction(){return jt(this,"direction",getComputedStyle(a(this,ra)).direction)}get _highlightColors(){return jt(this,"_highlightColors",a(this,Ju)?new Map(a(this,Ju).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return jt(this,"highlightColors",null);const e=new Map,n=!!a(this,Po);for(const[r,o]of t){const l=r.endsWith("_HCM");if(n&&l){e.set(r.replace("_HCM",""),o);continue}!n&&!l&&e.set(r,o)}return jt(this,"highlightColors",e)}get highlightColorNames(){return jt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),w(this,So,t)}setMainHighlightColorPicker(t){w(this,eh,t)}editAltText(t,e=!1){var n;(n=a(this,Yu))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!a(this,Qn)}editComment(t,e,n,r){var o;(o=a(this,Qn))==null||o.showDialog(this,t,e,n,r)}selectComment(t,e){const n=a(this,vn).get(t),r=n==null?void 0:n.getEditorByUID(e);r==null||r.toggleComment(!0,!0)}updateComment(t){var e;(e=a(this,Qn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=a(this,Qn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=a(this,Qn))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var r;(r=a(this,Qn))==null||r.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=a(this,Qn))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=a(this,Qn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(a(this,vn).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await n}getSignature(t){var e;(e=a(this,To))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,To)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":w(this,Zu,e);break}}onPageChanging({pageNumber:t}){w(this,Qu,t-1)}focusMainContainer(){a(this,ra).focus()}findParent(t,e){for(const n of a(this,vn).values()){const{x:r,y:o,width:l,height:u}=n.div.getBoundingClientRect();if(t>=r&&t<=r+l&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){a(this,Kf).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,Ol).add(t)}removeShouldRescale(t){a(this,Ol).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*ol.PDF_TO_CSS_UNITS;for(const n of a(this,Ol))n.onScaleChanging();(e=a(this,So))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=n,h=n.toString(),p=E(this,ot,sy).call(this,n).closest(".textLayer"),y=this.getSelectionBoxes(p);if(!y)return;n.empty();const v=E(this,ot,Ew).call(this,p),S=a(this,cn)===Wt.NONE,_=()=>{const x=v==null?void 0:v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:h});S&&this.showAllEditors("highlight",!0,!0),e&&(x==null||x.editComment())};if(S){this.switchToMode(Wt.HIGHLIGHT,_);return}_()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!a(this,Si))return null;const e=`${Lf}${t}`,n=a(this,Si).getRawValue(e);return n&&a(this,Si).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Si)&&!a(this,Si).has(t.id)&&a(this,Si).setValue(t.id,t)}a11yAlert(t,e=null){const n=a(this,Qf);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,xo)&&(w(this,xo,!1),E(this,ot,ff).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,ye))if(e.div.contains(t)){w(this,Bl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Bl))return;const[t,e]=a(this,Bl);w(this,Bl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,ot,xw).call(this),this.setEditingState(!0)}removeEditListeners(){E(this,ot,NE).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of a(this,Ei))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of a(this,Ei))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=a(this,zs))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of a(this,ye)){const o=r.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of a(this,Ei))if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){zt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const h of n){const f=await r.deserialize(h);if(!f)return;o.push(f)}const l=()=>{for(const h of o)E(this,ot,Cw).call(this,h);E(this,ot,_w).call(this,o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){zt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,cn)!==Wt.NONE&&!this.isEditorHandlingKeyboard&&Ou._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,xo)&&(w(this,xo,!1),E(this,ot,ff).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(E(this,ot,LE).call(this),E(this,ot,IE).call(this),E(this,ot,as).call(this,{isEditing:a(this,cn)!==Wt.NONE,isEmpty:E(this,ot,pf).call(this),hasSomethingToUndo:a(this,bi).hasSomethingToUndo(),hasSomethingToRedo:a(this,bi).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,ot,DE).call(this),E(this,ot,FE).call(this),E(this,ot,as).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,Ei)){w(this,Ei,t);for(const e of a(this,Ei))E(this,ot,Jr).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,Zy).id}get currentLayer(){return a(this,vn).get(a(this,Qu))}getLayer(t){return a(this,vn).get(t)}get currentPageIndex(){return a(this,Qu)}addLayer(t){a(this,vn).set(t.pageIndex,t),a(this,Co)?t.enable():t.disable()}removeLayer(t){a(this,vn).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,o=!1,l=!1){var u,h,f,p,y,v;if(a(this,cn)!==t&&!(a(this,xi)&&(await a(this,xi).promise,!a(this,xi)))){if(w(this,xi,Promise.withResolvers()),(u=a(this,So))==null||u.commitOrRemove(),a(this,cn)===Wt.POPUP&&((h=a(this,Qn))==null||h.hideSidebar()),(f=a(this,Qn))==null||f.destroyPopup(),w(this,cn,t),t===Wt.NONE){this.setEditingState(!1),E(this,ot,UE).call(this);for(const S of a(this,Ye).values())S.hideStandaloneCommentButton();(p=this._editorUndoBar)==null||p.hide(),this.toggleComment(null),a(this,xi).resolve();return}for(const S of a(this,Ye).values())S.addStandaloneCommentButton();t===Wt.SIGNATURE&&await((y=a(this,To))==null?void 0:y.loadSignatures()),n&&Yn.clearPointerType(),this.setEditingState(!0),await E(this,ot,BE).call(this),this.unselectAll();for(const S of a(this,vn).values())S.updateMode(t);if(t===Wt.POPUP){a(this,qu)||w(this,qu,await a(this,nh).getAnnotationsByType(new Set(a(this,Ei).map(x=>x._editorType))));const S=new Set,_=[];for(const x of a(this,Ye).values()){const{annotationElementId:T,hasComment:k,deleted:M}=x;T&&S.add(T),k&&!M&&_.push(x.getData())}for(const x of a(this,qu)){const{id:T,popupRef:k,contentsObj:M}=x;k&&(M!=null&&M.str)&&!S.has(T)&&!a(this,bo).has(T)&&_.push(x)}(v=a(this,Qn))==null||v.showSidebar(_)}if(!e){r&&this.addNewEditorFromKeyboard(),a(this,xi).resolve();return}for(const S of a(this,Ye).values())S.uid===e?(this.setSelected(S),l?S.editComment():o?S.enterInEditMode():S.focus()):S.unselect();a(this,xi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,cn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(a(this,Ei)){switch(t){case te.CREATE:this.currentLayer.addNewEditor(e);return;case te.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,qf)||w(this,qf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of a(this,ye))n.updateParams(t,e);else for(const n of a(this,Ei))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const l of a(this,Ye).values())l.editorType===t&&l.show(e);(((o=a(this,qf))==null?void 0:o.get(te.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,ot,Jr).call(this,[[te.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Gf)!==t){w(this,Gf,t);for(const e of a(this,vn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of a(this,Ye).values())e.pageIndex===t&&(yield e)}getEditor(t){return a(this,Ye).get(t)}addEditor(t){a(this,Ye).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(a(this,yr)&&clearTimeout(a(this,yr)),w(this,yr,setTimeout(()=>{this.focusMainContainer(),w(this,yr,null)},0))),a(this,Ye).delete(t.id),t.annotationElementId&&((e=a(this,ko))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,bo).has(t.annotationElementId))&&((n=a(this,Si))==null||n.remove(t.id))}addDeletedAnnotationElement(t){a(this,bo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,bo).has(t)}removeDeletedAnnotationElement(t){a(this,bo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,zs)!==t&&(w(this,zs,t),t&&E(this,ot,Jr).call(this,t.propertiesToUpdate))}updateUI(t){a(this,ot,zE)===t&&E(this,ot,Jr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,ot,Jr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,ye).has(t)){a(this,ye).delete(t),t.unselect(),E(this,ot,as).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,ye).add(t),t.select(),E(this,ot,Jr).call(this,t.propertiesToUpdate),E(this,ot,as).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=a(this,So))==null||e.commitOrRemove();for(const n of a(this,ye))n!==t&&n.unselect();a(this,ye).clear(),a(this,ye).add(t),t.select(),E(this,ot,Jr).call(this,t.propertiesToUpdate),E(this,ot,as).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,ye).has(t)}get firstSelectedEditor(){return a(this,ye).values().next().value}unselect(t){t.unselect(),a(this,ye).delete(t),E(this,ot,as).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,ye).size!==0}get isEnterHandled(){return a(this,ye).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,bi).undo(),E(this,ot,as).call(this,{hasSomethingToUndo:a(this,bi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,ot,pf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,bi).redo(),E(this,ot,as).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,bi).hasSomethingToRedo(),isEmpty:E(this,ot,pf).call(this)})}addCommands(t){a(this,bi).add(t),E(this,ot,as).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,ot,pf).call(this)})}cleanUndoStack(t){a(this,bi).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,ye)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(r,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},r=()=>{for(const l of e)E(this,ot,Cw).call(this,l)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=a(this,zs))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,zs)||this.hasSelection}selectAll(){for(const t of a(this,ye))t.commit();E(this,ot,_w).call(this,a(this,Ye).values())}unselectAll(){var t;if(!(a(this,zs)&&(a(this,zs).commitOrRemove(),a(this,cn)!==Wt.NONE))&&!((t=a(this,So))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,ye))e.unselect();a(this,ye).clear(),E(this,ot,as).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;a(this,Ro)[0]+=t,a(this,Ro)[1]+=e;const[r,o]=a(this,Ro),l=[...a(this,ye)],u=1e3;a(this,wr)&&clearTimeout(a(this,wr)),w(this,wr,setTimeout(()=>{w(this,wr,null),a(this,Ro)[0]=a(this,Ro)[1]=0,this.addCommands({cmd:()=>{for(const h of l)a(this,Ye).has(h.id)&&(h.translateInPage(r,o),h.translationDone())},undo:()=>{for(const h of l)a(this,Ye).has(h.id)&&(h.translateInPage(-r,-o),h.translationDone())},mustExec:!1})},u));for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,mr,new Map);for(const t of a(this,ye))a(this,mr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,mr))return!1;this.disableUserSelect(!1);const t=a(this,mr);w(this,mr,null);let e=!1;for(const[{x:r,y:o,pageIndex:l},u]of t)u.newX=r,u.newY=o,u.newPageIndex=l,e||(e=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex);if(!e)return!1;const n=(r,o,l,u)=>{if(a(this,Ye).has(r.id)){const h=a(this,vn).get(u);h?r._setParentAndPosition(h,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of t)n(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of t)n(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,mr))for(const n of a(this,mr).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,ye).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,zs)===t}getActive(){return a(this,zs)}getMode(){return a(this,cn)}isEditingMode(){return a(this,cn)!==Wt.NONE}get imageManager(){return jt(this,"imageManager",new Sw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,y,v)=>({x:(p-r)/l,y:1-(f+y-n)/o,width:v/l,height:y/o});break;case"180":u=(f,p,y,v)=>({x:1-(f+y-n)/o,y:1-(p+v-r)/l,width:y/o,height:v/l});break;case"270":u=(f,p,y,v)=>({x:1-(p+v-r)/l,y:(f-n)/o,width:v/l,height:y/o});break;default:u=(f,p,y,v)=>({x:(f-n)/o,y:(p-r)/l,width:y/o,height:v/l});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:v,y:S,width:_,height:x}of y.getClientRects())_===0||x===0||h.push(u(v,S,_,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Ku)||w(this,Ku,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Ku))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=a(this,Ku))==null?void 0:r.get(t.data.id);if(!e)return;const n=a(this,Si).getRawValue(e);n&&(a(this,cn)===Wt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var o;const r=(o=a(this,ko))==null?void 0:o.get(t);r&&(r.setCanvas(e,n),a(this,ko).delete(t))}addMissingCanvas(t,e){(a(this,ko)||w(this,ko,new Map)).set(t,e)}};Xu=new WeakMap,zs=new WeakMap,qu=new WeakMap,Ye=new WeakMap,vn=new WeakMap,Yu=new WeakMap,Si=new WeakMap,Ku=new WeakMap,bi=new WeakMap,Qn=new WeakMap,Ao=new WeakMap,So=new WeakMap,Qu=new WeakMap,bo=new WeakMap,mr=new WeakMap,Ei=new WeakMap,Ol=new WeakMap,$f=new WeakMap,Wf=new WeakMap,Zu=new WeakMap,Vf=new WeakMap,yr=new WeakMap,Eo=new WeakMap,Ju=new WeakMap,xo=new WeakMap,vr=new WeakMap,Zy=new WeakMap,Co=new WeakMap,th=new WeakMap,Gf=new WeakMap,_o=new WeakMap,Bl=new WeakMap,eh=new WeakMap,ko=new WeakMap,Xf=new WeakMap,cn=new WeakMap,ye=new WeakMap,ia=new WeakMap,To=new WeakMap,Po=new WeakMap,qf=new WeakMap,nh=new WeakMap,Yf=new WeakMap,Ro=new WeakMap,wr=new WeakMap,ra=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,xi=new WeakMap,ot=new WeakSet,sy=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Ew=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of a(this,vn).values())if(n.hasTextLayer(t))return n;return null},PE=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=E(this,ot,sy).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(a(this,vr)||w(this,vr,new Bk(this)),a(this,vr).show(n,r,this.direction==="ltr"))},RE=function(){var o,l,u;const t=document.getSelection();if(!t||t.isCollapsed){a(this,ia)&&((o=a(this,vr))==null||o.hide(),w(this,ia,null),E(this,ot,as).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,ia))return;const r=E(this,ot,sy).call(this,t).closest(".textLayer");if(!r){a(this,ia)&&((l=a(this,vr))==null||l.hide(),w(this,ia,null),E(this,ot,as).call(this,{hasSelectedText:!1}));return}if((u=a(this,vr))==null||u.hide(),w(this,ia,e),E(this,ot,as).call(this,{hasSelectedText:!0}),!(a(this,cn)!==Wt.HIGHLIGHT&&a(this,cn)!==Wt.NONE)&&(a(this,cn)===Wt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,xo,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=a(this,cn)===Wt.HIGHLIGHT?E(this,ot,Ew).call(this,r):null;if(h==null||h.toggleDrawing(),a(this,th)){const f=new AbortController,p=this.combinedSignal(f),y=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),h==null||h.toggleDrawing(!0),v.type==="pointerup"&&E(this,ot,ff).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("blur",y,{signal:p})}else h==null||h.toggleDrawing(!0),E(this,ot,ff).call(this,"main_toolbar")}},ff=function(t=""){a(this,cn)===Wt.HIGHLIGHT?this.highlightSelection(t):a(this,$f)&&E(this,ot,PE).call(this)},ME=function(){document.addEventListener("selectionchange",E(this,ot,RE).bind(this),{signal:this._signal})},LE=function(){if(a(this,Eo))return;w(this,Eo,new AbortController);const t=this.combinedSignal(a(this,Eo));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},DE=function(){var t;(t=a(this,Eo))==null||t.abort(),w(this,Eo,null)},xw=function(){if(a(this,_o))return;w(this,_o,new AbortController);const t=this.combinedSignal(a(this,_o));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},NE=function(){var t;(t=a(this,_o))==null||t.abort(),w(this,_o,null)},IE=function(){if(a(this,Ao))return;w(this,Ao,new AbortController);const t=this.combinedSignal(a(this,Ao));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},FE=function(){var t;(t=a(this,Ao))==null||t.abort(),w(this,Ao,null)},OE=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},as=function(t){Object.entries(t).some(([n,r])=>a(this,Yf)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Yf),t)}),a(this,cn)===Wt.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,ot,Jr).call(this,[[te.HIGHLIGHT_FREE,!0]]))},Jr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},BE=async function(){if(!a(this,Co)){w(this,Co,!0);const t=[];for(const e of a(this,vn).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,Ye).values())e.enable()}},UE=function(){if(this.unselectAll(),a(this,Co)){w(this,Co,!1);for(const t of a(this,vn).values())t.disable();for(const t of a(this,Ye).values())t.disable()}},Cw=function(t){const e=a(this,vn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},zE=function(){let t=null;for(t of a(this,ye));return t},pf=function(){if(a(this,Ye).size===0)return!0;if(a(this,Ye).size===1)for(const t of a(this,Ye).values())return t.isEmpty();return!1},_w=function(t){for(const e of a(this,ye))e.unselect();a(this,ye).clear();for(const e of t)e.isEmpty()||(a(this,ye).add(e),e.select());E(this,ot,as).call(this,{hasSelectedEditor:this.hasSelection})},K(Ou,"TRANSLATE_SMALL",1),K(Ou,"TRANSLATE_BIG",10);let Yc=Ou;var _n,Ar,Xi,sh,Sr,js,ih,br,_s,aa,Ul,Er,Mo,rr,gf,iy;const os=class os{constructor(t){b(this,rr);b(this,_n,null);b(this,Ar,!1);b(this,Xi,null);b(this,sh,null);b(this,Sr,null);b(this,js,null);b(this,ih,!1);b(this,br,null);b(this,_s,null);b(this,aa,null);b(this,Ul,null);b(this,Er,!1);w(this,_s,t),w(this,Er,t._uiManager.useNewAltTextFlow),a(os,Mo)||w(os,Mo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){os._l10n??(os._l10n=t)}async render(){const t=w(this,Xi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=w(this,sh,document.createElement("span"));t.append(e),a(this,Er)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(os,Mo).missing),e.setAttribute("data-l10n-id",a(os,Mo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=a(this,_s)._uiManager._signal;t.addEventListener("contextmenu",Di,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),a(this,_s)._uiManager.editAltText(a(this,_s)),a(this,Er)&&a(this,_s)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,rr,gf)}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(w(this,ih,!0),r(o))},{signal:n}),await E(this,rr,iy).call(this),t}finish(){a(this,Xi)&&(a(this,Xi).focus({focusVisible:a(this,ih)}),w(this,ih,!1))}isEmpty(){return a(this,Er)?a(this,_n)===null:!a(this,_n)&&!a(this,Ar)}hasData(){return a(this,Er)?a(this,_n)!==null||!!a(this,aa):this.isEmpty()}get guessedText(){return a(this,aa)}async setGuessedText(t){a(this,_n)===null&&(w(this,aa,t),w(this,Ul,await os._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,rr,iy).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,Er)||a(this,_n)){(e=a(this,br))==null||e.remove(),w(this,br,null);return}if(!a(this,br)){const n=w(this,br,document.createElement("div"));n.className="noAltTextBadge",a(this,_s).div.append(n)}a(this,br).classList.toggle("hidden",!t)}serialize(t){let e=a(this,_n);return!t&&a(this,aa)===e&&(e=a(this,Ul)),{altText:e,decorative:a(this,Ar),guessedText:a(this,aa),textWithDisclaimer:a(this,Ul)}}get data(){return{altText:a(this,_n),decorative:a(this,Ar)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(w(this,aa,n),w(this,Ul,r)),!(a(this,_n)===t&&a(this,Ar)===e)&&(o||(w(this,_n,t),w(this,Ar,e)),E(this,rr,iy).call(this))}toggle(t=!1){a(this,Xi)&&(!t&&a(this,js)&&(clearTimeout(a(this,js)),w(this,js,null)),a(this,Xi).disabled=!t)}shown(){a(this,_s)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,rr,gf)}})}destroy(){var t,e;(t=a(this,Xi))==null||t.remove(),w(this,Xi,null),w(this,sh,null),w(this,Sr,null),(e=a(this,br))==null||e.remove(),w(this,br,null)}};_n=new WeakMap,Ar=new WeakMap,Xi=new WeakMap,sh=new WeakMap,Sr=new WeakMap,js=new WeakMap,ih=new WeakMap,br=new WeakMap,_s=new WeakMap,aa=new WeakMap,Ul=new WeakMap,Er=new WeakMap,Mo=new WeakMap,rr=new WeakSet,gf=function(){return a(this,_n)&&"added"||a(this,_n)===null&&this.guessedText&&"review"||"missing"},iy=async function(){var r,o,l;const t=a(this,Xi);if(!t)return;if(a(this,Er)){if(t.classList.toggle("done",!!a(this,_n)),t.setAttribute("data-l10n-id",a(os,Mo)[a(this,rr,gf)]),(r=a(this,sh))==null||r.setAttribute("data-l10n-id",a(os,Mo)[`${a(this,rr,gf)}-label`]),!a(this,_n)){(o=a(this,Sr))==null||o.remove();return}}else{if(!a(this,_n)&&!a(this,Ar)){t.classList.remove("done"),(l=a(this,Sr))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Sr);if(!e){w(this,Sr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,_s).id}`;const u=100,h=a(this,_s)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(a(this,js)),w(this,js,null)},{once:!0}),t.addEventListener("mouseenter",()=>{w(this,js,setTimeout(()=>{w(this,js,null),a(this,Sr).classList.add("show"),a(this,_s)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:h}),t.addEventListener("mouseleave",()=>{var f;a(this,js)&&(clearTimeout(a(this,js)),w(this,js,null)),(f=a(this,Sr))==null||f.classList.remove("show")},{signal:h})}a(this,Ar)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,_n)),e.parentNode||t.append(e);const n=a(this,_s).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},b(os,Mo,null),K(os,"_l10n",null);let Fy=os;var Fn,Ci,zl,Me,Zf,jl,qi,Hl,$l,Wl,Jf,kw;class Vm{constructor(t){b(this,Jf);b(this,Fn,null);b(this,Ci,null);b(this,zl,!1);b(this,Me,null);b(this,Zf,null);b(this,jl,null);b(this,qi,null);b(this,Hl,null);b(this,$l,!1);b(this,Wl,null);w(this,Me,t)}renderForToolbar(){const t=w(this,Ci,document.createElement("button"));return t.className="comment",E(this,Jf,kw).call(this,t,!1)}renderForStandalone(){const t=w(this,Fn,document.createElement("button"));t.className="annotationCommentButton";const e=a(this,Me).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(a(this,Me)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=a(this,Me).commentButtonColor;r&&(n.backgroundColor=r)}return E(this,Jf,kw).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=a(this,Fn)??a(this,Ci))==null||t.focus()},0)}onUpdatedColor(){if(!a(this,Fn))return;const t=a(this,Me).commentButtonColor;t&&(a(this,Fn).style.backgroundColor=t),a(this,Me)._uiManager.updatePopupColor(a(this,Me))}get commentButtonWidth(){var t;return(((t=a(this,Fn))==null?void 0:t.getBoundingClientRect().width)??0)/a(this,Me).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,Wl))return a(this,Wl);if(!a(this,Fn))return null;const{x:t,y:e,height:n}=a(this,Fn).getBoundingClientRect(),{x:r,y:o,width:l,height:u}=a(this,Me).parent.boundingClientRect;return[(t-r)/l,(e+n-o)/u]}set commentPopupPositionInLayer(t){w(this,Wl,t)}hasDefaultPopupPosition(){return a(this,Wl)===null}removeStandaloneCommentButton(){var t;(t=a(this,Fn))==null||t.remove(),w(this,Fn,null)}removeToolbarCommentButton(){var t;(t=a(this,Ci))==null||t.remove(),w(this,Ci,null)}setCommentButtonStates({selected:t,hasPopup:e}){a(this,Fn)&&(a(this,Fn).classList.toggle("selected",t),a(this,Fn).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,r;if(e)[n,r]=e;else{[n,r]=a(this,Me).commentButtonPosition;const{width:p,height:y,x:v,y:S}=a(this,Me);n=v+n*p,r=S+r*y}const o=a(this,Me).parent.boundingClientRect,{x:l,y:u,width:h,height:f}=o;a(this,Me)._uiManager.editComment(a(this,Me),l+n*h,u+r*f,{...t,parentDimensions:o})}finish(){a(this,Ci)&&(a(this,Ci).focus({focusVisible:a(this,zl)}),w(this,zl,!1))}isDeleted(){return a(this,$l)||a(this,qi)===""}isEmpty(){return a(this,qi)===null}hasBeenEdited(){return this.isDeleted()||a(this,qi)!==a(this,Zf)}serialize(){return this.data}get data(){return{text:a(this,qi),richText:a(this,jl),date:a(this,Hl),deleted:this.isDeleted()}}set data(t){if(t!==a(this,qi)&&w(this,jl,null),t===null){w(this,qi,""),w(this,$l,!0);return}w(this,qi,t),w(this,Hl,new Date),w(this,$l,!1)}setInitialText(t,e=null){w(this,Zf,t),this.data=t,w(this,Hl,null),w(this,jl,e)}shown(){}destroy(){var t,e;(t=a(this,Ci))==null||t.remove(),w(this,Ci,null),(e=a(this,Fn))==null||e.remove(),w(this,Fn,null),w(this,qi,""),w(this,jl,null),w(this,Hl,null),w(this,Me,null),w(this,zl,!1),w(this,$l,!1)}}Fn=new WeakMap,Ci=new WeakMap,zl=new WeakMap,Me=new WeakMap,Zf=new WeakMap,jl=new WeakMap,qi=new WeakMap,Hl=new WeakMap,$l=new WeakMap,Wl=new WeakMap,Jf=new WeakSet,kw=function(t,e){if(!a(this,Me)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[a(this,Me)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=a(this,Me)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Di,{signal:n}),e&&(t.addEventListener("focusin",o=>{a(this,Me)._focusEventsAllowed=!1,tn(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{a(this,Me)._focusEventsAllowed=!0,tn(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),t===a(this,Ci)?this.edit():a(this,Me).toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(w(this,zl,!0),r(o))},{signal:n}),t.addEventListener("pointerenter",()=>{a(this,Me).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{a(this,Me).toggleComment(!1,!1)},{signal:n}),t};var rh,Vl,tp,ep,np,sp,ip,oa,Gl,la,Xl,ca,ll,jE,HE,$E;const tS=class tS{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){b(this,ll);b(this,rh);b(this,Vl,!1);b(this,tp,null);b(this,ep);b(this,np);b(this,sp);b(this,ip);b(this,oa,null);b(this,Gl);b(this,la,null);b(this,Xl);b(this,ca,null);w(this,rh,t),w(this,tp,n),w(this,ep,e),w(this,np,r),w(this,sp,o),w(this,ip,l),w(this,Xl,new AbortController),w(this,Gl,AbortSignal.any([u,a(this,Xl).signal])),t.addEventListener("touchstart",E(this,ll,jE).bind(this),{passive:!1,signal:a(this,Gl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ur.pixelRatio}destroy(){var t,e;(t=a(this,Xl))==null||t.abort(),w(this,Xl,null),(e=a(this,oa))==null||e.abort(),w(this,oa,null)}};rh=new WeakMap,Vl=new WeakMap,tp=new WeakMap,ep=new WeakMap,np=new WeakMap,sp=new WeakMap,ip=new WeakMap,oa=new WeakMap,Gl=new WeakMap,la=new WeakMap,Xl=new WeakMap,ca=new WeakMap,ll=new WeakSet,jE=function(t){var r,o,l;if((r=a(this,ep))!=null&&r.call(this))return;if(t.touches.length===1){if(a(this,oa))return;const u=w(this,oa,new AbortController),h=AbortSignal.any([a(this,Gl),u.signal]),f=a(this,rh),p={capture:!0,signal:h,passive:!1},y=v=>{var S;v.pointerType==="touch"&&((S=a(this,oa))==null||S.abort(),w(this,oa,null))};f.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(tn(v),y(v))},p),f.addEventListener("pointerup",y,p),f.addEventListener("pointercancel",y,p);return}if(!a(this,ca)){w(this,ca,new AbortController);const u=AbortSignal.any([a(this,Gl),a(this,ca).signal]),h=a(this,rh),f={signal:u,capture:!1,passive:!1};h.addEventListener("touchmove",E(this,ll,HE).bind(this),f);const p=E(this,ll,$E).bind(this);h.addEventListener("touchend",p,f),h.addEventListener("touchcancel",p,f),f.capture=!0,h.addEventListener("pointerdown",tn,f),h.addEventListener("pointermove",tn,f),h.addEventListener("pointercancel",tn,f),h.addEventListener("pointerup",tn,f),(o=a(this,np))==null||o.call(this)}if(tn(t),t.touches.length!==2||(l=a(this,tp))!=null&&l.call(this)){w(this,la,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),w(this,la,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},HE=function(t){var L;if(!a(this,la)||t.touches.length!==2)return;tn(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:o}=e,{screenX:l,screenY:u}=n,h=a(this,la),{touch0X:f,touch0Y:p,touch1X:y,touch1Y:v}=h,S=y-f,_=v-p,x=l-r,T=u-o,k=Math.hypot(x,T)||1,M=Math.hypot(S,_)||1;if(!a(this,Vl)&&Math.abs(M-k)<=tS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=o,h.touch1X=l,h.touch1Y=u,!a(this,Vl)){w(this,Vl,!0);return}const P=[(r+l)/2,(o+u)/2];(L=a(this,sp))==null||L.call(this,P,M,k)},$E=function(t){var e;t.touches.length>=2||(a(this,ca)&&(a(this,ca).abort(),w(this,ca,null),(e=a(this,ip))==null||e.call(this)),a(this,la)&&(tn(t),w(this,la,null),w(this,Vl,!1)))};let Oy=tS;var ql,Yi,Ue,Ce,ua,ah,Lo,rp,On,Yl,ha,_i,Do,ap,Kl,Hs,op,Ql,da,xr,oh,lh,ki,Zl,lp,Jy,Nt,Tw,cp,Pw,ry,WE,VE,Rw,ay,Mw,GE,XE,qE,Lw,YE,Dw,KE,QE,ZE,Nw,mf;const $t=class $t{constructor(t){b(this,Nt);b(this,ql,null);b(this,Yi,null);b(this,Ue,null);b(this,Ce,null);b(this,ua,null);b(this,ah,!1);b(this,Lo,null);b(this,rp,"");b(this,On,null);b(this,Yl,null);b(this,ha,null);b(this,_i,null);b(this,Do,null);b(this,ap,"");b(this,Kl,!1);b(this,Hs,null);b(this,op,!1);b(this,Ql,!1);b(this,da,!1);b(this,xr,null);b(this,oh,0);b(this,lh,0);b(this,ki,null);b(this,Zl,null);K(this,"isSelected",!1);K(this,"_isCopy",!1);K(this,"_editToolbar",null);K(this,"_initialOptions",Object.create(null));K(this,"_initialData",null);K(this,"_isVisible",!0);K(this,"_uiManager",null);K(this,"_focusEventsAllowed",!0);b(this,lp,!1);b(this,Jy,$t._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=$t.prototype._resizeWithKeyboard,e=Yc.TRANSLATE_SMALL,n=Yc.TRANSLATE_BIG;return jt(this,"_resizerKeyboardManager",new Mg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],$t.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return jt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new jk({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if($t._l10n??($t._l10n=t),$t._l10nResizer||($t._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),$t._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);$t._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,lp)}set _isDraggable(t){var e;w(this,lp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,Jy)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(E(this,Nt,mf).call(this),(e=a(this,_i))==null||e.remove(),w(this,_i,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Kl)?w(this,Kl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(e+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}translate(t,e){E(this,Nt,Tw).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,Hs)||w(this,Hs,[this.x,this.y,this.width,this.height]),E(this,Nt,Tw).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,Hs)||w(this,Hs,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,f]=this.getBaseTranslation();l+=h,u+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,Hs)&&(a(this,Hs)[0]!==this.x||a(this,Hs)[1]!==this.y)}get _hasBeenResized(){return!!a(this,Hs)&&(a(this,Hs)[2]!==this.width||a(this,Hs)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=$t,r=n/t,o=n/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:o,y:l,width:u,height:h}=this;if(u*=n,h*=r,o*=n,l*=r,this._mustFixPosition)switch(t){case 0:o=ds(o,0,n-u),l=ds(l,0,r-h);break;case 90:o=ds(o,0,n-h),l=ds(l,u,r);break;case 180:o=ds(o,u,n),l=ds(l,h,r);break;case 270:o=ds(o,h,n),l=ds(l,0,r-u);break}this.x=o/=n,this.y=l/=r;const[f,p]=this.getBaseTranslation();o+=f,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return E(n=$t,cp,Pw).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return E(n=$t,cp,Pw).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Ue))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,Ql))return this._editToolbar;this._editToolbar=new ww(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=a(this,Ue))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Ue)||(Fy.initialize($t._l10n),w(this,Ue,new Fy(this)),a(this,ql)&&(a(this,Ue).data=a(this,ql),w(this,ql,null))),a(this,Ue)}get altTextData(){var t;return(t=a(this,Ue))==null?void 0:t.data}set altTextData(t){a(this,Ue)&&(a(this,Ue).data=t)}get guessedAltText(){var t;return(t=a(this,Ue))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Ue))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Ue))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Ue)&&!a(this,Ue).isEmpty()}hasAltTextData(){var t;return((t=a(this,Ue))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=a(this,Ce))==null||t.focusButton()}addCommentButton(){return this.canAddComment?a(this,Ce)||w(this,Ce,new Vm(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(a(this,ua)){this._uiManager.isEditingMode()&&a(this,ua).classList.remove("hidden");return}this.hasComment&&(w(this,ua,a(this,Ce).renderForStandalone()),this.div.append(a(this,ua)))}}removeStandaloneCommentButton(){a(this,Ce).removeStandaloneCommentButton(),w(this,ua,null)}hideStandaloneCommentButton(){var t;(t=a(this,ua))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:r}}=a(this,Ce);return{text:e,richText:t,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){a(this,Ce)||w(this,Ce,new Vm(this)),a(this,Ce).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(a(this,Ce)||w(this,Ce,new Vm(this)),a(this,Ce).setInitialText(t,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var t;return(t=a(this,Ce))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=a(this,Ce))==null?void 0:t.isDeleted()}get hasComment(){return!!a(this,Ce)&&!a(this,Ce).isEmpty()&&!a(this,Ce).isDeleted()}async editComment(t){a(this,Ce)||w(this,Ce,new Vm(this)),a(this,Ce).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){a(this,Ce).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){a(this,Ce).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var l;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,ah)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),E(this,Nt,Dw).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),kE(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,Zl)||w(this,Zl,new Oy({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,Nt,GE).bind(this),onPinching:E(this,Nt,XE).bind(this),onPinchEnd:E(this,Nt,qE).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(l=this._uiManager._editorUndoBar)==null||l.hide(),t}pointerdown(t){const{isMac:e}=Sn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(w(this,Kl,!0),this._isDraggable){E(this,Nt,YE).call(this,t);return}E(this,Nt,Lw).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,xr)&&clearTimeout(a(this,xr)),w(this,xr,setTimeout(()=>{var t;w(this,xr,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,p=e/r,y=this.x*o,v=this.y*l,S=this.width*o,_=this.height*l;switch(n){case 0:return[y+f+u,l-v-p-_+h,y+f+S+u,l-v-p+h];case 90:return[y+p+u,l-v+f+h,y+p+_+u,l-v+f+S+h];case 180:return[y-f-S+u,l-v+p+h,y-f+u,l-v+p+_+h];case 270:return[y-p-_+u,l-v-f-S+h,y-p+u,l-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,o,l]=t,u=o-n,h=l-r;switch(this.rotation){case 0:return[n,e-l,u,h];case 90:return[n,e-r,h,u];case 180:return[o,e-r,u,h];case 270:return[o,e-l,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&$t._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=a(this,Ce))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:r,deleted:o,richText:l},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!o,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),w(this,Ql,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),w(this,Ql,!1),!0):!1}isInEditMode(){return a(this,Ql)}shouldGetKeyboardEvents(){return a(this,da)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&r>0&&t<o&&n>0}rebuild(){E(this,Nt,Dw).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,w(r,ql,t.accessibilityData),r._isCopy=t.isCopy||!1;const[o,l]=r.pageDimensions,[u,h,f,p]=r.getRectInCurrentCoords(t.rect,l);return r.x=u/o,r.y=h/l,r.width=f/o,r.height=p/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=a(this,Do))==null||t.abort(),w(this,Do,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),a(this,xr)&&(clearTimeout(a(this,xr)),w(this,xr,null)),E(this,Nt,mf).call(this),this.removeEditToolbar(),a(this,ki)){for(const r of a(this,ki).values())clearTimeout(r);w(this,ki,null)}this.parent=null,(e=a(this,Zl))==null||e.destroy(),w(this,Zl,null),(n=a(this,_i))==null||n.remove(),w(this,_i,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,Nt,WE).call(this),a(this,On).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,r,o,l]=this.getPDFRect();return[$t._round(n+(o-n)*t),$t._round(r+(l-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,Ce).commentPopupPositionInLayer}set commentPopupPosition(t){a(this,Ce).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return a(this,Ce).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,Ce).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=a(this,Ce))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),w(this,ha,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,On).children;if(!a(this,Yi)){w(this,Yi,Array.from(e));const l=E(this,Nt,KE).bind(this),u=E(this,Nt,QE).bind(this),h=this._uiManager._signal;for(const f of a(this,Yi)){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",E(this,Nt,ZE).bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",$t._l10nResizer[p])}}const n=a(this,Yi)[0];let r=0;for(const l of e){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(a(this,Yi).length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)a(this,On).append(a(this,On).firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)a(this,On).firstElementChild.before(a(this,On).lastElementChild);let l=0;for(const u of e){const f=a(this,Yi)[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",$t._l10nResizer[f])}}E(this,Nt,Nw).call(this,0),w(this,da,!0),a(this,On).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,da)&&E(this,Nt,Mw).call(this,a(this,ap),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,Nt,mf).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=a(this,Ue))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,r,o;this.isSelected&&(this.isSelected=!1,(t=a(this,On))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=a(this,Ue))==null||o.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,op)}set isEditing(t){w(this,op,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,ki)||w(this,ki,new Map);const{action:n}=t;let r=a(this,ki).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),a(this,ki).delete(n),a(this,ki).size===0&&w(this,ki,null)},$t._telemetryTimeout),a(this,ki).set(n,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),w(this,ah,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,ah,!0)}updateFakeAnnotationElement(t){if(!a(this,_i)&&!this.deleted){w(this,_i,t.addFakeAnnotation(this));return}if(this.deleted){a(this,_i).remove(),w(this,_i,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,_i).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};ql=new WeakMap,Yi=new WeakMap,Ue=new WeakMap,Ce=new WeakMap,ua=new WeakMap,ah=new WeakMap,Lo=new WeakMap,rp=new WeakMap,On=new WeakMap,Yl=new WeakMap,ha=new WeakMap,_i=new WeakMap,Do=new WeakMap,ap=new WeakMap,Kl=new WeakMap,Hs=new WeakMap,op=new WeakMap,Ql=new WeakMap,da=new WeakMap,xr=new WeakMap,oh=new WeakMap,lh=new WeakMap,ki=new WeakMap,Zl=new WeakMap,lp=new WeakMap,Jy=new WeakMap,Nt=new WeakSet,Tw=function([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},cp=new WeakSet,Pw=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},ry=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},WE=function(){if(a(this,On))return;w(this,On,document.createElement("div")),a(this,On).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");a(this,On).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",E(this,Nt,VE).bind(this,n),{signal:e}),r.addEventListener("contextmenu",Di,{signal:e}),r.tabIndex=-1}this.div.prepend(a(this,On))},VE=function(t,e){var p;e.preventDefault();const{isMac:n}=Sn.platform;if(e.button!==0||e.ctrlKey&&n)return;(p=a(this,Ue))==null||p.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,w(this,Yl,[e.screenX,e.screenY]);const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,Nt,Mw).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",tn,{passive:!1,signal:l}),window.addEventListener("contextmenu",Di,{signal:l}),w(this,ha,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var y;o.abort(),this.parent.togglePointerEvents(!0),(y=a(this,Ue))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,E(this,Nt,ay).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},Rw=function(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},ay=function(){if(!a(this,ha))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=a(this,ha);w(this,ha,null);const o=this.x,l=this.y,u=this.width,h=this.height;o===t&&l===e&&u===n&&h===r||this.addCommands({cmd:E(this,Nt,Rw).bind(this,o,l,u,h),undo:E(this,Nt,Rw).bind(this,t,e,n,r),mustExec:!0})},Mw=function(t,e){const[n,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,h=this.height,f=$t.MIN_SIZE/n,p=$t.MIN_SIZE/r,y=E(this,Nt,ry).call(this,this.rotation),v=(lt,st)=>[y[0]*lt+y[2]*st,y[1]*lt+y[3]*st],S=E(this,Nt,ry).call(this,360-this.rotation),_=(lt,st)=>[S[0]*lt+S[2]*st,S[1]*lt+S[3]*st];let x,T,k=!1,M=!1;switch(t){case"topLeft":k=!0,x=(lt,st)=>[0,0],T=(lt,st)=>[lt,st];break;case"topMiddle":x=(lt,st)=>[lt/2,0],T=(lt,st)=>[lt/2,st];break;case"topRight":k=!0,x=(lt,st)=>[lt,0],T=(lt,st)=>[0,st];break;case"middleRight":M=!0,x=(lt,st)=>[lt,st/2],T=(lt,st)=>[0,st/2];break;case"bottomRight":k=!0,x=(lt,st)=>[lt,st],T=(lt,st)=>[0,0];break;case"bottomMiddle":x=(lt,st)=>[lt/2,st],T=(lt,st)=>[lt/2,0];break;case"bottomLeft":k=!0,x=(lt,st)=>[0,st],T=(lt,st)=>[lt,0];break;case"middleLeft":M=!0,x=(lt,st)=>[0,st/2],T=(lt,st)=>[lt,st/2];break}const P=x(u,h),L=T(u,h);let D=v(...L);const I=$t._round(o+D[0]),U=$t._round(l+D[1]);let G=1,Y=1,nt,Z;if(e.fromKeyboard)({deltaX:nt,deltaY:Z}=e);else{const{screenX:lt,screenY:st}=e,[V,ft]=a(this,Yl);[nt,Z]=this.screenToPageTranslation(lt-V,st-ft),a(this,Yl)[0]=lt,a(this,Yl)[1]=st}if([nt,Z]=_(nt/n,Z/r),k){const lt=Math.hypot(u,h);G=Y=Math.max(Math.min(Math.hypot(L[0]-P[0]-nt,L[1]-P[1]-Z)/lt,1/u,1/h),f/u,p/h)}else M?G=ds(Math.abs(L[0]-P[0]-nt),f,1)/u:Y=ds(Math.abs(L[1]-P[1]-Z),p,1)/h;const kt=$t._round(u*G),Tt=$t._round(h*Y);D=v(...T(kt,Tt));const St=I-D[0],Pt=U-D[1];a(this,Hs)||w(this,Hs,[this.x,this.y,this.width,this.height]),this.width=kt,this.height=Tt,this.x=St,this.y=Pt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},GE=function(){var t;w(this,ha,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Ue))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},XE=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=E(this,Nt,ry).call(this,this.rotation),u=(I,U)=>[l[0]*I+l[2]*U,l[1]*I+l[3]*U],[h,f]=this.parentDimensions,p=this.x,y=this.y,v=this.width,S=this.height,_=$t.MIN_SIZE/h,x=$t.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/S),_/v,x/S);const T=$t._round(v*o),k=$t._round(S*o);if(T===v&&k===S)return;a(this,Hs)||w(this,Hs,[p,y,v,S]);const M=u(v/2,S/2),P=$t._round(p+M[0]),L=$t._round(y+M[1]),D=u(T/2,k/2);this.x=P-D[0],this.y=L-D[1],this.width=T,this.height=k,this.setDims(),this.fixAndSetPosition(),this._onResizing()},qE=function(){var t;(t=a(this,Ue))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,Nt,ay).call(this)},Lw=function(t){const{isMac:e}=Sn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},YE=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),w(this,Lo,null),w(this,Kl,!1),this._uiManager.endDragSession()||E(this,Nt,Lw).call(this,f),n&&this._onStopDragging()};e&&(w(this,oh,t.clientX),w(this,lh,t.clientY),w(this,Lo,t.pointerId),w(this,rp,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:y,pointerId:v}=f;if(v!==a(this,Lo)){tn(f);return}const[S,_]=this.screenToPageTranslation(p-a(this,oh),y-a(this,lh));w(this,oh,p),w(this,lh,y),this._uiManager.dragSelectedEditors(S,_)},l),window.addEventListener("touchmove",tn,l),window.addEventListener("pointerdown",f=>{f.pointerType===a(this,rp)&&(a(this,Zl)||f.isPrimary)&&u(f),tn(f)},l));const h=f=>{if(!a(this,Lo)||a(this,Lo)===f.pointerId){u(f);return}tn(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},Dw=function(){if(a(this,Do)||!this.div)return;w(this,Do,new AbortController);const t=this._uiManager.combinedSignal(a(this,Do));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},KE=function(t){$t._resizerKeyboardManager.exec(this,t)},QE=function(t){var e;a(this,da)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,On)&&E(this,Nt,mf).call(this)},ZE=function(t){w(this,ap,a(this,da)?t:"")},Nw=function(t){if(a(this,Yi))for(const e of a(this,Yi))e.tabIndex=t},mf=function(){w(this,da,!1),E(this,Nt,Nw).call(this,-1),E(this,Nt,ay).call(this)},b($t,cp),K($t,"_l10n",null),K($t,"_l10nResizer",null),K($t,"_borderLineWidth",-1),K($t,"_colorManager",new bw),K($t,"_zIndex",1),K($t,"_telemetryTimeout",1e3);let Le=$t;class jk extends Le{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const W1=3285377520,yi=4294901760,pr=65535;class JE{constructor(t){this.h1=t?t&4294967295:W1,this.h2=t?t&4294967295:W1}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let x=0,T=t.length;x<T;x++){const k=t.charCodeAt(x);k<=255?e[n++]=k:(e[n++]=k>>>8,e[n++]=k&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(e.buffer,0,r);let u=0,h=0,f=this.h1,p=this.h2;const y=3432918353,v=461845907,S=y&pr,_=v&pr;for(let x=0;x<r;x++)x&1?(u=l[x],u=u*y&yi|u*S&pr,u=u<<15|u>>>17,u=u*v&yi|u*_&pr,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[x],h=h*y&yi|h*S&pr,h=h<<15|h>>>17,h=h*v&yi|h*_&pr,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*y&yi|u*S&pr,u=u<<15|u>>>17,u=u*v&yi|u*_&pr,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&yi|t*36045&pr,e=e*4283543511&yi|((e<<16|t>>>16)*2950163797&yi)>>>16,t^=e>>>1,t=t*444984403&yi|t*60499&pr,e=e*3301882366&yi|((e<<16|t>>>16)*3120437893&yi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Iw=Object.freeze({map:null,hash:"",transfer:void 0});var Jl,tc,fa,Bn,t0,tx;class GA{constructor(){b(this,t0);b(this,Jl,!1);b(this,tc,null);b(this,fa,null);b(this,Bn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=a(this,Bn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return a(this,Bn).get(t)}remove(t){const e=a(this,Bn).get(t);if(e!==void 0&&(e instanceof Le&&a(this,fa).delete(e.annotationElementId),a(this,Bn).delete(t),a(this,Bn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of a(this,Bn).values())if(n instanceof Le)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=a(this,Bn).get(t);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(r=!0,n[o]=l);else r=!0,a(this,Bn).set(t,e);r&&E(this,t0,tx).call(this),e instanceof Le&&((a(this,fa)||w(this,fa,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return a(this,Bn).has(t)}get size(){return a(this,Bn).size}resetModified(){a(this,Jl)&&(w(this,Jl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ex(this)}get serializable(){if(a(this,Bn).size===0)return Iw;const t=new Map,e=new JE,n=[],r=Object.create(null);let o=!1;for(const[l,u]of a(this,Bn)){const h=u instanceof Le?u.serialize(!1,r):u;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),o||(o=!!h.bitmap))}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Iw}get editorStats(){let t=null;const e=new Map;let n=0,r=0;for(const o of a(this,Bn).values()){if(!(o instanceof Le)){o.popup&&(o.popup.deleted?r+=1:n+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));const h=t[u]||(t[u]=new Map);for(const[f,p]of Object.entries(l)){if(f==="type")continue;let y=h.get(f);y||(y=new Map,h.set(f,y));const v=y.get(p)??0;y.set(p,v+1)}}if((r>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:r,edited:n}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){w(this,tc,null)}updateEditor(t,e){var r;const n=(r=a(this,fa))==null?void 0:r.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=a(this,fa))==null?void 0:e.get(t))||null}get modifiedIds(){if(a(this,tc))return a(this,tc);const t=[];if(a(this,fa))for(const e of a(this,fa).values())e.serialize()&&t.push(e.annotationElementId);return w(this,tc,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,Bn).entries()}}Jl=new WeakMap,tc=new WeakMap,fa=new WeakMap,Bn=new WeakMap,t0=new WeakSet,tx=function(){a(this,Jl)||(w(this,Jl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var up;class ex extends GA{constructor(e){super();b(this,up);const{map:n,hash:r,transfer:o}=e.serializable,l=structuredClone(n,o?{transfer:o}:null);w(this,up,{map:l,hash:r,transfer:o})}get print(){Te("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,up)}get modifiedIds(){return jt(this,"modifiedIds",{ids:new Set,hash:""})}}up=new WeakMap;var ch;class Hk{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){b(this,ch,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,ch).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||a(this,ch).has(t.loadedName))){if(ee(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),a(this,ch).add(r),n==null||n(t)}catch{zt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Te("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw zt(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return jt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return jt(this,"isSyncFontLoadingSupported",hs||Sn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ee(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return jt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(L,D){return L.charCodeAt(D)<<24|L.charCodeAt(D+1)<<16|L.charCodeAt(D+2)<<8|L.charCodeAt(D+3)&255}function r(L,D,I,U){const G=L.substring(0,D),Y=L.substring(D+I);return G+U+Y}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(L,D){if(++f>30){zt("Load test font never loaded."),D();return}if(h.font="30px "+L,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,L,D))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,y.length,y);const _=16,x=1482184792;let T=n(v,_);for(o=0,l=y.length-3;o<l;o+=4)T=T-x+n(y,o)|0;o<y.length&&(T=T-x+n(y+"XXX",o)|0),v=r(v,_,4,bk(T));const k=`url(data:font/opentype;base64,${btoa(v)});`,M=`@font-face {font-family:"${y}";src:${k}}`;this.insertRule(M);const P=this._document.createElement("div");P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px";for(const L of[t.loadedName,y]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=L,P.append(D)}this._document.body.append(P),p(y,()=>{P.remove(),e.complete()})}}ch=new WeakMap;var Ae;class $k{constructor(t,e=null,n,r){b(this,Ae);this.compiledGlyphs=Object.create(null),w(this,Ae,t),this._inspectFont=e,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${vE(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(l){zt(`getPathGenerator - ignoring character: "${l}".`)}const o=SE(r==null?void 0:r.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return a(this,Ae).black}get bold(){return a(this,Ae).bold}get disableFontFace(){return a(this,Ae).disableFontFace??!1}set disableFontFace(t){jt(this,"disableFontFace",!!t)}get fontExtraProperties(){return a(this,Ae).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,Ae).isInvalidPDFjsFont}get isType3Font(){return a(this,Ae).isType3Font}get italic(){return a(this,Ae).italic}get missingFile(){return a(this,Ae).missingFile}get remeasure(){return a(this,Ae).remeasure}get vertical(){return a(this,Ae).vertical}get ascent(){return a(this,Ae).ascent}get defaultWidth(){return a(this,Ae).defaultWidth}get descent(){return a(this,Ae).descent}get bbox(){return a(this,Ae).bbox}set bbox(t){jt(this,"bbox",t)}get fontMatrix(){return a(this,Ae).fontMatrix}get fallbackName(){return a(this,Ae).fallbackName}get loadedName(){return a(this,Ae).loadedName}get mimetype(){return a(this,Ae).mimetype}get name(){return a(this,Ae).name}get data(){return a(this,Ae).data}clearData(){a(this,Ae).clearData()}get cssFontInfo(){return a(this,Ae).cssFontInfo}get systemFontInfo(){return a(this,Ae).systemFontInfo}get defaultVMetrics(){return a(this,Ae).defaultVMetrics}}Ae=new WeakMap;var uh,hh,hp,dh,oy;const Bu=class Bu{constructor(t){b(this,dh);b(this,uh);b(this,hh);b(this,hp);w(this,uh,t),w(this,hh,new DataView(a(this,uh))),w(this,hp,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const f of Bu.strings){const p=e.encode(t[f]);n[f]=p,r+=4+p.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of Bu.strings){const p=n[f],y=p.length;u.setUint32(h,y),l.set(p,h+4),h+=4+y}return ee(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return E(this,dh,oy).call(this,0)}get fontWeight(){return E(this,dh,oy).call(this,1)}get italicAngle(){return E(this,dh,oy).call(this,2)}};uh=new WeakMap,hh=new WeakMap,hp=new WeakMap,dh=new WeakSet,oy=function(t){ee(t<Bu.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=a(this,hh).getUint32(e)+4;const n=a(this,hh).getUint32(e);return a(this,hp).decode(new Uint8Array(a(this,uh),e+4,n))},K(Bu,"strings",["fontFamily","fontWeight","italicAngle"]);let By=Bu;var No,Cr,ec,nc,yf;const Uu=class Uu{constructor(t){b(this,nc);b(this,No);b(this,Cr);b(this,ec);w(this,No,t),w(this,Cr,new DataView(a(this,No))),w(this,ec,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const v of Uu.strings){const S=e.encode(t[v]);n[v]=S,r+=4+S.length}r+=4;let o,l,u=1+r;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;p.setUint8(y++,t.guessFallback?1:0),p.setUint32(y,0),y+=4,r=0;for(const v of Uu.strings){const S=n[v],_=S.length;r+=4+_,p.setUint32(y,_),f.set(S,y+4),y+=4+_}return p.setUint32(y-r-4,r),t.style&&(p.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,p.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length),ee(y<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(y)}get guessFallback(){return a(this,Cr).getUint8(0)!==0}get css(){return E(this,nc,yf).call(this,0)}get loadedName(){return E(this,nc,yf).call(this,1)}get baseFontName(){return E(this,nc,yf).call(this,2)}get src(){return E(this,nc,yf).call(this,3)}get style(){let t=1;t+=4+a(this,Cr).getUint32(t);const e=a(this,Cr).getUint32(t),n=a(this,ec).decode(new Uint8Array(a(this,No),t+4,e));t+=4+e;const r=a(this,Cr).getUint32(t),o=a(this,ec).decode(new Uint8Array(a(this,No),t+4,r));return{style:n,weight:o}}};No=new WeakMap,Cr=new WeakMap,ec=new WeakMap,nc=new WeakSet,yf=function(t){ee(t<Uu.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=a(this,Cr).getUint32(e)+4;const n=a(this,Cr).getUint32(e);return a(this,ec).decode(new Uint8Array(a(this,No),e+4,n))},K(Uu,"strings",["css","loadedName","baseFontName","src"]);let Uy=Uu;var fh,ph,gh,mh,$s,_r,dp,Se,Je,Vi,ly,vf;const Vt=class Vt{constructor({data:t,extra:e}){b(this,Je);b(this,_r);b(this,dp);b(this,Se);w(this,_r,t),w(this,dp,new TextDecoder),w(this,Se,new DataView(a(this,_r))),e&&Object.assign(this,e)}get black(){return E(this,Je,Vi).call(this,0)}get bold(){return E(this,Je,Vi).call(this,1)}get disableFontFace(){return E(this,Je,Vi).call(this,2)}get fontExtraProperties(){return E(this,Je,Vi).call(this,3)}get isInvalidPDFjsFont(){return E(this,Je,Vi).call(this,4)}get isType3Font(){return E(this,Je,Vi).call(this,5)}get italic(){return E(this,Je,Vi).call(this,6)}get missingFile(){return E(this,Je,Vi).call(this,7)}get remeasure(){return E(this,Je,Vi).call(this,8)}get vertical(){return E(this,Je,Vi).call(this,9)}get ascent(){return E(this,Je,ly).call(this,0)}get defaultWidth(){return E(this,Je,ly).call(this,1)}get descent(){return E(this,Je,ly).call(this,2)}get bbox(){let t=a(Vt,ph);if(a(this,Se).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<4;r++)n.push(a(this,Se).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=a(Vt,gh);if(a(this,Se).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<6;r++)n.push(a(this,Se).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=a(Vt,mh);if(a(this,Se).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<3;r++)n.push(a(this,Se).getInt16(t,!0)),t+=2;return n}get fallbackName(){return E(this,Je,vf).call(this,0)}get loadedName(){return E(this,Je,vf).call(this,1)}get mimetype(){return E(this,Je,vf).call(this,2)}get name(){return E(this,Je,vf).call(this,3)}get data(){let t=a(Vt,$s);const e=a(this,Se).getUint32(t);t+=4+e;const n=a(this,Se).getUint32(t);t+=4+n;const r=a(this,Se).getUint32(t);t+=4+r;const o=a(this,Se).getUint32(t);if(o!==0)return new Uint8Array(a(this,_r),t+4,o)}clearData(){let t=a(Vt,$s);const e=a(this,Se).getUint32(t);t+=4+e;const n=a(this,Se).getUint32(t);t+=4+n;const r=a(this,Se).getUint32(t);t+=4+r;const o=a(this,Se).getUint32(t);new Uint8Array(a(this,_r),t+4,o).fill(0),a(this,Se).setUint32(t,0)}get cssFontInfo(){let t=a(Vt,$s);const e=a(this,Se).getUint32(t);t+=4+e;const n=a(this,Se).getUint32(t);t+=4+n;const r=a(this,Se).getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(a(this,_r),t+4,r)),new By(o.buffer)}get systemFontInfo(){let t=a(Vt,$s);const e=a(this,Se).getUint32(t);t+=4+e;const n=a(this,Se).getUint32(t);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(a(this,_r),t+4,n)),new Uy(r.buffer)}static write(t){const e=t.systemFontInfo?Uy.write(t.systemFontInfo):null,n=t.cssFontInfo?By.write(t.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const x of Vt.strings)o[x]=r.encode(t[x]),l+=4+o[x].length;const u=a(Vt,$s)+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;const v=Vt.bools.length;let S=0,_=0;for(let x=0;x<v;x++){const T=t[Vt.bools[x]];S|=(T===void 0?0:T?2:1)<<_,_+=2,(_===8||x===v-1)&&(p.setUint8(y++,S),S=0,_=0)}ee(y===a(Vt,fh),"FontInfo.write: Boolean properties offset mismatch");for(const x of Vt.numbers)p.setFloat64(y,t[x]),y+=8;if(ee(y===a(Vt,ph),"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(y++,4);for(const x of t.bbox)p.setInt16(y,x,!0),y+=2}else p.setUint8(y++,0),y+=8;if(ee(y===a(Vt,gh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(y++,6);for(const x of t.fontMatrix)p.setFloat64(y,x,!0),y+=8}else p.setUint8(y++,0),y+=48;if(ee(y===a(Vt,mh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(y++,1);for(const x of t.defaultVMetrics)p.setInt16(y,x,!0),y+=2}else p.setUint8(y++,0),y+=6;ee(y===a(Vt,$s),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(a(Vt,$s),0),y+=4;for(const x of Vt.strings){const T=o[x],k=T.length;p.setUint32(y,k),f.set(T,y+4),y+=4+k}if(p.setUint32(a(Vt,$s),y-a(Vt,$s)-4),!e)p.setUint32(y,0),y+=4;else{const x=e.byteLength;p.setUint32(y,x),ee(y+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+x}if(!n)p.setUint32(y,0),y+=4;else{const x=n.byteLength;p.setUint32(y,x),ee(y+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),y+4),y+=4+x}return t.data===void 0?(p.setUint32(y,0),y+=4):(p.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),ee(y<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(y)}};fh=new WeakMap,ph=new WeakMap,gh=new WeakMap,mh=new WeakMap,$s=new WeakMap,_r=new WeakMap,dp=new WeakMap,Se=new WeakMap,Je=new WeakSet,Vi=function(t){ee(t<Vt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,r=a(this,Se).getUint8(e)>>n&3;return r===0?void 0:r===2},ly=function(t){return ee(t<Vt.numbers.length,"Invalid number index"),a(this,Se).getFloat64(a(Vt,fh)+t*8)},vf=function(t){ee(t<Vt.strings.length,"Invalid string index");let e=a(Vt,$s)+4;for(let o=0;o<t;o++)e+=a(this,Se).getUint32(e)+4;const n=a(this,Se).getUint32(e),r=new Uint8Array(n);return r.set(new Uint8Array(a(this,_r),e+4,n)),a(this,dp).decode(r)},K(Vt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),K(Vt,"numbers",["ascent","defaultWidth","descent"]),K(Vt,"strings",["fallbackName","loadedName","mimetype","name"]),b(Vt,fh,Math.ceil(Vt.bools.length*2/8)),b(Vt,ph,a(Vt,fh)+Vt.numbers.length*8),b(Vt,gh,a(Vt,ph)+1+8),b(Vt,mh,a(Vt,gh)+1+48),b(Vt,$s,a(Vt,mh)+1+6);let Fw=Vt;var fp,pp,gp,mp,yp,vp,wp,Ap;const Re=class Re{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,r=[],o=[],l=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],r=t[2],o=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(r.length/2),y=Math.floor(o.length/3),v=l.length,S=u.length;let _=0;for(const D of u)_+=1,_=Math.ceil(_/4)*4,_+=4+D.coords.length*4,_+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(_+=4);const x=20+p*8+y*3+v*8+(n?16:0)+(f?3:0)+_,T=new ArrayBuffer(x),k=new DataView(T),M=new Uint8Array(T);k.setUint8(a(Re,fp),e),k.setUint8(a(Re,pp),n?1:0),k.setUint8(a(Re,gp),f?1:0),k.setUint8(a(Re,mp),h),k.setUint32(a(Re,yp),p,!0),k.setUint32(a(Re,vp),y,!0),k.setUint32(a(Re,wp),v,!0),k.setUint32(a(Re,Ap),S,!0);let P=20;new Float32Array(T,P,p*2).set(r),P+=p*8,M.set(o,P),P+=y*3;for(const[D,I]of l)k.setFloat32(P,D,!0),P+=4,k.setUint32(P,parseInt(I.slice(1),16),!0),P+=4;if(n)for(const D of n)k.setFloat32(P,D,!0),P+=4;f&&(M.set(f,P),P+=3);for(let D=0;D<u.length;D++){const I=u[D];k.setUint8(P,I.type),P+=1,P=Math.ceil(P/4)*4,k.setUint32(P,I.coords.length,!0),P+=4,new Int32Array(T,P,I.coords.length).set(I.coords),P+=I.coords.length*4,k.setUint32(P,I.colors.length,!0),P+=4,new Int32Array(T,P,I.colors.length).set(I.colors),P+=I.colors.length*4,I.verticesPerRow!==void 0&&(k.setUint32(P,I.verticesPerRow,!0),P+=4)}return T}getIR(){const t=this.view,e=this.data[a(Re,fp)],n=!!this.data[a(Re,pp)],r=!!this.data[a(Re,gp)],o=t.getUint32(a(Re,yp),!0),l=t.getUint32(a(Re,vp),!0),u=t.getUint32(a(Re,wp),!0),h=t.getUint32(a(Re,Ap),!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const y=new Uint8Array(this.buffer,f,l*3);f+=l*3;const v=[];for(let T=0;T<u;++T){const k=t.getFloat32(f,!0);f+=4;const M=t.getUint32(f,!0);f+=4,v.push([k,`#${M.toString(16).padStart(6,"0")}`])}let S=null;if(n){S=[];for(let T=0;T<4;++T)S.push(t.getFloat32(f,!0)),f+=4}let _=null;r&&(_=new Uint8Array(this.buffer,f,3),f+=3);const x=[];for(let T=0;T<h;++T){const k=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const M=t.getUint32(f,!0);f+=4;const P=new Int32Array(this.buffer,f,M);f+=M*4;const L=t.getUint32(f,!0);f+=4;const D=new Int32Array(this.buffer,f,L);f+=L*4;const I={type:k,coords:P,colors:D};k===pw.LATTICE&&(I.verticesPerRow=t.getUint32(f,!0),f+=4),x.push(I)}if(e===1)return["RadialAxial","axial",S,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",S,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const T=this.data[a(Re,mp)];let k=null;if(p.length>0){let M=p[0],P=p[0],L=p[1],D=p[1];for(let I=0;I<p.length;I+=2){const U=p[I],G=p[I+1];M=M>U?U:M,L=L>G?G:L,P=P<U?U:P,D=D<G?G:D}k=[M,L,P,D]}return["Mesh",T,p,y,x,k,S,_]}throw new Error(`Unsupported pattern kind: ${e}`)}};fp=new WeakMap,pp=new WeakMap,gp=new WeakMap,mp=new WeakMap,yp=new WeakMap,vp=new WeakMap,wp=new WeakMap,Ap=new WeakMap,b(Re,fp,0),b(Re,pp,1),b(Re,gp,2),b(Re,mp,3),b(Re,yp,4),b(Re,vp,8),b(Re,wp,12),b(Re,Ap,16);let Ow=Re;var yh;class Wk{constructor(t){b(this,yh);w(this,yh,t)}static write(t){let e,n;return Sn.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return Sn.isFloat16ArraySupported?new Float16Array(a(this,yh)):new Float32Array(a(this,yh))}}yh=new WeakMap;function Vk(g){if(g instanceof URL)return g.href;if(typeof g=="string"){if(hs)return g;const t=URL.parse(g,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Gk(g){if(hs&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return kg(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g==null?void 0:g.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Gm(g){if(typeof g!="string")return null;if(g.endsWith("/"))return g;throw new Error(`Invalid factory url: "${g}" must include trailing slash.`)}const Bw=g=>typeof g=="object"&&Number.isInteger(g==null?void 0:g.num)&&g.num>=0&&Number.isInteger(g==null?void 0:g.gen)&&g.gen>=0,Xk=g=>typeof g=="object"&&typeof(g==null?void 0:g.name)=="string",qk=kk.bind(null,Bw,Xk);var pa,e0;class Yk{constructor(){b(this,pa,new Map);b(this,e0,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};a(this,e0).then(()=>{for(const[r]of a(this,pa))r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){zt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}a(this,pa).set(e,r)}removeEventListener(t,e){const n=a(this,pa).get(e);n==null||n(),a(this,pa).delete(e)}terminate(){for(const[,t]of a(this,pa))t==null||t();a(this,pa).clear()}}pa=new WeakMap,e0=new WeakMap;const Xm={DATA:1,ERROR:2},on={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function V1(){}function xs(g){if(g instanceof al||g instanceof gw||g instanceof O1||g instanceof Ny||g instanceof rw)return g;switch(g instanceof Error||typeof g=="object"&&g!==null||Te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new al(g.message);case"InvalidPDFException":return new gw(g.message);case"PasswordException":return new O1(g.message,g.code);case"ResponseException":return new Ny(g.message,g.status,g.missing);case"UnknownErrorException":return new rw(g.message,g.details)}return new rw(g.message,g.toString())}var vh,Li,nx,sx,ix,cy;class wf{constructor(t,e,n){b(this,Li);b(this,vh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",E(this,Li,nx).bind(this),{signal:a(this,vh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:l,targetName:u,stream:on.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{ee(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:on.CANCEL,streamId:o,reason:xs(f)}),p.promise}},n)}destroy(){var t;(t=a(this,vh))==null||t.abort(),w(this,vh,null)}}vh=new WeakMap,Li=new WeakSet,nx=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,Li,ix).call(this,t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Xm.DATA)r.resolve(t.data);else if(t.callback===Xm.ERROR)r.reject(xs(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:Xm.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:Xm.ERROR,callbackId:t.callbackId,reason:xs(l)})});return}if(t.streamId){E(this,Li,sx).call(this,t);return}e(t.data)},sx=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:on.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:on.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){ee(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:on.ERROR,streamId:e,reason:xs(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:n,targetName:r,stream:on.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:on.START_COMPLETE,streamId:e,reason:xs(f)})})},ix=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case on.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(xs(t.reason));break;case on.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(xs(t.reason));break;case on.PULL:if(!u){o.postMessage({sourceName:n,targetName:r,stream:on.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||V1).then(function(){o.postMessage({sourceName:n,targetName:r,stream:on.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:on.PULL_COMPLETE,streamId:e,reason:xs(f)})});break;case on.ENQUEUE:if(ee(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case on.CLOSE:if(ee(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),E(this,Li,cy).call(this,l,e);break;case on.ERROR:ee(l,"error should have stream controller"),l.controller.error(xs(t.reason)),E(this,Li,cy).call(this,l,e);break;case on.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(xs(t.reason)),E(this,Li,cy).call(this,l,e);break;case on.CANCEL:if(!u)break;const h=xs(t.reason);Promise.try(u.onCancel||V1,h).then(function(){o.postMessage({sourceName:n,targetName:r,stream:on.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:on.CANCEL_COMPLETE,streamId:e,reason:xs(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},cy=async function(t,e){var n,r,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(r=t.pullCall)==null?void 0:r.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var Sp;class rx{constructor({enableHWA:t=!1}){b(this,Sp,!1);w(this,Sp,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!a(this,Sp)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Te("Abstract method `_createCanvas` called.")}}Sp=new WeakMap;class Kk extends rx{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class ax{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class G1 extends ax{async _fetch(t){const e=await Tg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):kg(e)}}class ox{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,o){return"none"}destroy(t=!1){}}var sc,wh,ga,ma,Zn,ic,rc,pt,qn,Af,Pu,uy,Ru,lx,Uw,Mu,Sf,bf,zw,Ef;class Qk extends ox{constructor({docId:e,ownerDocument:n=globalThis.document}){super();b(this,pt);b(this,sc);b(this,wh);b(this,ga);b(this,ma);b(this,Zn);b(this,ic);b(this,rc,0);w(this,ma,e),w(this,Zn,n)}addFilter(e){if(!e)return"none";let n=a(this,pt,qn).get(e);if(n)return n;const[r,o,l]=E(this,pt,uy).call(this,e),u=e.length===1?r:`${r}${o}${l}`;if(n=a(this,pt,qn).get(u),n)return a(this,pt,qn).set(e,n),n;const h=`g_${a(this,ma)}_transfer_map_${gn(this,rc)._++}`,f=E(this,pt,Ru).call(this,h);a(this,pt,qn).set(e,f),a(this,pt,qn).set(u,f);const p=E(this,pt,Mu).call(this,h);return E(this,pt,bf).call(this,r,o,l,p),f}addHCMFilter(e,n){var _;const r=`${e}-${n}`,o="base";let l=a(this,pt,Af).get(o);if((l==null?void 0:l.key)===r||(l?((_=l.filter)==null||_.remove(),l.key=r,l.url="none",l.filter=null):(l={key:r,url:"none",filter:null},a(this,pt,Af).set(o,l)),!e||!n))return l.url;const u=E(this,pt,Ef).call(this,e);e=ct.makeHexColor(...u);const h=E(this,pt,Ef).call(this,n);if(n=ct.makeHexColor(...h),a(this,pt,Pu).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const f=new Array(256);for(let x=0;x<=255;x++){const T=x/255;f[x]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const p=f.join(","),y=`g_${a(this,ma)}_hcm_filter`,v=l.filter=E(this,pt,Mu).call(this,y);E(this,pt,bf).call(this,p,p,p,v),E(this,pt,Uw).call(this,v);const S=(x,T)=>{const k=u[x]/255,M=h[x]/255,P=new Array(T+1);for(let L=0;L<=T;L++)P[L]=k+L/T*(M-k);return P.join(",")};return E(this,pt,bf).call(this,S(0,5),S(1,5),S(2,5),v),l.url=E(this,pt,Ru).call(this,y),l.url}addAlphaFilter(e){let n=a(this,pt,qn).get(e);if(n)return n;const[r]=E(this,pt,uy).call(this,[e]),o=`alpha_${r}`;if(n=a(this,pt,qn).get(o),n)return a(this,pt,qn).set(e,n),n;const l=`g_${a(this,ma)}_alpha_map_${gn(this,rc)._++}`,u=E(this,pt,Ru).call(this,l);a(this,pt,qn).set(e,u),a(this,pt,qn).set(o,u);const h=E(this,pt,Mu).call(this,l);return E(this,pt,zw).call(this,r,h),u}addLuminosityFilter(e){let n=a(this,pt,qn).get(e||"luminosity");if(n)return n;let r,o;if(e?([r]=E(this,pt,uy).call(this,[e]),o=`luminosity_${r}`):o="luminosity",n=a(this,pt,qn).get(o),n)return a(this,pt,qn).set(e,n),n;const l=`g_${a(this,ma)}_luminosity_map_${gn(this,rc)._++}`,u=E(this,pt,Ru).call(this,l);a(this,pt,qn).set(e,u),a(this,pt,qn).set(o,u);const h=E(this,pt,Mu).call(this,l);return E(this,pt,lx).call(this,h),e&&E(this,pt,zw).call(this,r,h),u}addHighlightHCMFilter(e,n,r,o,l){var M;const u=`${n}-${r}-${o}-${l}`;let h=a(this,pt,Af).get(e);if((h==null?void 0:h.key)===u||(h?((M=h.filter)==null||M.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},a(this,pt,Af).set(e,h)),!n||!r))return h.url;const[f,p]=[n,r].map(E(this,pt,Ef).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[S,_]=[o,l].map(E(this,pt,Ef).bind(this));v<y&&([y,v,S,_]=[v,y,_,S]),a(this,pt,Pu).style.color="";const x=(P,L,D)=>{const I=new Array(256),U=(v-y)/D,G=P/255,Y=(L-P)/(255*D);let nt=0;for(let Z=0;Z<=D;Z++){const kt=Math.round(y+Z*U),Tt=G+Z*Y;for(let St=nt;St<=kt;St++)I[St]=Tt;nt=kt+1}for(let Z=nt;Z<256;Z++)I[Z]=I[nt-1];return I.join(",")},T=`g_${a(this,ma)}_hcm_${e}_filter`,k=h.filter=E(this,pt,Mu).call(this,T);return E(this,pt,Uw).call(this,k),E(this,pt,bf).call(this,x(S[0],_[0],5),x(S[1],_[1],5),x(S[2],_[2],5),k),h.url=E(this,pt,Ru).call(this,T),h.url}destroy(e=!1){var n,r,o,l;e&&((n=a(this,ic))!=null&&n.size)||((r=a(this,ga))==null||r.parentNode.parentNode.remove(),w(this,ga,null),(o=a(this,wh))==null||o.clear(),w(this,wh,null),(l=a(this,ic))==null||l.clear(),w(this,ic,null),w(this,rc,0))}}sc=new WeakMap,wh=new WeakMap,ga=new WeakMap,ma=new WeakMap,Zn=new WeakMap,ic=new WeakMap,rc=new WeakMap,pt=new WeakSet,qn=function(){return a(this,wh)||w(this,wh,new Map)},Af=function(){return a(this,ic)||w(this,ic,new Map)},Pu=function(){if(!a(this,ga)){const e=a(this,Zn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=a(this,Zn).createElementNS(Zr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),w(this,ga,a(this,Zn).createElementNS(Zr,"defs")),e.append(r),r.append(a(this,ga)),a(this,Zn).body.append(e)}return a(this,ga)},uy=function(e){if(e.length===1){const f=e[0],p=new Array(256);for(let v=0;v<256;v++)p[v]=f[v]/255;const y=p.join(",");return[y,y,y]}const[n,r,o]=e,l=new Array(256),u=new Array(256),h=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,u[f]=r[f]/255,h[f]=o[f]/255;return[l.join(","),u.join(","),h.join(",")]},Ru=function(e){if(a(this,sc)===void 0){w(this,sc,"");const n=a(this,Zn).URL;n!==a(this,Zn).baseURI&&(m0(n)?zt('#createUrl: ignore "data:"-URL for performance reasons.'):w(this,sc,gE(n,"")))}return`url(${a(this,sc)}#${e})`},lx=function(e){const n=a(this,Zn).createElementNS(Zr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Uw=function(e){const n=a(this,Zn).createElementNS(Zr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Mu=function(e){const n=a(this,Zn).createElementNS(Zr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),a(this,pt,Pu).append(n),n},Sf=function(e,n,r){const o=a(this,Zn).createElementNS(Zr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),e.append(o)},bf=function(e,n,r,o){const l=a(this,Zn).createElementNS(Zr,"feComponentTransfer");o.append(l),E(this,pt,Sf).call(this,l,"feFuncR",e),E(this,pt,Sf).call(this,l,"feFuncG",n),E(this,pt,Sf).call(this,l,"feFuncB",r)},zw=function(e,n){const r=a(this,Zn).createElementNS(Zr,"feComponentTransfer");n.append(r),E(this,pt,Sf).call(this,r,"feFuncA",e)},Ef=function(e){return a(this,pt,Pu).style.color=e,Rg(getComputedStyle(a(this,pt,Pu)).getPropertyValue("color"))};class cx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class X1 extends cx{async _fetch(t){const e=await Tg(t,"arraybuffer");return new Uint8Array(e)}}class ux{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class q1 extends ux{async _fetch(t){const e=await Tg(t,"arraybuffer");return new Uint8Array(e)}}hs&&zt("Please use the `legacy` build in Node.js environments.");async function XA(g){const e=await process.getBuiltinModule("fs").promises.readFile(g);return new Uint8Array(e)}class Zk extends ox{}class Jk extends rx{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class tT extends ax{async _fetch(t){return XA(t)}}class eT extends cx{async _fetch(t){return XA(t)}}class nT extends ux{async _fetch(t){return XA(t)}}const _u="__forcedDependency",{floor:Y1,ceil:K1}=Math;function qm(g,t,e,n,r,o){g[t*4+0]=Math.min(g[t*4+0],e),g[t*4+1]=Math.min(g[t*4+1],n),g[t*4+2]=Math.max(g[t*4+2],r),g[t*4+3]=Math.max(g[t*4+3],o)}const jw=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Ah,Io;class sT{constructor(t,e){b(this,Ah);b(this,Io);w(this,Ah,t),w(this,Io,e)}get length(){return a(this,Ah).length}isEmpty(t){return a(this,Ah)[t]===jw}minX(t){return a(this,Io)[t*4+0]/256}minY(t){return a(this,Io)[t*4+1]/256}maxX(t){return(a(this,Io)[t*4+2]+1)/256}maxY(t){return(a(this,Io)[t*4+3]+1)/256}}Ah=new WeakMap,Io=new WeakMap;const Ym=(g,t)=>{if(!g)return;let e=g.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},g.set(t,e)),e};var ks,Ts,ac,Ki,oc,ya,ve,be,va,Ps,bp,Sh,lc,cc,wa,Jn,kr,Ep,Hw;class iT{constructor(t,e,n=!1){b(this,Ep);b(this,ks,{__proto__:null});b(this,Ts,{__proto__:null,transform:[],moveText:[],sameLineText:[],[_u]:[]});b(this,ac,new Map);b(this,Ki,[]);b(this,oc,[]);b(this,ya,[[1,0,0,1,0,0]]);b(this,ve,[-1/0,-1/0,1/0,1/0]);b(this,be,new Float64Array([1/0,1/0,-1/0,-1/0]));b(this,va,-1);b(this,Ps,new Set);b(this,bp,new Map);b(this,Sh,new Map);b(this,lc);b(this,cc);b(this,wa);b(this,Jn);b(this,kr);w(this,lc,t.width),w(this,cc,t.height),E(this,Ep,Hw).call(this,e),n&&w(this,kr,new Map)}growOperationsCount(t){t>=a(this,Jn).length&&E(this,Ep,Hw).call(this,t,a(this,Jn))}save(t){return w(this,ks,{__proto__:a(this,ks)}),w(this,Ts,{__proto__:a(this,Ts),transform:{__proto__:a(this,Ts).transform},moveText:{__proto__:a(this,Ts).moveText},sameLineText:{__proto__:a(this,Ts).sameLineText},[_u]:{__proto__:a(this,Ts)[_u]}}),w(this,ve,{__proto__:a(this,ve)}),a(this,Ki).push(t),this}restore(t){var r;const e=Object.getPrototypeOf(a(this,ks));if(e===null)return this;w(this,ks,e),w(this,Ts,Object.getPrototypeOf(a(this,Ts))),w(this,ve,Object.getPrototypeOf(a(this,ve)));const n=a(this,Ki).pop();return n!==void 0&&((r=Ym(a(this,kr),t))==null||r.dependencies.add(n),a(this,Jn)[t]=a(this,Jn)[n]),this}recordOpenMarker(t){return a(this,Ki).push(t),this}getOpenMarker(){return a(this,Ki).length===0?null:a(this,Ki).at(-1)}recordCloseMarker(t){var n;const e=a(this,Ki).pop();return e!==void 0&&((n=Ym(a(this,kr),t))==null||n.dependencies.add(e),a(this,Jn)[t]=a(this,Jn)[e]),this}beginMarkedContent(t){return a(this,oc).push(t),this}endMarkedContent(t){var n;const e=a(this,oc).pop();return e!==void 0&&((n=Ym(a(this,kr),t))==null||n.dependencies.add(e),a(this,Jn)[t]=a(this,Jn)[e]),this}pushBaseTransform(t){return a(this,ya).push(ct.multiplyByDOMMatrix(a(this,ya).at(-1),t.getTransform())),this}popBaseTransform(){return a(this,ya).length>1&&a(this,ya).pop(),this}recordSimpleData(t,e){return a(this,ks)[t]=e,this}recordIncrementalData(t,e){return a(this,Ts)[t].push(e),this}resetIncrementalData(t,e){return a(this,Ts)[t].length=0,this}recordNamedData(t,e){return a(this,ac).set(t,e),this}recordSimpleDataFromNamed(t,e,n){a(this,ks)[t]=a(this,ac).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(_u,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in a(this,ks)&&this.recordFutureForcedDependency(e,a(this,ks)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of a(this,Ps))this.recordFutureForcedDependency(_u,t);return this}resetBBox(t){return a(this,va)!==t&&(w(this,va,t),a(this,be)[0]=1/0,a(this,be)[1]=1/0,a(this,be)[2]=-1/0,a(this,be)[3]=-1/0),this}recordClipBox(t,e,n,r,o,l){const u=ct.multiplyByDOMMatrix(a(this,ya).at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];ct.axialAlignedBoundingBox([n,o,r,l],u,h);const f=ct.intersect(a(this,ve),h);return f?(a(this,ve)[0]=f[0],a(this,ve)[1]=f[1],a(this,ve)[2]=f[2],a(this,ve)[3]=f[3]):(a(this,ve)[0]=a(this,ve)[1]=1/0,a(this,ve)[2]=a(this,ve)[3]=-1/0),this}recordBBox(t,e,n,r,o,l){const u=a(this,ve);if(u[0]===1/0)return this;const h=ct.multiplyByDOMMatrix(a(this,ya).at(-1),e.getTransform());if(u[0]===-1/0)return ct.axialAlignedBoundingBox([n,o,r,l],h,a(this,be)),this;const f=[1/0,1/0,-1/0,-1/0];return ct.axialAlignedBoundingBox([n,o,r,l],h,f),a(this,be)[0]=Math.min(a(this,be)[0],Math.max(f[0],u[0])),a(this,be)[1]=Math.min(a(this,be)[1],Math.max(f[1],u[1])),a(this,be)[2]=Math.max(a(this,be)[2],Math.min(f[2],u[2])),a(this,be)[3]=Math.max(a(this,be)[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,r=1,o=0,l=0,u){const h=n.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&a(this,Sh).get(n),f!==!1&&(p=[0,0,0,0],ct.axialAlignedBoundingBox(h,n.fontMatrix,p),(r!==1||o!==0||l!==0)&&ct.scaleMinMax([r,0,0,-r,o,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return h&&p&&f===void 0&&(f=p[0]<=o-y.actualBoundingBoxLeft&&p[2]>=o+y.actualBoundingBoxRight&&p[1]<=l-y.actualBoundingBoxAscent&&p[3]>=l+y.actualBoundingBoxDescent,a(this,Sh).set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return a(this,be)[0]=Math.max(0,a(this,ve)[0]),a(this,be)[1]=Math.max(0,a(this,ve)[1]),a(this,be)[2]=Math.min(a(this,lc),a(this,ve)[2]),a(this,be)[3]=Math.min(a(this,cc),a(this,ve)[3]),this}getSimpleIndex(t){return a(this,ks)[t]}recordDependencies(t,e){const n=a(this,Ps),r=a(this,ks),o=a(this,Ts);for(const l of e)l in a(this,ks)?n.add(r[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return a(this,ac).has(e)&&a(this,Ps).add(a(this,ac).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[_u]),a(this,kr)){const n=Ym(a(this,kr),t),{dependencies:r}=n;a(this,Ps).forEach(r.add,r),a(this,Ki).forEach(r.add,r),a(this,oc).forEach(r.add,r),r.delete(t),n.isRenderingOperation=!0}if(a(this,va)===t){const n=Y1(a(this,be)[0]*256/a(this,lc)),r=Y1(a(this,be)[1]*256/a(this,cc)),o=K1(a(this,be)[2]*256/a(this,lc)),l=K1(a(this,be)[3]*256/a(this,cc));qm(a(this,wa),t,n,r,o,l);for(const u of a(this,Ps))u!==t&&qm(a(this,wa),u,n,r,o,l);for(const u of a(this,Ki))u!==t&&qm(a(this,wa),u,n,r,o,l);for(const u of a(this,oc))u!==t&&qm(a(this,wa),u,n,r,o,l);e||(a(this,Ps).clear(),w(this,va,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(a(this,Ps));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return a(this,va)===t&&(w(this,va,-1),a(this,ve)[0]=Math.max(a(this,ve)[0],a(this,be)[0]),a(this,ve)[1]=Math.max(a(this,ve)[1],a(this,be)[1]),a(this,ve)[2]=Math.min(a(this,ve)[2],a(this,be)[2]),a(this,ve)[3]=Math.min(a(this,ve)[3],a(this,be)[3]),e||a(this,Ps).clear()),this}_takePendingDependencies(){const t=a(this,Ps);return w(this,Ps,new Set),t}_extractOperation(t){const e=a(this,bp).get(t);return a(this,bp).delete(t),e}_pushPendingDependencies(t){for(const e of t)a(this,Ps).add(e)}take(){return a(this,Sh).clear(),new sT(a(this,Jn),a(this,wa))}takeDebugMetadata(){return a(this,kr)}}ks=new WeakMap,Ts=new WeakMap,ac=new WeakMap,Ki=new WeakMap,oc=new WeakMap,ya=new WeakMap,ve=new WeakMap,be=new WeakMap,va=new WeakMap,Ps=new WeakMap,bp=new WeakMap,Sh=new WeakMap,lc=new WeakMap,cc=new WeakMap,wa=new WeakMap,Jn=new WeakMap,kr=new WeakMap,Ep=new WeakSet,Hw=function(t,e){const n=new ArrayBuffer(t*4);w(this,wa,new Uint8ClampedArray(n)),w(this,Jn,new Uint32Array(n)),e&&e.length>0?(a(this,Jn).set(e),a(this,Jn).fill(jw,e.length)):a(this,Jn).fill(jw)};var _e,Ke,Qi,bh,Eh;const eS=class eS{constructor(t,e,n){b(this,_e);b(this,Ke);b(this,Qi);b(this,bh,0);b(this,Eh,0);if(t instanceof eS&&a(t,Qi)===!!n)return t;w(this,_e,t),w(this,Ke,e),w(this,Qi,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return gn(this,Eh)._++,a(this,_e).save(a(this,Ke)),this}restore(t){return a(this,Eh)>0&&(a(this,_e).restore(a(this,Ke)),gn(this,Eh)._--),this}recordOpenMarker(t){return gn(this,bh)._++,this}getOpenMarker(){return a(this,bh)>0?a(this,Ke):a(this,_e).getOpenMarker()}recordCloseMarker(t){return gn(this,bh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return a(this,_e).pushBaseTransform(t),this}popBaseTransform(){return a(this,_e).popBaseTransform(),this}recordSimpleData(t,e){return a(this,_e).recordSimpleData(t,a(this,Ke)),this}recordIncrementalData(t,e){return a(this,_e).recordIncrementalData(t,a(this,Ke)),this}resetIncrementalData(t,e){return a(this,_e).resetIncrementalData(t,a(this,Ke)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return a(this,_e).recordSimpleDataFromNamed(t,e,a(this,Ke)),this}recordFutureForcedDependency(t,e){return a(this,_e).recordFutureForcedDependency(t,a(this,Ke)),this}inheritSimpleDataAsFutureForcedDependencies(t){return a(this,_e).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,_e).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return a(this,Qi)||a(this,_e).resetBBox(a(this,Ke)),this}recordClipBox(t,e,n,r,o,l){return a(this,Qi)||a(this,_e).recordClipBox(a(this,Ke),e,n,r,o,l),this}recordBBox(t,e,n,r,o,l){return a(this,Qi)||a(this,_e).recordBBox(a(this,Ke),e,n,r,o,l),this}recordCharacterBBox(t,e,n,r,o,l,u){return a(this,Qi)||a(this,_e).recordCharacterBBox(a(this,Ke),e,n,r,o,l,u),this}recordFullPageBBox(t){return a(this,Qi)||a(this,_e).recordFullPageBBox(a(this,Ke)),this}getSimpleIndex(t){return a(this,_e).getSimpleIndex(t)}recordDependencies(t,e){return a(this,_e).recordDependencies(a(this,Ke),e),this}recordNamedDependency(t,e){return a(this,_e).recordNamedDependency(a(this,Ke),e),this}recordOperation(t){return a(this,_e).recordOperation(a(this,Ke),!0),this}recordShowTextOperation(t){return a(this,_e).recordShowTextOperation(a(this,Ke),!0),this}bboxToClipBoxDropOperation(t){return a(this,Qi)||a(this,_e).bboxToClipBoxDropOperation(a(this,Ke),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};_e=new WeakMap,Ke=new WeakMap,Qi=new WeakMap,bh=new WeakMap,Eh=new WeakMap;let zy=eS;const vi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},jn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function $w(g,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),g.clip(r)}class qA{isModifyingCurrentTransform(){return!1}getPattern(){Te("Abstract method `getPattern` called.")}}class rT extends qA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,r=this._p0,o=this._p1;if(e&&(r=r.slice(),o=o.slice(),ct.applyTransform(r,e),ct.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let l=this._r0,u=this._r1;if(e){const h=new Float32Array(2);ct.singularValueDecompose2dScale(e,h),l*=h[0],u*=h[0]}n=t.createRadialGradient(r[0],r[1],l,o[0],o[1],u)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,r){let o;if(r===jn.STROKE||r===jn.FILL){if(this.isOriginBased()){let v=ct.transform(n,e.baseTransform);this.matrix&&(v=ct.transform(v,this.matrix));const S=.001,_=Math.hypot(v[0],v[1]),x=Math.hypot(v[2],v[3]),T=(v[0]*v[2]+v[1]*v[3])/(_*x);if(Math.abs(T)<S)if(this.isRadial()){if(Math.abs(_-x)<S)return this._createGradient(t,v)}else return this._createGradient(t,v)}const l=e.current.getClippedPathBoundingBox(r,Ve(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=ct.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),$w(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else $w(t,this._bbox),o=this._createGradient(t);return o}}function lw(g,t,e,n,r,o,l,u){const h=t.coords,f=t.colors,p=g.data,y=g.width*4;let v;h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=o,o=l,l=v),h[n+1]>h[r+1]&&(v=n,n=r,r=v,v=l,l=u,u=v),h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=o,o=l,l=v);const S=(h[e]+t.offsetX)*t.scaleX,_=(h[e+1]+t.offsetY)*t.scaleY,x=(h[n]+t.offsetX)*t.scaleX,T=(h[n+1]+t.offsetY)*t.scaleY,k=(h[r]+t.offsetX)*t.scaleX,M=(h[r+1]+t.offsetY)*t.scaleY;if(_>=M)return;const P=f[o],L=f[o+1],D=f[o+2],I=f[l],U=f[l+1],G=f[l+2],Y=f[u],nt=f[u+1],Z=f[u+2],kt=Math.round(_),Tt=Math.round(M);let St,Pt,lt,st,V,ft,tt,O;for(let H=kt;H<=Tt;H++){if(H<T){const Dt=H<_?0:(_-H)/(_-T);St=S-(S-x)*Dt,Pt=P-(P-I)*Dt,lt=L-(L-U)*Dt,st=D-(D-G)*Dt}else{let Dt;H>M?Dt=1:T===M?Dt=0:Dt=(T-H)/(T-M),St=x-(x-k)*Dt,Pt=I-(I-Y)*Dt,lt=U-(U-nt)*Dt,st=G-(G-Z)*Dt}let ut;H<_?ut=0:H>M?ut=1:ut=(_-H)/(_-M),V=S-(S-k)*ut,ft=P-(P-Y)*ut,tt=L-(L-nt)*ut,O=D-(D-Z)*ut;const Lt=Math.round(Math.min(St,V)),Ct=Math.round(Math.max(St,V));let _t=y*H+Lt*4;for(let Dt=Lt;Dt<=Ct;Dt++)ut=(St-Dt)/(St-V),ut<0?ut=0:ut>1&&(ut=1),p[_t++]=Pt-(Pt-ft)*ut|0,p[_t++]=lt-(lt-tt)*ut|0,p[_t++]=st-(st-O)*ut|0,p[_t++]=255}}function aT(g,t,e){const n=t.coords,r=t.colors;let o,l;switch(t.type){case pw.LATTICE:const u=t.verticesPerRow,h=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<h;o++){let p=o*u;for(let y=0;y<f;y++,p++)lw(g,e,n[p],n[p+1],n[p+u],r[p],r[p+1],r[p+u]),lw(g,e,n[p+u+1],n[p+1],n[p+u],r[p+u+1],r[p+1],r[p+u])}break;case pw.TRIANGLES:for(o=0,l=n.length;o<l;o+=3)lw(g,e,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class oT extends qA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),S=f/y,_=p/v,x={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/S,scaleY:1/_},T=y+4,k=v+4,M=n.getCanvas("mesh",T,k),P=M.context,L=P.createImageData(y,v);if(e){const I=L.data;for(let U=0,G=I.length;U<G;U+=4)I[U]=e[0],I[U+1]=e[1],I[U+2]=e[2],I[U+3]=255}for(const I of this._figures)aT(L,I,x);return P.putImageData(L,2,2),{canvas:M.canvas,offsetX:u-2*S,offsetY:h-2*_,scaleX:S,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){$w(t,this._bbox);const o=new Float32Array(2);if(r===jn.SHADING)ct.singularValueDecompose2dScale(Ve(t),o);else if(this.matrix){ct.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;ct.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=h}else ct.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,r===jn.SHADING?null:this._background,e.cachedCanvases);return r!==jn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class lT extends qA{getPattern(){return"hotpink"}}function cT(g){switch(g[0]){case"RadialAxial":return new rT(g);case"Mesh":return new oT(g);case"Dummy":return new lT}throw new Error(`Unknown IR type: ${g[0]}`)}const Q1={COLORED:1,UNCOLORED:2},n0=class n0{constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t,e){var ft,tt;const{bbox:n,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),g0("TilingType: "+l);const y=n[0],v=n[1],S=n[2],_=n[3],x=S-y,T=_-v,k=new Float32Array(2);ct.singularValueDecompose2dScale(this.matrix,k);const[M,P]=k;ct.singularValueDecompose2dScale(this.baseTransform,k);const L=M*k[0],D=P*k[1];let I=x,U=T,G=!1,Y=!1;const nt=Math.ceil(f*L),Z=Math.ceil(p*D),kt=Math.ceil(x*L),Tt=Math.ceil(T*D);nt>=kt?I=f:G=!0,Z>=Tt?U=p:Y=!0;const St=this.getSizeAndScale(I,this.ctx.canvas.width,L),Pt=this.getSizeAndScale(U,this.ctx.canvas.height,D),lt=t.cachedCanvases.getCanvas("pattern",St.size,Pt.size),st=lt.context,V=h.createCanvasGraphics(st,e);if(V.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(V,o,u),st.translate(-St.scale*y,-Pt.scale*v),V.transform(0,St.scale,0,0,Pt.scale,0,0),st.save(),(ft=V.dependencyTracker)==null||ft.save(),this.clipBbox(V,y,v,S,_),V.baseTransform=Ve(V.ctx),V.executeOperatorList(r),V.endDrawing(),(tt=V.dependencyTracker)==null||tt.restore(),st.restore(),G||Y){const O=lt.canvas;G&&(I=f),Y&&(U=p);const H=this.getSizeAndScale(I,this.ctx.canvas.width,L),ut=this.getSizeAndScale(U,this.ctx.canvas.height,D),Lt=H.size,Ct=ut.size,_t=t.cachedCanvases.getCanvas("pattern-workaround",Lt,Ct),Dt=_t.context,Qt=G?Math.floor(x/f):0,ae=Y?Math.floor(T/p):0;for(let je=0;je<=Qt;je++)for(let es=0;es<=ae;es++)Dt.drawImage(O,Lt*je,Ct*es,Lt,Ct,0,0,Lt,Ct);return{canvas:_t.canvas,scaleX:H.scale,scaleY:ut.scale,offsetX:y,offsetY:v}}return{canvas:lt.canvas,scaleX:St.scale,scaleY:Pt.scale,offsetX:y,offsetY:v}}getSizeAndScale(t,e,n){const r=Math.max(n0.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,r,o){const l=r-e,u=o-n;t.ctx.rect(e,n,l,u),ct.axialAlignedBoundingBox([e,n,r,o],Ve(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,o=t.current;switch(e){case Q1.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case Q1.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new Sk(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r,o){let l=n;r!==jn.SHADING&&(l=ct.transform(l,e.baseTransform),this.matrix&&(l=ct.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}};K(n0,"MAX_PATTERN_SIZE",3e3);let Ww=n0;function uT({src:g,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Sn.isLittleEndian?4278190080:255,[h,f]=l?[o,u]:[u,o],p=n>>3,y=n&7,v=g.length;e=new Uint32Array(e.buffer);let S=0;for(let _=0;_<r;_++){for(const T=t+p;t<T;t++){const k=t<v?g[t]:255;e[S++]=k&128?f:h,e[S++]=k&64?f:h,e[S++]=k&32?f:h,e[S++]=k&16?f:h,e[S++]=k&8?f:h,e[S++]=k&4?f:h,e[S++]=k&2?f:h,e[S++]=k&1?f:h}if(y===0)continue;const x=t<v?g[t++]:255;for(let T=0;T<y;T++)e[S++]=x&1<<7-T?f:h}return{srcPos:t,destPos:S}}const Z1=16,J1=100,hT=15,tE=10,Ls=16,cw=new DOMMatrix,ai=new Float32Array(2),Fu=new Float32Array([1/0,1/0,-1/0,-1/0]);function dT(g,t){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){t.save(),this.__originalSave()},g.restore=function(){t.restore(),this.__originalRestore()},g.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},g.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},g.transform=function(e,n,r,o,l,u){t.transform(e,n,r,o,l,u),this.__originalTransform(e,n,r,o,l,u)},g.setTransform=function(e,n,r,o,l,u){t.setTransform(e,n,r,o,l,u),this.__originalSetTransform(e,n,r,o,l,u)},g.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},g.rotate=function(e){t.rotate(e),this.__originalRotate(e)},g.clip=function(e){t.clip(e),this.__originalClip(e)},g.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},g.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},g.bezierCurveTo=function(e,n,r,o,l,u){t.bezierCurveTo(e,n,r,o,l,u),this.__originalBezierCurveTo(e,n,r,o,l,u)},g.rect=function(e,n,r,o){t.rect(e,n,r,o),this.__originalRect(e,n,r,o)},g.closePath=function(){t.closePath(),this.__originalClosePath()},g.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class fT{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Km(g,t,e,n,r,o,l,u,h,f){const[p,y,v,S,_,x]=Ve(g);if(y===0&&v===0){const M=l*p+_,P=Math.round(M),L=u*S+x,D=Math.round(L),I=(l+h)*p+_,U=Math.abs(Math.round(I)-P)||1,G=(u+f)*S+x,Y=Math.abs(Math.round(G)-D)||1;return g.setTransform(Math.sign(p),0,0,Math.sign(S),P,D),g.drawImage(t,e,n,r,o,0,0,U,Y),g.setTransform(p,y,v,S,_,x),[U,Y]}if(p===0&&S===0){const M=u*v+_,P=Math.round(M),L=l*y+x,D=Math.round(L),I=(u+f)*v+_,U=Math.abs(Math.round(I)-P)||1,G=(l+h)*y+x,Y=Math.abs(Math.round(G)-D)||1;return g.setTransform(0,Math.sign(y),Math.sign(v),0,P,D),g.drawImage(t,e,n,r,o,0,0,Y,U),g.setTransform(p,y,v,S,_,x),[Y,U]}g.drawImage(t,e,n,r,o,l,u,h,f);const T=Math.hypot(p,y),k=Math.hypot(v,S);return[T*h,k*f]}class eE{constructor(t,e,n){K(this,"alphaIsShape",!1);K(this,"fontSize",0);K(this,"fontSizeScale",1);K(this,"textMatrix",null);K(this,"textMatrixScale",1);K(this,"fontMatrix",fw);K(this,"leading",0);K(this,"x",0);K(this,"y",0);K(this,"lineX",0);K(this,"lineY",0);K(this,"charSpacing",0);K(this,"wordSpacing",0);K(this,"textHScale",1);K(this,"textRenderingMode",mn.FILL);K(this,"textRise",0);K(this,"fillColor","#000000");K(this,"strokeColor","#000000");K(this,"patternFill",!1);K(this,"patternStroke",!1);K(this,"fillAlpha",1);K(this,"strokeAlpha",1);K(this,"lineWidth",1);K(this,"activeSMask",null);K(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Fu.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=jn.FILL,e=null){const n=this.minMax.slice();if(t===jn.STROKE){e||Te("Stroke bounding box must include transform."),ct.singularValueDecompose2dScale(e,ai);const r=ai[0]*this.lineWidth/2,o=ai[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=ct.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Fu,0)}getClippedPathBoundingBox(t=jn.FILL,e=null){return ct.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function nE(g,t){if(t instanceof ImageData){g.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%Ls,o=(e-r)/Ls,l=r===0?o:o+1,u=g.createImageData(n,Ls);let h=0,f;const p=t.data,y=u.data;let v,S,_,x;if(t.kind===ty.GRAYSCALE_1BPP){const T=p.byteLength,k=new Uint32Array(y.buffer,0,y.byteLength>>2),M=k.length,P=n+7>>3,L=4294967295,D=Sn.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(_=v<o?Ls:r,f=0,S=0;S<_;S++){const I=T-h;let U=0;const G=I>P?n:I*8-7,Y=G&-8;let nt=0,Z=0;for(;U<Y;U+=8)Z=p[h++],k[f++]=Z&128?L:D,k[f++]=Z&64?L:D,k[f++]=Z&32?L:D,k[f++]=Z&16?L:D,k[f++]=Z&8?L:D,k[f++]=Z&4?L:D,k[f++]=Z&2?L:D,k[f++]=Z&1?L:D;for(;U<G;U++)nt===0&&(Z=p[h++],nt=128),k[f++]=Z&nt?L:D,nt>>=1}for(;f<M;)k[f++]=0;g.putImageData(u,0,v*Ls)}}else if(t.kind===ty.RGBA_32BPP){for(S=0,x=n*Ls*4,v=0;v<o;v++)y.set(p.subarray(h,h+x)),h+=x,g.putImageData(u,0,S),S+=Ls;v<l&&(x=n*r*4,y.set(p.subarray(h,h+x)),g.putImageData(u,0,S))}else if(t.kind===ty.RGB_24BPP)for(_=Ls,x=n*_,v=0;v<l;v++){for(v>=o&&(_=r,x=n*_),f=0,S=x;S--;)y[f++]=p[h++],y[f++]=p[h++],y[f++]=p[h++],y[f++]=255;g.putImageData(u,0,v*Ls)}else throw new Error(`bad image kind: ${t.kind}`)}function sE(g,t){if(t.bitmap){g.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%Ls,o=(e-r)/Ls,l=r===0?o:o+1,u=g.createImageData(n,Ls);let h=0;const f=t.data,p=u.data;for(let y=0;y<l;y++){const v=y<o?Ls:r;({srcPos:h}=uT({src:f,srcPos:h,dest:p,width:n,height:v,nonBlackColor:0})),g.putImageData(u,0,y*Ls)}}function af(g,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)g[n]!==void 0&&(t[n]=g[n]);g.setLineDash!==void 0&&(t.setLineDash(g.getLineDash()),t.lineDashOffset=g.lineDashOffset)}function Qm(g){g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0);const{filter:t}=g;t!=="none"&&t!==""&&(g.filter="none")}function iE(g,t){if(t)return!0;ct.singularValueDecompose2dScale(g,ai);const e=Math.fround(Ur.pixelRatio*ol.PDF_TO_CSS_UNITS);return ai[0]<=e&&ai[1]<=e}const pT=["butt","round","square"],gT=["miter","round","bevel"],mT={},rE={};var ar,Vw,Gw,Xw;const nS=class nS{constructor(t,e,n,r,o,{optionalContentConfig:l,markedContentStack:u=null},h,f,p){b(this,ar);this.ctx=t,this.current=new eE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new fT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){var r;return typeof e=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ve(this.compositeCtx))}this.ctx.save(),Qm(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ve(this.ctx)}executeOperatorList(t,e,n,r,o){var k;const l=t.argsArray,u=t.fnArray;let h=e||0;const f=l.length;if(f===h)return h;const p=f-h>tE&&typeof n=="function",y=p?Date.now()+hT:0;let v=0;const S=this.commonObjs,_=this.objs;let x,T;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,n),h;if(!o||o(h))if(x=u[h],T=l[h]??null,x!==Df.dependency)T===null?this[x](h):this[x](h,...T);else for(const M of T){(k=this.dependencyTracker)==null||k.recordNamedData(M,h);const P=M.startsWith("g_")?S:_;if(!P.has(M))return P.get(M,n),h}if(h++,h===f)return h;if(p&&++v>tE){if(Date.now()>y)return n(),h;v=0}}}endDrawing(){E(this,ar,Vw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,ar,Gw).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,h=r,f="prescale1",p,y;for(;o>2&&u>1||l>2&&h>1;){let v=u,S=h;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),l>2&&h>1&&(S=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/S),p=this.cachedCanvases.getCanvas(f,v,S),y=p.context,y.clearRect(0,0,v,S),y.drawImage(t,0,0,u,h,0,0,v,S),t=p.canvas,u=v,h=S,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){var nt,Z;const n=this.ctx,{width:r,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,h=Ve(n);let f,p,y,v;if((e.bitmap||e.data)&&e.count>1){const kt=e.bitmap||e.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(kt),f||(f=new Map,this._cachedBitmapsMap.set(kt,f));const Tt=f.get(p);if(Tt&&!u){const St=Math.round(Math.min(h[0],h[2])+h[4]),Pt=Math.round(Math.min(h[1],h[3])+h[5]);return(nt=this.dependencyTracker)==null||nt.recordDependencies(t,vi.transformAndFill),{canvas:Tt,offsetX:St,offsetY:Pt}}y=Tt}y||(v=this.cachedCanvases.getCanvas("maskCanvas",r,o),sE(v.context,e));let S=ct.transform(h,[1/r,0,0,-1/o,0,0]);S=ct.transform(S,[1,0,0,1,0,-o]);const _=Fu.slice();ct.axialAlignedBoundingBox([0,0,r,o],S,_);const[x,T,k,M]=_,P=Math.round(k-x)||1,L=Math.round(M-T)||1,D=this.cachedCanvases.getCanvas("fillCanvas",P,L),I=D.context,U=x,G=T;I.translate(-U,-G),I.transform(...S),y||(y=this._scaleImage(v.canvas,fr(I)),y=y.img,f&&u&&f.set(p,y)),I.imageSmoothingEnabled=iE(Ve(I),e.interpolate),Km(I,y,0,0,y.width,y.height,0,0,r,o),I.globalCompositeOperation="source-in";const Y=ct.transform(fr(I),[1,0,0,1,-U,-G]);return I.fillStyle=u?l.getPattern(n,this,Y,jn.FILL,t):l,I.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,D.canvas)),(Z=this.dependencyTracker)==null||Z.recordDependencies(t,vi.transformAndFill),{canvas:D.canvas,offsetX:Math.round(U),offsetY:Math.round(G)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=pT[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=gT[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var o;(o=this.dependencyTracker)==null||o.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,r,o,l,u;for(const[h,f]of e)switch(h){case"LW":this.setLineWidth(t,f);break;case"LC":this.setLineCap(t,f);break;case"LJ":this.setLineJoin(t,f);break;case"ML":this.setMiterLimit(t,f);break;case"D":this.setDash(t,f[0],f[1]);break;case"RI":this.setRenderingIntent(t,f);break;case"FL":this.setFlatness(t,f);break;case"Font":this.setFont(t,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=f;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(o=this.dependencyTracker)==null||o.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=f;break;case"SMask":(l=this.dependencyTracker)==null||l.recordSimpleData("SMask",t),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),af(this.suspendedCtx,l),dT(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),af(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const o=r[0],l=r[1],u=r[2]-o,h=r[3]-l;u===0||h===0||(this.genericComposeSMask(e.context,n,u,h,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,o,l,u,h,f,p,y){let v=t.canvas,S=h-p,_=f-y;if(l)if(S<0||_<0||S+n>v.width||_+r>v.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,r),k=T.context;k.drawImage(v,-S,-_),k.globalCompositeOperation="destination-atop",k.fillStyle=l,k.fillRect(0,0,n,r),k.globalCompositeOperation="source-over",v=T.canvas,S=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(S,_,n,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(S,_,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const x=new Path2D;x.rect(h,f,n,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(v,S,_,n,r,h,f,n,r),e.restore()}save(t){var n;this.inSMaskMode&&af(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&af(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,o,l,u){var h;(h=this.dependencyTracker)==null||h.recordIncrementalData("transform",t),this.ctx.transform(e,n,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,r){let[o]=n;if(!r){o||(o=n[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Df.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=SE(o)),ct.axialAlignedBoundingBox(r,Ve(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var l;const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&(o!=null&&o.getPattern)){const u=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,fr(r),jn.STROKE,t),u){const h=new Path2D;h.addPath(e,r.getTransform().invertSelf().multiplySelf(u)),e=h}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);(l=this.dependencyTracker)==null||l.recordDependencies(t,vi.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(jn.STROKE,Ve(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var f,p,y;const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const v=o.isModifyingCurrentTransform()?r.getTransform():null;if((f=this.dependencyTracker)==null||f.save(t),r.save(),r.fillStyle=o.getPattern(r,this,fr(r),jn.FILL,t),v){const S=new Path2D;S.addPath(e,r.getTransform().invertSelf().multiplySelf(v)),e=S}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),(p=this.dependencyTracker)==null||p.recordDependencies(t,vi.fill),u&&(r.restore(),(y=this.dependencyTracker)==null||y.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,vi.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=mT}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=rE}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:f,path:p}of e)p&&r.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,h).scale(f,-f));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var y,v;(y=this.dependencyTracker)==null||y.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||fw,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&zt("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=((v=r.systemFontInfo)==null?void 0:v.css)||`"${l}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let p=n;n<Z1?p=Z1:n>J1&&(p=J1),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,r,o,l){var k,M,P,L;const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,v=p&mn.FILL_STROKE_MASK,S=!!(p&mn.ADD_TO_PATH_FLAG),_=h.patternFill&&!f.missingFile,x=h.patternStroke&&!f.missingFile;let T;if((f.disableFontFace||S||_||x)&&!f.missingFile&&(T=f.getPathGenerator(this.commonObjs,e)),T&&(f.disableFontFace||_||x)){u.save(),u.translate(n,r),u.scale(y,-y),(k=this.dependencyTracker)==null||k.recordCharacterBBox(t,u,f);let D;if(v===mn.FILL||v===mn.FILL_STROKE)if(o){D=u.getTransform(),u.setTransform(...o);const I=E(this,ar,Xw).call(this,T,D,o);u.fill(I)}else u.fill(T);if(v===mn.STROKE||v===mn.FILL_STROKE)if(l){D||(D=u.getTransform()),u.setTransform(...l);const{a:I,b:U,c:G,d:Y}=D,nt=ct.inverseTransform(l),Z=ct.transform([I,U,G,Y,0,0],nt);ct.singularValueDecompose2dScale(Z,ai),u.lineWidth*=Math.max(ai[0],ai[1])/y,u.stroke(E(this,ar,Xw).call(this,T,D,l))}else u.lineWidth/=y,u.stroke(T);u.restore()}else(v===mn.FILL||v===mn.FILL_STROKE)&&(u.fillText(e,n,r),(M=this.dependencyTracker)==null||M.recordCharacterBBox(t,u,f,y,n,r,()=>u.measureText(e))),(v===mn.STROKE||v===mn.FILL_STROKE)&&(this.dependencyTracker&&((P=this.dependencyTracker)==null||P.recordCharacterBBox(t,u,f,y,n,r,()=>u.measureText(e)).recordDependencies(t,vi.stroke)),u.strokeText(e,n,r));S&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ve(u),x:n,y:r,fontSize:y,path:T}),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,u,f,y,n,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return jt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var Z,kt,Tt,St;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,vi.showText).resetBBox(t),this.current.textRenderingMode&mn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(t,e),(Z=this.dependencyTracker)==null||Z.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){(kt=this.dependencyTracker)==null||kt.recordOperation(t);return}const l=this.ctx,u=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,y=n.textHScale*p,v=e.length,S=r.vertical,_=S?1:-1,x=r.defaultVMetrics,T=o*n.fontMatrix[0],k=n.textRenderingMode===mn.FILL&&!r.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(y,-1):l.scale(y,1);let M,P;const L=n.textRenderingMode&mn.FILL_STROKE_MASK,D=L===mn.FILL||L===mn.FILL_STROKE,I=L===mn.STROKE||L===mn.FILL_STROKE;if(D&&n.patternFill){l.save();const Pt=n.fillColor.getPattern(l,this,fr(l),jn.FILL,t);M=Ve(l),l.restore(),l.fillStyle=Pt}if(I&&n.patternStroke){l.save();const Pt=n.strokeColor.getPattern(l,this,fr(l),jn.STROKE,t);P=Ve(l),l.restore(),l.strokeStyle=Pt}let U=n.lineWidth;const G=n.textMatrixScale;if(G===0||U===0?I&&(U=this.getSinglePixelWidth()):U/=G,u!==1&&(l.scale(u,u),U/=u),l.lineWidth=U,r.isInvalidPDFjsFont){const Pt=[];let lt=0;for(const V of e)Pt.push(V.unicode),lt+=V.width;const st=Pt.join("");if(l.fillText(st,0,0),this.dependencyTracker!==null){const V=l.measureText(st);this.dependencyTracker.recordBBox(t,this.ctx,-V.actualBoundingBoxLeft,V.actualBoundingBoxRight,-V.actualBoundingBoxAscent,V.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=lt*T*y,l.restore(),this.compose();return}let Y=0,nt;for(nt=0;nt<v;++nt){const Pt=e[nt];if(typeof Pt=="number"){Y+=_*Pt*o/1e3;continue}let lt=!1;const st=(Pt.isSpace?f:0)+h,V=Pt.fontChar,ft=Pt.accent;let tt,O,H=Pt.width;if(S){const Ct=Pt.vmetric||x,_t=-(Pt.vmetric?Ct[1]:H*.5)*T,Dt=Ct[2]*T;H=Ct?-Ct[0]:H,tt=_t/u,O=(Y+Dt)/u}else tt=Y/u,O=0;let ut;if(r.remeasure&&H>0){ut=l.measureText(V);const Ct=ut.width*1e3/o*u;if(H<Ct&&this.isFontSubpixelAAEnabled){const _t=H/Ct;lt=!0,l.save(),l.scale(_t,1),tt/=_t}else H!==Ct&&(tt+=(H-Ct)/2e3*o/u)}if(this.contentVisible&&(Pt.isInFont||r.missingFile)){if(k&&!ft)l.fillText(V,tt,O),(Tt=this.dependencyTracker)==null||Tt.recordCharacterBBox(t,l,ut?{bbox:null}:r,o/u,tt,O,()=>ut??l.measureText(V));else if(this.paintChar(t,V,tt,O,M,P),ft){const Ct=tt+o*ft.offset.x/u,_t=O-o*ft.offset.y/u;this.paintChar(t,ft.fontChar,Ct,_t,M,P)}}const Lt=S?H*T-st*p:H*T+st*p;Y+=Lt,lt&&l.restore()}S?n.y-=Y:n.x+=Y*y,l.restore(),this.compose(),(St=this.dependencyTracker)==null||St.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,h=o.vertical?1:-1,f=r.charSpacing,p=r.wordSpacing,y=r.textHScale*u,v=r.fontMatrix||fw,S=e.length,_=r.textRenderingMode===mn.INVISIBLE;let x,T,k,M;if(_||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(y,u);const P=this.dependencyTracker;for(this.dependencyTracker=P?new zy(P,t):null,x=0;x<S;++x){if(T=e[x],typeof T=="number"){M=h*T*l/1e3,this.ctx.translate(M,0),r.x+=M*y;continue}const L=(T.isSpace?p:0)+f,D=o.charProcOperatorList[T.operatorListId];D?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...v),this.executeOperatorList(D),this.restore()):zt(`Type3 character "${T.operatorListId}" is not available.`);const I=[T.width,0];ct.applyTransform(I,v),k=I[0]*l+L,n.translate(k,0),r.x+=k*y}n.restore(),P&&(this.dependencyTracker=P)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,r,o,l,u){var f;const h=new Path2D;h.rect(r,o,l-r,u-o),this.ctx.clip(h),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,r,l,o,u).recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||Ve(this.ctx),o={createCanvasGraphics:(l,u)=>new nS(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new zy(this.dependencyTracker,u,!0):null)};n=new Ww(e,this.ctx,o,r)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=cT(this.getObject(t,e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(t,e){var l;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const r=this._getPattern(t,e);n.fillStyle=r.getPattern(n,this,fr(n),jn.SHADING,t);const o=fr(n);if(o){const{width:u,height:h}=n.canvas,f=Fu.slice();ct.axialAlignedBoundingBox([0,0,u,h],o,f);const[p,y,v,S]=f;this.ctx.fillRect(p,y,v-p,S-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(l=this.dependencyTracker)==null||l.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,vi.transform).recordDependencies(t,vi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Te("Should not call beginInlineImage")}beginImageData(){Te("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var r;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ve(this.ctx),n)){ct.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[o,l,u,h]=n,f=new Path2D;f.rect(o,l,u-o,h-l),this.ctx.clip(f),(r=this.dependencyTracker)==null||r.recordClipBox(t,this.ctx,o,u,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var P;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||g0("TODO: Support non-isolated groups."),e.knockout&&zt("Knockout groups not supported.");const r=Ve(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Fu.slice();ct.axialAlignedBoundingBox(e.bbox,Ve(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=ct.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(y,f,p),S=v.context;S.translate(-u,-h),S.transform(...r);let _=new Path2D;const[x,T,k,M]=e.bbox;if(_.rect(x,T,k-x,M-T),e.matrix){const L=new Path2D;L.addPath(_,new DOMMatrix(e.matrix)),_=L}S.clip(_),e.smask&&this.smaskStack.push({canvas:v.canvas,context:S,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),af(n,S),this.ctx=S,(P=this.dependencyTracker)==null||P.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var o;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(o=this.dependencyTracker)==null||o.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=Ve(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const u=Fu.slice();ct.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],l,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(t,e,n,r,o,l){if(E(this,ar,Vw).call(this),Qm(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h,ct.singularValueDecompose2dScale(Ve(this.ctx),ai);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,y);const{canvas:v,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(ai[0],0,0,-ai[1],0,h*ai[1]),Qm(this.ctx)}else{Qm(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,h),this.ctx.clip(f)}}this.current=new eE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),E(this,ar,Gw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var u;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const r=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,r=0,o=0,l,u){var y,v,S;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=Ve(h);h.transform(n,r,o,l,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),(y=this.dependencyTracker)==null||y.resetBBox(t);for(let _=0,x=u.length;_<x;_+=2){const T=ct.transform(f,[n,r,o,l,u[_],u[_+1]]);h.drawImage(p.canvas,T[4],T[5]),(v=this.dependencyTracker)==null||v.recordBBox(t,this.ctx,T[4],T[4]+p.canvas.width,T[5],T[5]+p.canvas.height)}h.restore(),this.compose(),(S=this.dependencyTracker)==null||S.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var l,u,h;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;(l=this.dependencyTracker)==null||l.resetBBox(t).recordDependencies(t,vi.transformAndFill);for(const f of e){const{data:p,width:y,height:v,transform:S}=f,_=this.cachedCanvases.getCanvas("maskCanvas",y,v),x=_.context;x.save();const T=this.getObject(t,p,f);sE(x,T),x.globalCompositeOperation="source-in",x.fillStyle=o?r.getPattern(x,this,fr(n),jn.FILL,t):r,x.fillRect(0,0,y,v),x.restore(),n.save(),n.transform(...S),n.scale(1,-1),Km(n,_.canvas,0,0,y,v,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,n,0,y,0,v),n.restore()}this.compose(),(h=this.dependencyTracker)==null||h.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){zt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,r,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){zt("Dependent image isn't ready yet");return}const u=l.width,h=l.height,f=[];for(let p=0,y=o.length;p<y;p+=2)f.push({transform:[n,0,0,r,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){var f;if(!this.contentVisible)return;const n=e.width,r=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const y=this.cachedCanvases.getCanvas("inlineImage",n,r).context;nE(y,e),u=this.applyTransferMapsToCanvas(y)}const h=this._scaleImage(u,fr(o));o.imageSmoothingEnabled=iE(Ve(o),e.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(t).recordBBox(t,o,0,n,-r,0).recordDependencies(t,vi.imageXObject).recordOperation(t),Km(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,n,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var l,u,h;if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const f=e.width,p=e.height,v=this.cachedCanvases.getCanvas("inlineImage",f,p).context;nE(v,e),o=this.applyTransferMapsToCanvas(v)}(l=this.dependencyTracker)==null||l.resetBBox(t);for(const f of n)r.save(),r.transform(...f.transform),r.scale(1,-1),Km(r,o,f.x,f.y,f.w,f.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,r,0,1,-1,0),r.restore();(h=this.dependencyTracker)==null||h.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,vi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var l,u;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===rE?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,(l=this.dependencyTracker)==null||l.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(u=this.dependencyTracker)==null||u.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ve(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:o}=this.ctx.getTransform();let l,u;if(n===0&&r===0){const h=Math.abs(e),f=Math.abs(o);if(h===f)if(t===0)l=u=1/h;else{const p=h*t;l=u=p<1?1/p:1}else if(t===0)l=1/h,u=1/f;else{const p=h*t,y=f*t;l=p<1?1/p:1,u=y<1?1/y:1}}else{const h=Math.abs(e*o-n*r),f=Math.hypot(e,n),p=Math.hypot(r,o);if(t===0)l=p/h,u=f/h;else{const y=t*h;l=p>y?p/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(r||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,l),cw.a=1/o,cw.d=1/l;const h=new Path2D;if(h.addPath(t,cw),u.length>0){const f=Math.max(o,l);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=r||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ar=new WeakSet,Vw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Gw=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Xw=function(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r};let ju=nS;for(const g in Df)ju.prototype[g]!==void 0&&(ju.prototype[Df[g]]=ju.prototype[g]);var xp,Cp;class Br{static get workerPort(){return a(this,xp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");w(this,xp,t)}static get workerSrc(){return a(this,Cp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");w(this,Cp,t)}}xp=new WeakMap,Cp=new WeakMap,b(Br,xp,null),b(Br,Cp,"");var xh,_p;class yT{constructor({parsedData:t,rawData:e}){b(this,xh);b(this,_p);w(this,xh,t),w(this,_p,e)}getRaw(){return a(this,_p)}get(t){return a(this,xh).get(t)??null}[Symbol.iterator](){return a(this,xh).entries()}}xh=new WeakMap,_p=new WeakMap;const Lu=Symbol("INTERNAL");var kp,Tp,Pp,Ch;class vT{constructor(t,{name:e,intent:n,usage:r,rbGroups:o}){b(this,kp,!1);b(this,Tp,!1);b(this,Pp,!1);b(this,Ch,!0);w(this,kp,!!(t&ri.DISPLAY)),w(this,Tp,!!(t&ri.PRINT)),this.name=e,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(a(this,Pp))return a(this,Ch);if(!a(this,Ch))return!1;const{print:t,view:e}=this.usage;return a(this,kp)?(e==null?void 0:e.viewState)!=="OFF":a(this,Tp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Lu&&Te("Internal method `_setVisible` called."),w(this,Pp,n),w(this,Ch,e)}}kp=new WeakMap,Tp=new WeakMap,Pp=new WeakMap,Ch=new WeakMap;var Fo,Ee,_h,kh,Rp,qw;class wT{constructor(t,e=ri.DISPLAY){b(this,Rp);b(this,Fo,null);b(this,Ee,new Map);b(this,_h,null);b(this,kh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,w(this,kh,t.order);for(const n of t.groups)a(this,Ee).set(n.id,new vT(e,n));if(t.baseState==="OFF")for(const n of a(this,Ee).values())n._setVisible(Lu,!1);for(const n of t.on)a(this,Ee).get(n)._setVisible(Lu,!0);for(const n of t.off)a(this,Ee).get(n)._setVisible(Lu,!1);w(this,_h,this.getHash())}}isVisible(t){if(a(this,Ee).size===0)return!0;if(!t)return g0("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Ee).has(t.id)?a(this,Ee).get(t.id).visible:(zt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,Rp,qw).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Ee).has(e))return zt(`Optional content group not found: ${e}`),!0;if(a(this,Ee).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Ee).has(e))return zt(`Optional content group not found: ${e}`),!0;if(!a(this,Ee).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Ee).has(e))return zt(`Optional content group not found: ${e}`),!0;if(!a(this,Ee).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Ee).has(e))return zt(`Optional content group not found: ${e}`),!0;if(a(this,Ee).get(e).visible)return!1}return!0}return zt(`Unknown optional content policy ${t.policy}.`),!0}return zt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const r=a(this,Ee).get(t);if(!r){zt(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const l of r.rbGroups)for(const u of l)u!==t&&((o=a(this,Ee).get(u))==null||o._setVisible(Lu,!1,!0));r._setVisible(Lu,!!e,!0),w(this,Fo,null)}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=a(this,Ee).get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}w(this,Fo,null)}get hasInitialVisibility(){return a(this,_h)===null||this.getHash()===a(this,_h)}getOrder(){return a(this,Ee).size?a(this,kh)?a(this,kh).slice():[...a(this,Ee).keys()]:null}getGroup(t){return a(this,Ee).get(t)||null}getHash(){if(a(this,Fo)!==null)return a(this,Fo);const t=new JE;for(const[e,n]of a(this,Ee))t.update(`${e}:${n.visible}`);return w(this,Fo,t.hexdigest())}[Symbol.iterator](){return a(this,Ee).entries()}}Fo=new WeakMap,Ee=new WeakMap,_h=new WeakMap,kh=new WeakMap,Rp=new WeakSet,qw=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const o=t[r];let l;if(Array.isArray(o))l=E(this,Rp,qw).call(this,o);else if(a(this,Ee).has(o))l=a(this,Ee).get(o).visible;else return zt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class AT{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ee(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});ee(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,r,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ee(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new ST(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new bT(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class ST{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=VA(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class bT{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ET(g){let t=!0,e=n("filename\\*","i").exec(g);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=f(p),o(p)}if(e=l(g),e){const p=f(e);return o(p)}if(e=n("filename","i").exec(g),e){e=e[1];let p=u(e);return p=f(p),o(p)}function n(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(p,{fatal:!0}),S=kg(y);y=v.decode(S),t=!1}catch{}}return y}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function l(p){const y=[];let v;const S=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=S.exec(p))!==null;){let[,x,T,k]=v;if(x=parseInt(x,10),x in y){if(x===0)break;continue}y[x]=[T,k]}const _=[];for(let x=0;x<y.length&&x in y;++x){let[T,k]=y[x];k=u(k),T&&(k=unescape(k),x===0&&(k=h(k))),_.push(k)}return _.join("")}function u(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let v=0;v<y.length;++v){const S=y[v].indexOf('"');S!==-1&&(y[v]=y[v].slice(0,S),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function h(p){const y=p.indexOf("'");if(y===-1)return p;const v=p.slice(0,y),_=p.slice(y+1).replace(/^[^']*'/,"");return r(v,_)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,S,_){if(S==="q"||S==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,T){return String.fromCharCode(parseInt(T,16))}),r(v,_);try{_=atob(_)}catch{}return r(v,_)})}return""}function hx(g,t){const e=new Headers;if(!g||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function y0(g){var t;return((t=URL.parse(g))==null?void 0:t.origin)??null}function dx({responseHeaders:g,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(g.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||n||!t||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function fx(g){const t=g.get("Content-Disposition");if(t){let e=ET(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(VA(e))return e}return null}function Lg(g,t){return new Ny(`Unexpected server response (${g}) while retrieving PDF "${t}".`,g,g===404||g===0&&t.startsWith("file:"))}function px(g){return g===200||g===206}function gx(g,t,e){return{method:"GET",headers:g,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function mx(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(zt(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class xT{constructor(t){K(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=hx(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ee(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new CT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new _T(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class CT{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),r=e.url;fetch(r,gx(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=y0(o.url),!px(o.status))throw Lg(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:h}=dx({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=fx(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new al("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:mx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class _T{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const l=r.url;fetch(l,gx(o,this._withCredentials,this._abortController)).then(u=>{const h=y0(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!px(u.status))throw Lg(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:mx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const uw=200,hw=206;function kT(g){const t=g.response;return typeof t!="string"?t:kg(t).buffer}class TT{constructor({url:t,httpHeaders:e,withCredentials:n}){K(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=hx(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=hw):r.expectedStatus=uw,e.responseType="arraybuffer",ee(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var r;const n=this.pendingRequests[t];n&&((r=n.onProgress)==null||r.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const o=r.status||uw;if(!(o===uw&&n.expectedStatus===hw)&&o!==n.expectedStatus){n.onError(r.status);return}const u=kT(r);if(o===hw){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(zt('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class PT{constructor(t){this._source=t,this._manager=new TT(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ee(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new RT(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new MT(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class RT{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=y0(e.responseURL);const n=e.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=dx({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=fx(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Lg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class MT{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=y0((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Lg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const LT=/^[a-z][a-z0-9\-+.]+:/i;function DT(g){if(LT.test(g))return new URL(g);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(g))}class NT{constructor(t){this.source=t,this.url=DT(t.url),ee(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ee(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new IT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new FT(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class IT{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Lg(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new al("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class FT{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const of=Symbol("INITIAL_DATA");var Ws,Mp,Yw;class yx{constructor(){b(this,Mp);b(this,Ws,Object.create(null))}get(t,e=null){if(e){const r=E(this,Mp,Yw).call(this,t);return r.promise.then(()=>e(r.data)),null}const n=a(this,Ws)[t];if(!n||n.data===of)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=a(this,Ws)[t];return!!e&&e.data!==of}delete(t){const e=a(this,Ws)[t];return!e||e.data===of?!1:(delete a(this,Ws)[t],!0)}resolve(t,e=null){const n=E(this,Mp,Yw).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in a(this,Ws)){const{data:n}=a(this,Ws)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}w(this,Ws,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,Ws)){const{data:e}=a(this,Ws)[t];e!==of&&(yield[t,e])}}}Ws=new WeakMap,Mp=new WeakSet,Yw=function(t){var e;return(e=a(this,Ws))[t]||(e[t]={...Promise.withResolvers(),data:of})};const OT=1e5,aE=30;var dE,Oo,Vs,Lp,Dp,uc,Aa,Np,Ip,hc,Fp,Th,Bo,Ph,Op,Rh,dc,Bp,Up,Mh,fc,zp,Lh,Dh,Ha,vx,wx,Kw,li,hy,Qw,Ax,Sx;const In=class In{constructor({textContentSource:t,container:e,viewport:n}){b(this,Ha);b(this,Oo,Promise.withResolvers());b(this,Vs,null);b(this,Lp,!1);b(this,Dp,!!((dE=globalThis.FontInspector)!=null&&dE.enabled));b(this,uc,null);b(this,Aa,null);b(this,Np,0);b(this,Ip,0);b(this,hc,null);b(this,Fp,null);b(this,Th,0);b(this,Bo,0);b(this,Ph,Object.create(null));b(this,Op,[]);b(this,Rh,null);b(this,dc,[]);b(this,Bp,new WeakMap);b(this,Up,null);var h;if(t instanceof ReadableStream)w(this,Rh,t);else if(typeof t=="object")w(this,Rh,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,Vs,w(this,Fp,e)),w(this,Bo,n.scale*Ur.pixelRatio),w(this,Th,n.rotation),w(this,Aa,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=n.rawDims;w(this,Up,[1,0,0,-1,-l,u+o]),w(this,Ip,r),w(this,Np,o),E(h=In,li,Ax).call(h),e.style.setProperty("--min-font-size",a(In,Lh)),qc(e,n),a(this,Oo).promise.finally(()=>{a(In,Dh).delete(this),w(this,Aa,null),w(this,Ph,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Sn.platform;return jt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,hc).read().then(({value:e,done:n})=>{if(n){a(this,Oo).resolve();return}a(this,uc)??w(this,uc,e.lang),Object.assign(a(this,Ph),e.styles),E(this,Ha,vx).call(this,e.items),t()},a(this,Oo).reject)};return w(this,hc,a(this,Rh).getReader()),a(In,Dh).add(this),t(),a(this,Oo).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*Ur.pixelRatio,r=t.rotation;if(r!==a(this,Th)&&(e==null||e(),w(this,Th,r),qc(a(this,Fp),{rotation:r})),n!==a(this,Bo)){e==null||e(),w(this,Bo,n);const l={div:null,properties:null,ctx:E(o=In,li,hy).call(o,a(this,uc))};for(const u of a(this,dc))l.properties=a(this,Bp).get(u),l.div=u,E(this,Ha,Kw).call(this,l)}}cancel(){var e;const t=new al("TextLayer task cancelled.");(e=a(this,hc))==null||e.cancel(t).catch(()=>{}),w(this,hc,null),a(this,Oo).reject(t)}get textDivs(){return a(this,dc)}get textContentItemsStr(){return a(this,Op)}static cleanup(){if(!(a(this,Dh).size>0)){a(this,Mh).clear();for(const{canvas:t}of a(this,fc).values())t.remove();a(this,fc).clear()}}};Oo=new WeakMap,Vs=new WeakMap,Lp=new WeakMap,Dp=new WeakMap,uc=new WeakMap,Aa=new WeakMap,Np=new WeakMap,Ip=new WeakMap,hc=new WeakMap,Fp=new WeakMap,Th=new WeakMap,Bo=new WeakMap,Ph=new WeakMap,Op=new WeakMap,Rh=new WeakMap,dc=new WeakMap,Bp=new WeakMap,Up=new WeakMap,Mh=new WeakMap,fc=new WeakMap,zp=new WeakMap,Lh=new WeakMap,Dh=new WeakMap,Ha=new WeakSet,vx=function(t){var r,o;if(a(this,Lp))return;(o=a(this,Aa)).ctx??(o.ctx=E(r=In,li,hy).call(r,a(this,uc)));const e=a(this,dc),n=a(this,Op);for(const l of t){if(e.length>OT){zt("Ignoring additional textDivs for performance reasons."),w(this,Lp,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const u=a(this,Vs);w(this,Vs,document.createElement("span")),a(this,Vs).classList.add("markedContent"),l.id&&a(this,Vs).setAttribute("id",`${l.id}`),u.append(a(this,Vs))}else l.type==="endMarkedContent"&&w(this,Vs,a(this,Vs).parentNode);continue}n.push(l.str),E(this,Ha,wx).call(this,l)}},wx=function(t){var _;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,dc).push(e);const r=ct.transform(a(this,Up),t.transform);let o=Math.atan2(r[1],r[0]);const l=a(this,Ph)[t.fontName];l.vertical&&(o+=Math.PI/2);let u=a(this,Dp)&&l.fontSubstitution||l.fontFamily;u=In.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*E(_=In,li,Sx).call(_,u,l,a(this,uc));let p,y;o===0?(p=r[4],y=r[5]-f):(p=r[4]+f*Math.sin(o),y=r[5]-f*Math.cos(o));const v=e.style;v.left=`${(100*p/a(this,Ip)).toFixed(2)}%`,v.top=`${(100*y/a(this,Np)).toFixed(2)}%`,v.setProperty("--font-height",`${h.toFixed(2)}px`),v.fontFamily=u,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Dp)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);x!==T&&Math.max(x,T)/Math.min(x,T)>1.5&&(S=!0)}if(S&&(n.canvasWidth=l.vertical?t.height:t.width),a(this,Bp).set(e,n),a(this,Aa).div=e,a(this,Aa).properties=n,E(this,Ha,Kw).call(this,a(this,Aa)),n.hasText&&a(this,Vs).append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),a(this,Vs).append(x)}},Kw=function(t){var l;const{div:e,properties:n,ctx:r}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:f}=n;E(l=In,li,Qw).call(l,r,f*a(this,Bo),u);const{width:p}=r.measureText(e.textContent);p>0&&o.setProperty("--scale-x",h*a(this,Bo)/p)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},li=new WeakSet,hy=function(t=null){let e=a(this,fc).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,fc).set(t,e),a(this,zp).set(e,{size:0,family:""})}return e},Qw=function(t,e,n){const r=a(this,zp).get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)},Ax=function(){if(a(this,Lh)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),w(this,Lh,t.getBoundingClientRect().height),t.remove()},Sx=function(t,e,n){const r=a(this,Mh).get(t);if(r)return r;const o=E(this,li,hy).call(this,n);o.canvas.width=o.canvas.height=aE,E(this,li,Qw).call(this,o,aE,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(Sn.platform.isFirefox&&zt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),a(this,Mh).set(t,f),f},b(In,li),b(In,Mh,new Map),b(In,fc,new Map),b(In,zp,new WeakMap),b(In,Lh,null),b(In,Dh,new Set);let If=In;const BT=100;function bx(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const t=new Zw,{docId:e}=t,n=g.url?Vk(g.url):null,r=g.data?Gk(g.data):null,o=g.httpHeaders||null,l=g.withCredentials===!0,u=g.password??null,h=g.range instanceof Ex?g.range:null,f=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:2**16;let p=g.worker instanceof Ff?g.worker:null;const y=g.verbosity,v=typeof g.docBaseUrl=="string"&&!m0(g.docBaseUrl)?g.docBaseUrl:null,S=Gm(g.cMapUrl),_=g.cMapPacked!==!1,x=g.CMapReaderFactory||(hs?tT:G1),T=Gm(g.iccUrl),k=Gm(g.standardFontDataUrl),M=g.StandardFontDataFactory||(hs?eT:X1),P=Gm(g.wasmUrl),L=g.WasmFactory||(hs?nT:q1),D=g.stopAtErrors!==!0,I=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,U=g.isEvalSupported!==!1,G=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!hs,Y=typeof g.isImageDecoderSupported=="boolean"?g.isImageDecoderSupported:!hs&&(Sn.platform.isFirefox||!globalThis.chrome),nt=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,Z=typeof g.disableFontFace=="boolean"?g.disableFontFace:hs,kt=g.fontExtraProperties===!0,Tt=g.enableXfa===!0,St=g.ownerDocument||globalThis.document,Pt=g.disableRange===!0,lt=g.disableStream===!0,st=g.disableAutoFetch===!0,V=g.pdfBug===!0,ft=g.CanvasFactory||(hs?Jk:Kk),tt=g.FilterFactory||(hs?Zk:Qk),O=g.enableHWA===!0,H=g.useWasm!==!1,ut=h?h.length:g.length??NaN,Lt=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!hs&&!Z,Ct=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:!!(x===G1&&M===X1&&L===q1&&S&&k&&P&&hf(S,document.baseURI)&&hf(k,document.baseURI)&&hf(P,document.baseURI)),_t=null;vk(y);const Dt={canvasFactory:new ft({ownerDocument:St,enableHWA:O}),filterFactory:new tt({docId:e,ownerDocument:St}),cMapReaderFactory:Ct?null:new x({baseUrl:S,isCompressed:_}),standardFontDataFactory:Ct?null:new M({baseUrl:k}),wasmFactory:Ct?null:new L({baseUrl:P})};p||(p=Ff.create({verbosity:y,port:Br.workerPort}),t._worker=p);const Qt={docId:e,apiVersion:"5.4.530",data:r,password:u,disableAutoFetch:st,rangeChunkSize:f,length:ut,docBaseUrl:v,enableXfa:Tt,evaluatorOptions:{maxImageSize:I,disableFontFace:Z,ignoreErrors:D,isEvalSupported:U,isOffscreenCanvasSupported:G,isImageDecoderSupported:Y,canvasMaxAreaInBytes:nt,fontExtraProperties:kt,useSystemFonts:Lt,useWasm:H,useWorkerFetch:Ct,cMapUrl:S,iccUrl:T,standardFontDataUrl:k,wasmUrl:P}},ae={ownerDocument:St,pdfBug:V,styleElement:_t,loadingParams:{disableAutoFetch:st,enableXfa:Tt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const je=p.messageHandler.sendWithPromise("GetDocRequest",Qt,r?[r.buffer]:null);let es;if(h)es=new AT(h,{disableRange:Pt,disableStream:lt});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Ni=hf(n)?xT:hs?NT:PT;es=new Ni({url:n,length:ut,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:Pt,disableStream:lt})}return je.then(Ni=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const jr=new wf(e,Ni,p.port),$a=new jT(jr,t,es,ae,Dt,O);t._transport=$a,jr.send("Ready",null)})}).catch(t._capability.reject),t}var s0;const i0=class i0{constructor(){K(this,"_capability",Promise.withResolvers());K(this,"_transport",null);K(this,"_worker",null);K(this,"docId",`d${gn(i0,s0)._++}`);K(this,"destroyed",!1);K(this,"onPassword",null);K(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};s0=new WeakMap,b(i0,s0,0);let Zw=i0;var pc,jp,Hp,$p,Wp;class Ex{constructor(t,e,n=!1,r=null){b(this,pc,Promise.withResolvers());b(this,jp,[]);b(this,Hp,[]);b(this,$p,[]);b(this,Wp,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){a(this,Wp).push(t)}addProgressListener(t){a(this,$p).push(t)}addProgressiveReadListener(t){a(this,Hp).push(t)}addProgressiveDoneListener(t){a(this,jp).push(t)}onDataRange(t,e){for(const n of a(this,Wp))n(t,e)}onDataProgress(t,e){a(this,pc).promise.then(()=>{for(const n of a(this,$p))n(t,e)})}onDataProgressiveRead(t){a(this,pc).promise.then(()=>{for(const e of a(this,Hp))e(t)})}onDataProgressiveDone(){a(this,pc).promise.then(()=>{for(const t of a(this,jp))t()})}transportReady(){a(this,pc).resolve()}requestDataRange(t,e){Te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}pc=new WeakMap,jp=new WeakMap,Hp=new WeakMap,$p=new WeakMap,Wp=new WeakMap;class UT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Sa,gc,xf;class zT{constructor(t,e,n,r=!1){b(this,gc);b(this,Sa,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new U1:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new yx,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new Pg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:o=go.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:y=null,isEditing:v=!1,recordOperations:S=!1,operationsFilter:_=null}){var Y,nt,Z;(Y=this._stats)==null||Y.time("Overall");const x=this._transport.getRenderingIntent(r,o,y,v),{renderingIntent:T,cacheKey:k}=x;w(this,Sa,!1),h||(h=this._transport.getOptionalContentConfig(T));let M=this._intentStates.get(k);M||(M=Object.create(null),this._intentStates.set(k,M)),M.streamReaderCancelTimeout&&(clearTimeout(M.streamReaderCancelTimeout),M.streamReaderCancelTimeout=null);const P=!!(T&ri.PRINT);M.displayReadyCapability||(M.displayReadyCapability=Promise.withResolvers(),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(nt=this._stats)==null||nt.time("Page Request"),this._pumpOperatorList(x));const L=!!(this._pdfBug&&((Z=globalThis.StepperManager)!=null&&Z.enabled)),D=!this.recordedBBoxes&&(S||L),I=kt=>{var Tt,St;if(M.renderTasks.delete(U),D){const Pt=(Tt=U.gfx)==null?void 0:Tt.dependencyTracker.take();Pt&&(U.stepper&&U.stepper.setOperatorBBoxes(Pt,U.gfx.dependencyTracker.takeDebugMetadata()),S&&(this.recordedBBoxes=Pt))}P&&w(this,Sa,!0),E(this,gc,xf).call(this),kt?(U.capability.reject(kt),this._abortOperatorList({intentState:M,reason:kt instanceof Error?kt:new Error(kt)})):U.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(St=globalThis.Stats)!=null&&St.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},U=new Jw({callback:I,params:{canvas:e,canvasContext:t,dependencyTracker:D?new iT(e,M.operatorList.length,L):null,viewport:n,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:_});(M.renderTasks||(M.renderTasks=new Set)).add(U);const G=U.task;return Promise.all([M.displayReadyCapability.promise,h]).then(([kt,Tt])=>{var St;if(this.destroyed){I();return}if((St=this._stats)==null||St.time("Rendering"),!(Tt.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");U.initializeGraphics({transparency:kt,optionalContentConfig:Tt}),U.operatorListChanged()}).catch(I),G}getOperatorList({intent:t="display",annotationMode:e=go.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var f;function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Nf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function o(){l.read().then(function({value:h,done:f}){if(f){n(u);return}u.lang??(u.lang=h.lang),Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},r)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),w(this,Sa,!1),Promise.all(t)}cleanup(t=!1){w(this,Sa,!0);const e=E(this,gc,xf).call(this);return t&&e&&this._stats&&(this._stats=new U1),e}_startRenderPage(t,e){var r,o;const n=this._intentStates.get(e);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&E(this,gc,xf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:y,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),p())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();E(this,gc,xf).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof WA){let r=BT;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new al(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Sa=new WeakMap,gc=new WeakSet,xf=function(){if(!a(this,Sa)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,Sa,!1),!0};var Uo,Zi,ba,mc,r0,yc,vc,fs,dy,xx,Cx,Cf,Nh,fy;const Be=class Be{constructor({name:t=null,port:e=null,verbosity:n=wk()}={}){b(this,fs);b(this,Uo,Promise.withResolvers());b(this,Zi,null);b(this,ba,null);b(this,mc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(a(Be,vc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Be,vc).set(e,this),E(this,fs,xx).call(this,e)}else E(this,fs,Cx).call(this)}get promise(){return a(this,Uo).promise}get port(){return a(this,ba)}get messageHandler(){return a(this,Zi)}destroy(){var t,e;this.destroyed=!0,(t=a(this,mc))==null||t.terminate(),w(this,mc,null),a(Be,vc).delete(a(this,ba)),w(this,ba,null),(e=a(this,Zi))==null||e.destroy(),w(this,Zi,null)}static create(t){const e=a(this,vc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Be(t)}static get workerSrc(){if(Br.workerSrc)return Br.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return jt(this,"_setupFakeWorkerGlobal",(async()=>a(this,Nh,fy)?a(this,Nh,fy):(await import(this.workerSrc)).WorkerMessageHandler)())}};Uo=new WeakMap,Zi=new WeakMap,ba=new WeakMap,mc=new WeakMap,r0=new WeakMap,yc=new WeakMap,vc=new WeakMap,fs=new WeakSet,dy=function(){a(this,Uo).resolve(),a(this,Zi).send("configure",{verbosity:this.verbosity})},xx=function(t){w(this,ba,t),w(this,Zi,new wf("main","worker",t)),a(this,Zi).on("ready",()=>{}),E(this,fs,dy).call(this)},Cx=function(){if(a(Be,yc)||a(Be,Nh,fy)){E(this,fs,Cf).call(this);return}let{workerSrc:t}=Be;try{Be._isSameOrigin(window.location,t)||(t=Be._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new wf("main","worker",e),r=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?a(this,Uo).reject(new Error("Worker was destroyed")):E(this,fs,Cf).call(this)},o=new AbortController;e.addEventListener("error",()=>{a(this,mc)||r()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}w(this,Zi,n),w(this,ba,e),w(this,mc,e),E(this,fs,dy).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{E(this,fs,Cf).call(this)}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{g0("The worker has been disabled.")}E(this,fs,Cf).call(this)},Cf=function(){a(Be,yc)||(zt("Setting up fake worker."),w(Be,yc,!0)),Be._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,Uo).reject(new Error("Worker was destroyed"));return}const e=new Yk;w(this,ba,e);const n=`fake${gn(Be,r0)._++}`,r=new wf(n+"_worker",n,e);t.setup(r,e),w(this,Zi,new wf(n,n+"_worker",e)),E(this,fs,dy).call(this)}).catch(t=>{a(this,Uo).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Nh=new WeakSet,fy=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},b(Be,Nh),b(Be,r0,0),b(Be,yc,!1),b(Be,vc,new WeakMap),hs&&(w(Be,yc,!0),Br.workerSrc||(Br.workerSrc="./pdf.worker.mjs")),Be._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},Be._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Be.fromPort=t=>{if(Mk("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Be.create(t)};let Ff=Be;var Ea,Tr,Ih,Fh,xa,wc,_f;class jT{constructor(t,e,n,r,o,l){b(this,wc);b(this,Ea,new Map);b(this,Tr,new Map);b(this,Ih,new Map);b(this,Fh,new Map);b(this,xa,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new yx,this.fontLoader=new Hk({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}get annotationStorage(){return jt(this,"annotationStorage",new GA)}getRenderingIntent(t,e=go.ENABLE,n=null,r=!1,o=!1){let l=ri.DISPLAY,u=Iw;switch(t){case"any":l=ri.ANY;break;case"display":break;case"print":l=ri.PRINT;break;default:zt(`getRenderingIntent - invalid intent: ${t}`)}const h=l&ri.PRINT&&n instanceof ex?n:this.annotationStorage;switch(e){case go.DISABLE:l+=ri.ANNOTATIONS_DISABLE;break;case go.ENABLE:break;case go.ENABLE_FORMS:l+=ri.ANNOTATIONS_FORMS;break;case go.ENABLE_STORAGE:l+=ri.ANNOTATIONS_STORAGE,u=h.serializable;break;default:zt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(l+=ri.IS_EDITING),o&&(l+=ri.OPLIST);const{ids:f,hash:p}=h.modifiedIds,y=[l,u.hash,p];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=a(this,xa))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of a(this,Tr).values())t.push(r._destroy());a(this,Tr).clear(),a(this,Ih).clear(),a(this,Fh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,o;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Ea).clear(),this.filterFactory.destroy(),If.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new al("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{ee(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}ee(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=h=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,r)=>{ee(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}ee(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new UT(n,this))}),t.on("DocException",n=>{e._capability.reject(xs(n))}),t.on("PasswordRequest",n=>{w(this,xa,Promise.withResolvers());try{if(!e.onPassword)throw xs(n);const r=o=>{o instanceof Error?a(this,xa).reject(o):a(this,xa).resolve({password:o})};e.onPassword(r,n.code)}catch(r){a(this,xa).reject(r)}return a(this,xa).promise}),t.on("DataLoaded",n=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;a(this,Tr).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const v=o.error;zt(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const u=new Fw(o),h=this._params.pdfBug&&((l=globalThis.FontInspector)!=null&&l.enabled)?(v,S)=>globalThis.FontInspector.fontAdded(v,S):null,f=new $k(u,h,o.extra,o.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:p}=o;ee(p,"The imageRef must be defined.");for(const v of a(this,Tr).values())for(const[,S]of v.objs)if((S==null?void 0:S.ref)===p)return S.dataLen?(this.commonObjs.resolve(n,structuredClone(S)),S.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new Wk(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const y=new Ow(o);this.commonObjs.resolve(n,y.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,l])=>{var h;if(this.destroyed)return;const u=a(this,Tr).get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){(h=l==null?void 0:l.bitmap)==null||h.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&zt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=a(this,Ih).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&a(this,Fh).set(o.refStr,t);const l=new zT(e,o,this,this._params.pdfBug);return a(this,Tr).set(e,l),l});return a(this,Ih).set(e,r),r}getPageIndex(t){return Bw(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,wc,_f).call(this,"GetFieldObjects")}hasJSActions(){return E(this,wc,_f).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return E(this,wc,_f).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,wc,_f).call(this,"GetOptionalContentConfig").then(e=>new wT(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Ea).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>{var o,l;return{info:r[0],metadata:r[1]?new yT(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null,hasStructTree:r[2]}});return a(this,Ea).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Tr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Ea).clear(),this.filterFactory.destroy(!0),If.cleanup()}}cachedPageNumber(t){if(!Bw(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Fh).get(e)??null}}Ea=new WeakMap,Tr=new WeakMap,Ih=new WeakMap,Fh=new WeakMap,xa=new WeakMap,wc=new WeakSet,_f=function(t,e=null){const n=a(this,Ea).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return a(this,Ea).set(t,r),r};var zo;class HT{constructor(t){b(this,zo,null);K(this,"onContinue",null);K(this,"onError",null);w(this,zo,t)}get promise(){return a(this,zo).capability.promise}cancel(t=0){a(this,zo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,zo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,zo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}zo=new WeakMap;var jo,Ac;const Ml=class Ml{constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:v=null,enableHWA:S=!1,operationsFilter:_=null}){b(this,jo,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new HT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=S,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var h,f;if(this.cancelled)return;if(this._canvas){if(a(Ml,Ac).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Ml,Ac).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ju(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,r,o;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),a(this,jo)&&(window.cancelAnimationFrame(a(this,jo)),w(this,jo,null)),a(Ml,Ac).delete(this._canvas),t||(t=new WA(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(r=this.task).onError)==null||o.call(r,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,jo,window.requestAnimationFrame(()=>{w(this,jo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Ml,Ac).delete(this._canvas),this.callback())))}};jo=new WeakMap,Ac=new WeakMap,b(Ml,Ac,new WeakSet);let Jw=Ml;const $T="5.4.530",WT="50cc4adac";var Gs,Sc,Oh,wn,Vp,Bh,Ca,Gp,Ho,Ji,Xp,xe,tA,eA,nA,kl,_x,po;const Cs=class Cs{constructor({editor:t=null,uiManager:e=null}){b(this,xe);b(this,Gs,null);b(this,Sc,null);b(this,Oh);b(this,wn,null);b(this,Vp,!1);b(this,Bh,!1);b(this,Ca,null);b(this,Gp);b(this,Ho,null);b(this,Ji,null);var n,r;t?(w(this,Bh,!1),w(this,Ca,t)):w(this,Bh,!0),w(this,Ji,(t==null?void 0:t._uiManager)||e),w(this,Gp,a(this,Ji)._eventBus),w(this,Oh,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((r=a(this,Ji))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),a(Cs,Xp)||w(Cs,Xp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return jt(this,"_keyboardManager",new Mg([[["Escape","mac+Escape"],Cs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Cs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Cs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Cs.prototype._moveToPrevious],[["Home","mac+Home"],Cs.prototype._moveToBeginning],[["End","mac+End"],Cs.prototype._moveToEnd]]))}renderButton(){const t=w(this,Gs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",a(this,Ca)&&(t.ariaControls=`${a(this,Ca).id}_colorpicker_dropdown`);const e=a(this,Ji)._signal;t.addEventListener("click",E(this,xe,kl).bind(this),{signal:e}),t.addEventListener("keydown",E(this,xe,nA).bind(this),{signal:e});const n=w(this,Sc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=a(this,Oh),t.append(n),t}renderMainDropdown(){const t=w(this,wn,E(this,xe,tA).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===a(this,Gs)){E(this,xe,kl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,xe,eA).call(this,e,t)}_moveToNext(t){var e,n;if(!a(this,xe,po)){E(this,xe,kl).call(this,t);return}if(t.target===a(this,Gs)){(e=a(this,wn).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=a(this,wn))==null?void 0:e.firstElementChild)||t.target===a(this,Gs)){a(this,xe,po)&&this._hideDropdownFromKeyboard();return}a(this,xe,po)||E(this,xe,kl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!a(this,xe,po)){E(this,xe,kl).call(this,t);return}(e=a(this,wn).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,xe,po)){E(this,xe,kl).call(this,t);return}(e=a(this,wn).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,wn))==null||t.classList.add("hidden"),a(this,Gs).ariaExpanded="false",(e=a(this,Ho))==null||e.abort(),w(this,Ho,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Bh)){if(!a(this,xe,po)){(t=a(this,Ca))==null||t.unselect();return}this.hideDropdown(),a(this,Gs).focus({preventScroll:!0,focusVisible:a(this,Vp)})}}updateColor(t){if(a(this,Sc)&&(a(this,Sc).style.backgroundColor=t),!a(this,wn))return;const e=a(this,Ji).highlightColors.values();for(const n of a(this,wn).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=a(this,Gs))==null||t.remove(),w(this,Gs,null),w(this,Sc,null),(e=a(this,wn))==null||e.remove(),w(this,wn,null)}};Gs=new WeakMap,Sc=new WeakMap,Oh=new WeakMap,wn=new WeakMap,Vp=new WeakMap,Bh=new WeakMap,Ca=new WeakMap,Gp=new WeakMap,Ho=new WeakMap,Ji=new WeakMap,Xp=new WeakMap,xe=new WeakSet,tA=function(){const t=document.createElement("div"),e=a(this,Ji)._signal;t.addEventListener("contextmenu",Di,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,Ca)&&(t.id=`${a(this,Ca).id}_colorpicker_dropdown`);for(const[n,r]of a(this,Ji).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",a(Cs,Xp)[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===a(this,Oh),o.addEventListener("click",E(this,xe,eA).bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",E(this,xe,nA).bind(this),{signal:e}),t},eA=function(t,e){e.stopPropagation(),a(this,Gp).dispatch("switchannotationeditorparams",{source:this,type:te.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},nA=function(t){Cs._keyboardManager.exec(this,t)},kl=function(t){if(a(this,xe,po)){this.hideDropdown();return}if(w(this,Vp,t.detail===0),a(this,Ho)||(w(this,Ho,new AbortController),window.addEventListener("pointerdown",E(this,xe,_x).bind(this),{signal:a(this,Ji).combinedSignal(a(this,Ho))})),a(this,Gs).ariaExpanded="true",a(this,wn)){a(this,wn).classList.remove("hidden");return}const e=w(this,wn,E(this,xe,tA).call(this));a(this,Gs).append(e)},_x=function(t){var e;(e=a(this,wn))!=null&&e.contains(t.target)||this.hideDropdown()},po=function(){return a(this,wn)&&!a(this,wn).classList.contains("hidden")},b(Cs,Xp,null);let jy=Cs;var Pr,qp,Uh,Yp;const Ll=class Ll{constructor(t){b(this,Pr,null);b(this,qp,null);b(this,Uh,null);w(this,qp,t),w(this,Uh,t._uiManager),a(Ll,Yp)||w(Ll,Yp,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,Pr))return a(this,Pr);const{editorType:t,colorType:e,color:n}=a(this,qp),r=w(this,Pr,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",a(Ll,Yp)[t]),r.addEventListener("input",()=>{a(this,Uh).updateParams(e,r.value)},{signal:a(this,Uh)._signal}),r}update(t){a(this,Pr)&&(a(this,Pr).value=t)}destroy(){var t;(t=a(this,Pr))==null||t.remove(),w(this,Pr,null)}hideDropdown(){}};Pr=new WeakMap,qp=new WeakMap,Uh=new WeakMap,Yp=new WeakMap,b(Ll,Yp,null);let Hy=Ll;function oE(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function lf(g){return Math.max(0,Math.min(255,255*g))}class lE{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=lf(t),[t,t,t]}static G_HTML([t]){const e=oE(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(lf)}static RGB_HTML(t){return`#${t.map(oE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[lf(1-Math.min(1,t+r)),lf(1-Math.min(1,n+r)),lf(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,o=1-e,l=1-n,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class VT{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Te("Abstract method `_createSVG` called.")}}class $y extends VT{_createSVG(t){return document.createElementNS(Zr,t)}}const GT=9,Kc=new WeakSet,XT=new Date().getTimezoneOffset()*60*1e3;class dw{static create(t){switch(t.data.annotationType){case ln.LINK:return new YA(t);case ln.TEXT:return new YT(t);case ln.WIDGET:switch(t.data.fieldType){case"Tx":return new KT(t);case"Btn":return t.data.radioButton?new Px(t):t.data.checkBox?new ZT(t):new JT(t);case"Ch":return new tP(t);case"Sig":return new QT(t)}return new Zc(t);case ln.POPUP:return new iA(t);case ln.FREETEXT:return new Nx(t);case ln.LINE:return new nP(t);case ln.SQUARE:return new sP(t);case ln.CIRCLE:return new iP(t);case ln.POLYLINE:return new Ix(t);case ln.CARET:return new aP(t);case ln.INK:return new KA(t);case ln.POLYGON:return new rP(t);case ln.HIGHLIGHT:return new Fx(t);case ln.UNDERLINE:return new oP(t);case ln.SQUIGGLY:return new lP(t);case ln.STRIKEOUT:return new cP(t);case ln.STAMP:return new Ox(t);case ln.FILEATTACHMENT:return new uP(t);default:return new Ge(t)}}}var bc,zh,Ti,Kp,sA;const sS=class sS{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){b(this,Kp);b(this,bc,null);b(this,zh,!1);b(this,Ti,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return sS._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const t=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:r}=this.data;let o=-1/0,l=-1/0;if((e==null?void 0:e.length)>=8){for(let h=0;h<e.length;h+=8)e[h+1]>l?(l=e[h+1],o=e[h+2]):e[h+1]===l&&(o=Math.max(o,e[h+2]));return[o,l]}if((n==null?void 0:n.length)>=1){for(const h of n)for(let f=0,p=h.length;f<p;f+=2)h[f+1]>l?(l=h[f+1],o=h[f]):h[f+1]===l&&(o=Math.max(o,h[f]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-l)/r,t}get commentText(){var e,n,r;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${Lf}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((r=t.contentsObj)==null?void 0:r.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Lf}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=a(this,Ti))==null?void 0:t.popup)||this.popup)==null||e.remove(),w(this,Ti,this.popup=null)}updateEdited(t){var o;if(!this.container)return;t.rect&&(a(this,bc)||w(this,bc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&E(this,Kp,sA).call(this,e);let r=((o=a(this,Ti))==null?void 0:o.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=a(this,Ti).popup),r&&(r.updateEdited(t),n!=null&&n.deleted&&(r.remove(),w(this,Ti,null),this.popup=null))}resetEdited(){var t;a(this,bc)&&(E(this,Kp,sA).call(this,a(this,bc).rect),(t=a(this,Ti))==null||t.popup.resetEdited(),w(this,bc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Zc)&&!(this instanceof YA)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof iA){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,o),o}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(x>0||T>0){const M=`calc(${x}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;l.borderRadius=M}else if(this instanceof Px){const M=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=M}switch(e.borderStyle.style){case ku.SOLID:l.borderStyle="solid";break;case ku.DASHED:l.borderStyle="dashed";break;case ku.BEVELED:zt("Unimplemented border style: beveled");break;case ku.INSET:zt("Unimplemented border style: inset");break;case ku.UNDERLINE:l.borderBottomStyle="solid";break}const k=e.borderColor||null;k?(w(this,zh,!0),l.borderColor=ct.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):l.borderWidth=0}const f=ct.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:y,pageX:v,pageY:S}=r.rawDims;l.left=`${100*(f[0]-v)/p}%`,l.top=`${100*(f[1]-S)/y}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(l.width=`${100*u/p}%`,l.height=`${100*h/y}%`):this.setRotation(_,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*l/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const o=r.detail[e],l=o[0],u=o.slice(1);r.target.style[n]=lE[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:lE[`${l}_rgb`](u)})};return jt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail)){const o=t[r]||n[r];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,o]of Object.entries(e)){const l=n[r];if(l){const u={detail:{[r]:o},target:t};l(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,o]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,T,k,M]=t.subarray(2,6);if(r===x&&o===T&&e===k&&n===M)return}const{style:l}=this.container;let u;if(a(this,zh)){const{borderColor:x,borderWidth:T}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const h=r-e,f=o-n,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=p.createElement("defs");y.append(v);const S=p.createElement("clipPath"),_=`clippath_${this.data.id}`;S.setAttribute("id",_),S.setAttribute("clipPathUnits","objectBoundingBox"),v.append(S);for(let x=2,T=t.length;x<T;x+=8){const k=t[x],M=t[x+1],P=t[x+2],L=t[x+3],D=p.createElement("rect"),I=(P-e)/h,U=(o-M)/f,G=(k-P)/h,Y=(M-L)/f;D.setAttribute("x",I),D.setAttribute("y",U),D.setAttribute("width",G),D.setAttribute("height",Y),S.append(D),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${U}" width="${G}" height="${Y}"/>`)}a(this,zh)&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate),w(this,Ti,new iA({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(a(this,Ti)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,Ti)}render(){Te("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Kc.has(f)){zt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==e&&Kc.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};bc=new WeakMap,zh=new WeakMap,Ti=new WeakMap,Kp=new WeakSet,sA=function(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+h)/l}%`,r===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)};let Ge=sS;class qT extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var oi,Tl,kx,Tx;class YA extends Ge{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});b(this,oi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),o=!0):e.attachment?(E(this,oi,kx).call(this,r,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(E(this,oi,Tx).call(this,r,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),o=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(e,n,r=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&E(this,oi,Tl).call(this),r&&(e.title=r)}_bindNamedAction(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(e.title=r),E(this,oi,Tl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const l=r.get(o);l&&(e[l]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),E(this,oi,Tl).call(this)}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),E(this,oi,Tl).call(this),!this._fieldObjects){zt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var y;r==null||r();const{fields:o,refs:l,include:u}=n,h=[];if(o.length!==0||l.length!==0){const v=new Set(l);for(const S of o){const _=this._fieldObjects[S]||[];for(const{id:x}of _)v.add(x)}for(const S of Object.values(this._fieldObjects))for(const _ of S)v.has(_.id)===u&&h.push(_)}else for(const v of Object.values(this._fieldObjects))h.push(...v);const f=this.annotationStorage,p=[];for(const v of h){const{id:S}=v;switch(p.push(S),v.type){case"text":{const x=v.defaultValue||"";f.setValue(S,{value:x});break}case"checkbox":case"radiobutton":{const x=v.defaultValue===v.exportValues;f.setValue(S,{value:x});break}case"combobox":case"listbox":{const x=v.defaultValue||"";f.setValue(S,{value:x});break}default:continue}const _=document.querySelector(`[data-element-id="${S}"]`);if(_){if(!Kc.has(_)){zt(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}oi=new WeakSet,Tl=function(){this.container.setAttribute("data-internal-link","")},kx=function(e,n,r="",o=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:r&&(e.title=r),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,o),!1},E(this,oi,Tl).call(this)},Tx=function(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(e.title=r),E(this,oi,Tl).call(this)};class YT extends Ge{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Zc extends Ge{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Sn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,o){n.includes("mouse")?t.addEventListener(n,l=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var u;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}}))})}_setEventListeners(t,e,n,r){var o,l,u;for(const[h,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,f,r),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ct.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||GT,o=t.style;let l;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(iw*r))||1,y=f/p;l=Math.min(r,h(y/iw))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,h(f/iw))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=ct.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class KT extends Zc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[r]:n})}render(){var r,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let u=l.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&u.length>h&&(u=u.slice(0,h));let f=l.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const p={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Kc.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:y,datetimeType:v,timeStep:S}=this.data,_=!!v&&this.enableScripting;y&&(n.title=y),this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",T=>{t.setValue(e,{value:T.target.value}),this.setPropertyOnSiblings(n,"value",T.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",T=>{const k=this.data.defaultFieldValue??"";n.value=p.userValue=k,p.formattedValue=null});let x=T=>{const{formattedValue:k}=p;k!=null&&(T.target.value=k),T.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",k=>{var P;if(p.focused)return;const{target:M}=k;if(_&&(M.type=v,S&&(M.step=S)),p.userValue){const L=p.userValue;if(_)if(v==="time"){const D=new Date(L),I=[D.getHours(),D.getMinutes(),D.getSeconds()];M.value=I.map(U=>U.toString().padStart(2,"0")).join(":")}else M.value=new Date(L-XT).toISOString().split(v==="date"?"T":".",1)[0];else M.value=L}p.lastCommittedValue=M.value,p.commitKey=1,(P=this.data.actions)!=null&&P.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",k=>{this.showElementAndHideCanvas(k.target);const M={value(P){p.userValue=P.detail.value??"",_||t.setValue(e,{value:p.userValue.toString()}),P.target.value=p.userValue},formattedValue(P){const{formattedValue:L}=P.detail;p.formattedValue=L,L!=null&&P.target!==document.activeElement&&(P.target.value=L);const D={formattedValue:L};_&&(D.value=L),t.setValue(e,D)},selRange(P){P.target.setSelectionRange(...P.detail.selRange)},charLimit:P=>{var U;const{charLimit:L}=P.detail,{target:D}=P;if(L===0){D.removeAttribute("maxLength");return}D.setAttribute("maxLength",L);let I=p.userValue;!I||I.length<=L||(I=I.slice(0,L),D.value=p.userValue=I,t.setValue(e,{value:I}),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:D.selectionStart,selEnd:D.selectionEnd}}))}};this._dispatchEventFromSandbox(M,k)}),n.addEventListener("keydown",k=>{var L;p.commitKey=1;let M=-1;if(k.key==="Escape"?M=0:k.key==="Enter"&&!this.data.multiLine?M=2:k.key==="Tab"&&(p.commitKey=3),M===-1)return;const{value:P}=k.target;p.lastCommittedValue!==P&&(p.lastCommittedValue=P,p.userValue=P,(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:M,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}}))});const T=x;x=null,n.addEventListener("blur",k=>{var L,D;if(!p.focused||!k.relatedTarget)return;(L=this.data.actions)!=null&&L.Blur||(p.focused=!1);const{target:M}=k;let{value:P}=M;if(_){if(P&&v==="time"){const I=P.split(":").map(U=>parseInt(U,10));P=new Date(2e3,0,1,I[0],I[1],I[2]||0).valueOf(),M.step=""}else P.includes("T")||(P=`${P}T00:00`),P=new Date(P).valueOf();M.type="text"}p.userValue=P,p.lastCommittedValue!==P&&((D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:p.commitKey,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}})),T(k)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",k=>{var Y;p.lastCommittedValue=null;const{data:M,target:P}=k,{value:L,selectionStart:D,selectionEnd:I}=P;let U=D,G=I;switch(k.inputType){case"deleteWordBackward":{const nt=L.substring(0,D).match(/\w*[^\w]*$/);nt&&(U-=nt[0].length);break}case"deleteWordForward":{const nt=L.substring(D).match(/^[^\w]*\w*/);nt&&(G+=nt[0].length);break}case"deleteContentBackward":D===I&&(U-=1);break;case"deleteContentForward":D===I&&(G+=1);break}k.preventDefault(),(Y=this.linkService.eventBus)==null||Y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,change:M||"",willCommit:!1,selStart:U,selEnd:G}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],k=>k.target.value)}if(x&&n.addEventListener("blur",x),this.data.comb){const k=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${k}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class QT extends Zc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class ZT extends Zc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Kc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Px extends Zc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Kc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const v=p&&y.id===n;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class JT extends YA{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class tP extends Zc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Kc.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,n.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),l=()=>{p.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=p=>{const y=p?"value":"textContent",{options:v,multiple:S}=r;return S?Array.prototype.filter.call(v,_=>_.selected).map(_=>_[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let h=u(!1);const f=p=>{const y=p.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const y={value(v){l==null||l();const S=v.detail.value,_=new Set(Array.isArray(S)?S:[S]);for(const x of r.options)x.selected=_.has(x.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(v){r.multiple=!0},remove(v){const S=r.options,_=v.detail.remove;S[_].selected=!1,r.remove(_),S.length>0&&Array.prototype.findIndex.call(S,T=>T.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(v){const{index:S,displayValue:_,exportValue:x}=v.detail.insert,T=r.children[S],k=document.createElement("option");k.textContent=_,k.value=x,T?T.before(k):r.append(k),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},items(v){const{items:S}=v.detail;for(;r.length!==0;)r.remove(0);for(const _ of S){const{displayValue:x,exportValue:T}=_,k=document.createElement("option");k.textContent=x,k.value=T,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},indices(v){const S=new Set(v.detail.indices);for(const _ of v.target.options)_.selected=S.has(_.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,p)}),r.addEventListener("input",p=>{var S;const y=u(!0),v=u(!1);t.setValue(e,{value:y}),p.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Qp,rA;class iA extends Ge{constructor(e){const{data:n,elements:r,parent:o}=e,l=!!o._commentManager;super(e,{isRenderable:!l&&Ge._hasPopupData(n)});b(this,Qp);if(this.elements=r,l&&Ge._hasPopupData(n)){const u=this.popup=E(this,Qp,rA).call(this);for(const h of r)h.popup=u}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=E(this,Qp,rA).call(this),r=[];for(const o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",r.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(o=>`${Iu}${o}`).join(",")),this.container}}Qp=new WeakSet,rA=function(){return new eP({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Xs,$o,a0,o0,jh,Hh,Qe,Rr,Wo,Ec,$h,Wh,Mr,qs,_a,ka,Ze,Ta,Vo,Zp,Pa,Vh,xc,Go,kn,Xo,Xt,py,aA,oA,lA,gy,cA,Rx,Mx,Lx,Dx,my,yy,uA;class eP{constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:h,rect:f,parentRect:p,open:y,commentManager:v=null}){b(this,Xt);b(this,Xs,null);b(this,$o,E(this,Xt,Lx).bind(this));b(this,a0,E(this,Xt,uA).bind(this));b(this,o0,E(this,Xt,yy).bind(this));b(this,jh,E(this,Xt,my).bind(this));b(this,Hh,null);b(this,Qe,null);b(this,Rr,null);b(this,Wo,null);b(this,Ec,null);b(this,$h,null);b(this,Wh,null);b(this,Mr,!1);b(this,qs,null);b(this,_a,null);b(this,ka,null);b(this,Ze,null);b(this,Ta,null);b(this,Vo,null);b(this,Zp,null);b(this,Pa,null);b(this,Vh,null);b(this,xc,null);b(this,Go,!1);b(this,kn,null);b(this,Xo,null);w(this,Qe,t),w(this,Vh,r),w(this,Rr,l),w(this,Pa,u),w(this,$h,h),w(this,Hh,e),w(this,Zp,f),w(this,Wh,p),w(this,Ec,n),w(this,Xs,v),w(this,kn,n[0]),w(this,Wo,Iy.toDateObject(o)),this.trigger=n.flatMap(S=>S.getElementsToTriggerPopup()),v||(E(this,Xt,py).call(this),a(this,Qe).hidden=!0,y&&E(this,Xt,my).call(this))}renderCommentButton(){if(a(this,Ze)){a(this,Ze).parentNode||a(this,kn).container.after(a(this,Ze));return}if(a(this,Ta)||E(this,Xt,aA).call(this),!a(this,Ta))return;const{signal:t}=w(this,_a,new AbortController),e=a(this,kn).hasOwnCommentButton,n=()=>{a(this,Xs).toggleCommentPopup(this,!0,void 0,!e)},r=()=>{a(this,Xs).toggleCommentPopup(this,!1,!0,!e)},o=()=>{a(this,Xs).toggleCommentPopup(this,!1,!1)};if(e){w(this,Ze,a(this,kn).container);for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",a(this,$o),{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=w(this,Ze,document.createElement("button"));l.className="annotationCommentButton";const u=a(this,kn).container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,Xt,lA).call(this),E(this,Xt,oA).call(this),l.addEventListener("keydown",a(this,$o),{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}get commentButtonColor(){const{color:t,opacity:e}=a(this,kn).commentData;return t?a(this,$h)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=a(this,Ze))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}=a(this,kn).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:r,modificationDate:o}}get elementBeforePopup(){return a(this,Ze)}get comment(){return a(this,Xo)||w(this,Xo,a(this,kn).commentText),a(this,Xo)}set comment(t){t!==this.comment&&(a(this,kn).commentText=w(this,Xo,t))}focus(){var t;(t=a(this,kn).container)==null||t.focus()}get parentBoundingClientRect(){return a(this,kn).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){a(this,Ze)&&(a(this,Ze).classList.toggle("selected",t),a(this,Ze).ariaExpanded=e)}setSelectedCommentButton(t){a(this,Ze).classList.toggle("selected",t)}get commentPopupPosition(){if(a(this,Vo))return a(this,Vo);const{x:t,y:e,height:n}=a(this,Ze).getBoundingClientRect(),{x:r,y:o,width:l,height:u}=a(this,kn).layer.getBoundingClientRect();return[(t-r)/l,(e+n-o)/u]}set commentPopupPosition(t){w(this,Vo,t)}hasDefaultPopupPosition(){return a(this,Vo)===null}get commentButtonPosition(){return a(this,Ta)}get commentButtonWidth(){return a(this,Ze).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=a(this,Vo)||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:h}=r;a(this,Xs).showDialog(null,this,o+e*u,l+n*h,{...t,parentDimensions:r})}render(){var n,r;if(a(this,qs))return;const t=w(this,qs,document.createElement("div"));if(t.className="popup",a(this,Hh)){const o=t.style.outlineColor=ct.makeHexColor(...a(this,Hh));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=a(this,Vh))!=null&&n.str){const o=document.createElement("span");o.className="title",e.append(o),{dir:o.dir,str:o.textContent}=a(this,Vh)}if(t.append(e),a(this,Wo)){const o=document.createElement("time");o.className="popupDate",o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Wo).valueOf()})),o.dateTime=a(this,Wo).toISOString(),e.append(o)}AE({html:a(this,Xt,gy)||a(this,Rr).str,dir:(r=a(this,Rr))==null?void 0:r.dir,className:"popupContent"},t),a(this,Qe).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var r;if(a(this,Xs)){n?(this.remove(),w(this,Xo,null)):e&&(e.deleted?this.remove():(E(this,Xt,lA).call(this),w(this,Xo,e.text))),t&&(w(this,Ta,null),E(this,Xt,aA).call(this),E(this,Xt,oA).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}E(this,Xt,py).call(this),a(this,xc)||w(this,xc,{contentsObj:a(this,Rr),richText:a(this,Pa)}),t&&w(this,ka,null),e&&e.text&&(w(this,Pa,E(this,Xt,Mx).call(this,e.text)),w(this,Wo,Iy.toDateObject(e.date)),w(this,Rr,null)),(r=a(this,qs))==null||r.remove(),w(this,qs,null)}resetEdited(){var t;a(this,xc)&&({contentsObj:gn(this,Rr)._,richText:gn(this,Pa)._}=a(this,xc),w(this,xc,null),(t=a(this,qs))==null||t.remove(),w(this,qs,null),w(this,ka,null))}remove(){var t,e,n;if((t=a(this,_a))==null||t.abort(),w(this,_a,null),(e=a(this,qs))==null||e.remove(),w(this,qs,null),w(this,Go,!1),w(this,Mr,!1),(n=a(this,Ze))==null||n.remove(),w(this,Ze,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){w(this,Go,this.isVisible),a(this,Go)&&(a(this,Qe).hidden=!0)}maybeShow(){a(this,Xs)||(E(this,Xt,py).call(this),a(this,Go)&&(a(this,qs)||E(this,Xt,yy).call(this),w(this,Go,!1),a(this,Qe).hidden=!1))}get isVisible(){return a(this,Xs)?!1:a(this,Qe).hidden===!1}}Xs=new WeakMap,$o=new WeakMap,a0=new WeakMap,o0=new WeakMap,jh=new WeakMap,Hh=new WeakMap,Qe=new WeakMap,Rr=new WeakMap,Wo=new WeakMap,Ec=new WeakMap,$h=new WeakMap,Wh=new WeakMap,Mr=new WeakMap,qs=new WeakMap,_a=new WeakMap,ka=new WeakMap,Ze=new WeakMap,Ta=new WeakMap,Vo=new WeakMap,Zp=new WeakMap,Pa=new WeakMap,Vh=new WeakMap,xc=new WeakMap,Go=new WeakMap,kn=new WeakMap,Xo=new WeakMap,Xt=new WeakSet,py=function(){var e;if(a(this,_a))return;w(this,_a,new AbortController);const{signal:t}=a(this,_a);for(const n of this.trigger)n.addEventListener("click",a(this,jh),{signal:t}),n.addEventListener("pointerenter",a(this,o0),{signal:t}),n.addEventListener("pointerleave",a(this,a0),{signal:t}),n.classList.add("popupTriggerArea");for(const n of a(this,Ec))(e=n.container)==null||e.addEventListener("keydown",a(this,$o),{signal:t})},aA=function(){const t=a(this,Ec).find(e=>e.hasCommentButton);t&&w(this,Ta,t._normalizePoint(t.commentButtonPosition))},oA=function(){if(a(this,kn).extraPopupElement&&!a(this,kn).editor)return;a(this,Ze)||this.renderCommentButton();const[t,e]=a(this,Ta),{style:n}=a(this,Ze);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},lA=function(){a(this,kn).extraPopupElement||(a(this,Ze)||this.renderCommentButton(),a(this,Ze).style.backgroundColor=this.commentButtonColor||"")},gy=function(){const t=a(this,Pa),e=a(this,Rr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Pa).html||null},cA=function(){var t,e,n;return((n=(e=(t=a(this,Xt,gy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},Rx=function(){var t,e,n;return((n=(e=(t=a(this,Xt,gy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},Mx=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:a(this,Xt,Rx),fontSize:a(this,Xt,cA)?`calc(${a(this,Xt,cA)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return n},Lx=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Mr))&&E(this,Xt,my).call(this)},Dx=function(){if(a(this,ka)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:o}}}=a(this,$h);let l=!!a(this,Wh),u=l?a(this,Wh):a(this,Zp);for(const _ of a(this,Ec))if(!u||ct.intersect(_.data.rect,u)!==null){u=_.data.rect,l=!0;break}const h=ct.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,y=h[0]+p,v=h[1];w(this,ka,[100*(y-r)/e,100*(v-o)/n]);const{style:S}=a(this,Qe);S.left=`${a(this,ka)[0]}%`,S.top=`${a(this,ka)[1]}%`},my=function(){if(a(this,Xs)){a(this,Xs).toggleCommentPopup(this,!1);return}w(this,Mr,!a(this,Mr)),a(this,Mr)?(E(this,Xt,yy).call(this),a(this,Qe).addEventListener("click",a(this,jh)),a(this,Qe).addEventListener("keydown",a(this,$o))):(E(this,Xt,uA).call(this),a(this,Qe).removeEventListener("click",a(this,jh)),a(this,Qe).removeEventListener("keydown",a(this,$o)))},yy=function(){a(this,qs)||this.render(),this.isVisible?a(this,Mr)&&a(this,Qe).classList.add("focused"):(E(this,Xt,Dx).call(this),a(this,Qe).hidden=!1,a(this,Qe).style.zIndex=parseInt(a(this,Qe).style.zIndex)+1e3)},uA=function(){a(this,Qe).classList.remove("focused"),!(a(this,Mr)||!this.isVisible)&&(a(this,Qe).hidden=!0,a(this,Qe).style.zIndex=parseInt(a(this,Qe).style.zIndex)-1e3)};class Nx extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Wt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Jp;class nP extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,Jp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),l=w(this,Jp,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Jp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jp=new WeakMap;var tg;class sP extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,tg,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),l=e.borderStyle.width,u=w(this,tg,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",n-l),u.setAttribute("height",r-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}tg=new WeakMap;var eg;class iP extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,eg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,o=this.svgFactory.create(n,r,!0),l=e.borderStyle.width,u=w(this,eg,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",r/2),u.setAttribute("rx",n/2-l/2),u.setAttribute("ry",r/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,eg)}addHighlightArea(){this.container.classList.add("highlightArea")}}eg=new WeakMap;var ng;class Ix extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,ng,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:o},width:l,height:u}=this;if(!n)return this.container;const h=this.svgFactory.create(l,u,!0);let f=[];for(let y=0,v=n.length;y<v;y+=2){const S=n[y]-e[0],_=e[3]-n[y+1];f.push(`${S},${_}`)}f=f.join(" ");const p=w(this,ng,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",f),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}ng=new WeakMap;class rP extends Ix{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class aP extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var sg,Cc,ig,hA;class KA extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,ig);b(this,sg,null);b(this,Cc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Wt.HIGHLIGHT:Wt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:o,popupRef:l}}=this,{transform:u,width:h,height:f}=E(this,ig,hA).call(this,n,e),p=this.svgFactory.create(h,f,!0),y=w(this,sg,this.svgFactory.createElement("svg:g"));p.append(y),y.setAttribute("stroke-width",o.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",u);for(let v=0,S=r.length;v<S;v++){const _=this.svgFactory.createElement(this.svgElementName);a(this,Cc).push(_),_.setAttribute("points",r[v].join(",")),y.append(_)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:o}=e,l=a(this,sg);if(n>=0&&l.setAttribute("stroke-width",n||1),r)for(let u=0,h=a(this,Cc).length;u<h;u++)a(this,Cc)[u].setAttribute("points",r[u].join(","));if(o){const{transform:u,width:h,height:f}=E(this,ig,hA).call(this,this.data.rotation,o);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return a(this,Cc)}addHighlightArea(){this.container.classList.add("highlightArea")}}sg=new WeakMap,Cc=new WeakMap,ig=new WeakSet,hA=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Fx extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Wt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class oP extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class lP extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class cP extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Ox extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Wt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var rg,ag,dA;class uP extends Ge{constructor(e){var r;super(e,{isRenderable:!0});b(this,ag);b(this,rg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,ag,dA).bind(this)),w(this,rg,r);const{isMac:o}=Sn.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&E(this,ag,dA).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return a(this,rg)}addHighlightArea(){this.container.classList.add("highlightArea")}}rg=new WeakMap,ag=new WeakSet,dA=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var _c,kc,Gh,qo,og,Tc,Ys,lg,Ua,vy,pA;const iS=class iS{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){b(this,Ua);b(this,_c,null);b(this,kc,null);b(this,Gh,null);b(this,qo,new Map);b(this,og,null);b(this,Tc,null);b(this,Ys,[]);b(this,lg,!1);this.div=t,w(this,_c,e),w(this,kc,n),w(this,og,u||null),w(this,Tc,f||null),w(this,Gh,p||new GA),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return a(this,qo).size>0}async render(t){var u;const{annotations:e}=t,n=this.div;qc(n,this.viewport);const r=new Map,o=[],l={data:null,layer:n,linkService:a(this,Tc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new $y,annotationStorage:a(this,Gh),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const f=h.annotationType===ln.POPUP;if(f){const v=r.get(h.id);if(!v)continue;if(!this._commentManager){o.push(h);continue}l.elements=v}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;l.data=h;const p=dw.create(l);if(!p.isRenderable)continue;if(!f&&(a(this,Ys).push(p),h.popupRef)){const v=r.get(h.popupRef);v?v.push(p):r.set(h.popupRef,[p])}const y=p.render();h.hidden&&(y.style.visibility="hidden"),p._isEditable&&(a(this,qo).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}await E(this,Ua,vy).call(this);for(const h of o){const f=l.elements=r.get(h.id);l.data=h;const p=dw.create(l);if(!p.isRenderable)continue;const y=p.render();p.contentElement.id=`${Iu}${h.id}`,h.hidden&&(y.style.visibility="hidden"),f.at(-1).container.after(y)}E(this,Ua,pA).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:a(this,Tc),svgFactory:new $y,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=iS._defaultBorderStyle),e.data=n;const r=dw.create(e);r.isRenderable&&(r.render(),r.contentElement.id=`${Iu}${n.id}`,a(this,Ys).push(r))}await E(this,Ua,vy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,qc(e,{rotation:t.rotation}),E(this,Ua,pA).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,qo).values())}getEditableAnnotation(t){return a(this,qo).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:r}=t,o=new qT({data:{id:n,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:a(this,Tc),annotationStorage:a(this,Gh)});return o.render(),o.contentElement.id=`${Iu}${n}`,o.createOrUpdatePopup(),a(this,Ys).push(o),o}removeAnnotation(t){var r;const e=a(this,Ys).findIndex(o=>o.data.id===t);if(e<0)return;const[n]=a(this,Ys).splice(e,1);(r=a(this,_c))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);E(this,Ua,vy).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return jt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ku.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};_c=new WeakMap,kc=new WeakMap,Gh=new WeakMap,qo=new WeakMap,og=new WeakMap,Tc=new WeakMap,Ys=new WeakMap,lg=new WeakMap,Ua=new WeakSet,vy=async function(){var n,r,o;if(a(this,Ys).length===0)return;this.div.replaceChildren();const t=[];if(!a(this,lg)){w(this,lg,!0);for(const{contentElement:l,data:{id:u}}of a(this,Ys)){const h=l.id=`${Iu}${u}`;t.push((n=a(this,og))==null?void 0:n.getAriaAttributes(h).then(f=>{if(f)for(const[p,y]of f)l.setAttribute(p,y)}))}}a(this,Ys).sort(({data:{rect:[l,u,h,f]}},{data:{rect:[p,y,v,S]}})=>{if(l===h&&u===f)return 1;if(p===v&&y===S)return-1;const _=f,x=u,T=(u+f)/2,k=S,M=y,P=(y+S)/2;if(T>=k&&P<=x)return-1;if(P>=_&&T<=M)return 1;const L=(l+h)/2,D=(p+v)/2;return L-D});const e=document.createDocumentFragment();for(const l of a(this,Ys))e.append(l.container),this._commentManager?(o=((r=l.extraPopupElement)==null?void 0:r.popup)||l.popup)==null||o.renderCommentButton():l.extraPopupElement&&e.append(l.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),a(this,_c))for(const l of a(this,Ys))a(this,_c).addPointerInTextLayer(l.contentElement,!1)},pA=function(){var e;if(!a(this,kc))return;const t=this.div;for(const[n,r]of a(this,kc)){const o=t.querySelector(`[data-annotation-id="${n}"]`);if(!o)continue;r.className="annotationContent";const{firstChild:l}=o;l?l.nodeName==="CANVAS"?l.replaceWith(r):l.classList.contains("annotationContent")?l.after(r):l.before(r):o.append(r);const u=a(this,qo).get(n);u&&(u._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,o.id,r),u._hasNoCanvas=!1):u.canvas=r)}a(this,kc).clear()};let fA=iS;const Zm=/\r\n?|\n/g;var Ks,cg,Pc,Qs,un,Bx,Ux,zx,wy,za,Ay,Sy,jx,mA,Hx;const Ie=class Ie extends Le{constructor(e){super({...e,name:"freeTextEditor"});b(this,un);b(this,Ks,"");b(this,cg,`${this.id}-editor`);b(this,Pc,null);b(this,Qs);K(this,"_colorPicker",null);this.color=e.color||Ie._defaultColor||Le._defaultLineColor,w(this,Qs,e.fontSize||Ie._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Ie.prototype,n=l=>l.isEmpty(),r=Yc.TRANSLATE_SMALL,o=Yc.TRANSLATE_BIG;return jt(this,"_keyboardManager",new Mg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){Le.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case te.FREETEXT_SIZE:Ie._defaultFontSize=n;break;case te.FREETEXT_COLOR:Ie._defaultColor=n;break}}updateParams(e,n){switch(e){case te.FREETEXT_SIZE:E(this,un,Bx).call(this,n);break;case te.FREETEXT_COLOR:E(this,un,Ux).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[te.FREETEXT_SIZE,Ie._defaultFontSize],[te.FREETEXT_COLOR,Ie._defaultColor||Le._defaultLineColor]]}get propertiesToUpdate(){return[[te.FREETEXT_SIZE,a(this,Qs)],[te.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Hy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return te.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ie._internalPadding*e,-(Ie._internalPadding+a(this,Qs))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),w(this,Pc,new AbortController);const e=this._uiManager.combinedSignal(a(this,Pc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,cg)),this._isDraggable=!0,(e=a(this,Pc))==null||e.abort(),w(this,Pc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,Ks),n=w(this,Ks,E(this,un,zx).call(this).trimEnd());if(e===n)return;const r=o=>{if(w(this,Ks,o),!o){this.remove();return}E(this,un,Sy).call(this),this._uiManager.rebuild(this),E(this,un,wy).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),E(this,un,wy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ie._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,cg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${a(this,Qs)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[p,y]=this.pageDimensions,[v,S]=this.pageTranslation;let _,x;switch(this.rotation){case 0:_=e+(u[0]-v)/p,x=n+this.height-(u[1]-S)/y;break;case 90:_=e+(u[0]-v)/p,x=n-(u[1]-S)/y,[h,f]=[f,-h];break;case 180:_=e-this.width+(u[0]-v)/p,x=n-(u[1]-S)/y,[h,f]=[-h,-f];break;case 270:_=e+(u[0]-v-this.height*y)/p,x=n+(u[1]-S-this.width*p)/y,[h,f]=[-f,h];break}this.setAt(_*o,x*l,h,f)}else this._moveAfterPaste(e,n);E(this,un,Sy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,x,T;const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const o=E(_=Ie,za,mA).call(_,n.getData("text")||"").replaceAll(Zm,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:f}=u,p=[],y=[];if(h.nodeType===Node.TEXT_NODE){const k=h.parentElement;if(y.push(h.nodeValue.slice(f).replaceAll(Zm,"")),k!==this.editorDiv){let M=p;for(const P of this.editorDiv.childNodes){if(P===k){M=y;continue}M.push(E(x=Ie,za,Ay).call(x,P))}}p.push(h.nodeValue.slice(0,f).replaceAll(Zm,""))}else if(h===this.editorDiv){let k=p,M=0;for(const P of this.editorDiv.childNodes)M++===f&&(k=y),k.push(E(T=Ie,za,Ay).call(T,P))}w(this,Ks,`${p.join(`
`)}${o}${y.join(`
`)}`),E(this,un,Sy).call(this);const v=new Range;let S=Math.sumPrecise(p.map(k=>k.length));for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const M=k.nodeValue.length;if(S<=M){v.setStart(k,S),v.setEnd(k,S);break}S-=M}l.removeAllRanges(),l.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ie._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,r){var u;let o=null;if(e instanceof Nx){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:p,rotation:y,id:v,popupRef:S,richText:_,contentsObj:x,creationDate:T,modificationDate:k},textContent:M,textPosition:P,parent:{page:{pageNumber:L}}}=e;if(!M||M.length===0)return null;o=e={annotationType:Wt.FREETEXT,color:Array.from(f),fontSize:h,value:M.join(`
`),position:P,pageIndex:L-1,rect:p.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,popupRef:S,comment:(x==null?void 0:x.str)||null,richText:_,creationDate:T,modificationDate:k}}const l=await super.deserialize(e,n,r);return w(l,Qs,e.fontSize),l.color=ct.makeHexColor(...e.color),w(l,Ks,E(u=Ie,za,mA).call(u,e.value)),l._initialData=o,e.comment&&l.setCommentData(e),l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Le._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:n,fontSize:a(this,Qs),value:E(this,un,jx).call(this)});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!E(this,un,Hx).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${a(this,Qs)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const o of a(this,Ks).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),n.append(l)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,Ks)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Ks=new WeakMap,cg=new WeakMap,Pc=new WeakMap,Qs=new WeakMap,un=new WeakSet,Bx=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-a(this,Qs))*this.parentScale),w(this,Qs,o),E(this,un,wy).call(this)},r=a(this,Qs);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Ux=function(e){const n=o=>{this.color=o,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},zx=function(){var r;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(E(r=Ie,za,Ay).call(r,o)),n=o);return e.join(`
`)},wy=function(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,u=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),r=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()},za=new WeakSet,Ay=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Zm,"")},Sy=function(){if(this.editorDiv.replaceChildren(),!!a(this,Ks))for(const e of a(this,Ks).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},jx=function(){return a(this,Ks).replaceAll(""," ")},mA=function(e){return e.replaceAll(" ","")},Hx=function(e){const{value:n,fontSize:r,color:o,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((u,h)=>u!==o[h])||e.pageIndex!==l},b(Ie,za),K(Ie,"_freeTextDefaultContent",""),K(Ie,"_internalPadding",0),K(Ie,"_defaultColor",null),K(Ie,"_defaultFontSize",10),K(Ie,"_type","freetext"),K(Ie,"_editorType",Wt.FREETEXT);let gA=Ie;class gt{toSVGPath(){Te("Abstract method `toSVGPath` must be implemented.")}get box(){Te("Abstract getter `box` must be implemented.")}serialize(t,e){Te("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,o,l){l||(l=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u]*r,l[u+1]=n+t[u+1]*o;return l}static _rescaleAndSwap(t,e,n,r,o,l){l||(l=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u+1]*r,l[u+1]=n+t[u]*o;return l}static _translate(t,e,n,r){r||(r=new Float32Array(t.length));for(let o=0,l=t.length;o<l;o+=2)r[o]=e+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,o){switch(o){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,o,l){return[(t+5*n)/6,(e+5*r)/6,(5*n+o)/6,(5*r+l)/6,(n+o)/2,(r+l)/2]}}K(gt,"PRECISION",1e-4);var Zs,tr,Xh,qh,Lr,Kt,Rc,Mc,ug,hg,Yh,Kh,Yo,dg,l0,c0,An,kf,$x,Wx,Vx,Gx,Xx,qx;const na=class na{constructor({x:t,y:e},n,r,o,l,u=0){b(this,An);b(this,Zs);b(this,tr,[]);b(this,Xh);b(this,qh);b(this,Lr,[]);b(this,Kt,new Float32Array(18));b(this,Rc);b(this,Mc);b(this,ug);b(this,hg);b(this,Yh);b(this,Kh);b(this,Yo,[]);w(this,Zs,n),w(this,Kh,o*r),w(this,qh,l),a(this,Kt).set([NaN,NaN,NaN,NaN,t,e],6),w(this,Xh,u),w(this,hg,a(na,dg)*r),w(this,ug,a(na,c0)*r),w(this,Yh,r),a(this,Yo).push(t,e)}isEmpty(){return isNaN(a(this,Kt)[8])}add({x:t,y:e}){var Y;w(this,Rc,t),w(this,Mc,e);const[n,r,o,l]=a(this,Zs);let[u,h,f,p]=a(this,Kt).subarray(8,12);const y=t-f,v=e-p,S=Math.hypot(y,v);if(S<a(this,ug))return!1;const _=S-a(this,hg),x=_/S,T=x*y,k=x*v;let M=u,P=h;u=f,h=p,f+=T,p+=k,(Y=a(this,Yo))==null||Y.push(t,e);const L=-k/_,D=T/_,I=L*a(this,Kh),U=D*a(this,Kh);return a(this,Kt).set(a(this,Kt).subarray(2,8),0),a(this,Kt).set([f+I,p+U],4),a(this,Kt).set(a(this,Kt).subarray(14,18),12),a(this,Kt).set([f-I,p-U],16),isNaN(a(this,Kt)[6])?(a(this,Lr).length===0&&(a(this,Kt).set([u+I,h+U],2),a(this,Lr).push(NaN,NaN,NaN,NaN,(u+I-n)/o,(h+U-r)/l),a(this,Kt).set([u-I,h-U],14),a(this,tr).push(NaN,NaN,NaN,NaN,(u-I-n)/o,(h-U-r)/l)),a(this,Kt).set([M,P,u,h,f,p],6),!this.isEmpty()):(a(this,Kt).set([M,P,u,h,f,p],6),Math.abs(Math.atan2(P-h,M-u)-Math.atan2(k,T))<Math.PI/2?([u,h,f,p]=a(this,Kt).subarray(2,6),a(this,Lr).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((h+p)/2-r)/l),[u,h,M,P]=a(this,Kt).subarray(14,18),a(this,tr).push(NaN,NaN,NaN,NaN,((M+u)/2-n)/o,((P+h)/2-r)/l),!0):([M,P,u,h,f,p]=a(this,Kt).subarray(0,6),a(this,Lr).push(((M+5*u)/6-n)/o,((P+5*h)/6-r)/l,((5*u+f)/6-n)/o,((5*h+p)/6-r)/l,((u+f)/2-n)/o,((h+p)/2-r)/l),[f,p,u,h,M,P]=a(this,Kt).subarray(12,18),a(this,tr).push(((M+5*u)/6-n)/o,((P+5*h)/6-r)/l,((5*u+f)/6-n)/o,((5*h+p)/6-r)/l,((u+f)/2-n)/o,((h+p)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Lr),e=a(this,tr);if(isNaN(a(this,Kt)[6])&&!this.isEmpty())return E(this,An,$x).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);E(this,An,Vx).call(this,n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return E(this,An,Wx).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,r,o,l){return new Yx(t,e,n,r,o,l)}getOutlines(){var y;const t=a(this,Lr),e=a(this,tr),n=a(this,Kt),[r,o,l,u]=a(this,Zs),h=new Float32Array((((y=a(this,Yo))==null?void 0:y.length)??0)+2);for(let v=0,S=h.length-2;v<S;v+=2)h[v]=(a(this,Yo)[v]-r)/l,h[v+1]=(a(this,Yo)[v+1]-o)/u;if(h[h.length-2]=(a(this,Rc)-r)/l,h[h.length-1]=(a(this,Mc)-o)/u,isNaN(n[6])&&!this.isEmpty())return E(this,An,Gx).call(this,h);const f=new Float32Array(a(this,Lr).length+24+a(this,tr).length);let p=t.length;for(let v=0;v<p;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}p=E(this,An,qx).call(this,f,p);for(let v=e.length-6;v>=6;v-=6)for(let S=0;S<6;S+=2){if(isNaN(e[v+S])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[v+S],f[p+1]=e[v+S+1],p+=2}return E(this,An,Xx).call(this,f,p),this.newFreeDrawOutline(f,h,a(this,Zs),a(this,Yh),a(this,Xh),a(this,qh))}};Zs=new WeakMap,tr=new WeakMap,Xh=new WeakMap,qh=new WeakMap,Lr=new WeakMap,Kt=new WeakMap,Rc=new WeakMap,Mc=new WeakMap,ug=new WeakMap,hg=new WeakMap,Yh=new WeakMap,Kh=new WeakMap,Yo=new WeakMap,dg=new WeakMap,l0=new WeakMap,c0=new WeakMap,An=new WeakSet,kf=function(){const t=a(this,Kt).subarray(4,6),e=a(this,Kt).subarray(16,18),[n,r,o,l]=a(this,Zs);return[(a(this,Rc)+(t[0]-e[0])/2-n)/o,(a(this,Mc)+(t[1]-e[1])/2-r)/l,(a(this,Rc)+(e[0]-t[0])/2-n)/o,(a(this,Mc)+(e[1]-t[1])/2-r)/l]},$x=function(){const[t,e,n,r]=a(this,Zs),[o,l,u,h]=E(this,An,kf).call(this);return`M${(a(this,Kt)[2]-t)/n} ${(a(this,Kt)[3]-e)/r} L${(a(this,Kt)[4]-t)/n} ${(a(this,Kt)[5]-e)/r} L${o} ${l} L${u} ${h} L${(a(this,Kt)[16]-t)/n} ${(a(this,Kt)[17]-e)/r} L${(a(this,Kt)[14]-t)/n} ${(a(this,Kt)[15]-e)/r} Z`},Wx=function(t){const e=a(this,tr);t.push(`L${e[4]} ${e[5]} Z`)},Vx=function(t){const[e,n,r,o]=a(this,Zs),l=a(this,Kt).subarray(4,6),u=a(this,Kt).subarray(16,18),[h,f,p,y]=E(this,An,kf).call(this);t.push(`L${(l[0]-e)/r} ${(l[1]-n)/o} L${h} ${f} L${p} ${y} L${(u[0]-e)/r} ${(u[1]-n)/o}`)},Gx=function(t){const e=a(this,Kt),[n,r,o,l]=a(this,Zs),[u,h,f,p]=E(this,An,kf).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-r)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-r)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-r)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-r)/l],0),this.newFreeDrawOutline(y,t,a(this,Zs),a(this,Yh),a(this,Xh),a(this,qh))},Xx=function(t,e){const n=a(this,tr);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},qx=function(t,e){const n=a(this,Kt).subarray(4,6),r=a(this,Kt).subarray(16,18),[o,l,u,h]=a(this,Zs),[f,p,y,v]=E(this,An,kf).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/h],e),e+=24},b(na,dg,8),b(na,l0,2),b(na,c0,a(na,dg)+a(na,l0));let Wy=na;var Qh,Lc,Ra,fg,Js,pg,sn,u0,Kx;class Yx extends gt{constructor(e,n,r,o,l,u){super();b(this,u0);b(this,Qh);b(this,Lc,new Float32Array(4));b(this,Ra);b(this,fg);b(this,Js);b(this,pg);b(this,sn);w(this,sn,e),w(this,Js,n),w(this,Qh,r),w(this,pg,o),w(this,Ra,l),w(this,fg,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,u0,Kx).call(this,u);const[h,f,p,y]=a(this,Lc);for(let v=0,S=e.length;v<S;v+=2)e[v]=(e[v]-h)/p,e[v+1]=(e[v+1]-f)/y;for(let v=0,S=n.length;v<S;v+=2)n[v]=(n[v]-h)/p,n[v+1]=(n[v+1]-f)/y}toSVGPath(){const e=[`M${a(this,sn)[4]} ${a(this,sn)[5]}`];for(let n=6,r=a(this,sn).length;n<r;n+=6){if(isNaN(a(this,sn)[n])){e.push(`L${a(this,sn)[n+4]} ${a(this,sn)[n+5]}`);continue}e.push(`C${a(this,sn)[n]} ${a(this,sn)[n+1]} ${a(this,sn)[n+2]} ${a(this,sn)[n+3]} ${a(this,sn)[n+4]} ${a(this,sn)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,o],l){const u=r-e,h=o-n;let f,p;switch(l){case 0:f=gt._rescale(a(this,sn),e,o,u,-h),p=gt._rescale(a(this,Js),e,o,u,-h);break;case 90:f=gt._rescaleAndSwap(a(this,sn),e,n,u,h),p=gt._rescaleAndSwap(a(this,Js),e,n,u,h);break;case 180:f=gt._rescale(a(this,sn),r,n,-u,h),p=gt._rescale(a(this,Js),r,n,-u,h);break;case 270:f=gt._rescaleAndSwap(a(this,sn),r,o,-u,-h),p=gt._rescaleAndSwap(a(this,Js),r,o,-u,-h);break}return{outline:Array.from(f),points:[Array.from(p)]}}get box(){return a(this,Lc)}newOutliner(e,n,r,o,l,u=0){return new Wy(e,n,r,o,l,u)}getNewOutline(e,n){const[r,o,l,u]=a(this,Lc),[h,f,p,y]=a(this,Qh),v=l*p,S=u*y,_=r*p+h,x=o*y+f,T=this.newOutliner({x:a(this,Js)[0]*v+_,y:a(this,Js)[1]*S+x},a(this,Qh),a(this,pg),e,a(this,fg),n??a(this,Ra));for(let k=2;k<a(this,Js).length;k+=2)T.add({x:a(this,Js)[k]*v+_,y:a(this,Js)[k+1]*S+x});return T.getOutlines()}}Qh=new WeakMap,Lc=new WeakMap,Ra=new WeakMap,fg=new WeakMap,Js=new WeakMap,pg=new WeakMap,sn=new WeakMap,u0=new WeakSet,Kx=function(e){const n=a(this,sn);let r=n[4],o=n[5];const l=[r,o,r,o];let u=r,h=o,f=r,p=o;const y=e?Math.max:Math.min,v=new Float32Array(4);for(let _=6,x=n.length;_<x;_+=6){const T=n[_+4],k=n[_+5];isNaN(n[_])?(ct.pointBoundingBox(T,k,l),h>k?(u=T,h=k):h===k&&(u=y(u,T)),p<k?(f=T,p=k):p===k&&(f=y(f,T))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,ct.bezierBoundingBox(r,o,...n.slice(_,_+6),v),ct.rectBoundingBox(v[0],v[1],v[2],v[3],l),h>v[1]?(u=v[0],h=v[1]):h===v[1]&&(u=y(u,v[0])),p<v[3]?(f=v[2],p=v[3]):p===v[3]&&(f=y(f,v[2]))),r=T,o=k}const S=a(this,Lc);S[0]=l[0]-a(this,Ra),S[1]=l[1]-a(this,Ra),S[2]=l[2]-l[0]+2*a(this,Ra),S[3]=l[3]-l[1]+2*a(this,Ra),this.firstPoint=[u,h],this.lastPoint=[f,p]};var gg,mg,yg,Ko,er,ps,Qx,by,Zx,Jx,vA;class yA{constructor(t,e=0,n=0,r=!0){b(this,ps);b(this,gg);b(this,mg);b(this,yg);b(this,Ko,[]);b(this,er,[]);const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:T,width:k,height:M}of t){const P=Math.floor((x-e)/l)*l,L=Math.ceil((x+k+e)/l)*l,D=Math.floor((T-e)/l)*l,I=Math.ceil((T+M+e)/l)*l,U=[P,D,I,!0],G=[L,D,I,!1];a(this,Ko).push(U,G),ct.rectBoundingBox(P,D,L,I,o)}const u=o[2]-o[0]+2*n,h=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n;let y=r?-1/0:1/0,v=1/0;const S=a(this,Ko).at(r?-1:-2),_=[S[0],S[2]];for(const x of a(this,Ko)){const[T,k,M,P]=x;!P&&r?k<v?(v=k,y=T):k===v&&(y=Math.max(y,T)):P&&!r&&(k<v?(v=k,y=T):k===v&&(y=Math.min(y,T))),x[0]=(T-f)/u,x[1]=(k-p)/h,x[2]=(M-p)/h}w(this,gg,new Float32Array([f,p,u,h])),w(this,mg,[y,v]),w(this,yg,_)}getOutlines(){a(this,Ko).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of a(this,Ko))e[3]?(t.push(...E(this,ps,vA).call(this,e)),E(this,ps,Zx).call(this,e)):(E(this,ps,Jx).call(this,e),t.push(...E(this,ps,vA).call(this,e)));return E(this,ps,Qx).call(this,t)}}gg=new WeakMap,mg=new WeakMap,yg=new WeakMap,Ko=new WeakMap,er=new WeakMap,ps=new WeakSet,Qx=function(t){const e=[],n=new Set;for(const l of t){const[u,h,f]=l;e.push([u,h,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const h=e[l][2],f=e[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[u,h,f,p,y]=l;n.delete(l);let v=u,S=h;for(o=[u,f],r.push(o);;){let _;if(n.has(p))_=p;else if(n.has(y))_=y;else break;n.delete(_),[u,h,f,p,y]=_,v!==u&&(o.push(v,S,u,S===h?h:f),v=u),S=S===h?f:h}o.push(v,S)}return new hP(r,a(this,gg),a(this,mg),a(this,yg))},by=function(t){const e=a(this,er);let n=0,r=e.length-1;for(;n<=r;){const o=n+r>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:r=o-1}return r+1},Zx=function([,t,e]){const n=E(this,ps,by).call(this,t);a(this,er).splice(n,0,[t,e])},Jx=function([,t,e]){const n=E(this,ps,by).call(this,t);for(let r=n;r<a(this,er).length;r++){const[o,l]=a(this,er)[r];if(o!==t)break;if(o===t&&l===e){a(this,er).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=a(this,er)[r];if(o!==t)break;if(o===t&&l===e){a(this,er).splice(r,1);return}}},vA=function(t){const[e,n,r]=t,o=[[e,n,r]],l=E(this,ps,by).call(this,r);for(let u=0;u<l;u++){const[h,f]=a(this,er)[u];for(let p=0,y=o.length;p<y;p++){const[,v,S]=o[p];if(!(f<=v||S<=h)){if(v>=h){if(S>f)o[p][1]=f;else{if(y===1)return[];o.splice(p,1),p--,y--}continue}o[p][2]=h,S>f&&o.push([e,f,S])}}}return o};var vg,Zh;class hP extends gt{constructor(e,n,r,o){super();b(this,vg);b(this,Zh);w(this,Zh,e),w(this,vg,n),this.firstPoint=r,this.lastPoint=o}toSVGPath(){const e=[];for(const n of a(this,Zh)){let[r,o]=n;e.push(`M${r} ${o}`);for(let l=2;l<n.length;l+=2){const u=n[l],h=n[l+1];u===r?(e.push(`V${h}`),o=h):h===o&&(e.push(`H${u}`),r=u)}e.push("Z")}return e.join(" ")}serialize([e,n,r,o],l){const u=[],h=r-e,f=o-n;for(const p of a(this,Zh)){const y=new Array(p.length);for(let v=0;v<p.length;v+=2)y[v]=e+p[v]*h,y[v+1]=o-p[v+1]*f;u.push(y)}return u}get box(){return a(this,vg)}get classNamesForOutlining(){return["highlightOutline"]}}vg=new WeakMap,Zh=new WeakMap;class wA extends Wy{newFreeDrawOutline(t,e,n,r,o,l){return new dP(t,e,n,r,o,l)}}class dP extends Yx{newOutliner(t,e,n,r,o,l=0){return new wA(t,e,n,r,o,l)}}var Jh,wg,Ma,Dc,Ag,Rs,Sg,bg,Nc,ti,ei,Un,td,ed,ts,nd,Pi,Eg,Gt,AA,Ey,tC,eC,nC,SA,Pl,Mi,Du,sC,xy,Cy,iC,rC,aC,oC,lC;const ue=class ue extends Le{constructor(e){super({...e,name:"highlightEditor"});b(this,Gt);b(this,Jh,null);b(this,wg,0);b(this,Ma);b(this,Dc,null);b(this,Ag,null);b(this,Rs,null);b(this,Sg,null);b(this,bg,0);b(this,Nc,null);b(this,ti,null);b(this,ei,null);b(this,Un,!1);b(this,td,null);b(this,ed,null);b(this,ts,null);b(this,nd,"");b(this,Pi);b(this,Eg,"");this.color=e.color||ue._defaultColor,w(this,Pi,e.thickness||ue._defaultThickness),this.opacity=e.opacity||ue._defaultOpacity,w(this,Ma,e.boxes||null),w(this,Eg,e.methodOfCreation||""),w(this,nd,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(w(this,Un,!0),E(this,Gt,Ey).call(this,e),E(this,Gt,Pl).call(this)):a(this,Ma)&&(w(this,Jh,e.anchorNode),w(this,wg,e.anchorOffset),w(this,Sg,e.focusNode),w(this,bg,e.focusOffset),E(this,Gt,AA).call(this),E(this,Gt,Pl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=ue.prototype;return jt(this,"_keyboardManager",new Mg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Un)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,Pi),methodOfCreation:a(this,Eg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var r;Le.initialize(e,n),ue._defaultColor||(ue._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case te.HIGHLIGHT_COLOR:ue._defaultColor=n;break;case te.HIGHLIGHT_THICKNESS:ue._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return a(this,ed)}get commentButtonPosition(){return a(this,td)}updateParams(e,n){switch(e){case te.HIGHLIGHT_COLOR:E(this,Gt,tC).call(this,n);break;case te.HIGHLIGHT_THICKNESS:E(this,Gt,eC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[te.HIGHLIGHT_COLOR,ue._defaultColor],[te.HIGHLIGHT_THICKNESS,ue._defaultThickness]]}get propertiesToUpdate(){return[[te.HIGHLIGHT_COLOR,this.color||ue._defaultColor],[te.HIGHLIGHT_THICKNESS,a(this,Pi)||ue._defaultThickness],[te.HIGHLIGHT_FREE,a(this,Un)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(a(this,ei),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=a(this,Ag))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",w(this,Ag,new jy({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Gt,Cy).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,E(this,Gt,Cy).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,Gt,SA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Gt,Pl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?E(this,Gt,SA).call(this):e&&(E(this,Gt,Pl).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,l,u;const{drawLayer:n}=this.parent;let r;a(this,Un)?(e=(e-this.rotation+360)%360,r=E(o=ue,Mi,Du).call(o,a(this,ti).box,e)):r=E(l=ue,Mi,Du).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(a(this,ei),{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(a(this,ts),{bbox:E(u=ue,Mi,Du).call(u,a(this,Rs).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,nd)&&(e.setAttribute("aria-label",a(this,nd)),e.setAttribute("role","mark")),a(this,Un)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,Gt,sC).bind(this),{signal:this._uiManager._signal});const n=w(this,Nc,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=a(this,Dc),this.setDims(),kE(this,a(this,Nc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,ts),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,ts),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,Gt,xy).call(this,!0);break;case 1:case 3:E(this,Gt,xy).call(this,!1);break}}select(){var e;super.select(),a(this,ts)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,ts),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,ts)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,ts),{rootClass:{selected:!1}}),a(this,Un)||E(this,Gt,xy).call(this,!1))}get _mustFixPosition(){return!a(this,Un)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,ei),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,ts),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:r,x:o,y:l}){const{x:u,y:h,width:f,height:p}=r.getBoundingClientRect(),y=new AbortController,v=e.combinedSignal(y),S=_=>{y.abort(),E(this,Mi,oC).call(this,e,_)};window.addEventListener("blur",S,{signal:v}),window.addEventListener("pointerup",S,{signal:v}),window.addEventListener("pointerdown",tn,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Di,{signal:v}),r.addEventListener("pointermove",E(this,Mi,aC).bind(this,e),{signal:v}),this._freeHighlight=new wA({x:o,y:l},[u,h,f,p],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,r){var x,T,k,M;let o=null;if(e instanceof Fx){const{data:{quadPoints:P,rect:L,rotation:D,id:I,color:U,opacity:G,popupRef:Y,richText:nt,contentsObj:Z,creationDate:kt,modificationDate:Tt},parent:{page:{pageNumber:St}}}=e;o=e={annotationType:Wt.HIGHLIGHT,color:Array.from(U),opacity:G,quadPoints:P,boxes:null,pageIndex:St-1,rect:L.slice(0),rotation:D,annotationElementId:I,id:I,deleted:!1,popupRef:Y,richText:nt,comment:(Z==null?void 0:Z.str)||null,creationDate:kt,modificationDate:Tt}}else if(e instanceof KA){const{data:{inkLists:P,rect:L,rotation:D,id:I,color:U,borderStyle:{rawWidth:G},popupRef:Y,richText:nt,contentsObj:Z,creationDate:kt,modificationDate:Tt},parent:{page:{pageNumber:St}}}=e;o=e={annotationType:Wt.HIGHLIGHT,color:Array.from(U),thickness:G,inkLists:P,boxes:null,pageIndex:St-1,rect:L.slice(0),rotation:D,annotationElementId:I,id:I,deleted:!1,popupRef:Y,richText:nt,comment:(Z==null?void 0:Z.str)||null,creationDate:kt,modificationDate:Tt}}const{color:l,quadPoints:u,inkLists:h,opacity:f}=e,p=await super.deserialize(e,n,r);p.color=ct.makeHexColor(...l),p.opacity=f||1,h&&w(p,Pi,e.thickness),p._initialData=o,e.comment&&p.setCommentData(e);const[y,v]=p.pageDimensions,[S,_]=p.pageTranslation;if(u){const P=w(p,Ma,[]);for(let L=0;L<u.length;L+=8)P.push({x:(u[L]-S)/y,y:1-(u[L+1]-_)/v,width:(u[L+2]-u[L])/y,height:(u[L+1]-u[L+5])/v});E(x=p,Gt,AA).call(x),E(T=p,Gt,Pl).call(T),p.rotate(p.rotation)}else if(h){w(p,Un,!0);const P=h[0],L={x:P[0]-S,y:v-(P[1]-_)},D=new wA(L,[0,0,y,v],1,a(p,Pi)/2,!0,.001);for(let G=0,Y=P.length;G<Y;G+=2)L.x=P[G]-S,L.y=v-(P[G+1]-_),D.add(L);const{id:I,clipPathId:U}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:D.toSVGPath()}},!0,!0);E(k=p,Gt,Ey).call(k,{highlightOutlines:D.getOutlines(),highlightId:I,clipPathId:U}),E(M=p,Gt,Pl).call(M),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Le._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:n,opacity:this.opacity,thickness:a(this,Pi),quadPoints:E(this,Gt,iC).call(this),outlines:E(this,Gt,rC).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!E(this,Gt,lC).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Jh=new WeakMap,wg=new WeakMap,Ma=new WeakMap,Dc=new WeakMap,Ag=new WeakMap,Rs=new WeakMap,Sg=new WeakMap,bg=new WeakMap,Nc=new WeakMap,ti=new WeakMap,ei=new WeakMap,Un=new WeakMap,td=new WeakMap,ed=new WeakMap,ts=new WeakMap,nd=new WeakMap,Pi=new WeakMap,Eg=new WeakMap,Gt=new WeakSet,AA=function(){const e=new yA(a(this,Ma),.001);w(this,ti,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,ti).box;const n=new yA(a(this,Ma),.0025,.001,this._uiManager.direction==="ltr");w(this,Rs,n.getOutlines());const{firstPoint:r}=a(this,ti);w(this,td,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:o}=a(this,Rs);w(this,ed,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Ey=function({highlightOutlines:e,highlightId:n,clipPathId:r}){var v,S;if(w(this,ti,e),w(this,Rs,e.getNewOutline(a(this,Pi)/2+1.5,.0025)),n>=0)w(this,ei,n),w(this,Dc,r),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),w(this,ts,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Rs).box,path:{d:a(this,Rs).toSVGPath()}},!0));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,ei),{bbox:E(v=ue,Mi,Du).call(v,a(this,ti).box,(_-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,ts),{bbox:E(S=ue,Mi,Du).call(S,a(this,Rs).box,_),path:{d:a(this,Rs).toSVGPath()}})}const[l,u,h,f]=e.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=h,this.height=f;break;case 90:{const[_,x]=this.parentDimensions;this.x=u,this.y=1-l,this.width=h*x/_,this.height=f*_/x;break}case 180:this.x=1-l,this.y=1-u,this.width=h,this.height=f;break;case 270:{const[_,x]=this.parentDimensions;this.x=1-u,this.y=l,this.width=h*x/_,this.height=f*_/x;break}}const{firstPoint:p}=e;w(this,td,[(p[0]-l)/h,(p[1]-u)/f]);const{lastPoint:y}=a(this,Rs);w(this,ed,[(y[0]-l)/h,(y[1]-u)/f])},tC=function(e){const n=(l,u)=>{this.color=l,this.opacity=u,this.onUpdatedColor()},r=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,e,ue._defaultOpacity),undo:n.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},eC=function(e){const n=a(this,Pi),r=o=>{w(this,Pi,o),E(this,Gt,nC).call(this,o)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},nC=function(e){a(this,Un)&&(E(this,Gt,Ey).call(this,{highlightOutlines:a(this,ti).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},SA=function(){a(this,ei)===null||!this.parent||(this.parent.drawLayer.remove(a(this,ei)),w(this,ei,null),this.parent.drawLayer.remove(a(this,ts)),w(this,ts,null))},Pl=function(e=this.parent){a(this,ei)===null&&({id:gn(this,ei)._,clipPathId:gn(this,Dc)._}=e.drawLayer.draw({bbox:a(this,ti).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,Un)},path:{d:a(this,ti).toSVGPath()}},!1,!0),w(this,ts,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Un)},bbox:a(this,Rs).box,path:{d:a(this,Rs).toSVGPath()}},a(this,Un))),a(this,Nc)&&(a(this,Nc).style.clipPath=a(this,Dc)))},Mi=new WeakSet,Du=function([e,n,r,o],l){switch(l){case 90:return[1-n-o,e,o,r];case 180:return[1-e-r,1-n-o,r,o];case 270:return[n,1-e-r,o,r]}return[e,n,r,o]},sC=function(e){ue._keyboardManager.exec(this,e)},xy=function(e){if(!a(this,Jh))return;const n=window.getSelection();e?n.setPosition(a(this,Jh),a(this,wg)):n.setPosition(a(this,Sg),a(this,bg))},Cy=function(){return a(this,Un)?this.rotation:0},iC=function(){if(a(this,Un))return null;const[e,n]=this.pageDimensions,[r,o]=this.pageTranslation,l=a(this,Ma),u=new Float32Array(l.length*8);let h=0;for(const{x:f,y:p,width:y,height:v}of l){const S=f*e+r,_=(1-p)*n+o;u[h]=u[h+4]=S,u[h+1]=u[h+3]=_,u[h+2]=u[h+6]=S+y*e,u[h+5]=u[h+7]=_-v*n,h+=8}return u},rC=function(e){return a(this,ti).serialize(e,E(this,Gt,Cy).call(this))},aC=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},oC=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},lC=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((r,o)=>r!==n[o])},b(ue,Mi),K(ue,"_defaultColor",null),K(ue,"_defaultOpacity",1),K(ue,"_defaultThickness",12),K(ue,"_type","highlight"),K(ue,"_editorType",Wt.HIGHLIGHT),K(ue,"_freeHighlightId",-1),K(ue,"_freeHighlight",null),K(ue,"_freeHighlightClipId","");let Vy=ue;var Ic;class cC{constructor(){b(this,Ic,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){a(this,Ic)[t]=e}toSVGProperties(){const t=a(this,Ic);return w(this,Ic,Object.create(null)),{root:t}}reset(){w(this,Ic,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Te("Not implemented")}}Ic=new WeakMap;var ni,sd,Tn,Fc,Oc,ie,bA,EA,xA,Tf,uC,_y,Pf,Nu;const Jt=class Jt extends Le{constructor(e){super(e);b(this,ie);b(this,ni,null);b(this,sd);K(this,"_colorPicker",null);K(this,"_drawId",null);w(this,sd,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(E(this,ie,bA).call(this,e),E(this,ie,Tf).call(this))}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[o,l]of Object.entries(n))r.has(o)?Object.assign(e[o],l):e[o]=l;return e}static getDefaultDrawingOptions(e){Te("Not implemented")}static get typesMap(){Te("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(a(Jt,Tn).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,o]of this.typesMap)e.push([r,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,o]of this.constructor.typesMap)e.push([r,n[o]]);return e}_updateProperty(e,n,r){const o=this._drawingOptions,l=o[n],u=h=>{var p;o.updateProperty(n,h);const f=a(this,ni).updateProperty(n,h);f&&E(this,ie,Pf).call(this,f),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,r),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Jt._mergeSVGProperties(a(this,ni).getPathResizingSVGProperties(E(this,ie,_y).call(this)),{bbox:E(this,ie,Nu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Jt._mergeSVGProperties(a(this,ni).getPathResizedSVGProperties(E(this,ie,_y).call(this)),{bbox:E(this,ie,Nu).call(this)}))}_onTranslating(e,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,ie,Nu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Jt._mergeSVGProperties(a(this,ni).getPathTranslatedSVGProperties(E(this,ie,_y).call(this),this.parentDimensions),{bbox:E(this,ie,Nu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,sd)&&(w(this,sd,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,ie,xA).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,ie,Tf).call(this),E(this,ie,Pf).call(this,a(this,ni).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,ie,xA).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,ie,Tf).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Jt._mergeSVGProperties({bbox:E(this,ie,Nu).call(this)},a(this,ni).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,ie,Pf).call(this,a(this,ni).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const o=document.createElement("div");return r.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,o,l){Te("Not implemented")}static startDrawing(e,n,r,o){var T;const{target:l,offsetX:u,offsetY:h,pointerId:f,pointerType:p}=o;if(Yn.isInitializedAndDifferentPointerType(p))return;const{viewport:{rotation:y}}=e,{width:v,height:S}=l.getBoundingClientRect(),_=w(Jt,Fc,new AbortController),x=e.combinedSignal(_);if(Yn.setPointer(p,f),window.addEventListener("pointerup",k=>{Yn.isSamePointerIdOrRemove(k.pointerId)&&this._endDraw(k)},{signal:x}),window.addEventListener("pointercancel",k=>{Yn.isSamePointerIdOrRemove(k.pointerId)&&this._currentParent.endDrawingSession()},{signal:x}),window.addEventListener("pointerdown",k=>{Yn.isSamePointerType(k.pointerType)&&(Yn.initializeAndAddPointerId(k.pointerId),a(Jt,Tn).isCancellable()&&(a(Jt,Tn).removeLastElement(),a(Jt,Tn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Di,{signal:x}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),l.addEventListener("touchmove",k=>{Yn.isSameTimeStamp(k.timeStamp)&&tn(k)},{signal:x}),e.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),a(Jt,Tn)){e.drawLayer.updateProperties(this._currentDrawId,a(Jt,Tn).startNew(u,h,v,S,y));return}n.updateUIForDefaultProperties(this),w(Jt,Tn,this.createDrawerInstance(u,h,v,S,y)),w(Jt,Oc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(Jt,Oc).toSVGProperties(),a(Jt,Tn).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Yn.isSameTimeStamp(e.timeStamp),!a(Jt,Tn))return;const{offsetX:n,offsetY:r,pointerId:o}=e;if(Yn.isSamePointerId(o)){if(Yn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(Jt,Tn).add(n,r)),Yn.setTimeStamp(e.timeStamp),tn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,w(Jt,Tn,null),w(Jt,Oc,null),Yn.clearTimeStamp()),a(Jt,Fc)&&(a(Jt,Fc).abort(),w(Jt,Fc,null),Yn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,a(Jt,Tn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=a(Jt,Tn),o=this._currentDrawId,l=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,r.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:te.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(te.DRAW_STEP),!a(Jt,Tn).isEmpty()){const{pageDimensions:[r,o],scale:l}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(Jt,Tn).getOutlines(r*l,o*l,l,this._INNER_MARGIN),drawingOptions:a(Jt,Oc),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,o,l,u){Te("Not implemented")}static async deserialize(e,n,r){var y,v;const{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}=n.viewport,f=this.deserializeDraw(u,h,o,l,this._INNER_MARGIN,e),p=await super.deserialize(e,n,r);return p.createDrawingOptions(e),E(y=p,ie,bA).call(y,{drawOutlines:f}),E(v=p,ie,Tf).call(v),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[n,r]=this.pageTranslation,[o,l]=this.pageDimensions;return a(this,ni).serialize([n,r,o,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ni=new WeakMap,sd=new WeakMap,Tn=new WeakMap,Fc=new WeakMap,Oc=new WeakMap,ie=new WeakSet,bA=function({drawOutlines:e,drawId:n,drawingOptions:r}){w(this,ni,e),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=E(this,ie,EA).call(this,e,this.parent),E(this,ie,Pf).call(this,e.box)},EA=function(e,n){const{id:r}=n.drawLayer.draw(Jt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},xA=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Tf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,ie,EA).call(this,a(this,ni),e)}},uC=function([e,n,r,o]){const{parentDimensions:[l,u],rotation:h}=this;switch(h){case 90:return[n,1-e,r*(u/l),o*(l/u)];case 180:return[1-e,1-n,r,o];case 270:return[1-n,e,r*(u/l),o*(l/u)];default:return[e,n,r,o]}},_y=function(){const{x:e,y:n,width:r,height:o,parentDimensions:[l,u],rotation:h}=this;switch(h){case 90:return[1-n,e,r*(l/u),o*(u/l)];case 180:return[1-e,1-n,r,o];case 270:return[n,1-e,r*(l/u),o*(u/l)];default:return[e,n,r,o]}},Pf=function(e){[this.x,this.y,this.width,this.height]=E(this,ie,uC).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Nu=function(){const{x:e,y:n,width:r,height:o,rotation:l,parentRotation:u,parentDimensions:[h,f]}=this;switch((l*4+u)/90){case 1:return[1-n-o,e,o,r];case 2:return[1-e-r,1-n-o,r,o];case 3:return[n,1-e-r,o,r];case 4:return[e,n-r*(h/f),o*(f/h),r*(h/f)];case 5:return[1-n,e,r*(h/f),o*(f/h)];case 6:return[1-e-o*(f/h),1-n,o*(f/h),r*(h/f)];case 7:return[n-r*(h/f),1-e-o*(f/h),r*(h/f),o*(f/h)];case 8:return[e-r,n-o,r,o];case 9:return[1-n,e-r,o,r];case 10:return[1-e,1-n,r,o];case 11:return[n-o,1-e,o,r];case 12:return[e-o*(f/h),n,o*(f/h),r*(h/f)];case 13:return[1-n-r*(h/f),e-o*(f/h),r*(h/f),o*(f/h)];case 14:return[1-e,1-n-r*(h/f),o*(f/h),r*(h/f)];case 15:return[n,1-e,r*(h/f),o*(f/h)];default:return[e,n,r,o]}},K(Jt,"_currentDrawId",-1),K(Jt,"_currentParent",null),b(Jt,Tn,null),b(Jt,Fc,null),b(Jt,Oc,null),K(Jt,"_INNER_MARGIN",3);let Gy=Jt;var Dr,Pn,Rn,Bc,id,ls,zn,Ri,Uc,zc,jc,rd,ky;class fP{constructor(t,e,n,r,o,l){b(this,rd);b(this,Dr,new Float64Array(6));b(this,Pn);b(this,Rn);b(this,Bc);b(this,id);b(this,ls);b(this,zn,"");b(this,Ri,0);b(this,Uc,new Dg);b(this,zc);b(this,jc);w(this,zc,n),w(this,jc,r),w(this,Bc,o),w(this,id,l),[t,e]=E(this,rd,ky).call(this,t,e);const u=w(this,Pn,[NaN,NaN,NaN,NaN,t,e]);w(this,ls,[t,e]),w(this,Rn,[{line:u,points:a(this,ls)}]),a(this,Dr).set(u,0)}updateProperty(t,e){t==="stroke-width"&&w(this,id,e)}isEmpty(){return!a(this,Rn)||a(this,Rn).length===0}isCancellable(){return a(this,ls).length<=10}add(t,e){[t,e]=E(this,rd,ky).call(this,t,e);const[n,r,o,l]=a(this,Dr).subarray(2,6),u=t-o,h=e-l;return Math.hypot(a(this,zc)*u,a(this,jc)*h)<=2?null:(a(this,ls).push(t,e),isNaN(n)?(a(this,Dr).set([o,l,t,e],2),a(this,Pn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Dr)[0])&&a(this,Pn).splice(6,6),a(this,Dr).set([n,r,o,l,t,e],0),a(this,Pn).push(...gt.createBezierPoints(n,r,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(a(this,ls).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,o){w(this,zc,n),w(this,jc,r),w(this,Bc,o),[t,e]=E(this,rd,ky).call(this,t,e);const l=w(this,Pn,[NaN,NaN,NaN,NaN,t,e]);w(this,ls,[t,e]);const u=a(this,Rn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),a(this,Rn).push({line:l,points:a(this,ls)}),a(this,Dr).set(l,0),w(this,Ri,0),this.toSVGPath(),null}getLastElement(){return a(this,Rn).at(-1)}setLastElement(t){return a(this,Rn)?(a(this,Rn).push(t),w(this,Pn,t.line),w(this,ls,t.points),w(this,Ri,0),{path:{d:this.toSVGPath()}}):a(this,Uc).setLastElement(t)}removeLastElement(){if(!a(this,Rn))return a(this,Uc).removeLastElement();a(this,Rn).pop(),w(this,zn,"");for(let t=0,e=a(this,Rn).length;t<e;t++){const{line:n,points:r}=a(this,Rn)[t];w(this,Pn,n),w(this,ls,r),w(this,Ri,0),this.toSVGPath()}return{path:{d:a(this,zn)}}}toSVGPath(){const t=gt.svgRound(a(this,Pn)[4]),e=gt.svgRound(a(this,Pn)[5]);if(a(this,ls).length===2)return w(this,zn,`${a(this,zn)} M ${t} ${e} Z`),a(this,zn);if(a(this,ls).length<=6){const r=a(this,zn).lastIndexOf("M");w(this,zn,`${a(this,zn).slice(0,r)} M ${t} ${e}`),w(this,Ri,6)}if(a(this,ls).length===4){const r=gt.svgRound(a(this,Pn)[10]),o=gt.svgRound(a(this,Pn)[11]);return w(this,zn,`${a(this,zn)} L ${r} ${o}`),w(this,Ri,12),a(this,zn)}const n=[];a(this,Ri)===0&&(n.push(`M ${t} ${e}`),w(this,Ri,6));for(let r=a(this,Ri),o=a(this,Pn).length;r<o;r+=6){const[l,u,h,f,p,y]=a(this,Pn).slice(r,r+6).map(gt.svgRound);n.push(`C${l} ${u} ${h} ${f} ${p} ${y}`)}return w(this,zn,a(this,zn)+n.join(" ")),w(this,Ri,a(this,Pn).length),a(this,zn)}getOutlines(t,e,n,r){const o=a(this,Rn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),a(this,Uc).build(a(this,Rn),t,e,n,a(this,Bc),a(this,id),r),w(this,Dr,null),w(this,Pn,null),w(this,Rn,null),w(this,zn,null),a(this,Uc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Dr=new WeakMap,Pn=new WeakMap,Rn=new WeakMap,Bc=new WeakMap,id=new WeakMap,ls=new WeakMap,zn=new WeakMap,Ri=new WeakMap,Uc=new WeakMap,zc=new WeakMap,jc=new WeakMap,rd=new WeakSet,ky=function(t,e){return gt._normalizePoint(t,e,a(this,zc),a(this,jc),a(this,Bc))};var cs,xg,Cg,si,Nr,Ir,ad,od,Hc,Hn,ta,hC,dC,fC;class Dg extends gt{constructor(){super(...arguments);b(this,Hn);b(this,cs);b(this,xg,0);b(this,Cg);b(this,si);b(this,Nr);b(this,Ir);b(this,ad);b(this,od);b(this,Hc)}build(e,n,r,o,l,u,h){w(this,Nr,n),w(this,Ir,r),w(this,ad,o),w(this,od,l),w(this,Hc,u),w(this,Cg,h??0),w(this,si,e),E(this,Hn,dC).call(this)}get thickness(){return a(this,Hc)}setLastElement(e){return a(this,si).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,si).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of a(this,si)){if(e.push(`M${gt.svgRound(n[4])} ${gt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${gt.svgRound(n[10])} ${gt.svgRound(n[11])}`);continue}for(let r=6,o=n.length;r<o;r+=6){const[l,u,h,f,p,y]=n.subarray(r,r+6).map(gt.svgRound);e.push(`C${l} ${u} ${h} ${f} ${p} ${y}`)}}return e.join("")}serialize([e,n,r,o],l){const u=[],h=[],[f,p,y,v]=E(this,Hn,hC).call(this);let S,_,x,T,k,M,P,L,D;switch(a(this,od)){case 0:D=gt._rescale,S=e,_=n+o,x=r,T=-o,k=e+f*r,M=n+(1-p-v)*o,P=e+(f+y)*r,L=n+(1-p)*o;break;case 90:D=gt._rescaleAndSwap,S=e,_=n,x=r,T=o,k=e+p*r,M=n+f*o,P=e+(p+v)*r,L=n+(f+y)*o;break;case 180:D=gt._rescale,S=e+r,_=n,x=-r,T=o,k=e+(1-f-y)*r,M=n+p*o,P=e+(1-f)*r,L=n+(p+v)*o;break;case 270:D=gt._rescaleAndSwap,S=e+r,_=n+o,x=-r,T=-o,k=e+(1-p-v)*r,M=n+(1-f-y)*o,P=e+(1-p)*r,L=n+(1-f)*o;break}for(const{line:I,points:U}of a(this,si))u.push(D(I,S,_,x,T,l?new Array(I.length):null)),h.push(D(U,S,_,x,T,l?new Array(U.length):null));return{lines:u,points:h,rect:[k,M,P,L]}}static deserialize(e,n,r,o,l,{paths:{lines:u,points:h},rotation:f,thickness:p}){const y=[];let v,S,_,x,T;switch(f){case 0:T=gt._rescale,v=-e/r,S=n/o+1,_=1/r,x=-1/o;break;case 90:T=gt._rescaleAndSwap,v=-n/o,S=-e/r,_=1/o,x=1/r;break;case 180:T=gt._rescale,v=e/r+1,S=-n/o,_=-1/r,x=1/o;break;case 270:T=gt._rescaleAndSwap,v=n/o+1,S=e/r+1,_=-1/o,x=-1/r;break}if(!u){u=[];for(const M of h){const P=M.length;if(P===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(P===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const L=new Float32Array(3*(P-2));u.push(L);let[D,I,U,G]=M.subarray(0,4);L.set([NaN,NaN,NaN,NaN,D,I],0);for(let Y=4;Y<P;Y+=2){const nt=M[Y],Z=M[Y+1];L.set(gt.createBezierPoints(D,I,U,G,nt,Z),(Y-2)*3),[D,I,U,G]=[U,G,nt,Z]}}}for(let M=0,P=u.length;M<P;M++)y.push({line:T(u[M].map(L=>L??NaN),v,S,_,x),points:T(h[M].map(L=>L??NaN),v,S,_,x)});const k=new this.prototype.constructor;return k.build(y,r,o,1,f,p,l),k}get box(){return a(this,cs)}updateProperty(e,n){return e==="stroke-width"?E(this,Hn,fC).call(this,n):null}updateParentDimensions([e,n],r){const[o,l]=E(this,Hn,ta).call(this);w(this,Nr,e),w(this,Ir,n),w(this,ad,r);const[u,h]=E(this,Hn,ta).call(this),f=u-o,p=h-l,y=a(this,cs);return y[0]-=f,y[1]-=p,y[2]+=2*f,y[3]+=2*p,y}updateRotation(e){return w(this,xg,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,cs).map(gt.svgRound).join(" ")}get defaultProperties(){const[e,n]=a(this,cs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=a(this,cs);let r=0,o=0,l=0,u=0,h=0,f=0;switch(a(this,xg)){case 90:o=n/e,l=-e/n,h=e;break;case 180:r=-1,u=-1,h=e,f=n;break;case 270:o=-n/e,l=e/n,f=n;break;default:return""}return`matrix(${r} ${o} ${l} ${u} ${gt.svgRound(h)} ${gt.svgRound(f)})`}getPathResizingSVGProperties([e,n,r,o]){const[l,u]=E(this,Hn,ta).call(this),[h,f,p,y]=a(this,cs);if(Math.abs(p-l)<=gt.PRECISION||Math.abs(y-u)<=gt.PRECISION){const T=e+r/2-(h+p/2),k=n+o/2-(f+y/2);return{path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${k})`}}}const v=(r-2*l)/(p-2*l),S=(o-2*u)/(y-2*u),_=p/r,x=y/o;return{path:{"transform-origin":`${gt.svgRound(h)} ${gt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${_} ${x}) translate(${gt.svgRound(l)} ${gt.svgRound(u)}) scale(${v} ${S}) translate(${gt.svgRound(-l)} ${gt.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,r,o]){const[l,u]=E(this,Hn,ta).call(this),h=a(this,cs),[f,p,y,v]=h;if(h[0]=e,h[1]=n,h[2]=r,h[3]=o,Math.abs(y-l)<=gt.PRECISION||Math.abs(v-u)<=gt.PRECISION){const k=e+r/2-(f+y/2),M=n+o/2-(p+v/2);for(const{line:P,points:L}of a(this,si))gt._translate(P,k,M,P),gt._translate(L,k,M,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(r-2*l)/(y-2*l),_=(o-2*u)/(v-2*u),x=-S*(f+l)+e+l,T=-_*(p+u)+n+u;if(S!==1||_!==1||x!==0||T!==0)for(const{line:k,points:M}of a(this,si))gt._rescale(k,x,T,S,_,k),gt._rescale(M,x,T,S,_,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[o,l]=r,u=a(this,cs),h=e-u[0],f=n-u[1];if(a(this,Nr)===o&&a(this,Ir)===l)for(const{line:p,points:y}of a(this,si))gt._translate(p,h,f,p),gt._translate(y,h,f,y);else{const p=a(this,Nr)/o,y=a(this,Ir)/l;w(this,Nr,o),w(this,Ir,l);for(const{line:v,points:S}of a(this,si))gt._rescale(v,h,f,p,y,v),gt._rescale(S,h,f,p,y,S);u[2]*=p,u[3]*=y}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${gt.svgRound(e)} ${gt.svgRound(n)}`}}}get defaultSVGProperties(){const e=a(this,cs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${gt.svgRound(e[0])} ${gt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}cs=new WeakMap,xg=new WeakMap,Cg=new WeakMap,si=new WeakMap,Nr=new WeakMap,Ir=new WeakMap,ad=new WeakMap,od=new WeakMap,Hc=new WeakMap,Hn=new WeakSet,ta=function(e=a(this,Hc)){const n=a(this,Cg)+e/2*a(this,ad);return a(this,od)%180===0?[n/a(this,Nr),n/a(this,Ir)]:[n/a(this,Ir),n/a(this,Nr)]},hC=function(){const[e,n,r,o]=a(this,cs),[l,u]=E(this,Hn,ta).call(this,0);return[e+l,n+u,r-2*l,o-2*u]},dC=function(){const e=w(this,cs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of a(this,si)){if(o.length<=12){for(let h=4,f=o.length;h<f;h+=6)ct.pointBoundingBox(o[h],o[h+1],e);continue}let l=o[4],u=o[5];for(let h=6,f=o.length;h<f;h+=6){const[p,y,v,S,_,x]=o.subarray(h,h+6);ct.bezierBoundingBox(l,u,p,y,v,S,_,x,e),l=_,u=x}}const[n,r]=E(this,Hn,ta).call(this);e[0]=ds(e[0]-n,0,1),e[1]=ds(e[1]-r,0,1),e[2]=ds(e[2]+n,0,1),e[3]=ds(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},fC=function(e){const[n,r]=E(this,Hn,ta).call(this);w(this,Hc,e);const[o,l]=E(this,Hn,ta).call(this),[u,h]=[o-n,l-r],f=a(this,cs);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f};class v0 extends cC{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Le._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new v0(this._viewParameters);return t.updateAll(this),t}}var h0,pC;const zu=class zu extends Gy{constructor(e){super({...e,name:"inkEditor"});b(this,h0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Le.initialize(e,n),this._defaultDrawingOptions=new v0(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return jt(this,"typesMap",new Map([[te.INK_THICKNESS,"stroke-width"],[te.INK_COLOR,"stroke"],[te.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,o,l){return new fP(e,n,r,o,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,o,l,u){return Dg.deserialize(e,n,r,o,l,u)}static async deserialize(e,n,r){let o=null;if(e instanceof KA){const{data:{inkLists:u,rect:h,rotation:f,id:p,color:y,opacity:v,borderStyle:{rawWidth:S},popupRef:_,richText:x,contentsObj:T,creationDate:k,modificationDate:M},parent:{page:{pageNumber:P}}}=e;o=e={annotationType:Wt.INK,color:Array.from(y),thickness:S,opacity:v,paths:{points:u},boxes:null,pageIndex:P-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:_,richText:x,comment:(T==null?void 0:T.str)||null,creationDate:k,modificationDate:M}}const l=await super.deserialize(e,n,r);return l._initialData=o,e.comment&&l.setCommentData(e),l}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Hy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return te.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=zu.getDefaultDrawingOptions({stroke:ct.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":u}}=this,h=Object.assign(super.serialize(e),{color:Le._colorManager.convert(o),opacity:l,thickness:u,paths:{lines:n,points:r}});return this.addComment(h),e?(h.isCopy=!0,h):this.annotationElementId&&!E(this,h0,pC).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};h0=new WeakSet,pC=function(e){const{color:n,thickness:r,opacity:o,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((u,h)=>u!==n[h])||e.thickness!==r||e.opacity!==o||e.pageIndex!==l},K(zu,"_type","ink"),K(zu,"_editorType",Wt.INK),K(zu,"_defaultDrawingOptions",null);let CA=zu;class _A extends Dg{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Jm=8,cf=3;var $c,de,kA,nr,gC,mC,TA,Ty,yC,vC,wC,PA,RA,AC;class Oa{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},o,l,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const y=200,v=p.font=`${n} ${r} ${y}px ${e}`,{actualBoundingBoxLeft:S,actualBoundingBoxRight:_,actualBoundingBoxAscent:x,actualBoundingBoxDescent:T,fontBoundingBoxAscent:k,fontBoundingBoxDescent:M,width:P}=p.measureText(t),L=1.5,D=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||0,P)*L),I=Math.ceil(Math.max(Math.abs(x)+Math.abs(T)||y,Math.abs(k)+Math.abs(M)||y)*L);f=new OffscreenCanvas(D,I),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,I),p.fillStyle="black",p.fillText(t,D*(L-1)/2,I*(3-L)/2);const U=E(this,de,PA).call(this,p.getImageData(0,0,D,I).data),G=E(this,de,wC).call(this,U),Y=E(this,de,RA).call(this,G),nt=E(this,de,TA).call(this,U,D,I,Y);return this.processDrawnLines({lines:{curves:nt,width:D,height:I},pageWidth:o,pageHeight:l,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,o){const[l,u,h]=E(this,de,AC).call(this,t),[f,p]=E(this,de,vC).call(this,l,u,h,Math.hypot(u,h)*a(this,$c).sigmaSFactor,a(this,$c).sigmaR,a(this,$c).kernelSize),y=E(this,de,RA).call(this,p),v=E(this,de,TA).call(this,f,u,h,y);return this.processDrawnLines({lines:{curves:v,width:u,height:h},pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([e,n]=[n,e]);const{curves:h,width:f,height:p}=t,y=t.thickness??0,v=[],S=Math.min(e/f,n/p),_=S/e,x=S/n,T=[];for(const{points:M}of h){const P=l?E(this,de,yC).call(this,M):M;if(!P)continue;T.push(P);const L=P.length,D=new Float32Array(L),I=new Float32Array(3*(L===2?2:L-2));if(v.push({line:I,points:D}),L===2){D[0]=P[0]*_,D[1]=P[1]*x,I.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[U,G,Y,nt]=P;U*=_,G*=x,Y*=_,nt*=x,D.set([U,G,Y,nt],0),I.set([NaN,NaN,NaN,NaN,U,G],0);for(let Z=4;Z<L;Z+=2){const kt=D[Z]=P[Z]*_,Tt=D[Z+1]=P[Z+1]*x;I.set(gt.createBezierPoints(U,G,Y,nt,kt,Tt),(Z-2)*3),[U,G,Y,nt]=[Y,nt,kt,Tt]}}if(v.length===0)return null;const k=u?new _A:new Dg;return k.build(v,e,n,1,r,u?0:y,o),{outline:k,newCurves:T,areContours:u,thickness:y,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:o}){let l=1/0,u=-1/0,h=0;for(const P of t){h+=P.length;for(let L=2,D=P.length;L<D;L++){const I=P[L]-P[L-2];l=Math.min(l,I),u=Math.max(u,I)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,y=Jm+cf*p,v=new Uint32Array(y);let S=0;v[S++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,v[S++]=0,v[S++]=r,v[S++]=o,v[S++]=e?0:1,v[S++]=Math.max(0,Math.floor(n??0)),v[S++]=p,v[S++]=f.BYTES_PER_ELEMENT;for(const P of t)v[S++]=P.length-2,v[S++]=P[0],v[S++]=P[1];const _=new CompressionStream("deflate-raw"),x=_.writable.getWriter();await x.ready,x.write(v);const T=f.prototype.constructor;for(const P of t){const L=new T(P.length-2);for(let D=2,I=P.length;D<I;D++)L[D-2]=P[D]-P[D-2];x.write(L)}x.close();const k=await new Response(_.readable).arrayBuffer(),M=new Uint8Array(k);return vE(M)}static async decompressSignature(t){try{const e=Tk(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const P of n)l||(l=new Uint8Array(new Uint32Array(P.buffer,0,4)[0])),l.set(P,u),u+=P.length;const h=new Uint32Array(l.buffer,0,l.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],y=h[3],v=h[4]===0,S=h[5],_=h[6],x=h[7],T=[],k=(Jm+cf*_)*Uint32Array.BYTES_PER_ELEMENT;let M;switch(x){case Int8Array.BYTES_PER_ELEMENT:M=new Int8Array(l.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:M=new Int16Array(l.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:M=new Int32Array(l.buffer,k);break}u=0;for(let P=0;P<_;P++){const L=h[cf*P+Jm],D=new Float32Array(L+2);T.push(D);for(let I=0;I<cf-1;I++)D[I]=h[cf*P+Jm+I+1];for(let I=0;I<L;I++)D[I+2]=D[I]+M[u++]}return{areContours:v,thickness:S,outlines:T,width:p,height:y}}catch(e){return zt(`decompressSignature: ${e}`),null}}}$c=new WeakMap,de=new WeakSet,kA=function(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r},nr=new WeakMap,gC=function(t,e,n,r,o,l,u){const h=E(this,de,kA).call(this,n,r,o,l);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,y=a(this,nr)[2*p],v=a(this,nr)[2*p+1];if(t[(n+y)*e+(r+v)]!==0)return p}return-1},mC=function(t,e,n,r,o,l,u){const h=E(this,de,kA).call(this,n,r,o,l);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,y=a(this,nr)[2*p],v=a(this,nr)[2*p+1];if(t[(n+y)*e+(r+v)]!==0)return p}return-1},TA=function(t,e,n,r){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=r?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let u=1,h;const f=[];for(let p=1;p<n-1;p++){h=1;for(let y=1;y<e-1;y++){const v=p*e+y,S=l[v];if(S===0)continue;let _=p,x=y;if(S===1&&l[v-1]===0)u+=1,x-=1;else if(S>=1&&l[v+1]===0)u+=1,x+=1,S>1&&(h=S);else{S!==1&&(h=Math.abs(S));continue}const T=[y,p],k=x===y+1,M={isHole:k,points:T,id:u,parent:0};f.push(M);let P;for(const Z of f)if(Z.id===h){P=Z;break}P?P.isHole?M.parent=k?P.parent:h:M.parent=k?h:P.parent:M.parent=k?h:0;const L=E(this,de,gC).call(this,l,e,p,y,_,x,0);if(L===-1){l[v]=-u,l[v]!==1&&(h=Math.abs(l[v]));continue}let D=a(this,nr)[2*L],I=a(this,nr)[2*L+1];const U=p+D,G=y+I;_=U,x=G;let Y=p,nt=y;for(;;){const Z=E(this,de,mC).call(this,l,e,Y,nt,_,x,1);D=a(this,nr)[2*Z],I=a(this,nr)[2*Z+1];const kt=Y+D,Tt=nt+I;T.push(Tt,kt);const St=Y*e+nt;if(l[St+1]===0?l[St]=-u:l[St]===1&&(l[St]=u),kt===p&&Tt===y&&Y===U&&nt===G){l[v]!==1&&(h=Math.abs(l[v]));break}else _=Y,x=nt,Y=kt,nt=Tt}}}return f},Ty=function(t,e,n,r){if(n-e<=4){for(let U=e;U<n-2;U+=2)r.push(t[U],t[U+1]);return}const o=t[e],l=t[e+1],u=t[n-4]-o,h=t[n-3]-l,f=Math.hypot(u,h),p=u/f,y=h/f,v=p*l-y*o,S=h/u,_=1/f,x=Math.atan(S),T=Math.cos(x),k=Math.sin(x),M=_*(Math.abs(T)+Math.abs(k)),P=_*(1-M+M**2),L=Math.max(Math.atan(Math.abs(k+T)*P),Math.atan(Math.abs(k-T)*P));let D=0,I=e;for(let U=e+2;U<n-2;U+=2){const G=Math.abs(v-p*t[U+1]+y*t[U]);G>D&&(I=U,D=G)}D>(f*L)**2?(E(this,de,Ty).call(this,t,e,I+2,r),E(this,de,Ty).call(this,t,I,n,r)):r.push(o,l)},yC=function(t){const e=[],n=t.length;return E(this,de,Ty).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},vC=function(t,e,n,r,o,l){const u=new Float32Array(l**2),h=-2*r**2,f=l>>1;for(let x=0;x<l;x++){const T=(x-f)**2;for(let k=0;k<l;k++)u[x*l+k]=Math.exp((T+(k-f)**2)/h)}const p=new Float32Array(256),y=-2*o**2;for(let x=0;x<256;x++)p[x]=Math.exp(x**2/y);const v=t.length,S=new Uint8Array(v),_=new Uint32Array(256);for(let x=0;x<n;x++)for(let T=0;T<e;T++){const k=x*e+T,M=t[k];let P=0,L=0;for(let I=0;I<l;I++){const U=x+I-f;if(!(U<0||U>=n))for(let G=0;G<l;G++){const Y=T+G-f;if(Y<0||Y>=e)continue;const nt=t[U*e+Y],Z=u[I*l+G]*p[Math.abs(nt-M)];P+=nt*Z,L+=Z}}const D=S[k]=Math.round(P/L);_[D]++}return[S,_]},wC=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},PA=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,o=1/0;for(let u=0,h=n.length;u<h;u++){const f=n[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const l=255/(r-o);for(let u=0,h=n.length;u<h;u++)n[u]=(n[u]-o)*l;return n},RA=function(t){let e,n=-1/0,r=-1/0;const o=t.findIndex(h=>h!==0);let l=o,u=o;for(e=o;e<256;e++){const h=t[e];h>n&&(e-l>r&&(r=e-l,u=e-1),n=h,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e},AC=function(t){const e=t,{width:n,height:r}=t,{maxDim:o}=a(this,$c);let l=n,u=r;if(n>o||r>o){let v=n,S=r,_=Math.log2(Math.max(n,r)/o);const x=Math.floor(_);_=_===x?x-1:x;for(let k=0;k<_;k++){l=Math.ceil(v/2),u=Math.ceil(S/2);const M=new OffscreenCanvas(l,u);M.getContext("2d").drawImage(t,0,0,v,S,0,0,l,u),v=l,S=u,t!==e&&t.close(),t=M.transferToImageBitmap()}const T=Math.min(o/l,o/u);l=Math.round(l*T),u=Math.round(u*T)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const p=f.getImageData(0,0,l,u).data;return[E(this,de,PA).call(this,p),l,u]},b(Oa,de),b(Oa,$c,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),b(Oa,nr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class QA extends cC{constructor(){super(),super.updateProperties({fill:Le._defaultLineColor,"stroke-width":0})}clone(){const t=new QA;return t.updateAll(this),t}}class ZA extends v0{constructor(t){super(t),super.updateProperties({stroke:Le._defaultLineColor,"stroke-width":1})}clone(){const t=new ZA(this._viewParameters);return t.updateAll(this),t}}var Qo,Fr,Zo,Wc;const Us=class Us extends Gy{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});b(this,Qo,!1);b(this,Fr,null);b(this,Zo,null);b(this,Wc,null);this._willKeepAspectRatio=!0,w(this,Zo,e.signatureData||null),w(this,Fr,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Le.initialize(e,n),this._defaultDrawingOptions=new QA,this._defaultDrawnSignatureOptions=new ZA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return jt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,Fr)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(a(this,Zo)){const{lines:o,mustSmooth:l,areContours:u,description:h,uuid:f,heightInPage:p}=a(this,Zo),{rawDims:{pageWidth:y,pageHeight:v},rotation:S}=this.parent.viewport,_=Oa.processDrawnLines({lines:o,pageWidth:y,pageHeight:v,rotation:S,innerMargin:Us._INNER_MARGIN,mustSmooth:l,areContours:u});this.addSignature(_,p,h,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,Fr)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){w(this,Wc,e),this.addEditToolbar()}getUuid(){return a(this,Wc)}get description(){return a(this,Fr)}set description(e){w(this,Fr,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:o,height:l}=a(this,Zo),u=Math.max(o,l),h=Oa.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:r,width:o,height:l},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,r,o){const{x:l,y:u}=this,{outline:h}=w(this,Zo,e);w(this,Qo,h instanceof _A),this.description=r;let f;a(this,Qo)?f=Us.getDefaultDrawingOptions():(f=Us._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:f});const[,p]=this.pageDimensions;let y=n/p;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=l,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Oa.process(e,n,r,o,Us._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:o},rotation:l}=this.parent.viewport;return Oa.extractContoursFromText(e,n,r,o,l,Us._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Oa.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:o,innerMargin:Us._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Us.getDefaultDrawingOptions():(this._drawingOptions=Us._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l=Object.assign(super.serialize(e),{isSignature:!0,areContours:a(this,Qo),color:[0,0,0],thickness:a(this,Qo)?0:o});return this.addComment(l),e?(l.paths={lines:n,points:r},l.uuid=a(this,Wc),l.isCopy=!0):l.lines=n,a(this,Fr)&&(l.accessibilityData={type:"Figure",alt:a(this,Fr)}),l}static deserializeDraw(e,n,r,o,l,u){return u.areContours?_A.deserialize(e,n,r,o,l,u):Dg.deserialize(e,n,r,o,l,u)}static async deserialize(e,n,r){var l;const o=await super.deserialize(e,n,r);return w(o,Qo,e.areContours),o.description=((l=e.accessibilityData)==null?void 0:l.alt)||"",w(o,Wc,e.uuid),o}};Qo=new WeakMap,Fr=new WeakMap,Zo=new WeakMap,Wc=new WeakMap,K(Us,"_type","signature"),K(Us,"_editorType",Wt.SIGNATURE),K(Us,"_defaultDrawingOptions",null);let MA=Us;var ze,Mn,Jo,La,tl,ld,Da,Vc,Or,ii,cd,re,Rf,Mf,Py,Ry,My,DA,Ly,SC;class LA extends Le{constructor(e){super({...e,name:"stampEditor"});b(this,re);b(this,ze,null);b(this,Mn,null);b(this,Jo,null);b(this,La,null);b(this,tl,null);b(this,ld,"");b(this,Da,null);b(this,Vc,!1);b(this,Or,null);b(this,ii,!1);b(this,cd,!1);w(this,La,e.bitmapUrl),w(this,tl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Le.initialize(e,n)}static isHandlingMimeForPasting(e){return yw.includes(e)}static paste(e,n){n.pasteEditor({mode:Wt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:u}=e||this.copyCanvas(null,null,!0).imageData,h=await r.guess({name:"altText",request:{data:o,width:l,height:u,channels:o.length/(l*u)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;a(this,Mn)&&(w(this,ze,null),this._uiManager.imageManager.deleteId(a(this,Mn)),(e=a(this,Da))==null||e.remove(),w(this,Da,null),a(this,Or)&&(clearTimeout(a(this,Or)),w(this,Or,null))),super.remove()}rebuild(){if(!this.parent){a(this,Mn)&&E(this,re,Py).call(this);return}super.rebuild(),this.div!==null&&(a(this,Mn)&&a(this,Da)===null&&E(this,re,Py).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,Jo)||a(this,ze)||a(this,La)||a(this,tl)||a(this,Mn)||a(this,Vc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,Vc)||(a(this,ze)?E(this,re,Ry).call(this):E(this,re,Py).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(w(this,Mn,r),o&&w(this,ze,o),w(this,Vc,!1),E(this,re,Ry).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Or)!==null&&clearTimeout(a(this,Or)),w(this,Or,setTimeout(()=>{w(this,Or,null),E(this,re,DA).call(this)},200))}copyCanvas(e,n,r=!1){e||(e=224);const{width:o,height:l}=a(this,ze),u=new Ur;let h=a(this,ze),f=o,p=l,y=null;if(n){if(o>n||l>n){const U=Math.min(n/o,n/l);f=Math.floor(o*U),p=Math.floor(l*U)}y=document.createElement("canvas");const S=y.width=Math.ceil(f*u.sx),_=y.height=Math.ceil(p*u.sy);a(this,ii)||(h=E(this,re,My).call(this,S,_));const x=y.getContext("2d");x.filter=this._uiManager.hcmFilter;let T="white",k="#cfcfd8";this._uiManager.hcmFilter!=="none"?k="black":Nk.isDarkMode&&(T="#8f8f9d",k="#42414d");const M=15,P=M*u.sx,L=M*u.sy,D=new OffscreenCanvas(P*2,L*2),I=D.getContext("2d");I.fillStyle=T,I.fillRect(0,0,P*2,L*2),I.fillStyle=k,I.fillRect(0,0,P,L),I.fillRect(P,L,P,L),x.fillStyle=x.createPattern(D,"repeat"),x.fillRect(0,0,S,_),x.drawImage(h,0,0,h.width,h.height,0,0,S,_)}let v=null;if(r){let S,_;if(u.symmetric&&h.width<e&&h.height<e)S=h.width,_=h.height;else if(h=a(this,ze),o>e||l>e){const k=Math.min(e/o,e/l);S=Math.floor(o*k),_=Math.floor(l*k),a(this,ii)||(h=E(this,re,My).call(this,S,_))}const T=new OffscreenCanvas(S,_).getContext("2d",{willReadFrequently:!0});T.drawImage(h,0,0,h.width,h.height,0,0,S,_),v={width:S,height:_,data:T.getImageData(0,0,S,_).data}}return{canvas:y,width:f,height:p,imageData:v}}static async deserialize(e,n,r){var T;let o=null,l=!1;if(e instanceof Ox){const{data:{rect:k,rotation:M,id:P,structParent:L,popupRef:D,richText:I,contentsObj:U,creationDate:G,modificationDate:Y},container:nt,parent:{page:{pageNumber:Z}},canvas:kt}=e;let Tt,St;kt?(delete e.canvas,{id:Tt,bitmap:St}=r.imageManager.getFromCanvas(nt.id,kt),kt.remove()):(l=!0,e._hasNoCanvas=!0);const Pt=((T=await n._structTree.getAriaAttributes(`${Iu}${P}`))==null?void 0:T.get("aria-label"))||"";o=e={annotationType:Wt.STAMP,bitmapId:Tt,bitmap:St,pageIndex:Z-1,rect:k.slice(0),rotation:M,annotationElementId:P,id:P,deleted:!1,accessibilityData:{decorative:!1,altText:Pt},isSvg:!1,structParent:L,popupRef:D,richText:I,comment:(U==null?void 0:U.str)||null,creationDate:G,modificationDate:Y}}const u=await super.deserialize(e,n,r),{rect:h,bitmap:f,bitmapUrl:p,bitmapId:y,isSvg:v,accessibilityData:S}=e;l?(r.addMissingCanvas(e.id,u),w(u,Vc,!0)):y&&r.imageManager.isValidId(y)?(w(u,Mn,y),f&&w(u,ze,f)):w(u,La,p),w(u,ii,v);const[_,x]=u.pageDimensions;return u.width=(h[2]-h[0])/_,u.height=(h[3]-h[1])/x,S&&(u.altTextData=S),u._initialData=o,e.comment&&u.setCommentData(e),w(u,cd,!!o),u}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:a(this,Mn),isSvg:a(this,ii)});if(this.addComment(r),e)return r.bitmapUrl=E(this,re,Ly).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(r.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=E(this,re,SC).call(this,r);return h.isSame?null:(h.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const u=a(this,ii)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(a(this,Mn)))n.stamps.set(a(this,Mn),{area:u,serialized:r}),r.bitmap=E(this,re,Ly).call(this,!1);else if(a(this,ii)){const h=n.stamps.get(a(this,Mn));u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=E(this,re,Ly).call(this,!1))}return r}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}ze=new WeakMap,Mn=new WeakMap,Jo=new WeakMap,La=new WeakMap,tl=new WeakMap,ld=new WeakMap,Da=new WeakMap,Vc=new WeakMap,Or=new WeakMap,ii=new WeakMap,cd=new WeakMap,re=new WeakSet,Rf=function(e,n=!1){if(!e){this.remove();return}w(this,ze,e.bitmap),n||(w(this,Mn,e.id),w(this,ii,e.isSvg)),e.file&&w(this,ld,e.file.name),E(this,re,Ry).call(this)},Mf=function(){if(w(this,Jo,null),this._uiManager.enableWaiting(!1),!!a(this,Da)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ze)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ze)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Py=function(){if(a(this,Mn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Mn)).then(r=>E(this,re,Rf).call(this,r,!0)).finally(()=>E(this,re,Mf).call(this));return}if(a(this,La)){const r=a(this,La);w(this,La,null),this._uiManager.enableWaiting(!0),w(this,Jo,this._uiManager.imageManager.getFromUrl(r).then(o=>E(this,re,Rf).call(this,o)).finally(()=>E(this,re,Mf).call(this)));return}if(a(this,tl)){const r=a(this,tl);w(this,tl,null),this._uiManager.enableWaiting(!0),w(this,Jo,this._uiManager.imageManager.getFromFile(r).then(o=>E(this,re,Rf).call(this,o)).finally(()=>E(this,re,Mf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=yw.join(",");const n=this._uiManager._signal;w(this,Jo,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,re,Rf).call(this,o)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>E(this,re,Mf).call(this))),e.click()},Ry=function(){var f;const{div:e}=this;let{width:n,height:r}=a(this,ze);const[o,l]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,r=this.height*l;else if(n>u*o||r>u*l){const p=Math.min(u*o/n,u*l/r);n*=p,r*=p}this._uiManager.enableWaiting(!1);const h=w(this,Da,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/o,this.height=r/l,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,re,DA).call(this),a(this,cd)||(this.parent.addUndoableEditor(this),w(this,cd,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,ld)&&this.div.setAttribute("aria-description",a(this,ld)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},My=function(e,n){const{width:r,height:o}=a(this,ze);let l=r,u=o,h=a(this,ze);for(;l>2*e||u>2*n;){const f=l,p=u;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(l,u);y.getContext("2d").drawImage(h,0,0,f,p,0,0,l,u),h=y.transferToImageBitmap()}return h},DA=function(){const[e,n]=this.parentDimensions,{width:r,height:o}=this,l=new Ur,u=Math.ceil(r*e*l.sx),h=Math.ceil(o*n*l.sy),f=a(this,Da);if(!f||f.width===u&&f.height===h)return;f.width=u,f.height=h;const p=a(this,ii)?a(this,ze):E(this,re,My).call(this,u,h),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(p,0,0,p.width,p.height,0,0,u,h)},Ly=function(e){if(e){if(a(this,ii)){const o=this._uiManager.imageManager.getSvgUrl(a(this,Mn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=a(this,ze),n.getContext("2d").drawImage(a(this,ze),0,0),n.toDataURL()}if(a(this,ii)){const[n,r]=this.pageDimensions,o=Math.round(this.width*n*ol.PDF_TO_CSS_UNITS),l=Math.round(this.height*r*ol.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,l);return u.getContext("2d").drawImage(a(this,ze),0,0,a(this,ze).width,a(this,ze).height,0,0,o,l),u.transferToImageBitmap()}return structuredClone(a(this,ze))},SC=function(e){var u;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,o=e.pageIndex===n,l=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&l,isSameAltText:l}},K(LA,"_type","stamp"),K(LA,"_editorType",Wt.STAMP);var Gc,ud,el,nl,Na,Ms,sl,hd,dd,sr,Ia,Ln,Fa,il,fd,bt,rl,ke,IA,bC,gr,FA,OA,Dy;const Gi=class Gi{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:h,viewport:f,l10n:p}){b(this,ke);b(this,Gc);b(this,ud,!1);b(this,el,null);b(this,nl,null);b(this,Na,null);b(this,Ms,new Map);b(this,sl,!1);b(this,hd,!1);b(this,dd,!1);b(this,sr,null);b(this,Ia,null);b(this,Ln,null);b(this,Fa,null);b(this,il,null);b(this,fd,-1);b(this,bt);const y=[...a(Gi,rl).values()];if(!Gi._initialized){Gi._initialized=!0;for(const v of y)v.initialize(p,t)}t.registerEditorTypes(y),w(this,bt,t),this.pageIndex=e,this.div=n,w(this,Gc,o),w(this,el,l),this.viewport=f,w(this,Ln,h),this.drawLayer=u,this._structTree=r,a(this,bt).addLayer(this)}get isEmpty(){return a(this,Ms).size===0}get isInvisible(){return this.isEmpty&&a(this,bt).getMode()===Wt.NONE}updateToolbar(t){a(this,bt).updateToolbar(t)}updateMode(t=a(this,bt).getMode()){switch(E(this,ke,Dy).call(this),t){case Wt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Wt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Wt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Wt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of a(Gi,rl).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Ln))==null?void 0:e.div)}setEditingState(t){a(this,bt).setEditingState(t)}addCommands(t){a(this,bt).addCommands(t)}cleanUndoStack(t){a(this,bt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,el))==null||e.togglePointerEvents(t)}async enable(){var n;w(this,dd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=a(this,il))==null||n.abort(),w(this,il,null);const t=new Set;for(const r of a(this,ke,IA))r.enableEditing(),r.show(!0),r.annotationElementId&&(a(this,bt).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));const e=a(this,el);if(e)for(const r of e.getEditableAnnotations()){if(r.hide(),a(this,bt).isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;const o=await this.deserialize(r);o&&(this.addOrRebuild(o),o.enableEditing())}w(this,dd,!1),a(this,bt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(w(this,hd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,Ln)&&!a(this,il)){w(this,il,new AbortController);const o=a(this,bt).combinedSignal(a(this,il));a(this,Ln).div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:f,timeStamp:p}=l,y=a(this,fd);if(p-y>500){w(this,fd,p);return}w(this,fd,-1);const{classList:v}=this.div;v.toggle("getElements",!0);const S=document.elementsFromPoint(h,f);if(v.toggle("getElements",!1),!this.div.contains(S[0]))return;let _;const x=new RegExp(`^${Lf}[0-9]+$`);for(const k of S)if(x.test(k.id)){_=k.id;break}if(!_)return;const T=a(this,Ms).get(_);(T==null?void 0:T.annotationElementId)===null&&(l.stopPropagation(),l.preventDefault(),T.dblclick(l))},{signal:o,capture:!0})}const t=a(this,el),e=[];if(t){const o=new Map,l=new Map;for(const h of a(this,ke,IA)){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){o.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);(r=this.getEditableAnnotation(h.annotationElementId))==null||r.show(),h.remove()}const u=t.getEditableAnnotations();for(const h of u){const{id:f}=h.data;if(a(this,bt).isDeletedAnnotationElement(f)){h.updateEdited({deleted:!0});continue}let p=l.get(f);if(p){p.resetAnnotationElement(h),p.show(!1),h.show();continue}p=o.get(f),p&&(a(this,bt).addChangedExistingAnnotation(p),p.renderAnnotationElement(h)&&p.show(!1)),h.show()}}E(this,ke,Dy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of a(Gi,rl).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),w(this,hd,!1)}getEditableAnnotation(t){var e;return((e=a(this,el))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,bt).getActive()!==t&&a(this,bt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Ln))!=null&&t.div&&!a(this,Fa)){w(this,Fa,new AbortController);const e=a(this,bt).combinedSignal(a(this,Fa));a(this,Ln).div.addEventListener("pointerdown",E(this,ke,bC).bind(this),{signal:e}),a(this,Ln).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Ln))!=null&&t.div&&a(this,Fa)&&(a(this,Fa).abort(),w(this,Fa,null),a(this,Ln).div.classList.remove("highlighting"))}enableClick(){if(a(this,nl))return;w(this,nl,new AbortController);const t=a(this,bt).combinedSignal(a(this,nl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,nl))==null||t.abort(),w(this,nl,null)}attach(t){a(this,Ms).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,bt).isDeletedAnnotationElement(e)&&a(this,bt).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Ms).delete(t.id),(e=a(this,Gc))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,hd)&&t.annotationElementId&&a(this,bt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,bt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,bt).addDeletedAnnotationElement(t),Le.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,bt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,dd)),a(this,bt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Na)&&(t._focusEventsAllowed=!1,w(this,Na,setTimeout(()=>{w(this,Na,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,bt)._signal}),e.focus())},0))),t._structTreeParentId=(n=a(this,Gc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of a(this,Ms).values())if(e.uid===t)return e;return null}getNextId(){return a(this,bt).getId()}combinedSignal(t){return a(this,bt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,ke,gr))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,bt).updateMode(t.mode);const{offsetX:n,offsetY:r}=E(this,ke,OA).call(this),o=this.getNextId(),l=E(this,ke,FA).call(this,{parent:this,id:o,x:n,y:r,uiManager:a(this,bt),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=a(Gi,rl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,bt)))||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),o=E(this,ke,FA).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:a(this,bt),isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(E(this,ke,OA).call(this),!0,t)}setSelected(t){a(this,bt).setSelected(t)}toggleSelected(t){a(this,bt).toggleSelected(t)}unselect(t){a(this,bt).unselect(t)}pointerup(t){var r;const{isMac:e}=Sn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,sl)||(w(this,sl,!1),(r=a(this,ke,gr))!=null&&r.isDrawer&&a(this,ke,gr).supportMultipleDrawings))return;if(!a(this,ud)){w(this,ud,!0);return}const n=a(this,bt).getMode();if(n===Wt.STAMP||n===Wt.SIGNATURE){a(this,bt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(a(this,bt).getMode()===Wt.HIGHLIGHT&&this.enableTextSelection(),a(this,sl)){w(this,sl,!1);return}const{isMac:e}=Sn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(w(this,sl,!0),(r=a(this,ke,gr))!=null&&r.isDrawer){this.startDrawingSession(t);return}const n=a(this,bt).getActive();w(this,ud,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,sr)){a(this,ke,gr).startDrawing(this,a(this,bt),!1,t);return}a(this,bt).setCurrentDrawingSession(this),w(this,sr,new AbortController);const e=a(this,bt).combinedSignal(a(this,sr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(w(this,Ia,null),this.commitOrRemove())},{signal:e}),a(this,ke,gr).startDrawing(this,a(this,bt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&w(this,Ia,e);return}a(this,Ia)&&setTimeout(()=>{var e;(e=a(this,Ia))==null||e.focus(),w(this,Ia,null)},0)}endDrawingSession(t=!1){return a(this,sr)?(a(this,bt).setCurrentDrawingSession(null),a(this,sr).abort(),w(this,sr,null),w(this,Ia,null),a(this,ke,gr).endDrawing(t)):null}findNewParent(t,e,n){const r=a(this,bt).findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return a(this,sr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,sr)&&a(this,ke,gr).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,bt).getActive())==null?void 0:t.parent)===this&&(a(this,bt).commitOrRemove(),a(this,bt).setActiveEditor(null)),a(this,Na)&&(clearTimeout(a(this,Na)),w(this,Na,null));for(const n of a(this,Ms).values())(e=a(this,Gc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,a(this,Ms).clear(),a(this,bt).removeLayer(this)}render({viewport:t}){this.viewport=t,qc(this.div,t);for(const e of a(this,bt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,bt).commitOrRemove(),E(this,ke,Dy).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,qc(this.div,{rotation:n}),e!==n)for(const r of a(this,Ms).values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,bt).viewParameters.realScale}};Gc=new WeakMap,ud=new WeakMap,el=new WeakMap,nl=new WeakMap,Na=new WeakMap,Ms=new WeakMap,sl=new WeakMap,hd=new WeakMap,dd=new WeakMap,sr=new WeakMap,Ia=new WeakMap,Ln=new WeakMap,Fa=new WeakMap,il=new WeakMap,fd=new WeakMap,bt=new WeakMap,rl=new WeakMap,ke=new WeakSet,IA=function(){return a(this,Ms).size!==0?a(this,Ms).values():a(this,bt).getEditors(this.pageIndex)},bC=function(t){a(this,bt).unselectAll();const{target:e}=t;if(e===a(this,Ln).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Ln).div.contains(e)){const{isMac:n}=Sn.platform;if(t.button!==0||t.ctrlKey&&n)return;a(this,bt).showAllEditors("highlight",!0,!0),a(this,Ln).div.classList.add("free"),this.toggleDrawing(),Vy.startHighlighting(this,a(this,bt).direction==="ltr",{target:a(this,Ln).div,x:t.x,y:t.y}),a(this,Ln).div.addEventListener("pointerup",()=>{a(this,Ln).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,bt)._signal}),t.preventDefault()}},gr=function(){return a(Gi,rl).get(a(this,bt).getMode())},FA=function(t){const e=a(this,ke,gr);return e?new e.prototype.constructor(t):null},OA=function(){const{x:t,y:e,width:n,height:r}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+r),f=(o+u)/2-t,p=(l+h)/2-e,[y,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:y,offsetY:v}},Dy=function(){for(const t of a(this,Ms).values())t.isEmpty()&&t.remove()},K(Gi,"_initialized",!1),b(Gi,rl,new Map([gA,CA,LA,Vy,MA].map(t=>[t._editorType,t])));let NA=Gi;var ir,us,Xc,_g,d0,EC,zr,UA,xC,zA;const yn=class yn{constructor({pageIndex:t}){b(this,zr);b(this,ir,null);b(this,us,new Map);b(this,Xc,new Map);this.pageIndex=t}setParent(t){if(!a(this,ir)){w(this,ir,t);return}if(a(this,ir)!==t){if(a(this,us).size>0)for(const e of a(this,us).values())e.remove(),t.append(e);w(this,ir,t)}}static get _svgFactory(){return jt(this,"_svgFactory",new $y)}draw(t,e=!1,n=!1){const r=gn(yn,_g)._++,o=E(this,zr,UA).call(this),l=yn._svgFactory.createElement("defs");o.append(l);const u=yn._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,Xc).set(r,u);const f=n?E(this,zr,xC).call(this,l,h):null,p=yn._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,t),a(this,us).set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=gn(yn,_g)._++,r=E(this,zr,UA).call(this),o=yn._svgFactory.createElement("defs");r.append(o);const l=yn._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const y=yn._svgFactory.createElement("mask");o.append(y),h=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const v=yn._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const S=yn._svgFactory.createElement("use");y.append(S),S.setAttribute("href",`#${u}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const f=yn._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),a(this,us).set(n,r),n}finalizeDraw(t,e){a(this,Xc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:n,bbox:r,rootClass:o,path:l}=e,u=typeof t=="number"?a(this,us).get(t):t;if(u){if(n&&E(this,zr,zA).call(this,u,n),r&&E(h=yn,d0,EC).call(h,u,r),o){const{classList:f}=u;for(const[p,y]of Object.entries(o))f.toggle(p,y)}if(l){const p=u.firstElementChild.firstElementChild;E(this,zr,zA).call(this,p,l)}}}updateParent(t,e){if(e===this)return;const n=a(this,us).get(t);n&&(a(e,ir).append(n),a(this,us).delete(t),a(e,us).set(t,n))}remove(t){a(this,Xc).delete(t),a(this,ir)!==null&&(a(this,us).get(t).remove(),a(this,us).delete(t))}destroy(){w(this,ir,null);for(const t of a(this,us).values())t.remove();a(this,us).clear(),a(this,Xc).clear()}};ir=new WeakMap,us=new WeakMap,Xc=new WeakMap,_g=new WeakMap,d0=new WeakSet,EC=function(t,[e,n,r,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*r}%`,l.height=`${100*o}%`},zr=new WeakSet,UA=function(){const t=yn._svgFactory.create(1,1,!0);return a(this,ir).append(t),t.setAttribute("aria-hidden",!0),t},xC=function(t,e){const n=yn._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=yn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r},zA=function(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)},b(yn,d0),b(yn,_g,0);let BA=yn;globalThis._pdfjsTestingUtils={HighlightOutliner:yA};globalThis.pdfjsLib={AbortException:al,AnnotationEditorLayer:NA,AnnotationEditorParamsType:te,AnnotationEditorType:Wt,AnnotationEditorUIManager:Yc,AnnotationLayer:fA,AnnotationMode:go,AnnotationType:ln,applyOpacity:Fk,build:WT,ColorPicker:jy,createValidAbsoluteUrl:pE,CSSConstants:Ik,DOMSVGFactory:$y,DrawLayer:BA,FeatureTest:Sn,fetchData:Tg,findContrastColor:Ok,getDocument:bx,getFilenameFromUrl:Pk,getPdfFilenameFromUrl:Rk,getRGB:Rg,getUuid:yE,getXfaPageViewport:Lk,GlobalWorkerOptions:Br,ImageKind:ty,InvalidPDFException:gw,isDataScheme:m0,isPdfFile:VA,isValidExplicitDest:qk,MathClamp:ds,noContextMenu:Di,normalizeUnicode:_k,OPS:Df,OutputScale:Ur,PasswordResponses:yk,PDFDataRangeTransport:Ex,PDFDateString:Iy,PDFWorker:Ff,PermissionFlag:mk,PixelsPerInch:ol,RenderingCancelledException:WA,renderRichText:AE,ResponseException:Ny,setLayerDimensions:qc,shadow:jt,SignatureExtractor:Oa,stopEvent:tn,SupportedImageMimeTypes:yw,TextLayer:If,TouchManager:Oy,updateUrlHash:gE,Util:ct,VerbosityLevel:f0,version:$T,XfaLayer:wE};const pP="/assets/pdf.worker.min-LyOxJPrg.mjs";Br.workerSrc=pP;const he="(?:Mr|Mrs|Ms|Miss|Dr|Prof|Professor|Governor|Mayor|Senator|Representative|Congressman|Congresswoman|King|Queen|Prince|Princess|Duke|Duchess|Sir|Madam|Madame|Lord|Lady|President|Vice\\s+President|Secretary|General|Admiral|Colonel|Major|Captain|Lieutenant|Sergeant|Chief|Judge|Justice|Ambassador|Minister|Chancellor|Premier|Prime\\s+Minister)\\.?\\s+";function gP(g){return g.replace(/\r\n/g,`
`).replace(/\r/g,`
`)}function rt(...g){}function w0(g){return gP(g).replace(/\u00A0/g," ").replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[]/g,"(").replace(/[]/g,")").replace(/[]/g,":")}function cE(g){const t=w0(g).trim();if(!t||/\s/.test(t))return null;const e=t.replace(/^<(.+)>$/,"$1").trim();try{const n=new URL(e);return n.protocol!=="http:"&&n.protocol!=="https:"?null:n.toString()}catch{return null}}function mP(g){const t=w0(g),e=new RegExp(`((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*)`,"g"),n=Array.from(t.matchAll(e)).filter(p=>p.index!==void 0);if(n.length===0)return t.split(/\n{2,}/).map(p=>p.trim()).filter(Boolean);const r=p=>{const v=p.trim().match(new RegExp(`^(?:${he})?((?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3})|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`));return v?v[1].trim():null},o=p=>p.replace(/^[\u2026]+/g,"").replace(/^\.{3,}/g,"").trim(),l=[],u=p=>{const y=p.trim();y&&l.push(y)};let h="",f=null;for(let p=0;p<n.length;p++){const y=n[p].index,v=p<n.length-1?n[p+1].index:t.length,S=n[p][0]||"",_=r(S),x=t.slice(y,v).trim();if(!x)continue;const T=x.slice(S.length).trimStart();if(_&&f&&_.toLowerCase()===f.toLowerCase()){const k=o(T);k&&(h=(h?`${h} ${k}`:k).trim());continue}h&&u(h),f=_,h=T?`${S.trim()} ${T}`.trim():S.trim()}return h&&u(h),l}function yP(g){var l,u;const t=new RegExp(`^(${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*`,""),e=new RegExp(`^(${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){1,3}|[Ss]peaker\\s+[0-9]+)\\s*:\\s*`,""),n=g.reduce((h,f)=>{const p=(f==null?void 0:f.trim())||"";return h+(e.test(p)?1:0)},0),r=h=>!!(t.test(h)||n>=3&&e.test(h)),o=[];for(let h=0;h<g.length;h++){const f=(l=g[h])==null?void 0:l.trim();if(!f)continue;if(!r(f)){o.push(f);continue}let p=f,y=h+1;for(;y<g.length;){const v=(u=g[y])==null?void 0:u.trim();if(!v){y+=1;continue}if(r(v))break;p=`${p} ${v}`.trim(),y+=1}o.push(p),h=y-1}return o}function uE(g){const t=g.length;return t%2===0?t/2-1||0:(t-1)/2||0}function vP(g){if(!g)return 0;if(!g.includes(" "))return uE(g);const t=[];for(let n=0;n<g.length;n+=1)g[n]!==" "&&t.push(n);if(t.length===0)return 0;const e=uE("x".repeat(t.length));return t[Math.min(Math.max(e,0),t.length-1)]}function wP(g){const t=w0(g),e=new RegExp(`((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*)`,"g"),n=Array.from(t.matchAll(e)),r=new RegExp(`(^|\\n)\\s*((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){1,3}|[Ss]peaker\\s+[0-9]+))\\s*:\\s*`,"gm"),o=Array.from(t.matchAll(r));if(n.length>0||o.length>=3){const f=[],p=v=>{const S=HA(v);if(!S)return;const _=AP(S);_.length>0&&f.push({raw:S,words:_})};return mP(t).forEach(p),f}const u=t.split(/\n{2,}|\r{2,}/).map(f=>f.trim()).filter(Boolean);return u.length?yP(u).map(f=>{const p=f.replace(/[\u201C\u201D]/g,'"').replace(/[\u2018\u2019]/g,"'").split(/\s+/).filter(Boolean);return{raw:f,words:p}}):[]}function jA(g){const t=g.trim().split(/\s+/),e=new Set,n=[];for(const r of t){const o=r.toLowerCase();e.has(o)||(e.add(o),n.push(r))}return n.join(" ")}function Xy(g){rt("[Dedupe] Starting deduplication",{textLength:g.length,textPreview:g.substring(0,300)});const t=`(?:${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)`,e=new RegExp(`(${t})\\s*:`,"g");let n=g,r="",o=0;const l=10;for(;n!==r&&o<l;){r=n,o++;const u=n;n=n.replace(e,(f,p,y)=>{const v=jA(p),S=n.substring(Math.max(0,y-500),y);v.toLowerCase();const _=v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`(${_})(?:\\s+\\1)+\\s*:`,"g").test(S+f)&&rt("[Dedupe] Found repeated full name",{original:f,cleaned:v+" :",beforeMatch:S.substring(Math.max(0,S.length-100))}),v+" :"});const h=new RegExp(`(${t})\\s+\\1(?:\\s+\\1)*\\s*:`,"g");n=n.replace(h,(f,p)=>jA(p)+" :"),n!==u&&rt("[Dedupe] Iteration changed result",{iteration:o,changed:!0,resultPreview:n.substring(0,300)})}return rt("[Dedupe] Deduplication complete",{iterations:o,originalLength:g.length,resultLength:n.length,resultPreview:n.substring(0,300)}),n}function HA(g){let t=g.trim();return t=t.replace(/\([0-9]{1,2}:[0-9]{2}\)\s*/g," "),t=t.replace(/\s+/g," "),t=Xy(t),t=t.replace(/Topics?:[A-Za-z\s]*$/i,""),t=t.replace(/Topics?:\s*No\s+items\s+found.*$/i,""),t=t.replace(/Hungry\s+For\s+More\?.*$/i,""),t=t.replace(/Luckily\s+for\s+you.*$/i,""),t=t.replace(/Subscribe\s+to\s+our\s+blog.*$/i,""),t=t.replace(/Thank\s+You\s+for\s+Subscribing!.*$/i,""),t=t.replace(/A\s+confirmation\s+email.*$/i,""),t=t.replace(/\[inaudible[^\]]*\]/gi," "),t=t.replace(/Transcripts\s+Home.*$/i,""),t=t.replace(/Read\s+the\s+transcript\s+here.*$/i,""),t=t.replace(/.*\s+\|\s+Rev.*$/i,""),t=t.replace(/Help\s+Center\s+Developers.*$/i,""),t=t.replace(/Contact\s+Support.*$/i,""),t=t.replace(/Human-Verified.*$/i,""),t=t.replace(/AI\s+Platform\s+Features.*$/i,""),t=t.replace(/Premium\s+Tools.*$/i,""),t=t.replace(/Industries.*$/i,""),t=t.replace(/Resources.*$/i,""),t=t.replace(/Blog\s+Home.*$/i,""),t=t.replace(/Copyright\s+Disclaimer.*$/i,""),t=t.replace(/Under\s+Title\s+17.*$/i,""),t=t.replace(/fair\s+use.*$/i,""),t=t.replace(/\s+/g," "),t=t.replace(/&amp;/g,"&"),t=t.replace(/&#x27;/g,"'"),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"'),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t.trim()}function hE(g){const t=new RegExp(`^((${he})?([A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+))\\s+\\([0-9]{1,2}:[0-9]{2}\\):`),e=new RegExp(`^((${he})?([A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+))\\s*:`);let n=g.match(t),r=!0;if(n||(n=g.match(e),r=!1),!n)return null;const o=n[1].trim(),l=n[0],u=new RegExp(`^(${he})`),h=l.match(u);h&&h[1].trim();const f=new RegExp(`(?:${he})?([A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)`),p=l.match(f),y=p?p[1].trim():"";if(/^speaker\b/i.test(y)){const T=r?o.replace(new RegExp("\\s+\\([0-9]{1,2}:[0-9]{2}\\):\\s*$"),"").trim():o.replace(/:\s*$/,"").trim();return{fullName:o,fullNameWithoutTimestamp:T,shortNames:[y.replace(/^speaker/i,"Speaker")]}}const v=y.split(/\s+/).filter(Boolean);if(v.length===0)return null;const S=o,_=y,x=[];if(v.length>=2){const T=v[0],k=v[v.length-1];x.push(T),x.push(k),x.push(`${T} ${k}`)}else x.push(v[0]);return{fullName:S,fullNameWithoutTimestamp:_,shortNames:x}}function AP(g){var o;let t=g.replace(/[\u201C\u201D]/g,'"').replace(/[\u2018\u2019]/g,"'");rt("[Word Split] splitTranscriptWords called",{textPreview:t.substring(0,200),textLength:t.length});const e=t.match(new RegExp(`^((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*)(.*)$`,"i")),n=t.match(new RegExp(`^((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|Speaker\\s+[0-9]+)\\s*:\\s*)(.*)$`,"i")),r=e||n;if(r){let l=r[1].trim();const u=((o=r[r.length-1])==null?void 0:o.trim())||"";rt("[Word Split] Found speaker line",{fullSpeakerLine:l,contentPreview:u.substring(0,50)}),l=Xy(l);const h=jA(l.replace(/:\s*$/,"").trim());rt("[Word Split] After deduplication",{original:r[1].trim(),deduplicated:h});const f=h.match(new RegExp(`^(${he})`,"i")),p=f?f[1].trim():"",y=new RegExp(`(?:${he})?(Speaker\\s+[0-9]+|[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3})`,"i"),v=h.match(y),S=v?v[1].trim():"",_=[];if(p&&S?(_.push(p),_.push(S+":")):S?_.push(S+":"):_.push(h+":"),u){const x=u.split(/\s+/).filter(Boolean);_.push(...x),rt("[Word Split] Added content words",{contentWordCount:x.length})}return rt("[Word Split] Final words array",{wordCount:_.length,firstWords:_.slice(0,5)}),_}return t.split(/\s+/).filter(Boolean)}function SP(g){return g.flatMap(t=>t.words)}function uf(g,t){let e=0;for(let n=0;n<g.length;n+=1){const r=g[n];if(t<e+r.words.length)return{wordIndex:t-e,paragraphIndex:n};e+=r.words.length}return{wordIndex:0,paragraphIndex:0}}const bP=()=>{const[g,t]=Ut.useState(""),[e,n]=Ut.useState([]),[r,o]=Ut.useState([]),[l,u]=Ut.useState(350),[h,f]=Ut.useState(!1),[p,y]=Ut.useState(0),[v,S]=Ut.useState(!1),[_,x]=Ut.useState(!0),[T,k]=Ut.useState(!1),[M,P]=Ut.useState(!1),[L,D]=Ut.useState(!1),[I,U]=Ut.useState(null),[G,Y]=Ut.useState(!1),[nt,Z]=Ut.useState(null),[kt,Tt]=Ut.useState("system-ui"),[St,Pt]=Ut.useState(5),[lt,st]=Ut.useState("#ff4e4e"),[V,ft]=Ut.useState(new Map),tt=$=>$*.015-.05,O=[{value:"system-ui",label:"System UI",example:"The quick brown"},{value:"Georgia, serif",label:"Georgia",example:"The quick brown"},{value:"'Times New Roman', Times, serif",label:"Times New Roman",example:"The quick brown"},{value:"Arial, Helvetica, sans-serif",label:"Arial",example:"The quick brown"},{value:"'Courier New', Courier, monospace",label:"Courier New",example:"The quick brown"},{value:"Verdana, Geneva, sans-serif",label:"Verdana",example:"The quick brown"},{value:"'Trebuchet MS', sans-serif",label:"Trebuchet MS",example:"The quick brown"},{value:"'Comic Sans MS', cursive",label:"Comic Sans MS",example:"The quick brown"},{value:"'Roboto', sans-serif",label:"Roboto",example:"The quick brown"},{value:"'Open Sans', sans-serif",label:"Open Sans",example:"The quick brown"}],H=Ut.useRef(null),[ut,Lt]=Ut.useState(5),Ct=($,W)=>W%5===0&&$>=640?5:W%2===0?2:Math.min(W,5);Ut.useEffect(()=>{const $=H.current;if(!$)return;const W=O.length,at=()=>{const Bt=Ct($.clientWidth,W);Lt(vt=>vt===Bt?vt:Bt)};if(at(),typeof ResizeObserver>"u")return;const Et=new ResizeObserver(()=>at());return Et.observe($),()=>Et.disconnect()},[O.length]);const _t=Ut.useRef(null),Dt=Ut.useRef(null),Qt=Ut.useRef(null),ae=Ut.useRef(null),je=Ut.useRef(null),es=Ut.useRef(null),Ni=Ut.useRef(null),[jr,$a]=Ut.useState(0),[Ng,Ig]=Ut.useState(0),[Ii,cl]=Ut.useState(null),ul=Ut.useRef(0),ne=r.length>0,Wa=["Mr","Mrs","Ms","Miss","Dr","Prof","Professor","Governor","Mayor","Senator","Representative","Congressman","Congresswoman","King","Queen","Prince","Princess","Duke","Duchess","Sir","Madam","Madame","Lord","Lady","President","Vice President","Secretary","General","Admiral","Colonel","Major","Captain","Lieutenant","Sergeant","Chief","Judge","Justice","Ambassador","Minister","Chancellor","Premier","Prime Minister"],Jc=$=>{if(!$)return!1;const W=$.replace(/\./g,"").trim().toLowerCase();return Wa.some(at=>at.toLowerCase()===W)},pd=$=>$.replace(/^[^A-Za-z0-9'-]+/,"").replace(/[^A-Za-z0-9'-]+$/,"").trim(),Va=$=>{const W=r[$]??"";if(!W||!e.length)return{display:W,advance:1};const at=uf(e,$),Et=e[at.paragraphIndex],Bt=at.wordIndex,vt=Et.words[Bt]??"",qt=Et.words[Bt+1]??"";if(vt&&qt){const fe=pd(vt),pe=pd(qt);if(fe&&pe&&!Jc(fe)&&!Jc(pe)){const oe=`${fe} ${pe}`;if(V.has(oe))return{display:`${vt} ${qt}`,advance:2}}}return{display:vt||W,advance:1}},Fg=$=>{const W=Math.max($-1,0);return W<=0?W:Va(W-1).advance===2?W-1:W},gd=Ut.useMemo(()=>ne?r[p]:"",[ne,r,p]),gs=Ut.useMemo(()=>!ne||!gd?"":Va(p).display,[gd,V,e,p,ne,r]),hl=Ut.useMemo(()=>gs?vP(gs):0,[gs]),dl=Ut.useMemo(()=>{if(!gs)return{left:"",pivot:"",right:""};const $=Math.min(Math.max(hl,0),gs.length-1);return{left:gs.slice(0,$),pivot:gs.charAt($),right:gs.slice($+1)}},[gs,hl]),ci=Ut.useMemo(()=>{if(!e.length||!ne)return null;const $=uf(e,p),W=e[$.paragraphIndex],at=W.words.slice(0,$.wordIndex),Et=W.words[$.wordIndex]??"",Bt=W.words.slice($.wordIndex+1);return{paragraphIndex:$.paragraphIndex,before:at.join(" "),active:Et,after:Bt.join(" ")}},[e,ne,p]),Hr=Ut.useMemo(()=>{const $=[];let W=0;for(const at of e)$.push(W),W+=at.words.length;return $},[e]),fl=Ut.useMemo(()=>l<=0?0:6e4/l|0,[l]);Ut.useEffect(()=>{if(!h||!ne||fl<=0){_t.current!==null&&(window.clearInterval(_t.current),_t.current=null);return}return Dt.current=performance.now(),_t.current=window.setInterval(()=>{y($=>{if($>=r.length-1)return f(!1),$;const W=Va($).advance;if(!_&&e.length){const at=uf(e,$),Bt=(Hr[at.paragraphIndex]??0)+e[at.paragraphIndex].words.length-1;if($+W-1>=Bt&&$<r.length-1)return f(!1),$}return Math.min($+W,r.length-1)})},fl),()=>{_t.current!==null&&(window.clearInterval(_t.current),_t.current=null)}},[h,ne,fl,r.length,e,V,r,_,Hr]),Ut.useEffect(()=>{if(!ne||!Qt.current||!ae.current||!je.current||!Ni.current){$a(0),cl(null);return}const $=Qt.current.offsetWidth,W=ae.current.offsetWidth,at=je.current.offsetWidth,Et=$+W/2,Bt=Ni.current.clientWidth,vt=Bt/2,qt=$+W+at,pe=(Bt-qt)/2+Et,oe=vt-pe;$a(oe);const wt=Math.max(0,Bt-24);if(!ul.current||Ii===null){const ge=window.getComputedStyle(Ni.current).fontSize,hn=Number.parseFloat(ge);Number.isFinite(hn)&&hn>0&&(ul.current=hn)}const It=ul.current||0;if(!It||qt<=wt){Ii!==null&&cl(null);return}const Ht=Math.max(22,It*(wt/qt)),Ft=Math.min(It,Ht);(Ii===null||Math.abs(Ii-Ft)>.5)&&cl(Ft)},[gs,dl,ne,St,kt,Ng,Ii]),Ut.useEffect(()=>{const $=()=>{cl(null),Ig(W=>W+1)};return window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]),Ut.useEffect(()=>{h&&ne&&fl>0&&f(!1)},[fl]);const or=$=>{const W=w0($),at=new Map,Et=new Set(["the","a","an","if","and","or","but","to","of","in","on","for","with","at","from","by","as","this","that","these","those"]);rt("[Speaker Names] Extracting from original text",{textLength:W.length});const Bt=new RegExp(`((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?\\)\\s*:\\s*)`,"g"),vt=W.matchAll(Bt);for(const pe of vt){const oe=pe[1].trim(),wt=hE(oe);if(wt&&(rt("[Speaker Names] Extracted speaker info",{fullName:wt.fullName,fullNameWithoutTimestamp:wt.fullNameWithoutTimestamp,shortNames:wt.shortNames}),wt.shortNames.forEach(It=>{const Ht=It.trim(),Ft=Ht.toLowerCase();if(!Ht||Et.has(Ft))return;const ge=at.get(It);(!ge||wt.fullNameWithoutTimestamp.length>ge.length)&&at.set(It,wt.fullNameWithoutTimestamp)}),at.set(wt.fullName,wt.fullNameWithoutTimestamp),at.set(wt.fullNameWithoutTimestamp,wt.fullNameWithoutTimestamp),wt.fullName.includes("Speaker"))){const It=wt.fullName.match(/Speaker\s+(\d+)/i);if(It){const Ht=It[1];at.set(Ht,wt.fullNameWithoutTimestamp)}}}const qt=wP(W);rt("[Speaker Names] Also checking cleaned paragraphs",{paragraphCount:qt.length}),qt.forEach((pe,oe)=>{const wt=pe.raw,It=new RegExp(`^((${he})?([A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+))\\s*:`),Ht=wt.match(It);if(Ht&&oe<10){rt("[Speaker Names] Found speaker in cleaned text",{index:oe,match:Ht[0],rawPreview:wt.substring(0,100)});const Ft=hE(wt);if(Ft&&(rt("[Speaker Names] Extracted from cleaned text",{fullName:Ft.fullName,fullNameWithoutTimestamp:Ft.fullNameWithoutTimestamp,shortNames:Ft.shortNames}),Ft.shortNames.forEach(ge=>{const hn=ge.trim(),Fi=hn.toLowerCase();if(!hn||Et.has(Fi))return;const ms=at.get(ge);(!ms||Ft.fullNameWithoutTimestamp.length>ms.length)&&at.set(ge,Ft.fullNameWithoutTimestamp)}),at.set(Ft.fullName,Ft.fullNameWithoutTimestamp),at.set(Ft.fullNameWithoutTimestamp,Ft.fullNameWithoutTimestamp),Ft.fullName.includes("Speaker"))){const ge=Ft.fullName.match(/Speaker\s+(\d+)/i);if(ge){const hn=ge[1];at.set(hn,Ft.fullNameWithoutTimestamp)}}}}),rt("[Speaker Names] Final extracted speaker names",{nameMapSize:at.size,names:Array.from(at.entries())}),ft(at);const fe=SP(qt);n(qt),o(fe),y(0),f(!1),k(!0)},Og=()=>{t(""),n([]),o([]),y(0),f(!1),k(!1),D(!1),U(null),Y(!1),Z(null),ft(new Map)},A0=()=>{if(ne){if(!h&&!_&&e.length){const $=uf(e,p),at=(Hr[$.paragraphIndex]??0)+e[$.paragraphIndex].words.length-1,Et=Va(p).advance;p+Et-1>=at&&p<r.length-1&&y(Math.min(p+Et,r.length-1))}f($=>!$)}},md=()=>{ne&&y(0)},tu=$=>{ne&&y(W=>{if($===-1)return Math.min(Math.max(Fg(W),0),r.length-1);const at=Va(W).advance;return Math.min(Math.max(W+at,0),r.length-1)})},eu=$=>{if(!e.length||!ne)return;const W=uf(e,p),at=Math.min(Math.max(W.paragraphIndex+$,0),e.length-1);let Et=0;for(let Bt=0;Bt<at;Bt+=1)Et+=e[Bt].words.length;y(Et)},yd=()=>{if(!g.trim()){n([]),o([]),y(0),f(!1);return}const $=cE(g);if($){t($),nt&&Z(null),G||Sd($);return}or(g)},vd=()=>{setTimeout(()=>{var at;const $=((at=es.current)==null?void 0:at.value)||g;if(!$.trim()){n([]),o([]),y(0),f(!1);return}const W=cE($);if(W){t(W),nt&&Z(null),G||Sd(W);return}or($)},0)},Ds=$=>{const W=$.trim();if(W.length<3)return!0;if(W.match(/\([0-9]{1,2}:[0-9]{2}\):/)||W.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i")))return!1;if([/^copyright\s+disclaimer/i,/^share\s+this\s+post/i,/^thank\s+you\s+for\s+subscribing/i,/^thank\s+you\s+for\s+subscribing!/i,/^a\s+confirmation\s+email\s+is\s+on\s+its?\s+way/i,/^confirmation\s+email/i,/^hungry\s+for\s+more/i,/^hungry\s+for\s+more\?/i,/^subscribe\s+to\s+our\s+blog/i,/^subscribe\s+to\s+our\s+blog\s+today/i,/^luckily\s+for\s+you/i,/^we\s+deliver/i,/^keep\s+reading/i,/^read\s+trending\s+articles/i,/^help\s+center/i,/^contact\s+support/i,/^contact\s+support\s*\|/i,/^log\s+in$/i,/^get\s+started$/i,/^request\s+a\s+demo$/i,/^product\s+back\s+to\s+menu/i,/^industries\s+back\s+to\s+menu/i,/^resources\s+back\s+to\s+menu/i,/^about\s+rev$/i,/^pricing$/i,/^legal\s+security\s+terms/i,/^privacy\s+policy/i,/^sitemap$/i,/^reviews$/i,/^\s*rev\.com/i,/^topics?:$/i,/^topics?:[A-Za-z\s]*$/i,/^topics?:\s*no\s+items\s+found/i,/^transcripts\s+home/i,/^transcripts\s+home\s+news/i,/^read\s+the\s+transcript\s+here/i,/^linkedin\s*$/i,/^facebook\s*$/i,/^x\s+logo\s*$/i,/^pinterest\s*$/i,/^reddit\s+logo\s*$/i,/^email\s*$/i,/^services\s*$/i,/^integrations\s*$/i,/^blog\s*$/i,/^blog\s+home/i,/^developers\s*$/i,/^careers\s*$/i,/^freelancers\s*$/i,/^press\s*$/i,/^support\s*$/i,/^youtube\s*$/i,/^instagram\s*$/i,/^spotify\s*$/i,/^apple\s*$/i,/^the\s+rev\s+logo\s+icon\.\s*$/i,/^under\s+title\s+17/i,/^fair\s+use/i,/^fair\s+use\s+is\s+permitted/i,/^allowance\s+is\s+made/i,/^copyright\s+statute/i,/^might\s+otherwise\s+be\s+infringing/i,/^rev's\s+logo$/i,/^human-verified/i,/^human-verified\s+&/i,/^human\s+transcription\s+expert/i,/^ai\s+platform\s+features$/i,/^premium\s+tools/i,/^premium\s+tools\.\s+premium\s+perks/i,/^multi-file\s+analysis$/i,/^subscribe\s+to\s+the\s+rev\s+blog/i,/^sign\s+up\s+to\s+get/i,/^content\s+delivered\s+straight/i,/^\[inaudible/i,/^.*\s+\|\s+rev$/i,/^help\s+center\s+developers\s+security/i,/^human\s+transcription\s+expert\s+human\s+transcription/i,/^human\s+captions/i,/^court\s+reporting\s+self-service/i,/^global\s+subtitles/i,/^view\s+all\s+pay-per-minute\s+services/i,/^transcription,\s+captions/i,/^ai\s+transcription/i,/^ai\s+notetaker/i,/^ai\s+captions/i,/^rev\s+mobile\s+app/i,/^view\s+all\s+ai\s+features/i,/^save\s+on\s+human\s+transcription/i,/^spot\s+inconsistencies/i,/^industries\s+legal/i,/^criminal\s+prosecution/i,/^eliminate\s+evidence\s+backlogs/i,/^criminal\s+defense/i,/^cut\s+hours\s+of\s+review/i,/^investigators/i,/^turn\s+piles\s+of\s+evidence/i,/^civil\s+law/i,/^build\s+stronger\s+cases/i,/^court\s+reporting\s+agencies/i,/^a\s+trusted\s+partner/i,/^smartdepo/i,/^ai\s+summaries/i,/^resources\s+blog/i,/^expert\s+insights/i,/^latest\s+news\s+about\s+rev/i,/^reports\s+&\s+guides/i,/^whitepapers/i,/^learning\s+center/i,/^guides\s+and\s+tutorials/i,/^transcript\s+library/i,/^free\s+transcripts/i,/^case\s+studies/i,/^discover\s+how\s+rev/i,/^trusted\s+feedback/i,/^the\s+rough\s+draft/i,/^where\s+journalists/i,/^partners/i,/^discover\s+our\s+bar\s+association/i,/^we're\s+hiring/i,/^ambitious\s+team\s+members/i,/^how\s+law\s+enforcement/i,/^court\s+hearing\s+types/i,/^state\s+bar\s+of\s+texas/i,/^legal\s+professionals\s+are\s+burned\s+out/i,/^transcription\s+closed\s+captions/i,/^accessibility\s+technology/i,/^thank\s+you!\s+your\s+submission/i,/^oops!\s+something\s+went\s+wrong/i,/^2024\s+election/i,/^ai\s+&\s+speech\s+recognition/i,/^artificial\s+intelligence/i,/^automated\s+transcription/i,/^congressional\s+testimony/i,/^customer\s+features/i,/^historical\s+speeches/i,/^how-to\s+guides/i,/^rev\s+spotlight/i,/^speech\s+to\s+text\s+technology/i,/^surveys\s+and\s+data/i,/^video\s+editing/i,/^transcripts\s+home\s+news$/i,/^keep\s+reading$/i,/^ny\s+state\s+of\s+the\s+state/i,/^supreme\s+court\s+hearing/i,/^nurse\s+strike/i,/^u\.n\.\s+humanitarian/i,/^subscribe\s+to\s+the\s+rev\s+blog/i,/^sign\s+up\s+to\s+get/i,/^the\s+rev\s+logo/i].some(Et=>Et.test(W))||W.match(/^topics?:[A-Za-z\s]+$/i)||W.match(/^transcripts\s+home\s+news/i)||(W.includes("&amp;")||W.includes("&#x27;")||W.includes("&#39;"))&&!W.match(/\([0-9]{1,2}:[0-9]{2}\):/)&&!W.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"))||W.match(/^\d+\(\d{3}\)\s+\d{3}-\d{4}/)||W.match(/^view\s+all/i)&&W.length<50||W.match(/^share\s+this\s+post\s+topics?:/i)||W.match(/^topics?:\s*no\s+items\s+found\.\s*hungry\s+for\s+more/i)||W.match(/^keep\s+reading/i)&&W.length<100||W.length<3)return!0;if(W.length<10&&!W.match(/\([0-9:]+\)/)&&!W.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"))){const Et=/[.!?]/.test(W),Bt=/^[A-Z]/.test(W);if(!Et&&!Bt)return!0}return!1},$r=$=>{const W=$.trim();return[new RegExp(`^${he}(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3})\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"),/^[A-Z][a-z]+(?:\s+[A-Z][a-z]+)+\s+\([0-9]{1,2}:[0-9]{2}\):/,/^[A-Z][a-z]+\s+\([0-9]{1,2}:[0-9]{2}\):/,/^[A-Z][a-z]+(?:\s+[A-Z][a-z]+)+\s*\([0-9]{1,2}:[0-9]{2}\):/,/^Speaker\s+[0-9]+\s+\([0-9]{1,2}:[0-9]{2}\):/i].some(Et=>Et.test(W))},wd=$=>{rt("[URL Parse] splitTranscriptBySpeakers called",{textLength:$.length});const W=[],at=new RegExp(`((${he})?(?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3}|[Ss]peaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):\\s*)`,"g"),Et=Array.from($.matchAll(at)).filter(It=>It.index!==void 0),Bt=It=>{const Ht=HA(It);Ht&&Ht.length>0&&W.push(Ht)},vt=It=>{const Ft=It.trim().match(new RegExp(`^(?:${he})?((?:[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){0,3})|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"));return Ft?Ft[1].trim():null},qt=It=>It.replace(/^[\u2026]+/g,"").replace(/^\.{3,}/g,"").trim();if(Et.length===0){const It=HA($);return It?[It]:[]}const fe=$.slice(0,Et[0].index).trim();if(fe&&!Ds(fe)){const It=fe.split(/\n{2,}/).map(Ht=>Ht.trim()).filter(Boolean);It.length?It.forEach(Bt):Bt(fe)}let pe="",oe=null;for(let It=0;It<Et.length;It++){const Ht=Et[It].index,Ft=It<Et.length-1?Et[It+1].index:$.length,ge=Et[It][0]||"",hn=vt(ge),Fi=$.slice(Ht,Ft).trim();if(!Fi||Ds(Fi))continue;const ms=Fi.slice(ge.length).trimStart();if(hn&&oe&&hn.toLowerCase()===oe.toLowerCase()){const Oi=qt(ms);Oi&&(pe=(pe?`${pe} ${Oi}`:Oi).trim());continue}pe&&Bt(pe),oe=hn,pe=ms?`${ge.trim()} ${ms}`.trim():ge.trim()}pe&&Bt(pe);const wt=W.filter(It=>{const Ht=It.trim();return Ht.length===0?!1:Ht.match(/\([0-9]{1,2}:[0-9]{2}\):/)||Ht.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"))?!0:Ds(Ht)?!1:Ht.length>5});return rt("[URL Parse] Transcript paragraphs filtered",{originalCount:W.length,filteredCount:wt.length}),wt},Bg=$=>{var W,at,Et,Bt,vt,qt,fe,pe,oe,wt,It;rt("[URL Parse] parseHtmlToText called",{htmlLength:$.length,htmlFirstChars:$.substring(0,200)});try{const Ft=new DOMParser().parseFromString($,"text/html"),ge=((W=Ft.body)==null?void 0:W.textContent)||"",hn=ge.match(/\([0-9]{1,2}:[0-9]{2}\):/g);rt("[URL Parse] HTML parsed into DOM",{bodyTextLength:ge.length,bodyTextPreview:ge.substring(0,300),hasBody:!!Ft.body,title:Ft.title||"no title",bodyTimestampCount:hn?hn.length:0,bodyTimestampsSample:hn?hn.slice(0,10):[]});const Fi=Ft.querySelectorAll("script, style, noscript, iframe, embed, object, svg, canvas, nav, header, footer, aside, .nav, .navigation, .menu, .sidebar, .sidebar-content, .advertisement, .ads, .ad, [class*='ad-'], [id*='ad-'], .social, .share, .comments, .comment-section, .cookie, .cookie-banner, .newsletter, .subscribe, .footer, .header, .site-header, .site-footer, [class*='footer'], [class*='header'], [id*='footer'], [id*='header'], .breadcrumb, .breadcrumbs, .related, .related-posts, .tags, .categories, .meta, .post-meta, form, button, input, select, textarea, [class*='product'], [class*='industries'], [class*='resources'], [class*='help-center'], [class*='contact'], [class*='login'], [class*='get-started'], [class*='request-demo'], [class*='human-verified'], [class*='ai-platform'], [class*='premium-tools'], [class*='multi-file'], [class*='transcripts-home'], a[href*='#'], a[href*='javascript']");rt("[URL Parse] Elements to remove identified",{count:Fi.length});const ms=(Et=(at=Ft.body)==null?void 0:at.textContent)==null?void 0:Et.match(/\([0-9]{1,2}:[0-9]{2}\):/g);rt("[URL Parse] Timestamps before removing elements",{count:ms?ms.length:0,sample:ms?ms.slice(0,10):[]}),Fi.forEach(it=>{const dt=it.textContent||"",ce=dt.match(/\([0-9]{1,2}:[0-9]{2}\):/g),rn=ce&&ce.length>=2,Ns=it.id==="main-content"||it.id==="transcript-content"||it.id==="content";if(rn||Ns){rt("[URL Parse] PRESERVING element with transcript content",{tagName:it.tagName,className:it.className||"none",id:it.id||"none",timestampCount:ce?ce.length:0,timestamps:ce?ce.slice(0,5):[],textPreview:dt.substring(0,300),reason:rn?"has transcript timestamps":"has main content ID"});return}ce&&ce.length>0&&rt("[URL Parse] Removing element with timestamps (but < 2, so likely not transcript)",{tagName:it.tagName,className:it.className||"none",id:it.id||"none",timestampCount:ce.length,timestamps:ce.slice(0,5),textPreview:dt.substring(0,200)}),it.remove()});const Oi=(vt=(Bt=Ft.body)==null?void 0:Bt.textContent)==null?void 0:vt.match(/\([0-9]{1,2}:[0-9]{2}\):/g);rt("[URL Parse] Timestamps after removing elements",{count:Oi?Oi.length:0,sample:Oi?Oi.slice(0,10):[]});const zg=Ft.createTreeWalker(Ft.body,NodeFilter.SHOW_TEXT,null),jg=[];let Ed;for(;Ed=zg.nextNode();)Ed.nodeType===Node.TEXT_NODE&&jg.push(Ed);jg.forEach(it=>{let dt=it.textContent||"";(dt.includes("&amp;")||dt.includes("&#x27;")||dt.includes("&#39;"))&&(dt=dt.replace(/&amp;/g,"&"),dt=dt.replace(/&#x27;/g,"'"),dt=dt.replace(/&#39;/g,"'"),dt=dt.replace(/&quot;/g,'"'),it.textContent=dt)});let Zt=null;const S0=["#main-content","#transcript-content","#content","[class*='transcript']","[id*='transcript']","[class*='content']","article","main","[role='main']",".article",".post",".entry",".story"];rt("[URL Parse] Searching for transcript container"),rt("[URL Parse] Body text sample (first 2000 chars):",ge.substring(0,2e3)),rt("[URL Parse] Body text sample (last 2000 chars):",ge.substring(Math.max(0,ge.length-2e3)));for(const it of S0){const dt=Ft.querySelector(it);if(dt){const ce=dt.textContent||"",rn=((qt=ce.split(`
`)[0])==null?void 0:qt.trim())||"",Ns=$r(rn),Xe=ce.match(new RegExp(`(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+\\s+)\\([0-9]{1,2}:[0-9]{2}\\):`,"i")),ss=ce.match(/\([0-9]{1,2}:[0-9]{2}\):/),bn=ce.match(/\([0-9]{1,2}:[0-9]{2}\):/g);if(rt("[URL Parse] Checking selector",{selector:it,found:!!dt,textLength:ce.length,textPreview:ce.substring(0,500),firstLine:rn,hasTranscriptLine:Ns,hasTranscriptPattern:!!Xe,hasTimestamp:!!ss,timestampMatches:bn,timestampCount:bn?bn.length:0,elementTagName:dt.tagName,elementClassName:dt.className,elementId:dt.id}),Ns||Xe||ss){Zt=dt,rt("[URL Parse] Transcript container found",{selector:it,textLength:ce.length,timestampCount:bn?bn.length:0});break}}else rt("[URL Parse] Selector not found",{selector:it})}if(!Zt){Zt=Ft.body;const it=((fe=Ft.body)==null?void 0:fe.textContent)||"",dt=it.match(/\([0-9]{1,2}:[0-9]{2}\):/g);rt("[URL Parse] No transcript container found, using body",{originalBodyTextLength:ge.length,currentBodyTextLength:it.length,bodyTextSample:it.substring(0,1e3),allTimestampsInBody:dt,timestampCount:dt?dt.length:0,bodyChildren:Array.from(((pe=Ft.body)==null?void 0:pe.children)||[]).map(ce=>{var rn,Ns;return{tagName:ce.tagName,className:ce.className||"none",id:ce.id||"none",textLength:((rn=ce.textContent)==null?void 0:rn.length)||0,hasTimestamps:!!((Ns=ce.textContent)!=null&&Ns.match(/\([0-9]{1,2}:[0-9]{2}\):/g))}})})}const xd=Zt.querySelectorAll("*");for(const it of xd){const dt=((oe=it.textContent)==null?void 0:oe.trim())||"";dt&&(dt.match(/^transcripts\s+home\s+news/i)||dt.match(/^ny\s+universal\s+childcare\s+announcement\s+ny\s+universal/i)||dt.match(/^help\s+center\s+developers\s+security/i)||dt.match(/^contact\s+support/i)||dt.match(/^human-verified/i)&&!dt.match(/\([0-9]{1,2}:[0-9]{2}\):/)||dt.match(/^ai\s+platform\s+features$/i)&&!dt.match(/\([0-9]{1,2}:[0-9]{2}\):/))&&(dt.match(/\([0-9]{1,2}:[0-9]{2}\):/)||it.remove())}const Fe=Zt.textContent||"",lr=Fe.match(/\([0-9]{1,2}:[0-9]{2}\):/g),Cd=Fe.match(new RegExp(`(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+\\s+)\\([0-9]{1,2}:[0-9]{2}\\):`,"gi"));rt("[URL Parse] Full text extracted from container",{fullTextLength:Fe.length,fullTextPreview:Fe.substring(0,2e3),fullTextFirstChars:Fe.substring(0,500),fullTextLastChars:Fe.substring(Math.max(0,Fe.length-500)),lineCount:Fe.split(`
`).length,allTimestamps:lr,timestampCount:lr?lr.length:0,timestampLocations:lr?lr.map(it=>{const dt=Fe.indexOf(it);return{timestamp:it,index:dt,context:Fe.substring(Math.max(0,dt-50),Math.min(Fe.length,dt+100))}}).slice(0,5):[],speakerPatternMatches:Cd,speakerPatternCount:Cd?Cd.length:0,containerTagName:Zt.tagName,containerClassName:Zt.className||"none",containerId:Zt.id||"none",containerChildrenCount:Zt.children.length,containerInnerHTMLLength:((wt=Zt.innerHTML)==null?void 0:wt.length)||0});const Bi=Fe.match(new RegExp(`(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+\\s+)\\([0-9]{1,2}:[0-9]{2}\\):`,"gi")),pl=Bi&&Bi.length>=2,dn=Fe.match(/\([0-9]{1,2}:[0-9]{2}\):/g),Hg=dn&&dn.length>=3;if(rt("[URL Parse] Transcript format detection",{transcriptLineMatchesCount:(Bi==null?void 0:Bi.length)||0,transcriptLineMatchesPreview:(Bi==null?void 0:Bi.slice(0,5))||[],hasTranscriptFormat:pl,allTimestampMatchesCount:(dn==null?void 0:dn.length)||0,allTimestampMatchesPreview:(dn==null?void 0:dn.slice(0,10))||[],hasMultipleTimestamps:Hg,fullTextSample:Fe.substring(0,1e3)}),pl||Hg){rt("[URL Parse] Processing as transcript format");const it=wd(Fe);if(rt("[URL Parse] Transcript paragraphs split",{paragraphCount:it.length}),it.length>0){let dt=it.join(`

`);return dt=Xy(dt),rt("[URL Parse] Returning transcript paragraphs",{resultLength:dt.length}),dt}}const ys=Fe.match(/\([0-9]{1,2}:[0-9]{2}\):/);if(rt("[URL Parse] Checking for any transcript line",{hasAnyTranscriptLine:!!ys}),ys){rt("[URL Parse] Processing as transcript with single timestamp");const it=wd(Fe);if(rt("[URL Parse] Transcript paragraphs split (single timestamp)",{paragraphCount:it.length}),it.length>0){let dt=it.join(`

`);return dt=Xy(dt),rt("[URL Parse] Returning transcript paragraphs (single timestamp)",{resultLength:dt.length}),dt}}const ns=[],nu=new Set,$g=(it,dt=0)=>{var rn,Ns;const ce=Array.from(it.children);if(ce.length===0){const Xe=((rn=it.textContent)==null?void 0:rn.trim())||"";if(Xe&&Xe.length>5){const ss=Xe.match(/\([0-9]{1,2}:[0-9]{2}\):/)||Xe.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"));(ss||!Ds(Xe))&&(nu.has(Xe)||(nu.add(Xe),ns.push(Xe),ss&&rt("[URL Parse] Found paragraph with transcript marker",{depth:dt,textLength:Xe.length,textPreview:Xe.substring(0,200),tagName:it.tagName,className:it.className||"none"})))}return}for(const Xe of ce){const ss=Xe.tagName.toUpperCase(),bn=((Ns=Xe.textContent)==null?void 0:Ns.trim())||"";if(ss==="P"||ss==="DIV"&&bn.length>20){if(bn){const su=bn.match(/\([0-9]{1,2}:[0-9]{2}\):/)||bn.match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+)\\s+\\([0-9]{1,2}:[0-9]{2}\\):`,"i"));(su||!Ds(bn))&&(nu.has(bn)||(nu.add(bn),ns.push(bn),su&&dt<3&&rt("[URL Parse] Found paragraph with transcript marker (P/DIV)",{depth:dt,tagName:ss,textLength:bn.length,textPreview:bn.substring(0,200),className:Xe.className||"none"})))}}else $g(Xe,dt+1)}};if(rt("[URL Parse] Starting paragraph collection from container",{containerTagName:Zt.tagName,containerTextLength:((It=Zt.textContent)==null?void 0:It.length)||0,containerChildrenCount:Zt.children.length}),$g(Zt),rt("[URL Parse] Paragraphs collected",{paragraphCount:ns.length,paragraphsPreview:ns.slice(0,10).map((it,dt)=>({index:dt,length:it.length,preview:it.substring(0,150),firstChars:it.substring(0,100),hasTimestamp:!!it.match(/\([0-9]{1,2}:[0-9]{2}\):/),timestampCount:(it.match(/\([0-9]{1,2}:[0-9]{2}\):/g)||[]).length})),allParagraphLengths:ns.map(it=>it.length),paragraphsWithTimestamps:ns.filter(it=>it.match(/\([0-9]{1,2}:[0-9]{2}\):/)).length}),ns.length===0)return rt("[URL Parse] No paragraphs found, returning full text",{fullTextLength:Fe.length,fullTextPreview:Fe.substring(0,500)}),Fe.trim();let ui=-1;for(let it=0;it<ns.length;it++)if($r(ns[it])||ns[it].match(new RegExp(`^(?:${he})?(?:[A-Z][a-z]+\\s+|Speaker\\s+[0-9]+\\s+)\\([0-9]{1,2}:[0-9]{2}\\):`,"i"))){ui=it,rt("[URL Parse] Transcript start found (method 1)",{index:it});break}if(ui===-1){for(let it=0;it<ns.length;it++)if(ns[it].match(/\([0-9]{1,2}:[0-9]{2}\):/)){ui=it,rt("[URL Parse] Transcript start found (method 2)",{index:it});break}}ui===-1&&(ui=0,rt("[URL Parse] No transcript start found, using index 0"));const Ga=ns.slice(ui).filter(it=>{const dt=it.trim();return dt.length===0?!1:dt.match(/\([0-9]{1,2}:[0-9]{2}\):/)?!0:!Ds(dt)}).map(it=>it.trim()).filter((it,dt,ce)=>{if(dt===0)return!0;const rn=ce[dt-1];return!(it===rn||it.length<20&&rn.includes(it)||rn.length<20&&it.includes(rn))});if(rt("[URL Parse] Transcript paragraphs filtered",{transcriptParagraphsCount:Ga.length,transcriptStartIndex:ui}),Ga.length===0)return rt("[URL Parse] No transcript paragraphs after filtering, returning full text"),Fe.trim();const Xa=Ga.join(`

`);return rt("[URL Parse] Returning final result",{resultLength:Xa.length}),Xa}catch(Ht){console.error("[URL Parse] HTML parsing error:",Ht);const Ft=$.replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?<\/style>/gi,"").replace(/<noscript[\s\S]*?<\/noscript>/gi,"").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();return rt("[URL Parse] Fallback text extracted",{fallbackLength:Ft.length}),Ft}},Ad=async($,W=0)=>{var qt;const at=[`https://api.allorigins.win/raw?url=${encodeURIComponent($)}`,`https://corsproxy.io/?${encodeURIComponent($)}`,`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent($)}`];if(rt("[URL Parse] fetchWithProxy called",{url:$,proxyIndex:W,totalProxies:at.length,proxyService:((qt=at[W])==null?void 0:qt.substring(0,50))+"..."}),W>=at.length)throw new Error("All proxy services failed");const Et=at[W];rt("[URL Parse] Attempting proxy fetch",{proxyIndex:W,proxyUrl:Et.substring(0,100)+"...",targetUrl:$});const Bt=await fetch(Et,{headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}}),vt=Bt.headers.get("content-type");return rt("[URL Parse] Proxy fetch response",{proxyIndex:W,status:Bt.status,statusText:Bt.statusText,ok:Bt.ok,contentType:vt||"unknown",headers:Object.fromEntries(Bt.headers.entries())}),!Bt.ok&&W<at.length-1?Ad($,W+1):Bt},Sd=async $=>{var Et,Bt;const W=($??g).trim();if(!W)return;const at=W;if(rt("[URL Parse] Starting URL submission",{url:at,urlLength:at.length}),!at.match(/^https?:\/\//i)){rt("[URL Parse] Invalid URL format",{url:at,urlLength:at.length}),Z("Please enter a valid URL starting with http:// or https://");return}Y(!0),Z(null),k(!1);try{let vt,qt=!1;rt("[URL Parse] Attempting direct fetch",{url:at,urlLength:at.length});try{vt=await fetch(at,{headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});const wt=vt.headers.get("content-type");rt("[URL Parse] Direct fetch successful",{status:vt.status,statusText:vt.statusText,contentType:wt||"unknown",ok:vt.ok,headers:Object.fromEntries(vt.headers.entries())})}catch(wt){const It=wt instanceof Error?wt.message:String(wt),Ht=String(wt),Ft=wt instanceof TypeError&&(It.includes("Failed to fetch")||It.includes("network")||It.includes("CORS")||Ht.includes("CORS")||Ht.includes("Access-Control"));if(rt("[URL Parse] Direct fetch failed",{error:It,errorString:Ht,errorType:((Et=wt==null?void 0:wt.constructor)==null?void 0:Et.name)||typeof wt,isCorsError:Ft,errorName:wt instanceof Error?wt.name:"Unknown"}),wt instanceof Error&&rt("[URL Parse] Error stack:",wt.stack),Ft){rt("[URL Parse] CORS error detected, retrying with proxy"),qt=!0,vt=await Ad(at);const ge=vt.headers.get("content-type");rt("[URL Parse] Proxy fetch successful",{status:vt.status,statusText:vt.statusText,contentType:ge||"unknown",ok:vt.ok,usedProxy:!0})}else throw rt("[URL Parse] Non-CORS error, rethrowing",{error:It}),wt}if(!vt.ok)throw rt("[URL Parse] HTTP error response",{status:vt.status,statusText:vt.statusText}),new Error(`HTTP error! status: ${vt.status}`);const fe=vt.headers.get("content-type")||"",pe=fe.includes("text/html");rt("[URL Parse] Response content type determined",{contentType:fe,isHtml:pe,contentLength:vt.headers.get("content-length")});const oe=await vt.text();if(rt("[URL Parse] Response text received",{htmlLength:oe.length,htmlPreview:oe.substring(0,200),htmlFirstChars:oe.substring(0,100),htmlLastChars:oe.substring(Math.max(0,oe.length-100))}),pe){rt("[URL Parse] Parsing HTML content");const wt=Bg(oe);if(rt("[URL Parse] HTML parsing complete",{extractedTextLength:wt.length,extractedTextPreview:wt.substring(0,300),extractedTextFirstChars:wt.substring(0,150),extractedTextLastChars:wt.substring(Math.max(0,wt.length-150)),wordCount:wt.split(/\s+/).filter(Ht=>Ht.length>0).length}),!wt.trim()){rt("[URL Parse] No text content extracted from HTML"),Z("No readable text content found on this page. The page may require JavaScript to load content."),Y(!1);return}const It=wt.split(/\s+/).filter(Ht=>Ht.length>0).length;rt("[URL Parse] Setting extracted text and resetting reader",{extractedTextLength:wt.length,wordCount:It,extractedTextPreview:wt.substring(0,400),paragraphCount:wt.split(/\n\n/).length}),t(wt),or(wt),k(!0)}else{if(rt("[URL Parse] Non-HTML content, using as plain text",{htmlLength:oe.length}),!oe.trim()){rt("[URL Parse] Empty text content"),Z("No text content found at this URL."),Y(!1);return}t(oe),or(oe),k(!0),rt("[URL Parse] Plain text content loaded",{textLength:oe.length,wordCount:oe.split(/\s+/).length})}Y(!1),rt("[URL Parse] URL submission completed successfully")}catch(vt){console.error("[URL Parse] ===== ERROR CAUGHT IN OUTER CATCH =====",vt),rt("[URL Parse] Error details",{error:vt,errorType:(Bt=vt==null?void 0:vt.constructor)==null?void 0:Bt.name,errorMessage:vt instanceof Error?vt.message:String(vt),errorString:String(vt),errorStack:vt instanceof Error?vt.stack:void 0});const qt=vt instanceof Error?vt:new Error(String(vt));let fe;qt.message.includes("All proxy services failed")?fe="Failed to fetch URL: All proxy services are unavailable. The URL may be blocked or inaccessible.":qt instanceof TypeError&&qt.message.includes("Failed to fetch")?fe="Network error: Unable to connect. Please check your internet connection and try again.":fe=`Failed to fetch URL: ${qt.message}. The URL may be inaccessible or blocked.`,rt("[URL Parse] Error handling complete",{errorMessage:fe,errorType:qt.constructor.name,errorMessageDetail:qt.message}),Z(fe),Y(!1),k(!1)}},Ug=async $=>{if($){D(!0),U(null),k(!1);try{const W=await $.arrayBuffer(),at=await bx({data:W}).promise,Et=at.numPages,Bt=[];for(let qt=1;qt<=Et;qt++){const oe=(await(await at.getPage(qt)).getTextContent()).items.map(wt=>wt.str).join(" ");Bt.push(oe)}const vt=Bt.join(`

`);if(!vt.trim()){U("No text content found in PDF. The PDF may be image-based or encrypted."),D(!1);return}t(vt),or(vt),k(!0),D(!1)}catch(W){console.error("Failed to parse PDF:",W),U(W instanceof Error?`Failed to parse PDF: ${W.message}`:"Failed to parse PDF. The file may be corrupted or encrypted."),D(!1),k(!1)}}},bd=async $=>{var at;const W=((at=$.target.files)==null?void 0:at[0])??null;if(W)if(W.type==="application/pdf"||W.name.toLowerCase().endsWith(".pdf"))await Ug(W);else if(W.type.startsWith("text/")){const Et=await W.text();t(Et),or(Et)}else{const Et=await W.text().catch(()=>"");Et&&(t(Et),or(Et))}};return et.jsxs("div",{className:"app-shell",children:[et.jsx("header",{className:"app-header",children:et.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[et.jsxs("div",{children:[et.jsx("div",{className:"app-title",children:"Speed Reader"}),et.jsx("div",{className:"app-subtitle",children:"One word at a time, with a red pivot letter to keep your eyes anchored."})]}),et.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>P(!M),style:{marginTop:"4px"},children:" Settings"})]})}),M&&et.jsxs("div",{className:"settings-overlay",role:"dialog","aria-modal":"true",children:[et.jsx("button",{className:"settings-backdrop",type:"button","aria-label":"Close settings",onClick:()=>P(!1)}),et.jsxs("section",{className:"card settings-panel",children:[et.jsxs("div",{className:"card-header",children:[et.jsx("div",{className:"card-title",children:"Settings"}),et.jsx("button",{className:"btn btn-ghost btn-icon",type:"button",onClick:()=>P(!1),children:""})]}),et.jsxs("div",{className:"settings-content",children:[et.jsxs("div",{className:"setting-group",children:[et.jsx("label",{className:"setting-label",children:"Font Family"}),et.jsx("div",{className:"font-grid",ref:H,style:{"--font-cols":ut,"--font-preview-size":ut>=5?"0.9rem":ut>=4?"0.98rem":"1.05rem"},children:O.map($=>et.jsx("button",{type:"button",className:`font-option ${kt===$.value?"active":""}`,onClick:()=>Tt($.value),children:et.jsx("div",{className:"font-preview",style:{fontFamily:$.value},children:$.label})},$.value))})]}),et.jsxs("div",{className:"settings-controls-grid",children:[et.jsxs("div",{className:"setting-group settings-spacing",children:[et.jsxs("label",{className:"setting-label",children:["Letter Spacing: ",St]}),et.jsxs("div",{className:"setting-slider-group",children:[et.jsx("input",{className:"slider range-input",type:"range",min:0,max:10,step:1,value:St,onChange:$=>Pt(Number($.target.value))}),et.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>Pt(5),style:{fontSize:"0.8rem",padding:"4px 8px"},children:"Reset"})]})]}),et.jsxs("div",{className:"setting-group settings-pivot",children:[et.jsx("label",{className:"setting-label",children:"Pivot Letter Color"}),et.jsxs("div",{className:"setting-color-group",children:[et.jsx("input",{className:"setting-color-input",type:"color",value:lt,onChange:$=>st($.target.value),"aria-label":"Pivot letter color"}),et.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>st("#ff4e4e"),style:{fontSize:"0.8rem",padding:"4px 8px"},children:"Reset"})]})]}),et.jsxs("div",{className:"setting-group settings-pause",children:[et.jsx("label",{className:"setting-label",children:"Auto continue paragraphs"}),et.jsxs("label",{className:"toggle-row",children:[et.jsx("input",{type:"checkbox",checked:_,onChange:$=>x($.target.checked)}),et.jsx("span",{className:"toggle-text",children:"Keep going to the next paragraph automatically."})]})]})]})]})]})]}),et.jsx("main",{className:"layout",children:et.jsx("div",{className:"reader-stage",children:et.jsxs("section",{className:"card reader-card",children:[et.jsxs("div",{className:"card-header",children:[et.jsx("div",{className:"card-title",children:"Reader"}),et.jsxs("div",{className:"card-badges",children:[et.jsx("div",{className:"card-badge",children:ne?`${p+1} / ${r.length} words`:"Idle"}),ne&&e.length?et.jsxs("div",{className:"card-badge",children:["Paragraph ",ci?ci.paragraphIndex+1:1," of"," ",e.length]}):null]})]}),et.jsxs("div",{className:"reader-screen",children:[et.jsx("div",{ref:Ni,className:"word-display",style:{fontFamily:kt,letterSpacing:`${tt(St)}em`,fontSize:Ii?`${Ii}px`:void 0},children:ne?et.jsxs("div",{className:"word-line",style:{transform:`translateX(${jr}px)`},children:[et.jsx("span",{ref:Qt,className:"word-left",children:dl.left}),et.jsx("span",{ref:ae,className:"pivot-letter",style:{color:lt},children:dl.pivot}),et.jsx("span",{ref:je,className:"word-right",children:dl.right})]}):et.jsx("div",{className:"reader-input",children:(()=>{const $=G||L,W=nt||I,at=!!W&&!$;return et.jsxs(et.Fragment,{children:[$?et.jsx("div",{className:"input-loading","aria-label":"Loading",children:et.jsx("div",{className:"spinner"})}):null,at?et.jsx("div",{className:"input-error",children:W}):null,et.jsx("textarea",{ref:es,className:"text-input reader-textarea",placeholder:"Paste text or a URL (by itself)",value:g,onChange:Et=>t(Et.target.value),onBlur:yd,onPaste:vd,disabled:$}),et.jsxs("div",{className:"input-footer reader-input-footer",children:[et.jsx("span",{className:"input-hint",children:"Paste text, paste a URL, or open a file."}),et.jsx("label",{className:"file-input",children:et.jsx("input",{type:"file",accept:".txt,application/pdf",onChange:bd,disabled:$})})]})]})})()})}),et.jsx("div",{className:"pivot-guide"}),ne?et.jsxs("div",{className:"controls-row",children:[et.jsxs("div",{className:"wpm-group",children:[et.jsx("button",{className:"btn btn-icon btn-ghost",onClick:()=>tu(-1),disabled:!ne||p===0,type:"button",children:""}),et.jsx("button",{className:"btn btn-primary",onClick:A0,disabled:!ne,type:"button",children:h?"Pause":"Play"}),et.jsx("button",{className:"btn btn-icon btn-ghost",onClick:()=>tu(1),disabled:!ne||p>=r.length-1,type:"button",children:""}),et.jsx("button",{className:"btn btn-ghost",onClick:md,disabled:!ne,type:"button",children:"Restart"})]}),et.jsxs("div",{className:"wpm-group",children:[et.jsxs("span",{className:"wpm-value",children:[l," wpm"]}),et.jsx("input",{className:"slider range-input",type:"range",min:150,max:900,step:10,value:l,onChange:$=>u(Number($.target.value))})]})]}):null,ne?et.jsxs("div",{className:"controls-row",children:[et.jsxs("div",{className:"wpm-group",children:[et.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>eu(-1),disabled:!ne,children:" Paragraph"}),et.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>eu(1),disabled:!ne,children:" Paragraph"})]}),et.jsxs("div",{className:"wpm-group",children:[et.jsx("button",{className:"btn btn-ghost",type:"button",onClick:()=>S($=>!$),disabled:!ne,children:v?"Hide context":"Show paragraph"}),et.jsx("button",{className:"btn btn-primary",type:"button",onClick:Og,children:"New input"})]})]}):null,v&&ci&&et.jsx("div",{className:"reader-context",children:et.jsxs("div",{className:"paragraph-context",children:[et.jsxs("span",{children:[ci.before," "]}),et.jsx("strong",{children:ci.active}),et.jsxs("span",{children:[" ",ci.after]})]})})]})]})})})]})};gk.createRoot(document.getElementById("root")).render(et.jsx(lk.StrictMode,{children:et.jsx(bP,{})}));
